(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))i(e);new MutationObserver(e=>{for(const t of e)if(t.type==="childList")for(const r of t.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&i(r)}).observe(document,{childList:!0,subtree:!0});function s(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?t.credentials="include":e.crossOrigin==="anonymous"?t.credentials="omit":t.credentials="same-origin",t}function i(e){if(e.ep)return;e.ep=!0;const t=s(e);fetch(e.href,t)}})();async function p(){const n=document.createElement("canvas");document.body.appendChild(n);const o=n.getContext("webgl",{xrCompatible:!0}),s=new THREE.Scene,i=[new THREE.MeshBasicMaterial({color:16711680}),new THREE.MeshBasicMaterial({color:255}),new THREE.MeshBasicMaterial({color:65280}),new THREE.MeshBasicMaterial({color:16711935}),new THREE.MeshBasicMaterial({color:65535}),new THREE.MeshBasicMaterial({color:16776960})],e=new THREE.Mesh(new THREE.BoxBufferGeometry(.2,.2,.2),i);e.position.set(1,1,1),s.add(e);const t=new THREE.WebGLRenderer({alpha:!0,preserveDrawingBuffer:!0,canvas:n,context:o});t.autoClear=!1;const r=new THREE.PerspectiveCamera;r.matrixAutoUpdate=!1;const a=await navigator.xr.requestSession("immersive-ar");a.updateRenderState({baseLayer:new XRWebGLLayer(a,o)});const d=await a.requestReferenceSpace("local"),f=(E,m)=>{a.requestAnimationFrame(f),o.bindFramebuffer(o.FRAMEBUFFER,a.renderState.baseLayer.framebuffer);const l=m.getViewerPose(d);if(l){const c=l.views[0],u=a.renderState.baseLayer.getViewport(c);t.setSize(u.width,u.height),r.matrix.fromArray(c.transform.matrix),r.projectionMatrix.fromArray(c.projectionMatrix),r.updateMatrixWorld(!0),t.render(s,r)}};a.requestAnimationFrame(f)}document.getElementById("fetchButton").addEventListener("click",()=>{p()});
