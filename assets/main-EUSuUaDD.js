var D1=(i,e)=>()=>(e||i((e={exports:{}}).exports,e),e.exports);import{L as Nt,U as kf,a as zh,O as Qs,B as Ne,b as Ct,S as qn,V as P,c as Ue,P as Es,T as wn,d as Ge,R as $c,M as ce,e as Sn,f as Eo,F as Hr,g as ne,I as oi,C as SE,h as He,i as jt,D as gl,j as xn,k as Gr,l as nc,m as xE,n as as,o as Zn,p as rc,W as Pi,q as ks,r as El,H as Os,s as U1,t as Hc,u as Bf,v as zf,w as Vf,x as $f,y as Hf,z as Gc,A as Gf,E as Yf,G as jf,J as Wf,K as Xf,N as qf,Q as Zf,X as RE,Y as ct,Z as _E,_ as k1,$ as B1,a0 as Yr,a1 as AE,a2 as Un,a3 as z1,a4 as V1,a5 as Ks,a6 as ME,a7 as Yc,a8 as jr,a9 as zi,aa as yt,ab as FE,ac as tt,ad as Is,ae as $1,af as jc,ag as za,ah as H1,ai as Jt,aj as G1,ak as ns,al as Tt,am as kn,an as Dr,ao as Y1,ap as j1,aq as W1,ar as X1,as as q1,at as Z1,au as Wc,av as Qf,aw as Kf,ax as Li,ay as rr,az as Q1,aA as K1,aB as lm,aC as hm,aD as Vh,aE as J1,aF as eT,aG as tT,aH as cm,aI as iT,aJ as Ql,aK as sT,aL as Ho,aM as OE,aN as nT,aO as rT,aP as oT,aQ as aT,aR as lT,aS as Td,aT as _r,aU as hT,aV as Jf,aW as cT,aX as Go,aY as ss,aZ as uT,a_ as dT,a$ as fT,b0 as pT,b1 as mT,b2 as um,b3 as gT,b4 as ET,b5 as IT,b6 as NE,b7 as bT,b8 as PE,b9 as vT,ba as Xc,bb as LE,bc as DE,bd as UE,be as bs,bf as Xi,bg as qc,bh as ep,bi as yT,bj as tp,bk as kE,bl as CT,bm as TT,bn as Yo,bo as wT,bp as ST,bq as xT,br as oc,bs as Ss,bt as RT,bu as BE,bv as _T,bw as AT,bx as zE,by as VE,bz as MT,bA as $E,bB as FT,bC as OT}from"./basicVR-DWIfACPO.js";import*as Ut from"https://cdn.skypack.dev/three@0.128.0";import{GLTFLoader as NT}from"https://cdn.skypack.dev/three@0.128.0/examples/jsm/loaders/GLTFLoader.js";var r6=D1(Ie=>{var PT=Object.defineProperty,LT=(i,e,t)=>e in i?PT(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,dn=(i,e,t)=>(LT(i,typeof e!="symbol"?e+"":e,t),t);const Wr=Math.min,ls=Math.max,ac=Math.round,Vs=i=>({x:i,y:i}),DT={left:"right",right:"left",bottom:"top",top:"bottom"},UT={start:"end",end:"start"};function dm(i,e,t){return ls(i,Wr(e,t))}function Il(i,e){return typeof i=="function"?i(e):i}function fs(i){return i.split("-")[0]}function Zc(i){return i.split("-")[1]}function HE(i){return i==="x"?"y":"x"}function GE(i){return i==="y"?"height":"width"}function Bn(i){return["top","bottom"].includes(fs(i))?"y":"x"}function YE(i){return HE(Bn(i))}function kT(i,e,t){t===void 0&&(t=!1);const s=Zc(i),n=YE(i),r=GE(n);let o=n==="x"?s===(t?"end":"start")?"right":"left":s==="start"?"bottom":"top";return e.reference[r]>e.floating[r]&&(o=lc(o)),[o,lc(o)]}function BT(i){const e=lc(i);return[wd(i),e,wd(e)]}function wd(i){return i.replace(/start|end/g,e=>UT[e])}function zT(i,e,t){const s=["left","right"],n=["right","left"],r=["top","bottom"],o=["bottom","top"];switch(i){case"top":case"bottom":return t?e?n:s:e?s:n;case"left":case"right":return e?r:o;default:return[]}}function VT(i,e,t,s){const n=Zc(i);let r=zT(fs(i),t==="start",s);return n&&(r=r.map(o=>o+"-"+n),e&&(r=r.concat(r.map(wd)))),r}function lc(i){return i.replace(/left|right|bottom|top/g,e=>DT[e])}function $T(i){return{top:0,right:0,bottom:0,left:0,...i}}function jE(i){return typeof i!="number"?$T(i):{top:i,right:i,bottom:i,left:i}}function Xr(i){const{x:e,y:t,width:s,height:n}=i;return{width:s,height:n,top:t,left:e,right:e+s,bottom:t+n,x:e,y:t}}function fm(i,e,t){let{reference:s,floating:n}=i;const r=Bn(e),o=YE(e),a=GE(o),l=fs(e),h=r==="y",u=s.x+s.width/2-n.width/2,c=s.y+s.height/2-n.height/2,d=s[a]/2-n[a]/2;let f;switch(l){case"top":f={x:u,y:s.y-n.height};break;case"bottom":f={x:u,y:s.y+s.height};break;case"right":f={x:s.x+s.width,y:c};break;case"left":f={x:s.x-n.width,y:c};break;default:f={x:s.x,y:s.y}}switch(Zc(e)){case"start":f[o]-=d*(t&&h?-1:1);break;case"end":f[o]+=d*(t&&h?-1:1);break}return f}const HT=async(i,e,t)=>{const{placement:s="bottom",strategy:n="absolute",middleware:r=[],platform:o}=t,a=r.filter(Boolean),l=await(o.isRTL==null?void 0:o.isRTL(e));let h=await o.getElementRects({reference:i,floating:e,strategy:n}),{x:u,y:c}=fm(h,s,l),d=s,f={},p=0;for(let m=0;m<a.length;m++){const{name:g,fn:E}=a[m],{x:I,y:v,data:b,reset:C}=await E({x:u,y:c,initialPlacement:s,placement:d,strategy:n,middlewareData:f,rects:h,platform:o,elements:{reference:i,floating:e}});u=I??u,c=v??c,f={...f,[g]:{...f[g],...b}},C&&p<=50&&(p++,typeof C=="object"&&(C.placement&&(d=C.placement),C.rects&&(h=C.rects===!0?await o.getElementRects({reference:i,floating:e,strategy:n}):C.rects),{x:u,y:c}=fm(h,d,l)),m=-1)}return{x:u,y:c,placement:d,strategy:n,middlewareData:f}};async function WE(i,e){var t;e===void 0&&(e={});const{x:s,y:n,platform:r,rects:o,elements:a,strategy:l}=i,{boundary:h="clippingAncestors",rootBoundary:u="viewport",elementContext:c="floating",altBoundary:d=!1,padding:f=0}=Il(e,i),p=jE(f),m=a[d?c==="floating"?"reference":"floating":c],g=Xr(await r.getClippingRect({element:(t=await(r.isElement==null?void 0:r.isElement(m)))==null||t?m:m.contextElement||await(r.getDocumentElement==null?void 0:r.getDocumentElement(a.floating)),boundary:h,rootBoundary:u,strategy:l})),E=c==="floating"?{x:s,y:n,width:o.floating.width,height:o.floating.height}:o.reference,I=await(r.getOffsetParent==null?void 0:r.getOffsetParent(a.floating)),v=await(r.isElement==null?void 0:r.isElement(I))?await(r.getScale==null?void 0:r.getScale(I))||{x:1,y:1}:{x:1,y:1},b=Xr(r.convertOffsetParentRelativeRectToViewportRelativeRect?await r.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:E,offsetParent:I,strategy:l}):E);return{top:(g.top-b.top+p.top)/v.y,bottom:(b.bottom-g.bottom+p.bottom)/v.y,left:(g.left-b.left+p.left)/v.x,right:(b.right-g.right+p.right)/v.x}}const GT=function(i){return i===void 0&&(i={}),{name:"flip",options:i,async fn(e){var t,s;const{placement:n,middlewareData:r,rects:o,initialPlacement:a,platform:l,elements:h}=e,{mainAxis:u=!0,crossAxis:c=!0,fallbackPlacements:d,fallbackStrategy:f="bestFit",fallbackAxisSideDirection:p="none",flipAlignment:m=!0,...g}=Il(i,e);if((t=r.arrow)!=null&&t.alignmentOffset)return{};const E=fs(n),I=Bn(a),v=fs(a)===a,b=await(l.isRTL==null?void 0:l.isRTL(h.floating)),C=d||(v||!m?[lc(a)]:BT(a)),S=p!=="none";!d&&S&&C.push(...VT(a,m,p,b));const _=[a,...C],M=await WE(e,g),A=[];let F=((s=r.flip)==null?void 0:s.overflows)||[];if(u&&A.push(M[E]),c){const y=kT(n,o,b);A.push(M[y[0]],M[y[1]])}if(F=[...F,{placement:n,overflows:A}],!A.every(y=>y<=0)){var D,x;const y=(((D=r.flip)==null?void 0:D.index)||0)+1,U=_[y];if(U)return{data:{index:y,overflows:F},reset:{placement:U}};let B=(x=F.filter(k=>k.overflows[0]<=0).sort((k,W)=>k.overflows[1]-W.overflows[1])[0])==null?void 0:x.placement;if(!B)switch(f){case"bestFit":{var N;const k=(N=F.filter(W=>{if(S){const z=Bn(W.placement);return z===I||z==="y"}return!0}).map(W=>[W.placement,W.overflows.filter(z=>z>0).reduce((z,he)=>z+he,0)]).sort((W,z)=>W[1]-z[1])[0])==null?void 0:N[0];k&&(B=k);break}case"initialPlacement":B=a;break}if(n!==B)return{reset:{placement:B}}}return{}}}};function XE(i){const e=Wr(...i.map(r=>r.left)),t=Wr(...i.map(r=>r.top)),s=ls(...i.map(r=>r.right)),n=ls(...i.map(r=>r.bottom));return{x:e,y:t,width:s-e,height:n-t}}function YT(i){const e=i.slice().sort((n,r)=>n.y-r.y),t=[];let s=null;for(let n=0;n<e.length;n++){const r=e[n];!s||r.y-s.y>s.height/2?t.push([r]):t[t.length-1].push(r),s=r}return t.map(n=>Xr(XE(n)))}const jT=function(i){return i===void 0&&(i={}),{name:"inline",options:i,async fn(e){const{placement:t,elements:s,rects:n,platform:r,strategy:o}=e,{padding:a=2,x:l,y:h}=Il(i,e),u=Array.from(await(r.getClientRects==null?void 0:r.getClientRects(s.reference))||[]),c=YT(u),d=Xr(XE(u)),f=jE(a);function p(){if(c.length===2&&c[0].left>c[1].right&&l!=null&&h!=null)return c.find(g=>l>g.left-f.left&&l<g.right+f.right&&h>g.top-f.top&&h<g.bottom+f.bottom)||d;if(c.length>=2){if(Bn(t)==="y"){const F=c[0],D=c[c.length-1],x=fs(t)==="top",N=F.top,y=D.bottom,U=x?F.left:D.left,B=x?F.right:D.right,k=B-U,W=y-N;return{top:N,bottom:y,left:U,right:B,width:k,height:W,x:U,y:N}}const g=fs(t)==="left",E=ls(...c.map(F=>F.right)),I=Wr(...c.map(F=>F.left)),v=c.filter(F=>g?F.left===I:F.right===E),b=v[0].top,C=v[v.length-1].bottom,S=I,_=E,M=_-S,A=C-b;return{top:b,bottom:C,left:S,right:_,width:M,height:A,x:S,y:b}}return d}const m=await r.getElementRects({reference:{getBoundingClientRect:p},floating:s.floating,strategy:o});return n.reference.x!==m.reference.x||n.reference.y!==m.reference.y||n.reference.width!==m.reference.width||n.reference.height!==m.reference.height?{reset:{rects:m}}:{}}}};async function WT(i,e){const{placement:t,platform:s,elements:n}=i,r=await(s.isRTL==null?void 0:s.isRTL(n.floating)),o=fs(t),a=Zc(t),l=Bn(t)==="y",h=["left","top"].includes(o)?-1:1,u=r&&l?-1:1,c=Il(e,i);let{mainAxis:d,crossAxis:f,alignmentAxis:p}=typeof c=="number"?{mainAxis:c,crossAxis:0,alignmentAxis:null}:{mainAxis:c.mainAxis||0,crossAxis:c.crossAxis||0,alignmentAxis:c.alignmentAxis};return a&&typeof p=="number"&&(f=a==="end"?p*-1:p),l?{x:f*u,y:d*h}:{x:d*h,y:f*u}}const qE=function(i){return{name:"offset",options:i,async fn(e){var t,s;const{x:n,y:r,placement:o,middlewareData:a}=e,l=await WT(e,i);return o===((t=a.offset)==null?void 0:t.placement)&&(s=a.arrow)!=null&&s.alignmentOffset?{}:{x:n+l.x,y:r+l.y,data:{...l,placement:o}}}}},XT=function(i){return i===void 0&&(i={}),{name:"shift",options:i,async fn(e){const{x:t,y:s,placement:n}=e,{mainAxis:r=!0,crossAxis:o=!1,limiter:a={fn:g=>{let{x:E,y:I}=g;return{x:E,y:I}}},...l}=Il(i,e),h={x:t,y:s},u=await WE(e,l),c=Bn(fs(n)),d=HE(c);let f=h[d],p=h[c];if(r){const g=d==="y"?"top":"left",E=d==="y"?"bottom":"right",I=f+u[g],v=f-u[E];f=dm(I,f,v)}if(o){const g=c==="y"?"top":"left",E=c==="y"?"bottom":"right",I=p+u[g],v=p-u[E];p=dm(I,p,v)}const m=a.fn({...e,[d]:f,[c]:p});return{...m,data:{x:m.x-t,y:m.y-s,enabled:{[d]:r,[c]:o}}}}}};function Qc(){return typeof window<"u"}function $s(i){return ZE(i)?(i.nodeName||"").toLowerCase():"#document"}function $t(i){var e;return(i==null||(e=i.ownerDocument)==null?void 0:e.defaultView)||window}function Js(i){var e;return(e=(ZE(i)?i.ownerDocument:i.document)||window.document)==null?void 0:e.documentElement}function ZE(i){return Qc()?i instanceof Node||i instanceof $t(i).Node:!1}function $i(i){return Qc()?i instanceof Element||i instanceof $t(i).Element:!1}function Hi(i){return Qc()?i instanceof HTMLElement||i instanceof $t(i).HTMLElement:!1}function pm(i){return!Qc()||typeof ShadowRoot>"u"?!1:i instanceof ShadowRoot||i instanceof $t(i).ShadowRoot}function bl(i){const{overflow:e,overflowX:t,overflowY:s,display:n}=li(i);return/auto|scroll|overlay|hidden|clip/.test(e+s+t)&&!["inline","contents"].includes(n)}function qT(i){return["table","td","th"].includes($s(i))}function ZT(i){return[":popover-open",":modal"].some(e=>{try{return i.matches(e)}catch{return!1}})}function ip(i){const e=sp(),t=$i(i)?li(i):i;return t.transform!=="none"||t.perspective!=="none"||(t.containerType?t.containerType!=="normal":!1)||!e&&(t.backdropFilter?t.backdropFilter!=="none":!1)||!e&&(t.filter?t.filter!=="none":!1)||["transform","perspective","filter"].some(s=>(t.willChange||"").includes(s))||["paint","layout","strict","content"].some(s=>(t.contain||"").includes(s))}function QT(i){let e=qr(i);for(;Hi(e)&&!Kc(e);){if(ip(e))return e;if(ZT(e))return null;e=qr(e)}return null}function sp(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function Kc(i){return["html","body","#document"].includes($s(i))}function li(i){return $t(i).getComputedStyle(i)}function Jc(i){return $i(i)?{scrollLeft:i.scrollLeft,scrollTop:i.scrollTop}:{scrollLeft:i.scrollX,scrollTop:i.scrollY}}function qr(i){if($s(i)==="html")return i;const e=i.assignedSlot||i.parentNode||pm(i)&&i.host||Js(i);return pm(e)?e.host:e}function QE(i){const e=qr(i);return Kc(e)?i.ownerDocument?i.ownerDocument.body:i.body:Hi(e)&&bl(e)?e:QE(e)}function KE(i,e,t){var s;e===void 0&&(e=[]);const n=QE(i),r=n===((s=i.ownerDocument)==null?void 0:s.body),o=$t(n);return r?(KT(o),e.concat(o,o.visualViewport||[],bl(n)?n:[],[])):e.concat(n,KE(n,[]))}function KT(i){return i.parent&&Object.getPrototypeOf(i.parent)?i.frameElement:null}function JE(i){const e=li(i);let t=parseFloat(e.width)||0,s=parseFloat(e.height)||0;const n=Hi(i),r=n?i.offsetWidth:t,o=n?i.offsetHeight:s,a=ac(t)!==r||ac(s)!==o;return a&&(t=r,s=o),{width:t,height:s,$:a}}function eI(i){return $i(i)?i:i.contextElement}function Ur(i){const e=eI(i);if(!Hi(e))return Vs(1);const t=e.getBoundingClientRect(),{width:s,height:n,$:r}=JE(e);let o=(r?ac(t.width):t.width)/s,a=(r?ac(t.height):t.height)/n;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const JT=Vs(0);function tI(i){const e=$t(i);return!sp()||!e.visualViewport?JT:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function ew(i,e,t){return e===void 0&&(e=!1),!t||e&&t!==$t(i)?!1:e}function Va(i,e,t,s){e===void 0&&(e=!1),t===void 0&&(t=!1);const n=i.getBoundingClientRect(),r=eI(i);let o=Vs(1);e&&(s?$i(s)&&(o=Ur(s)):o=Ur(i));const a=ew(r,t,s)?tI(r):Vs(0);let l=(n.left+a.x)/o.x,h=(n.top+a.y)/o.y,u=n.width/o.x,c=n.height/o.y;if(r){const d=$t(r),f=s&&$i(s)?$t(s):s;let p=d,m=p.frameElement;for(;m&&s&&f!==p;){const g=Ur(m),E=m.getBoundingClientRect(),I=li(m),v=E.left+(m.clientLeft+parseFloat(I.paddingLeft))*g.x,b=E.top+(m.clientTop+parseFloat(I.paddingTop))*g.y;l*=g.x,h*=g.y,u*=g.x,c*=g.y,l+=v,h+=b,p=$t(m),m=p.frameElement}}return Xr({width:u,height:c,x:l,y:h})}const tw=[":popover-open",":modal"];function iI(i){return tw.some(e=>{try{return i.matches(e)}catch{return!1}})}function iw(i){let{elements:e,rect:t,offsetParent:s,strategy:n}=i;const r=n==="fixed",o=Js(s),a=e?iI(e.floating):!1;if(s===o||a&&r)return t;let l={scrollLeft:0,scrollTop:0},h=Vs(1);const u=Vs(0),c=Hi(s);if((c||!c&&!r)&&(($s(s)!=="body"||bl(o))&&(l=Jc(s)),Hi(s))){const d=Va(s);h=Ur(s),u.x=d.x+s.clientLeft,u.y=d.y+s.clientTop}return{width:t.width*h.x,height:t.height*h.y,x:t.x*h.x-l.scrollLeft*h.x+u.x,y:t.y*h.y-l.scrollTop*h.y+u.y}}function sw(i){return Array.from(i.getClientRects())}function sI(i){return Va(Js(i)).left+Jc(i).scrollLeft}function nw(i){const e=Js(i),t=Jc(i),s=i.ownerDocument.body,n=ls(e.scrollWidth,e.clientWidth,s.scrollWidth,s.clientWidth),r=ls(e.scrollHeight,e.clientHeight,s.scrollHeight,s.clientHeight);let o=-t.scrollLeft+sI(i);const a=-t.scrollTop;return li(s).direction==="rtl"&&(o+=ls(e.clientWidth,s.clientWidth)-n),{width:n,height:r,x:o,y:a}}function rw(i,e){const t=$t(i),s=Js(i),n=t.visualViewport;let r=s.clientWidth,o=s.clientHeight,a=0,l=0;if(n){r=n.width,o=n.height;const h=sp();(!h||h&&e==="fixed")&&(a=n.offsetLeft,l=n.offsetTop)}return{width:r,height:o,x:a,y:l}}function ow(i,e){const t=Va(i,!0,e==="fixed"),s=t.top+i.clientTop,n=t.left+i.clientLeft,r=Hi(i)?Ur(i):Vs(1),o=i.clientWidth*r.x,a=i.clientHeight*r.y,l=n*r.x,h=s*r.y;return{width:o,height:a,x:l,y:h}}function mm(i,e,t){let s;if(e==="viewport")s=rw(i,t);else if(e==="document")s=nw(Js(i));else if($i(e))s=ow(e,t);else{const n=tI(i);s={...e,x:e.x-n.x,y:e.y-n.y}}return Xr(s)}function nI(i,e){const t=qr(i);return t===e||!$i(t)||Kc(t)?!1:li(t).position==="fixed"||nI(t,e)}function aw(i,e){const t=e.get(i);if(t)return t;let s=KE(i,[]).filter(a=>$i(a)&&$s(a)!=="body"),n=null;const r=li(i).position==="fixed";let o=r?qr(i):i;for(;$i(o)&&!Kc(o);){const a=li(o),l=ip(o);!l&&a.position==="fixed"&&(n=null),(r?!l&&!n:!l&&a.position==="static"&&n&&["absolute","fixed"].includes(n.position)||bl(o)&&!l&&nI(i,o))?s=s.filter(h=>h!==o):n=a,o=qr(o)}return e.set(i,s),s}function lw(i){let{element:e,boundary:t,rootBoundary:s,strategy:n}=i;const r=[...t==="clippingAncestors"?aw(e,this._c):[].concat(t),s],o=r[0],a=r.reduce((l,h)=>{const u=mm(e,h,n);return l.top=ls(u.top,l.top),l.right=Wr(u.right,l.right),l.bottom=Wr(u.bottom,l.bottom),l.left=ls(u.left,l.left),l},mm(e,o,n));return{width:a.right-a.left,height:a.bottom-a.top,x:a.left,y:a.top}}function hw(i){const{width:e,height:t}=JE(i);return{width:e,height:t}}function cw(i,e,t){const s=Hi(e),n=Js(e),r=t==="fixed",o=Va(i,!0,r,e);let a={scrollLeft:0,scrollTop:0};const l=Vs(0);if(s||!s&&!r)if(($s(e)!=="body"||bl(n))&&(a=Jc(e)),s){const c=Va(e,!0,r,e);l.x=c.x+e.clientLeft,l.y=c.y+e.clientTop}else n&&(l.x=sI(n));const h=o.left+a.scrollLeft-l.x,u=o.top+a.scrollTop-l.y;return{x:h,y:u,width:o.width,height:o.height}}function gm(i,e){return!Hi(i)||li(i).position==="fixed"?null:e?e(i):i.offsetParent}function rI(i,e){const t=$t(i);if(!Hi(i)||iI(i))return t;let s=gm(i,e);for(;s&&qT(s)&&li(s).position==="static";)s=gm(s,e);return s&&($s(s)==="html"||$s(s)==="body"&&li(s).position==="static"&&!ip(s))?t:s||QT(i)||t}const uw=async function(i){const e=this.getOffsetParent||rI,t=this.getDimensions;return{reference:cw(i.reference,await e(i.floating),i.strategy),floating:{x:0,y:0,...await t(i.floating)}}};function dw(i){return li(i).direction==="rtl"}const fw={convertOffsetParentRelativeRectToViewportRelativeRect:iw,getDocumentElement:Js,getClippingRect:lw,getOffsetParent:rI,getElementRects:uw,getClientRects:sw,getDimensions:hw,getScale:Ur,isElement:$i,isRTL:dw},oI=XT,aI=GT,lI=jT,hI=(i,e,t)=>{const s=new Map,n={platform:fw,...t},r={...n.platform,_c:s};return HT(i,e,{...n,platform:r})};/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const $h=globalThis,np=$h.ShadowRoot&&($h.ShadyCSS===void 0||$h.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,rp=Symbol(),Em=new WeakMap;let cI=class{constructor(e,t,s){if(this._$cssResult$=!0,s!==rp)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=e,this.t=t}get styleSheet(){let e=this.o;const t=this.t;if(np&&e===void 0){const s=t!==void 0&&t.length===1;s&&(e=Em.get(t)),e===void 0&&((this.o=e=new CSSStyleSheet).replaceSync(this.cssText),s&&Em.set(t,e))}return e}toString(){return this.cssText}};const pw=i=>new cI(typeof i=="string"?i:i+"",void 0,rp),ke=(i,...e)=>{const t=i.length===1?i[0]:e.reduce((s,n,r)=>s+(o=>{if(o._$cssResult$===!0)return o.cssText;if(typeof o=="number")return o;throw Error("Value passed to 'css' function must be a 'css' function result: "+o+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(n)+i[r+1],i[0]);return new cI(t,i,rp)},mw=(i,e)=>{if(np)i.adoptedStyleSheets=e.map(t=>t instanceof CSSStyleSheet?t:t.styleSheet);else for(const t of e){const s=document.createElement("style"),n=$h.litNonce;n!==void 0&&s.setAttribute("nonce",n),s.textContent=t.cssText,i.appendChild(s)}},Im=np?i=>i:i=>i instanceof CSSStyleSheet?(e=>{let t="";for(const s of e.cssRules)t+=s.cssText;return pw(t)})(i):i;/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const{is:gw,defineProperty:Ew,getOwnPropertyDescriptor:Iw,getOwnPropertyNames:bw,getOwnPropertySymbols:vw,getPrototypeOf:yw}=Object,Zr=globalThis,bm=Zr.trustedTypes,Cw=bm?bm.emptyScript:"",vm=Zr.reactiveElementPolyfillSupport,ya=(i,e)=>i,hc={toAttribute(i,e){switch(e){case Boolean:i=i?Cw:null;break;case Object:case Array:i=i==null?i:JSON.stringify(i)}return i},fromAttribute(i,e){let t=i;switch(e){case Boolean:t=i!==null;break;case Number:t=i===null?null:Number(i);break;case Object:case Array:try{t=JSON.parse(i)}catch{t=null}}return t}},op=(i,e)=>!gw(i,e),ym={attribute:!0,type:String,converter:hc,reflect:!1,hasChanged:op};Symbol.metadata??(Symbol.metadata=Symbol("metadata")),Zr.litPropertyMetadata??(Zr.litPropertyMetadata=new WeakMap);let Cr=class extends HTMLElement{static addInitializer(e){this._$Ei(),(this.l??(this.l=[])).push(e)}static get observedAttributes(){return this.finalize(),this._$Eh&&[...this._$Eh.keys()]}static createProperty(e,t=ym){if(t.state&&(t.attribute=!1),this._$Ei(),this.elementProperties.set(e,t),!t.noAccessor){const s=Symbol(),n=this.getPropertyDescriptor(e,s,t);n!==void 0&&Ew(this.prototype,e,n)}}static getPropertyDescriptor(e,t,s){const{get:n,set:r}=Iw(this.prototype,e)??{get(){return this[t]},set(o){this[t]=o}};return{get(){return n==null?void 0:n.call(this)},set(o){const a=n==null?void 0:n.call(this);r.call(this,o),this.requestUpdate(e,a,s)},configurable:!0,enumerable:!0}}static getPropertyOptions(e){return this.elementProperties.get(e)??ym}static _$Ei(){if(this.hasOwnProperty(ya("elementProperties")))return;const e=yw(this);e.finalize(),e.l!==void 0&&(this.l=[...e.l]),this.elementProperties=new Map(e.elementProperties)}static finalize(){if(this.hasOwnProperty(ya("finalized")))return;if(this.finalized=!0,this._$Ei(),this.hasOwnProperty(ya("properties"))){const t=this.properties,s=[...bw(t),...vw(t)];for(const n of s)this.createProperty(n,t[n])}const e=this[Symbol.metadata];if(e!==null){const t=litPropertyMetadata.get(e);if(t!==void 0)for(const[s,n]of t)this.elementProperties.set(s,n)}this._$Eh=new Map;for(const[t,s]of this.elementProperties){const n=this._$Eu(t,s);n!==void 0&&this._$Eh.set(n,t)}this.elementStyles=this.finalizeStyles(this.styles)}static finalizeStyles(e){const t=[];if(Array.isArray(e)){const s=new Set(e.flat(1/0).reverse());for(const n of s)t.unshift(Im(n))}else e!==void 0&&t.push(Im(e));return t}static _$Eu(e,t){const s=t.attribute;return s===!1?void 0:typeof s=="string"?s:typeof e=="string"?e.toLowerCase():void 0}constructor(){super(),this._$Ep=void 0,this.isUpdatePending=!1,this.hasUpdated=!1,this._$Em=null,this._$Ev()}_$Ev(){var e;this._$ES=new Promise(t=>this.enableUpdating=t),this._$AL=new Map,this._$E_(),this.requestUpdate(),(e=this.constructor.l)==null||e.forEach(t=>t(this))}addController(e){var t;(this._$EO??(this._$EO=new Set)).add(e),this.renderRoot!==void 0&&this.isConnected&&((t=e.hostConnected)==null||t.call(e))}removeController(e){var t;(t=this._$EO)==null||t.delete(e)}_$E_(){const e=new Map,t=this.constructor.elementProperties;for(const s of t.keys())this.hasOwnProperty(s)&&(e.set(s,this[s]),delete this[s]);e.size>0&&(this._$Ep=e)}createRenderRoot(){const e=this.shadowRoot??this.attachShadow(this.constructor.shadowRootOptions);return mw(e,this.constructor.elementStyles),e}connectedCallback(){var e;this.renderRoot??(this.renderRoot=this.createRenderRoot()),this.enableUpdating(!0),(e=this._$EO)==null||e.forEach(t=>{var s;return(s=t.hostConnected)==null?void 0:s.call(t)})}enableUpdating(e){}disconnectedCallback(){var e;(e=this._$EO)==null||e.forEach(t=>{var s;return(s=t.hostDisconnected)==null?void 0:s.call(t)})}attributeChangedCallback(e,t,s){this._$AK(e,s)}_$EC(e,t){var s;const n=this.constructor.elementProperties.get(e),r=this.constructor._$Eu(e,n);if(r!==void 0&&n.reflect===!0){const o=(((s=n.converter)==null?void 0:s.toAttribute)!==void 0?n.converter:hc).toAttribute(t,n.type);this._$Em=e,o==null?this.removeAttribute(r):this.setAttribute(r,o),this._$Em=null}}_$AK(e,t){var s;const n=this.constructor,r=n._$Eh.get(e);if(r!==void 0&&this._$Em!==r){const o=n.getPropertyOptions(r),a=typeof o.converter=="function"?{fromAttribute:o.converter}:((s=o.converter)==null?void 0:s.fromAttribute)!==void 0?o.converter:hc;this._$Em=r,this[r]=a.fromAttribute(t,o.type),this._$Em=null}}requestUpdate(e,t,s){if(e!==void 0){if(s??(s=this.constructor.getPropertyOptions(e)),!(s.hasChanged??op)(this[e],t))return;this.P(e,t,s)}this.isUpdatePending===!1&&(this._$ES=this._$ET())}P(e,t,s){this._$AL.has(e)||this._$AL.set(e,t),s.reflect===!0&&this._$Em!==e&&(this._$Ej??(this._$Ej=new Set)).add(e)}async _$ET(){this.isUpdatePending=!0;try{await this._$ES}catch(t){Promise.reject(t)}const e=this.scheduleUpdate();return e!=null&&await e,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){var e;if(!this.isUpdatePending)return;if(!this.hasUpdated){if(this.renderRoot??(this.renderRoot=this.createRenderRoot()),this._$Ep){for(const[r,o]of this._$Ep)this[r]=o;this._$Ep=void 0}const n=this.constructor.elementProperties;if(n.size>0)for(const[r,o]of n)o.wrapped!==!0||this._$AL.has(r)||this[r]===void 0||this.P(r,this[r],o)}let t=!1;const s=this._$AL;try{t=this.shouldUpdate(s),t?(this.willUpdate(s),(e=this._$EO)==null||e.forEach(n=>{var r;return(r=n.hostUpdate)==null?void 0:r.call(n)}),this.update(s)):this._$EU()}catch(n){throw t=!1,this._$EU(),n}t&&this._$AE(s)}willUpdate(e){}_$AE(e){var t;(t=this._$EO)==null||t.forEach(s=>{var n;return(n=s.hostUpdated)==null?void 0:n.call(s)}),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(e)),this.updated(e)}_$EU(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$ES}shouldUpdate(e){return!0}update(e){this._$Ej&&(this._$Ej=this._$Ej.forEach(t=>this._$EC(t,this[t]))),this._$EU()}updated(e){}firstUpdated(e){}};Cr.elementStyles=[],Cr.shadowRootOptions={mode:"open"},Cr[ya("elementProperties")]=new Map,Cr[ya("finalized")]=new Map,vm==null||vm({ReactiveElement:Cr}),(Zr.reactiveElementVersions??(Zr.reactiveElementVersions=[])).push("2.0.4");/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const cc=globalThis,uc=cc.trustedTypes,Cm=uc?uc.createPolicy("lit-html",{createHTML:i=>i}):void 0,uI="$lit$",Ps=`lit$${Math.random().toFixed(9).slice(2)}$`,dI="?"+Ps,Tw=`<${dI}>`,zn=document,$a=()=>zn.createComment(""),Ha=i=>i===null||typeof i!="object"&&typeof i!="function",ap=Array.isArray,ww=i=>ap(i)||typeof(i==null?void 0:i[Symbol.iterator])=="function",Pu=`[ 	
\f\r]`,jo=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,Tm=/-->/g,wm=/>/g,fn=RegExp(`>|${Pu}(?:([^\\s"'>=/]+)(${Pu}*=${Pu}*(?:[^ 	
\f\r"'\`<>=]|("|')|))|$)`,"g"),Sm=/'/g,xm=/"/g,fI=/^(?:script|style|textarea|title)$/i,Sw=i=>(e,...t)=>({_$litType$:i,strings:e,values:t}),de=Sw(1),Qr=Symbol.for("lit-noChange"),it=Symbol.for("lit-nothing"),Rm=new WeakMap,Rn=zn.createTreeWalker(zn,129);function pI(i,e){if(!ap(i)||!i.hasOwnProperty("raw"))throw Error("invalid template strings array");return Cm!==void 0?Cm.createHTML(e):e}const xw=(i,e)=>{const t=i.length-1,s=[];let n,r=e===2?"<svg>":e===3?"<math>":"",o=jo;for(let a=0;a<t;a++){const l=i[a];let h,u,c=-1,d=0;for(;d<l.length&&(o.lastIndex=d,u=o.exec(l),u!==null);)d=o.lastIndex,o===jo?u[1]==="!--"?o=Tm:u[1]!==void 0?o=wm:u[2]!==void 0?(fI.test(u[2])&&(n=RegExp("</"+u[2],"g")),o=fn):u[3]!==void 0&&(o=fn):o===fn?u[0]===">"?(o=n??jo,c=-1):u[1]===void 0?c=-2:(c=o.lastIndex-u[2].length,h=u[1],o=u[3]===void 0?fn:u[3]==='"'?xm:Sm):o===xm||o===Sm?o=fn:o===Tm||o===wm?o=jo:(o=fn,n=void 0);const f=o===fn&&i[a+1].startsWith("/>")?" ":"";r+=o===jo?l+Tw:c>=0?(s.push(h),l.slice(0,c)+uI+l.slice(c)+Ps+f):l+Ps+(c===-2?a:f)}return[pI(i,r+(i[t]||"<?>")+(e===2?"</svg>":e===3?"</math>":"")),s]};let Sd=class mI{constructor({strings:e,_$litType$:t},s){let n;this.parts=[];let r=0,o=0;const a=e.length-1,l=this.parts,[h,u]=xw(e,t);if(this.el=mI.createElement(h,s),Rn.currentNode=this.el.content,t===2||t===3){const c=this.el.content.firstChild;c.replaceWith(...c.childNodes)}for(;(n=Rn.nextNode())!==null&&l.length<a;){if(n.nodeType===1){if(n.hasAttributes())for(const c of n.getAttributeNames())if(c.endsWith(uI)){const d=u[o++],f=n.getAttribute(c).split(Ps),p=/([.?@])?(.*)/.exec(d);l.push({type:1,index:r,name:p[2],strings:f,ctor:p[1]==="."?_w:p[1]==="?"?Aw:p[1]==="@"?Mw:eu}),n.removeAttribute(c)}else c.startsWith(Ps)&&(l.push({type:6,index:r}),n.removeAttribute(c));if(fI.test(n.tagName)){const c=n.textContent.split(Ps),d=c.length-1;if(d>0){n.textContent=uc?uc.emptyScript:"";for(let f=0;f<d;f++)n.append(c[f],$a()),Rn.nextNode(),l.push({type:2,index:++r});n.append(c[d],$a())}}}else if(n.nodeType===8)if(n.data===dI)l.push({type:2,index:r});else{let c=-1;for(;(c=n.data.indexOf(Ps,c+1))!==-1;)l.push({type:7,index:r}),c+=Ps.length-1}r++}}static createElement(e,t){const s=zn.createElement("template");return s.innerHTML=e,s}};function Kr(i,e,t=i,s){var n,r;if(e===Qr)return e;let o=s!==void 0?(n=t._$Co)==null?void 0:n[s]:t._$Cl;const a=Ha(e)?void 0:e._$litDirective$;return(o==null?void 0:o.constructor)!==a&&((r=o==null?void 0:o._$AO)==null||r.call(o,!1),a===void 0?o=void 0:(o=new a(i),o._$AT(i,t,s)),s!==void 0?(t._$Co??(t._$Co=[]))[s]=o:t._$Cl=o),o!==void 0&&(e=Kr(i,o._$AS(i,e.values),o,s)),e}class Rw{constructor(e,t){this._$AV=[],this._$AN=void 0,this._$AD=e,this._$AM=t}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(e){const{el:{content:t},parts:s}=this._$AD,n=((e==null?void 0:e.creationScope)??zn).importNode(t,!0);Rn.currentNode=n;let r=Rn.nextNode(),o=0,a=0,l=s[0];for(;l!==void 0;){if(o===l.index){let h;l.type===2?h=new lp(r,r.nextSibling,this,e):l.type===1?h=new l.ctor(r,l.name,l.strings,this,e):l.type===6&&(h=new Fw(r,this,e)),this._$AV.push(h),l=s[++a]}o!==(l==null?void 0:l.index)&&(r=Rn.nextNode(),o++)}return Rn.currentNode=zn,n}p(e){let t=0;for(const s of this._$AV)s!==void 0&&(s.strings!==void 0?(s._$AI(e,s,t),t+=s.strings.length-2):s._$AI(e[t])),t++}}let lp=class gI{get _$AU(){var e;return((e=this._$AM)==null?void 0:e._$AU)??this._$Cv}constructor(e,t,s,n){this.type=2,this._$AH=it,this._$AN=void 0,this._$AA=e,this._$AB=t,this._$AM=s,this.options=n,this._$Cv=(n==null?void 0:n.isConnected)??!0}get parentNode(){let e=this._$AA.parentNode;const t=this._$AM;return t!==void 0&&(e==null?void 0:e.nodeType)===11&&(e=t.parentNode),e}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(e,t=this){e=Kr(this,e,t),Ha(e)?e===it||e==null||e===""?(this._$AH!==it&&this._$AR(),this._$AH=it):e!==this._$AH&&e!==Qr&&this._(e):e._$litType$!==void 0?this.$(e):e.nodeType!==void 0?this.T(e):ww(e)?this.k(e):this._(e)}O(e){return this._$AA.parentNode.insertBefore(e,this._$AB)}T(e){this._$AH!==e&&(this._$AR(),this._$AH=this.O(e))}_(e){this._$AH!==it&&Ha(this._$AH)?this._$AA.nextSibling.data=e:this.T(zn.createTextNode(e)),this._$AH=e}$(e){var t;const{values:s,_$litType$:n}=e,r=typeof n=="number"?this._$AC(e):(n.el===void 0&&(n.el=Sd.createElement(pI(n.h,n.h[0]),this.options)),n);if(((t=this._$AH)==null?void 0:t._$AD)===r)this._$AH.p(s);else{const o=new Rw(r,this),a=o.u(this.options);o.p(s),this.T(a),this._$AH=o}}_$AC(e){let t=Rm.get(e.strings);return t===void 0&&Rm.set(e.strings,t=new Sd(e)),t}k(e){ap(this._$AH)||(this._$AH=[],this._$AR());const t=this._$AH;let s,n=0;for(const r of e)n===t.length?t.push(s=new gI(this.O($a()),this.O($a()),this,this.options)):s=t[n],s._$AI(r),n++;n<t.length&&(this._$AR(s&&s._$AB.nextSibling,n),t.length=n)}_$AR(e=this._$AA.nextSibling,t){var s;for((s=this._$AP)==null?void 0:s.call(this,!1,!0,t);e&&e!==this._$AB;){const n=e.nextSibling;e.remove(),e=n}}setConnected(e){var t;this._$AM===void 0&&(this._$Cv=e,(t=this._$AP)==null||t.call(this,e))}},eu=class{get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}constructor(e,t,s,n,r){this.type=1,this._$AH=it,this._$AN=void 0,this.element=e,this.name=t,this._$AM=n,this.options=r,s.length>2||s[0]!==""||s[1]!==""?(this._$AH=Array(s.length-1).fill(new String),this.strings=s):this._$AH=it}_$AI(e,t=this,s,n){const r=this.strings;let o=!1;if(r===void 0)e=Kr(this,e,t,0),o=!Ha(e)||e!==this._$AH&&e!==Qr,o&&(this._$AH=e);else{const a=e;let l,h;for(e=r[0],l=0;l<r.length-1;l++)h=Kr(this,a[s+l],t,l),h===Qr&&(h=this._$AH[l]),o||(o=!Ha(h)||h!==this._$AH[l]),h===it?e=it:e!==it&&(e+=(h??"")+r[l+1]),this._$AH[l]=h}o&&!n&&this.j(e)}j(e){e===it?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,e??"")}},_w=class extends eu{constructor(){super(...arguments),this.type=3}j(e){this.element[this.name]=e===it?void 0:e}},Aw=class extends eu{constructor(){super(...arguments),this.type=4}j(e){this.element.toggleAttribute(this.name,!!e&&e!==it)}},Mw=class extends eu{constructor(e,t,s,n,r){super(e,t,s,n,r),this.type=5}_$AI(e,t=this){if((e=Kr(this,e,t,0)??it)===Qr)return;const s=this._$AH,n=e===it&&s!==it||e.capture!==s.capture||e.once!==s.once||e.passive!==s.passive,r=e!==it&&(s===it||n);n&&this.element.removeEventListener(this.name,this,s),r&&this.element.addEventListener(this.name,this,e),this._$AH=e}handleEvent(e){var t;typeof this._$AH=="function"?this._$AH.call(((t=this.options)==null?void 0:t.host)??this.element,e):this._$AH.handleEvent(e)}},Fw=class{constructor(e,t,s){this.element=e,this.type=6,this._$AN=void 0,this._$AM=t,this.options=s}get _$AU(){return this._$AM._$AU}_$AI(e){Kr(this,e)}};const _m=cc.litHtmlPolyfillSupport;_m==null||_m(Sd,lp),(cc.litHtmlVersions??(cc.litHtmlVersions=[])).push("3.2.1");const Jr=(i,e,t)=>{const s=(t==null?void 0:t.renderBefore)??e;let n=s._$litPart$;if(n===void 0){const r=(t==null?void 0:t.renderBefore)??null;s._$litPart$=n=new lp(e.insertBefore($a(),r),r,void 0,t??{})}return n._$AI(i),n};/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */let Pe=class extends Cr{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){var i;const e=super.createRenderRoot();return(i=this.renderOptions).renderBefore??(i.renderBefore=e.firstChild),e}update(i){const e=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(i),this._$Do=Jr(e,this.renderRoot,this.renderOptions)}connectedCallback(){var i;super.connectedCallback(),(i=this._$Do)==null||i.setConnected(!0)}disconnectedCallback(){var i;super.disconnectedCallback(),(i=this._$Do)==null||i.setConnected(!1)}render(){return Qr}};var Am;Pe._$litElement$=!0,Pe.finalized=!0,(Am=globalThis.litElementHydrateSupport)==null||Am.call(globalThis,{LitElement:Pe});const Mm=globalThis.litElementPolyfillSupport;Mm==null||Mm({LitElement:Pe});(globalThis.litElementVersions??(globalThis.litElementVersions=[])).push("4.1.1");/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Ow={attribute:!0,type:String,converter:hc,reflect:!1,hasChanged:op},Nw=(i=Ow,e,t)=>{const{kind:s,metadata:n}=t;let r=globalThis.litPropertyMetadata.get(n);if(r===void 0&&globalThis.litPropertyMetadata.set(n,r=new Map),r.set(t.name,i),s==="accessor"){const{name:o}=t;return{set(a){const l=e.get.call(this);e.set.call(this,a),this.requestUpdate(o,l,i)},init(a){return a!==void 0&&this.P(o,void 0,i),a}}}if(s==="setter"){const{name:o}=t;return function(a){const l=this[o];e.call(this,a),this.requestUpdate(o,l,i)}}throw Error("Unsupported decorator location: "+s)};function Z(i){return(e,t)=>typeof t=="object"?Nw(i,e,t):((s,n,r)=>{const o=n.hasOwnProperty(r);return n.constructor.createProperty(r,o?{...s,wrapped:!0}:s),o?Object.getOwnPropertyDescriptor(n,r):void 0})(i,e,t)}/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */function Io(i){return Z({...i,state:!0,attribute:!1})}/**
 * @license
 * Copyright 2020 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Pw=i=>i.strings===void 0;/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Lw={ATTRIBUTE:1,CHILD:2,PROPERTY:3,BOOLEAN_ATTRIBUTE:4,EVENT:5,ELEMENT:6},Dw=i=>(...e)=>({_$litDirective$:i,values:e});let Uw=class{constructor(e){}get _$AU(){return this._$AM._$AU}_$AT(e,t,s){this._$Ct=e,this._$AM=t,this._$Ci=s}_$AS(e,t){return this.update(e,t)}update(e,t){return this.render(...t)}};/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Ca=(i,e)=>{var t;const s=i._$AN;if(s===void 0)return!1;for(const n of s)(t=n._$AO)==null||t.call(n,e,!1),Ca(n,e);return!0},dc=i=>{let e,t;do{if((e=i._$AM)===void 0)break;t=e._$AN,t.delete(i),i=e}while((t==null?void 0:t.size)===0)},EI=i=>{for(let e;e=i._$AM;i=e){let t=e._$AN;if(t===void 0)e._$AN=t=new Set;else if(t.has(i))break;t.add(i),zw(e)}};function kw(i){this._$AN!==void 0?(dc(this),this._$AM=i,EI(this)):this._$AM=i}function Bw(i,e=!1,t=0){const s=this._$AH,n=this._$AN;if(n!==void 0&&n.size!==0)if(e)if(Array.isArray(s))for(let r=t;r<s.length;r++)Ca(s[r],!1),dc(s[r]);else s!=null&&(Ca(s,!1),dc(s));else Ca(this,i)}const zw=i=>{i.type==Lw.CHILD&&(i._$AP??(i._$AP=Bw),i._$AQ??(i._$AQ=kw))};let Vw=class extends Uw{constructor(){super(...arguments),this._$AN=void 0}_$AT(e,t,s){super._$AT(e,t,s),EI(this),this.isConnected=e._$AU}_$AO(e,t=!0){var s,n;e!==this.isConnected&&(this.isConnected=e,e?(s=this.reconnected)==null||s.call(this):(n=this.disconnected)==null||n.call(this)),t&&(Ca(this,e),dc(this))}setValue(e){if(Pw(this._$Ct))this._$Ct._$AI(e,this);else{const t=[...this._$Ct._$AH];t[this._$Ci]=e,this._$Ct._$AI(t,this,0)}}disconnected(){}reconnected(){}};/**
 * @license
 * Copyright 2020 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const eo=()=>new $w;let $w=class{};const Lu=new WeakMap,to=Dw(class extends Vw{render(i){return it}update(i,[e]){var t;const s=e!==this.Y;return s&&this.Y!==void 0&&this.rt(void 0),(s||this.lt!==this.ct)&&(this.Y=e,this.ht=(t=i.options)==null?void 0:t.host,this.rt(this.ct=i.element)),it}rt(i){if(this.isConnected||(i=void 0),typeof this.Y=="function"){const e=this.ht??globalThis;let t=Lu.get(e);t===void 0&&(t=new WeakMap,Lu.set(e,t)),t.get(this.Y)!==void 0&&this.Y.call(this.ht,void 0),t.set(this.Y,i),i!==void 0&&this.Y.call(this.ht,i)}else this.Y.value=i}get lt(){var i,e;return typeof this.Y=="function"?(i=Lu.get(this.ht??globalThis))==null?void 0:i.get(this.Y):(e=this.Y)==null?void 0:e.value}disconnected(){this.lt===this.ct&&this.rt(void 0)}reconnected(){this.rt(this.ct)}});/**
* (c) Iconify
*
* For the full copyright and license information, please view the license.txt
* files at https://github.com/iconify/iconify
*
* Licensed under MIT.
*
* @license MIT
* @version 2.0.0
*/const II=Object.freeze({left:0,top:0,width:16,height:16}),fc=Object.freeze({rotate:0,vFlip:!1,hFlip:!1}),vl=Object.freeze({...II,...fc}),xd=Object.freeze({...vl,body:"",hidden:!1}),Hw=Object.freeze({width:null,height:null}),bI=Object.freeze({...Hw,...fc});function Gw(i,e=0){const t=i.replace(/^-?[0-9.]*/,"");function s(n){for(;n<0;)n+=4;return n%4}if(t===""){const n=parseInt(i);return isNaN(n)?0:s(n)}else if(t!==i){let n=0;switch(t){case"%":n=25;break;case"deg":n=90}if(n){let r=parseFloat(i.slice(0,i.length-t.length));return isNaN(r)?0:(r=r/n,r%1===0?s(r):0)}}return e}const Yw=/[\s,]+/;function jw(i,e){e.split(Yw).forEach(t=>{switch(t.trim()){case"horizontal":i.hFlip=!0;break;case"vertical":i.vFlip=!0;break}})}const vI={...bI,preserveAspectRatio:""};function Fm(i){const e={...vI},t=(s,n)=>i.getAttribute(s)||n;return e.width=t("width",null),e.height=t("height",null),e.rotate=Gw(t("rotate","")),jw(e,t("flip","")),e.preserveAspectRatio=t("preserveAspectRatio",t("preserveaspectratio","")),e}function Ww(i,e){for(const t in vI)if(i[t]!==e[t])return!0;return!1}const Ta=/^[a-z0-9]+(-[a-z0-9]+)*$/,yl=(i,e,t,s="")=>{const n=i.split(":");if(i.slice(0,1)==="@"){if(n.length<2||n.length>3)return null;s=n.shift().slice(1)}if(n.length>3||!n.length)return null;if(n.length>1){const a=n.pop(),l=n.pop(),h={provider:n.length>0?n[0]:s,prefix:l,name:a};return e&&!Hh(h)?null:h}const r=n[0],o=r.split("-");if(o.length>1){const a={provider:s,prefix:o.shift(),name:o.join("-")};return e&&!Hh(a)?null:a}if(t&&s===""){const a={provider:s,prefix:"",name:r};return e&&!Hh(a,t)?null:a}return null},Hh=(i,e)=>i?!!((i.provider===""||i.provider.match(Ta))&&(e&&i.prefix===""||i.prefix.match(Ta))&&i.name.match(Ta)):!1;function Xw(i,e){const t={};!i.hFlip!=!e.hFlip&&(t.hFlip=!0),!i.vFlip!=!e.vFlip&&(t.vFlip=!0);const s=((i.rotate||0)+(e.rotate||0))%4;return s&&(t.rotate=s),t}function Om(i,e){const t=Xw(i,e);for(const s in xd)s in fc?s in i&&!(s in t)&&(t[s]=fc[s]):s in e?t[s]=e[s]:s in i&&(t[s]=i[s]);return t}function qw(i,e){const t=i.icons,s=i.aliases||Object.create(null),n=Object.create(null);function r(o){if(t[o])return n[o]=[];if(!(o in n)){n[o]=null;const a=s[o]&&s[o].parent,l=a&&r(a);l&&(n[o]=[a].concat(l))}return n[o]}return Object.keys(t).concat(Object.keys(s)).forEach(r),n}function Zw(i,e,t){const s=i.icons,n=i.aliases||Object.create(null);let r={};function o(a){r=Om(s[a]||n[a],r)}return o(e),t.forEach(o),Om(i,r)}function yI(i,e){const t=[];if(typeof i!="object"||typeof i.icons!="object")return t;i.not_found instanceof Array&&i.not_found.forEach(n=>{e(n,null),t.push(n)});const s=qw(i);for(const n in s){const r=s[n];r&&(e(n,Zw(i,n,r)),t.push(n))}return t}const Qw={provider:"",aliases:{},not_found:{},...II};function Du(i,e){for(const t in e)if(t in i&&typeof i[t]!=typeof e[t])return!1;return!0}function CI(i){if(typeof i!="object"||i===null)return null;const e=i;if(typeof e.prefix!="string"||!i.icons||typeof i.icons!="object"||!Du(i,Qw))return null;const t=e.icons;for(const n in t){const r=t[n];if(!n.match(Ta)||typeof r.body!="string"||!Du(r,xd))return null}const s=e.aliases||Object.create(null);for(const n in s){const r=s[n],o=r.parent;if(!n.match(Ta)||typeof o!="string"||!t[o]&&!s[o]||!Du(r,xd))return null}return e}const pc=Object.create(null);function Kw(i,e){return{provider:i,prefix:e,icons:Object.create(null),missing:new Set}}function Hs(i,e){const t=pc[i]||(pc[i]=Object.create(null));return t[e]||(t[e]=Kw(i,e))}function hp(i,e){return CI(e)?yI(e,(t,s)=>{s?i.icons[t]=s:i.missing.add(t)}):[]}function Jw(i,e,t){try{if(typeof t.body=="string")return i.icons[e]={...t},!0}catch{}return!1}function e2(i,e){let t=[];return(typeof i=="string"?[i]:Object.keys(pc)).forEach(s=>{(typeof s=="string"&&typeof e=="string"?[e]:Object.keys(pc[s]||{})).forEach(n=>{const r=Hs(s,n);t=t.concat(Object.keys(r.icons).map(o=>(s!==""?"@"+s+":":"")+n+":"+o))})}),t}let Ga=!1;function TI(i){return typeof i=="boolean"&&(Ga=i),Ga}function Ya(i){const e=typeof i=="string"?yl(i,!0,Ga):i;if(e){const t=Hs(e.provider,e.prefix),s=e.name;return t.icons[s]||(t.missing.has(s)?null:void 0)}}function wI(i,e){const t=yl(i,!0,Ga);if(!t)return!1;const s=Hs(t.provider,t.prefix);return Jw(s,t.name,e)}function Nm(i,e){if(typeof i!="object")return!1;if(typeof e!="string"&&(e=i.provider||""),Ga&&!e&&!i.prefix){let n=!1;return CI(i)&&(i.prefix="",yI(i,(r,o)=>{o&&wI(r,o)&&(n=!0)})),n}const t=i.prefix;if(!Hh({provider:e,prefix:t,name:"a"}))return!1;const s=Hs(e,t);return!!hp(s,i)}function Pm(i){return!!Ya(i)}function t2(i){const e=Ya(i);return e?{...vl,...e}:null}function i2(i){const e={loaded:[],missing:[],pending:[]},t=Object.create(null);i.sort((n,r)=>n.provider!==r.provider?n.provider.localeCompare(r.provider):n.prefix!==r.prefix?n.prefix.localeCompare(r.prefix):n.name.localeCompare(r.name));let s={provider:"",prefix:"",name:""};return i.forEach(n=>{if(s.name===n.name&&s.prefix===n.prefix&&s.provider===n.provider)return;s=n;const r=n.provider,o=n.prefix,a=n.name,l=t[r]||(t[r]=Object.create(null)),h=l[o]||(l[o]=Hs(r,o));let u;a in h.icons?u=e.loaded:o===""||h.missing.has(a)?u=e.missing:u=e.pending;const c={provider:r,prefix:o,name:a};u.push(c)}),e}function SI(i,e){i.forEach(t=>{const s=t.loaderCallbacks;s&&(t.loaderCallbacks=s.filter(n=>n.id!==e))})}function s2(i){i.pendingCallbacksFlag||(i.pendingCallbacksFlag=!0,setTimeout(()=>{i.pendingCallbacksFlag=!1;const e=i.loaderCallbacks?i.loaderCallbacks.slice(0):[];if(!e.length)return;let t=!1;const s=i.provider,n=i.prefix;e.forEach(r=>{const o=r.icons,a=o.pending.length;o.pending=o.pending.filter(l=>{if(l.prefix!==n)return!0;const h=l.name;if(i.icons[h])o.loaded.push({provider:s,prefix:n,name:h});else if(i.missing.has(h))o.missing.push({provider:s,prefix:n,name:h});else return t=!0,!0;return!1}),o.pending.length!==a&&(t||SI([i],r.id),r.callback(o.loaded.slice(0),o.missing.slice(0),o.pending.slice(0),r.abort))})}))}let n2=0;function r2(i,e,t){const s=n2++,n=SI.bind(null,t,s);if(!e.pending.length)return n;const r={id:s,icons:e,callback:i,abort:n};return t.forEach(o=>{(o.loaderCallbacks||(o.loaderCallbacks=[])).push(r)}),n}const Rd=Object.create(null);function Lm(i,e){Rd[i]=e}function _d(i){return Rd[i]||Rd[""]}function o2(i,e=!0,t=!1){const s=[];return i.forEach(n=>{const r=typeof n=="string"?yl(n,e,t):n;r&&s.push(r)}),s}var a2={resources:[],index:0,timeout:2e3,rotate:750,random:!1,dataAfterTimeout:!1};function l2(i,e,t,s){const n=i.resources.length,r=i.random?Math.floor(Math.random()*n):i.index;let o;if(i.random){let S=i.resources.slice(0);for(o=[];S.length>1;){const _=Math.floor(Math.random()*S.length);o.push(S[_]),S=S.slice(0,_).concat(S.slice(_+1))}o=o.concat(S)}else o=i.resources.slice(r).concat(i.resources.slice(0,r));const a=Date.now();let l="pending",h=0,u,c=null,d=[],f=[];typeof s=="function"&&f.push(s);function p(){c&&(clearTimeout(c),c=null)}function m(){l==="pending"&&(l="aborted"),p(),d.forEach(S=>{S.status==="pending"&&(S.status="aborted")}),d=[]}function g(S,_){_&&(f=[]),typeof S=="function"&&f.push(S)}function E(){return{startTime:a,payload:e,status:l,queriesSent:h,queriesPending:d.length,subscribe:g,abort:m}}function I(){l="failed",f.forEach(S=>{S(void 0,u)})}function v(){d.forEach(S=>{S.status==="pending"&&(S.status="aborted")}),d=[]}function b(S,_,M){const A=_!=="success";switch(d=d.filter(F=>F!==S),l){case"pending":break;case"failed":if(A||!i.dataAfterTimeout)return;break;default:return}if(_==="abort"){u=M,I();return}if(A){u=M,d.length||(o.length?C():I());return}if(p(),v(),!i.random){const F=i.resources.indexOf(S.resource);F!==-1&&F!==i.index&&(i.index=F)}l="completed",f.forEach(F=>{F(M)})}function C(){if(l!=="pending")return;p();const S=o.shift();if(S===void 0){if(d.length){c=setTimeout(()=>{p(),l==="pending"&&(v(),I())},i.timeout);return}I();return}const _={status:"pending",resource:S,callback:(M,A)=>{b(_,M,A)}};d.push(_),h++,c=setTimeout(C,i.rotate),t(S,e,_.callback)}return setTimeout(C),E}function xI(i){const e={...a2,...i};let t=[];function s(){t=t.filter(o=>o().status==="pending")}function n(o,a,l){const h=l2(e,o,a,(u,c)=>{s(),l&&l(u,c)});return t.push(h),h}function r(o){return t.find(a=>o(a))||null}return{query:n,find:r,setIndex:o=>{e.index=o},getIndex:()=>e.index,cleanup:s}}function cp(i){let e;if(typeof i.resources=="string")e=[i.resources];else if(e=i.resources,!(e instanceof Array)||!e.length)return null;return{resources:e,path:i.path||"/",maxURL:i.maxURL||500,rotate:i.rotate||750,timeout:i.timeout||5e3,random:i.random===!0,index:i.index||0,dataAfterTimeout:i.dataAfterTimeout!==!1}}const tu=Object.create(null),Kl=["https://api.simplesvg.com","https://api.unisvg.com"],Ad=[];for(;Kl.length>0;)Kl.length===1||Math.random()>.5?Ad.push(Kl.shift()):Ad.push(Kl.pop());tu[""]=cp({resources:["https://api.iconify.design"].concat(Ad)});function Dm(i,e){const t=cp(e);return t===null?!1:(tu[i]=t,!0)}function iu(i){return tu[i]}function h2(){return Object.keys(tu)}function Um(){}const Uu=Object.create(null);function c2(i){if(!Uu[i]){const e=iu(i);if(!e)return;const t=xI(e),s={config:e,redundancy:t};Uu[i]=s}return Uu[i]}function RI(i,e,t){let s,n;if(typeof i=="string"){const r=_d(i);if(!r)return t(void 0,424),Um;n=r.send;const o=c2(i);o&&(s=o.redundancy)}else{const r=cp(i);if(r){s=xI(r);const o=i.resources?i.resources[0]:"",a=_d(o);a&&(n=a.send)}}return!s||!n?(t(void 0,424),Um):s.query(e,n,t)().abort}const km="iconify2",ja="iconify",_I=ja+"-count",Bm=ja+"-version",AI=36e5,u2=168,d2=50;function Md(i,e){try{return i.getItem(e)}catch{}}function up(i,e,t){try{return i.setItem(e,t),!0}catch{}}function zm(i,e){try{i.removeItem(e)}catch{}}function Fd(i,e){return up(i,_I,e.toString())}function Od(i){return parseInt(Md(i,_I))||0}const Fn={local:!0,session:!0},MI={local:new Set,session:new Set};let dp=!1;function f2(i){dp=i}let Jl=typeof window>"u"?{}:window;function FI(i){const e=i+"Storage";try{if(Jl&&Jl[e]&&typeof Jl[e].length=="number")return Jl[e]}catch{}Fn[i]=!1}function OI(i,e){const t=FI(i);if(!t)return;const s=Md(t,Bm);if(s!==km){if(s){const a=Od(t);for(let l=0;l<a;l++)zm(t,ja+l.toString())}up(t,Bm,km),Fd(t,0);return}const n=Math.floor(Date.now()/AI)-u2,r=a=>{const l=ja+a.toString(),h=Md(t,l);if(typeof h=="string"){try{const u=JSON.parse(h);if(typeof u=="object"&&typeof u.cached=="number"&&u.cached>n&&typeof u.provider=="string"&&typeof u.data=="object"&&typeof u.data.prefix=="string"&&e(u,a))return!0}catch{}zm(t,l)}};let o=Od(t);for(let a=o-1;a>=0;a--)r(a)||(a===o-1?(o--,Fd(t,o)):MI[i].add(a))}function NI(){if(!dp){f2(!0);for(const i in Fn)OI(i,e=>{const t=e.data,s=e.provider,n=t.prefix,r=Hs(s,n);if(!hp(r,t).length)return!1;const o=t.lastModified||-1;return r.lastModifiedCached=r.lastModifiedCached?Math.min(r.lastModifiedCached,o):o,!0})}}function p2(i,e){const t=i.lastModifiedCached;if(t&&t>=e)return t===e;if(i.lastModifiedCached=e,t)for(const s in Fn)OI(s,n=>{const r=n.data;return n.provider!==i.provider||r.prefix!==i.prefix||r.lastModified===e});return!0}function m2(i,e){dp||NI();function t(s){let n;if(!Fn[s]||!(n=FI(s)))return;const r=MI[s];let o;if(r.size)r.delete(o=Array.from(r).shift());else if(o=Od(n),o>=d2||!Fd(n,o+1))return;const a={cached:Math.floor(Date.now()/AI),provider:i.provider,data:e};return up(n,ja+o.toString(),JSON.stringify(a))}e.lastModified&&!p2(i,e.lastModified)||Object.keys(e.icons).length&&(e.not_found&&(e=Object.assign({},e),delete e.not_found),t("local")||t("session"))}function Vm(){}function g2(i){i.iconsLoaderFlag||(i.iconsLoaderFlag=!0,setTimeout(()=>{i.iconsLoaderFlag=!1,s2(i)}))}function E2(i,e){i.iconsToLoad?i.iconsToLoad=i.iconsToLoad.concat(e).sort():i.iconsToLoad=e,i.iconsQueueFlag||(i.iconsQueueFlag=!0,setTimeout(()=>{i.iconsQueueFlag=!1;const{provider:t,prefix:s}=i,n=i.iconsToLoad;delete i.iconsToLoad;let r;!n||!(r=_d(t))||r.prepare(t,s,n).forEach(o=>{RI(t,o,a=>{if(typeof a!="object")o.icons.forEach(l=>{i.missing.add(l)});else try{const l=hp(i,a);if(!l.length)return;const h=i.pendingIcons;h&&l.forEach(u=>{h.delete(u)}),m2(i,a)}catch(l){console.error(l)}g2(i)})})}))}const fp=(i,e)=>{const t=o2(i,!0,TI()),s=i2(t);if(!s.pending.length){let l=!0;return e&&setTimeout(()=>{l&&e(s.loaded,s.missing,s.pending,Vm)}),()=>{l=!1}}const n=Object.create(null),r=[];let o,a;return s.pending.forEach(l=>{const{provider:h,prefix:u}=l;if(u===a&&h===o)return;o=h,a=u,r.push(Hs(h,u));const c=n[h]||(n[h]=Object.create(null));c[u]||(c[u]=[])}),s.pending.forEach(l=>{const{provider:h,prefix:u,name:c}=l,d=Hs(h,u),f=d.pendingIcons||(d.pendingIcons=new Set);f.has(c)||(f.add(c),n[h][u].push(c))}),r.forEach(l=>{const{provider:h,prefix:u}=l;n[h][u].length&&E2(l,n[h][u])}),e?r2(e,s,r):Vm},I2=i=>new Promise((e,t)=>{const s=typeof i=="string"?yl(i,!0):i;if(!s){t(i);return}fp([s||i],n=>{if(n.length&&s){const r=Ya(s);if(r){e({...vl,...r});return}}t(i)})});function b2(i){try{const e=typeof i=="string"?JSON.parse(i):i;if(typeof e.body=="string")return{...e}}catch{}}function v2(i,e){const t=typeof i=="string"?yl(i,!0,!0):null;if(!t){const r=b2(i);return{value:i,data:r}}const s=Ya(t);if(s!==void 0||!t.prefix)return{value:i,name:t,data:s};const n=fp([t],()=>e(i,t,Ya(t)));return{value:i,name:t,loading:n}}function ku(i){return i.hasAttribute("inline")}let PI=!1;try{PI=navigator.vendor.indexOf("Apple")===0}catch{}function y2(i,e){switch(e){case"svg":case"bg":case"mask":return e}return e!=="style"&&(PI||i.indexOf("<a")===-1)?"svg":i.indexOf("currentColor")===-1?"bg":"mask"}const C2=/(-?[0-9.]*[0-9]+[0-9.]*)/g,T2=/^-?[0-9.]*[0-9]+[0-9.]*$/g;function Nd(i,e,t){if(e===1)return i;if(t=t||100,typeof i=="number")return Math.ceil(i*e*t)/t;if(typeof i!="string")return i;const s=i.split(C2);if(s===null||!s.length)return i;const n=[];let r=s.shift(),o=T2.test(r);for(;;){if(o){const a=parseFloat(r);isNaN(a)?n.push(r):n.push(Math.ceil(a*e*t)/t)}else n.push(r);if(r=s.shift(),r===void 0)return n.join("");o=!o}}function w2(i,e="defs"){let t="";const s=i.indexOf("<"+e);for(;s>=0;){const n=i.indexOf(">",s),r=i.indexOf("</"+e);if(n===-1||r===-1)break;const o=i.indexOf(">",r);if(o===-1)break;t+=i.slice(n+1,r).trim(),i=i.slice(0,s).trim()+i.slice(o+1)}return{defs:t,content:i}}function S2(i,e){return i?"<defs>"+i+"</defs>"+e:e}function x2(i,e,t){const s=w2(i);return S2(s.defs,e+s.content+t)}const R2=i=>i==="unset"||i==="undefined"||i==="none";function LI(i,e){const t={...vl,...i},s={...bI,...e},n={left:t.left,top:t.top,width:t.width,height:t.height};let r=t.body;[t,s].forEach(m=>{const g=[],E=m.hFlip,I=m.vFlip;let v=m.rotate;E?I?v+=2:(g.push("translate("+(n.width+n.left).toString()+" "+(0-n.top).toString()+")"),g.push("scale(-1 1)"),n.top=n.left=0):I&&(g.push("translate("+(0-n.left).toString()+" "+(n.height+n.top).toString()+")"),g.push("scale(1 -1)"),n.top=n.left=0);let b;switch(v<0&&(v-=Math.floor(v/4)*4),v=v%4,v){case 1:b=n.height/2+n.top,g.unshift("rotate(90 "+b.toString()+" "+b.toString()+")");break;case 2:g.unshift("rotate(180 "+(n.width/2+n.left).toString()+" "+(n.height/2+n.top).toString()+")");break;case 3:b=n.width/2+n.left,g.unshift("rotate(-90 "+b.toString()+" "+b.toString()+")");break}v%2===1&&(n.left!==n.top&&(b=n.left,n.left=n.top,n.top=b),n.width!==n.height&&(b=n.width,n.width=n.height,n.height=b)),g.length&&(r=x2(r,'<g transform="'+g.join(" ")+'">',"</g>"))});const o=s.width,a=s.height,l=n.width,h=n.height;let u,c;o===null?(c=a===null?"1em":a==="auto"?h:a,u=Nd(c,l/h)):(u=o==="auto"?l:o,c=a===null?Nd(u,h/l):a==="auto"?h:a);const d={},f=(m,g)=>{R2(g)||(d[m]=g.toString())};f("width",u),f("height",c);const p=[n.left,n.top,l,h];return d.viewBox=p.join(" "),{attributes:d,viewBox:p,body:r}}function pp(i,e){let t=i.indexOf("xlink:")===-1?"":' xmlns:xlink="http://www.w3.org/1999/xlink"';for(const s in e)t+=" "+s+'="'+e[s]+'"';return'<svg xmlns="http://www.w3.org/2000/svg"'+t+">"+i+"</svg>"}function _2(i){return i.replace(/"/g,"'").replace(/%/g,"%25").replace(/#/g,"%23").replace(/</g,"%3C").replace(/>/g,"%3E").replace(/\s+/g," ")}function A2(i){return"data:image/svg+xml,"+_2(i)}function DI(i){return'url("'+A2(i)+'")'}const M2=()=>{let i;try{if(i=fetch,typeof i=="function")return i}catch{}};let mc=M2();function F2(i){mc=i}function O2(){return mc}function N2(i,e){const t=iu(i);if(!t)return 0;let s;if(!t.maxURL)s=0;else{let n=0;t.resources.forEach(o=>{n=Math.max(n,o.length)});const r=e+".json?icons=";s=t.maxURL-n-t.path.length-r.length}return s}function P2(i){return i===404}const L2=(i,e,t)=>{const s=[],n=N2(i,e),r="icons";let o={type:r,provider:i,prefix:e,icons:[]},a=0;return t.forEach((l,h)=>{a+=l.length+1,a>=n&&h>0&&(s.push(o),o={type:r,provider:i,prefix:e,icons:[]},a=l.length),o.icons.push(l)}),s.push(o),s};function D2(i){if(typeof i=="string"){const e=iu(i);if(e)return e.path}return"/"}const U2=(i,e,t)=>{if(!mc){t("abort",424);return}let s=D2(e.provider);switch(e.type){case"icons":{const r=e.prefix,o=e.icons.join(","),a=new URLSearchParams({icons:o});s+=r+".json?"+a.toString();break}case"custom":{const r=e.uri;s+=r.slice(0,1)==="/"?r.slice(1):r;break}default:t("abort",400);return}let n=503;mc(i+s).then(r=>{const o=r.status;if(o!==200){setTimeout(()=>{t(P2(o)?"abort":"next",o)});return}return n=501,r.json()}).then(r=>{if(typeof r!="object"||r===null){setTimeout(()=>{r===404?t("abort",r):t("next",n)});return}setTimeout(()=>{t("success",r)})}).catch(()=>{t("next",n)})},k2={prepare:L2,send:U2};function $m(i,e){switch(i){case"local":case"session":Fn[i]=e;break;case"all":for(const t in Fn)Fn[t]=e;break}}const Bu="data-style";let UI="";function B2(i){UI=i}function Hm(i,e){let t=Array.from(i.childNodes).find(s=>s.hasAttribute&&s.hasAttribute(Bu));t||(t=document.createElement("style"),t.setAttribute(Bu,Bu),i.appendChild(t)),t.textContent=":host{display:inline-block;vertical-align:"+(e?"-0.125em":"0")+"}span,svg{display:block}"+UI}function kI(){Lm("",k2),TI(!0);let i;try{i=window}catch{}if(i){if(NI(),i.IconifyPreload!==void 0){const e=i.IconifyPreload,t="Invalid IconifyPreload syntax.";typeof e=="object"&&e!==null&&(e instanceof Array?e:[e]).forEach(s=>{try{(typeof s!="object"||s===null||s instanceof Array||typeof s.icons!="object"||typeof s.prefix!="string"||!Nm(s))&&console.error(t)}catch{console.error(t)}})}if(i.IconifyProviders!==void 0){const e=i.IconifyProviders;if(typeof e=="object"&&e!==null)for(const t in e){const s="IconifyProviders["+t+"] is invalid.";try{const n=e[t];if(typeof n!="object"||!n||n.resources===void 0)continue;Dm(t,n)||console.error(s)}catch{console.error(s)}}}}return{enableCache:e=>$m(e,!0),disableCache:e=>$m(e,!1),iconLoaded:Pm,iconExists:Pm,getIcon:t2,listIcons:e2,addIcon:wI,addCollection:Nm,calculateSize:Nd,buildIcon:LI,iconToHTML:pp,svgToURL:DI,loadIcons:fp,loadIcon:I2,addAPIProvider:Dm,appendCustomStyle:B2,_api:{getAPIConfig:iu,setAPIModule:Lm,sendAPIQuery:RI,setFetch:F2,getFetch:O2,listAPIProviders:h2}}}const Pd={"background-color":"currentColor"},BI={"background-color":"transparent"},Gm={image:"var(--svg)",repeat:"no-repeat",size:"100% 100%"},Ym={"-webkit-mask":Pd,mask:Pd,background:BI};for(const i in Ym){const e=Ym[i];for(const t in Gm)e[i+"-"+t]=Gm[t]}function jm(i){return i?i+(i.match(/^[-0-9.]+$/)?"px":""):"inherit"}function z2(i,e,t){const s=document.createElement("span");let n=i.body;n.indexOf("<a")!==-1&&(n+="<!-- "+Date.now()+" -->");const r=i.attributes,o=pp(n,{...r,width:e.width+"",height:e.height+""}),a=DI(o),l=s.style,h={"--svg":a,width:jm(r.width),height:jm(r.height),...t?Pd:BI};for(const u in h)l.setProperty(u,h[u]);return s}let wa;function V2(){try{wa=window.trustedTypes.createPolicy("iconify",{createHTML:i=>i})}catch{wa=null}}function $2(i){return wa===void 0&&V2(),wa?wa.createHTML(i):i}function H2(i){const e=document.createElement("span"),t=i.attributes;let s="";t.width||(s="width: inherit;"),t.height||(s+="height: inherit;"),s&&(t.style=s);const n=pp(i.body,t);return e.innerHTML=$2(n),e.firstChild}function Ld(i){return Array.from(i.childNodes).find(e=>{const t=e.tagName&&e.tagName.toUpperCase();return t==="SPAN"||t==="SVG"})}function Wm(i,e){const t=e.icon.data,s=e.customisations,n=LI(t,s);s.preserveAspectRatio&&(n.attributes.preserveAspectRatio=s.preserveAspectRatio);const r=e.renderedMode;let o;switch(r){case"svg":o=H2(n);break;default:o=z2(n,{...vl,...t},r==="mask")}const a=Ld(i);a?o.tagName==="SPAN"&&a.tagName===o.tagName?a.setAttribute("style",o.getAttribute("style")):i.replaceChild(o,a):i.appendChild(o)}function Xm(i,e,t){const s=t&&(t.rendered?t:t.lastRender);return{rendered:!1,inline:e,icon:i,lastRender:s}}function G2(i="iconify-icon"){let e,t;try{e=window.customElements,t=window.HTMLElement}catch{return}if(!e||!t)return;const s=e.get(i);if(s)return s;const n=["icon","mode","inline","observe","width","height","rotate","flip"],r=class extends t{constructor(){super(),dn(this,"_shadowRoot"),dn(this,"_initialised",!1),dn(this,"_state"),dn(this,"_checkQueued",!1),dn(this,"_connected",!1),dn(this,"_observer",null),dn(this,"_visible",!0);const a=this._shadowRoot=this.attachShadow({mode:"open"}),l=ku(this);Hm(a,l),this._state=Xm({value:""},l),this._queueCheck()}connectedCallback(){this._connected=!0,this.startObserver()}disconnectedCallback(){this._connected=!1,this.stopObserver()}static get observedAttributes(){return n.slice(0)}attributeChangedCallback(a){switch(a){case"inline":{const l=ku(this),h=this._state;l!==h.inline&&(h.inline=l,Hm(this._shadowRoot,l));break}case"observer":{this.observer?this.startObserver():this.stopObserver();break}default:this._queueCheck()}}get icon(){const a=this.getAttribute("icon");if(a&&a.slice(0,1)==="{")try{return JSON.parse(a)}catch{}return a}set icon(a){typeof a=="object"&&(a=JSON.stringify(a)),this.setAttribute("icon",a)}get inline(){return ku(this)}set inline(a){a?this.setAttribute("inline","true"):this.removeAttribute("inline")}get observer(){return this.hasAttribute("observer")}set observer(a){a?this.setAttribute("observer","true"):this.removeAttribute("observer")}restartAnimation(){const a=this._state;if(a.rendered){const l=this._shadowRoot;if(a.renderedMode==="svg")try{l.lastChild.setCurrentTime(0);return}catch{}Wm(l,a)}}get status(){const a=this._state;return a.rendered?"rendered":a.icon.data===null?"failed":"loading"}_queueCheck(){this._checkQueued||(this._checkQueued=!0,setTimeout(()=>{this._check()}))}_check(){if(!this._checkQueued)return;this._checkQueued=!1;const a=this._state,l=this.getAttribute("icon");if(l!==a.icon.value){this._iconChanged(l);return}if(!a.rendered||!this._visible)return;const h=this.getAttribute("mode"),u=Fm(this);(a.attrMode!==h||Ww(a.customisations,u)||!Ld(this._shadowRoot))&&this._renderIcon(a.icon,u,h)}_iconChanged(a){const l=v2(a,(h,u,c)=>{const d=this._state;if(d.rendered||this.getAttribute("icon")!==h)return;const f={value:h,name:u,data:c};f.data?this._gotIconData(f):d.icon=f});l.data?this._gotIconData(l):this._state=Xm(l,this._state.inline,this._state)}_forceRender(){if(!this._visible){const a=Ld(this._shadowRoot);a&&this._shadowRoot.removeChild(a);return}this._queueCheck()}_gotIconData(a){this._checkQueued=!1,this._renderIcon(a,Fm(this),this.getAttribute("mode"))}_renderIcon(a,l,h){const u=y2(a.data.body,h),c=this._state.inline;Wm(this._shadowRoot,this._state={rendered:!0,icon:a,inline:c,customisations:l,attrMode:h,renderedMode:u})}startObserver(){if(!this._observer)try{this._observer=new IntersectionObserver(a=>{const l=a.some(h=>h.isIntersecting);l!==this._visible&&(this._visible=l,this._forceRender())}),this._observer.observe(this)}catch{if(this._observer){try{this._observer.disconnect()}catch{}this._observer=null}}}stopObserver(){this._observer&&(this._observer.disconnect(),this._observer=null,this._visible=!0,this._connected&&this._forceRender())}};n.forEach(a=>{a in r.prototype||Object.defineProperty(r.prototype,a,{get:function(){return this.getAttribute(a)},set:function(l){l!==null?this.setAttribute(a,l):this.removeAttribute(a)}})});const o=kI();for(const a in o)r[a]=r.prototype[a]=o[a];return e.define(i,r),r}G2()||kI();const Y2=ke`
  ::-webkit-scrollbar {
    width: 0.4rem;
    height: 0.4rem;
    overflow: hidden;
  }

  ::-webkit-scrollbar-thumb {
    border-radius: 0.25rem;
    background-color: var(
      --bim-scrollbar--c,
      color-mix(in lab, var(--bim-ui_main-base), white 15%)
    );
  }

  ::-webkit-scrollbar-track {
    background-color: var(--bim-scrollbar--bgc, var(--bim-ui_bg-base));
  }
`,j2=ke`
  :root {
    /* Grayscale Colors */
    --bim-ui_gray-0: hsl(210 10% 5%);
    --bim-ui_gray-1: hsl(210 10% 10%);
    --bim-ui_gray-2: hsl(210 10% 20%);
    --bim-ui_gray-3: hsl(210 10% 30%);
    --bim-ui_gray-4: hsl(210 10% 40%);
    --bim-ui_gray-6: hsl(210 10% 60%);
    --bim-ui_gray-7: hsl(210 10% 70%);
    --bim-ui_gray-8: hsl(210 10% 80%);
    --bim-ui_gray-9: hsl(210 10% 90%);
    --bim-ui_gray-10: hsl(210 10% 95%);

    /* Brand Colors */
    --bim-ui_main-base: #6528d7;
    --bim-ui_accent-base: #bcf124;

    /* Brand Colors Contrasts */
    --bim-ui_main-contrast: var(--bim-ui_gray-10);
    --bim-ui_accent-contrast: var(--bim-ui_gray-0);

    /* Sizes */
    --bim-ui_size-4xs: 0.375rem;
    --bim-ui_size-3xs: 0.5rem;
    --bim-ui_size-2xs: 0.625rem;
    --bim-ui_size-xs: 0.75rem;
    --bim-ui_size-sm: 0.875rem;
    --bim-ui_size-base: 1rem;
    --bim-ui_size-lg: 1.125rem;
    --bim-ui_size-xl: 1.25rem;
    --bim-ui_size-2xl: 1.375rem;
    --bim-ui_size-3xl: 1.5rem;
    --bim-ui_size-4xl: 1.625rem;
    --bim-ui_size-5xl: 1.75rem;
    --bim-ui_size-6xl: 1.875rem;
    --bim-ui_size-7xl: 2rem;
    --bim-ui_size-8xl: 2.125rem;
    --bim-ui_size-9xl: 2.25rem;
  }

  /* Background Colors */
  @media (prefers-color-scheme: dark) {
    :root {
      --bim-ui_bg-base: var(--bim-ui_gray-0);
      --bim-ui_bg-contrast-10: var(--bim-ui_gray-1);
      --bim-ui_bg-contrast-20: var(--bim-ui_gray-2);
      --bim-ui_bg-contrast-30: var(--bim-ui_gray-3);
      --bim-ui_bg-contrast-40: var(--bim-ui_gray-4);
      --bim-ui_bg-contrast-60: var(--bim-ui_gray-6);
      --bim-ui_bg-contrast-80: var(--bim-ui_gray-8);
      --bim-ui_bg-contrast-100: var(--bim-ui_gray-10);
    }
  }

  @media (prefers-color-scheme: light) {
    :root {
      --bim-ui_bg-base: var(--bim-ui_gray-10);
      --bim-ui_bg-contrast-10: var(--bim-ui_gray-9);
      --bim-ui_bg-contrast-20: var(--bim-ui_gray-8);
      --bim-ui_bg-contrast-30: var(--bim-ui_gray-7);
      --bim-ui_bg-contrast-40: var(--bim-ui_gray-6);
      --bim-ui_bg-contrast-60: var(--bim-ui_gray-4);
      --bim-ui_bg-contrast-80: var(--bim-ui_gray-2);
      --bim-ui_bg-contrast-100: var(--bim-ui_gray-0);
      --bim-ui_accent-base: #6528d7;
    }
  }

  html.bim-ui-dark {
    --bim-ui_bg-base: var(--bim-ui_gray-0);
    --bim-ui_bg-contrast-10: var(--bim-ui_gray-1);
    --bim-ui_bg-contrast-20: var(--bim-ui_gray-2);
    --bim-ui_bg-contrast-30: var(--bim-ui_gray-3);
    --bim-ui_bg-contrast-40: var(--bim-ui_gray-4);
    --bim-ui_bg-contrast-60: var(--bim-ui_gray-6);
    --bim-ui_bg-contrast-80: var(--bim-ui_gray-8);
    --bim-ui_bg-contrast-100: var(--bim-ui_gray-10);
  }

  html.bim-ui-light {
    --bim-ui_bg-base: var(--bim-ui_gray-10);
    --bim-ui_bg-contrast-10: var(--bim-ui_gray-9);
    --bim-ui_bg-contrast-20: var(--bim-ui_gray-8);
    --bim-ui_bg-contrast-30: var(--bim-ui_gray-7);
    --bim-ui_bg-contrast-40: var(--bim-ui_gray-6);
    --bim-ui_bg-contrast-60: var(--bim-ui_gray-4);
    --bim-ui_bg-contrast-80: var(--bim-ui_gray-2);
    --bim-ui_bg-contrast-100: var(--bim-ui_gray-0);
    --bim-ui_accent-base: #6528d7;
  }

  [data-context-dialog]::backdrop {
    background-color: transparent;
  }
`,en={scrollbar:Y2,globalStyles:j2},zI=class _e{static set config(e){this._config={..._e._config,...e}}static get config(){return _e._config}static addGlobalStyles(){let e=document.querySelector("style[id='bim-ui']");if(e)return;e=document.createElement("style"),e.id="bim-ui",e.textContent=en.globalStyles.cssText;const t=document.head.firstChild;t?document.head.insertBefore(e,t):document.head.append(e)}static defineCustomElement(e,t){customElements.get(e)||customElements.define(e,t)}static registerComponents(){_e.init()}static init(){_e.addGlobalStyles(),_e.defineCustomElement("bim-button",K2),_e.defineCustomElement("bim-checkbox",bo),_e.defineCustomElement("bim-color-input",Qn),_e.defineCustomElement("bim-context-menu",Ud),_e.defineCustomElement("bim-dropdown",vs),_e.defineCustomElement("bim-grid",gp),_e.defineCustomElement("bim-icon",oS),_e.defineCustomElement("bim-input",Tl),_e.defineCustomElement("bim-label",yo),_e.defineCustomElement("bim-number-input",Wt),_e.defineCustomElement("bim-option",ut),_e.defineCustomElement("bim-panel",Kn),_e.defineCustomElement("bim-panel-section",Co),_e.defineCustomElement("bim-selector",To),_e.defineCustomElement("bim-table",fi),_e.defineCustomElement("bim-tabs",er),_e.defineCustomElement("bim-tab",ei),_e.defineCustomElement("bim-table-cell",ib),_e.defineCustomElement("bim-table-children",nb),_e.defineCustomElement("bim-table-group",ob),_e.defineCustomElement("bim-table-row",Jn),_e.defineCustomElement("bim-text-input",qi),_e.defineCustomElement("bim-toolbar",lu),_e.defineCustomElement("bim-toolbar-group",ou),_e.defineCustomElement("bim-toolbar-section",xo),_e.defineCustomElement("bim-viewport",Eb)}static newRandomId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";let t="";for(let s=0;s<10;s++){const n=Math.floor(Math.random()*e.length);t+=e.charAt(n)}return t}};zI._config={sectionLabelOnVerticalToolbar:!1};let VI=zI,gc=class extends Pe{constructor(){super(...arguments),this._lazyLoadObserver=null,this._visibleElements=[],this.ELEMENTS_BEFORE_OBSERVER=20,this.useObserver=!1,this.elements=new Set,this.observe=e=>{if(!this.useObserver)return;for(const s of e)this.elements.add(s);const t=e.slice(this.ELEMENTS_BEFORE_OBSERVER);for(const s of t)s.remove();this.observeLastElement()}}set visibleElements(e){this._visibleElements=this.useObserver?e:[],this.requestUpdate()}get visibleElements(){return this._visibleElements}getLazyObserver(){if(!this.useObserver)return null;if(this._lazyLoadObserver)return this._lazyLoadObserver;const e=new IntersectionObserver(t=>{const s=t[0];if(!s.isIntersecting)return;const n=s.target;e.unobserve(n);const r=this.ELEMENTS_BEFORE_OBSERVER+this.visibleElements.length,o=[...this.elements][r];o&&(this.visibleElements=[...this.visibleElements,o],e.observe(o))},{threshold:.5});return e}observeLastElement(){const e=this.getLazyObserver();if(!e)return;const t=this.ELEMENTS_BEFORE_OBSERVER+this.visibleElements.length-1,s=[...this.elements][t];s&&e.observe(s)}resetVisibleElements(){const e=this.getLazyObserver();if(e){for(const t of this.elements)e.unobserve(t);this.visibleElements=[],this.observeLastElement()}}static create(e,t){const s=document.createDocumentFragment();if(e.length===0)return Jr(e(),s),s.firstElementChild;if(!t)throw new Error("UIComponent: Initial state is required for statefull components.");let n=t;const r=e,o=l=>(n={...n,...l},Jr(r(n,o),s),n);o(t);const a=()=>n;return[s.firstElementChild,o,a]}};const Ec=(i,e={},t=!0)=>{let s={};for(const n of i.children){const r=n,o=r.getAttribute("name")||r.getAttribute("label"),a=e[o];if(o){if("value"in r&&typeof r.value<"u"&&r.value!==null){const l=r.value;if(typeof l=="object"&&!Array.isArray(l)&&Object.keys(l).length===0)continue;s[o]=a?a(r.value):r.value}else if(t){const l=Ec(r,e);if(Object.keys(l).length===0)continue;s[o]=a?a(l):l}}else t&&(s={...s,...Ec(r,e)})}return s},su=i=>i==="true"||i==="false"?i==="true":i&&!isNaN(Number(i))&&i.trim()!==""?Number(i):i,W2=[">=","<=","=",">","<","?","/","#"];function qm(i){const e=W2.find(o=>i.split(o).length===2),t=i.split(e).map(o=>o.trim()),[s,n]=t,r=n.startsWith("'")&&n.endsWith("'")?n.replace(/'/g,""):su(n);return{key:s,condition:e,value:r}}const Dd=i=>{try{const e=[],t=i.split(/&(?![^()]*\))/).map(s=>s.trim());for(const s of t){const n=!s.startsWith("(")&&!s.endsWith(")"),r=s.startsWith("(")&&s.endsWith(")");if(n){const o=qm(s);e.push(o)}if(r){const o={operator:"&",queries:s.replace(/^(\()|(\))$/g,"").split("&").map(a=>a.trim()).map((a,l)=>{const h=qm(a);return l>0&&(h.operator="&"),h})};e.push(o)}}return e}catch{return null}},Zm=(i,e,t)=>{let s=!1;switch(e){case"=":s=i===t;break;case"?":s=String(i).includes(String(t));break;case"<":(typeof i=="number"||typeof t=="number")&&(s=i<t);break;case"<=":(typeof i=="number"||typeof t=="number")&&(s=i<=t);break;case">":(typeof i=="number"||typeof t=="number")&&(s=i>t);break;case">=":(typeof i=="number"||typeof t=="number")&&(s=i>=t);break;case"/":s=String(i).startsWith(String(t));break}return s};var X2=Object.defineProperty,q2=Object.getOwnPropertyDescriptor,$I=(i,e,t,s)=>{for(var n=q2(e,t),r=i.length-1,o;r>=0;r--)(o=i[r])&&(n=o(e,t,n)||n);return n&&X2(e,t,n),n},at;const mp=(at=class extends Pe{constructor(){super(...arguments),this._previousContainer=null,this._visible=!1}get placement(){return this._placement}set placement(i){this._placement=i,this.updatePosition()}static removeMenus(){for(const i of at.menus)i instanceof at&&(i.visible=!1);at.dialog.close(),at.dialog.remove()}get visible(){return this._visible}set visible(i){var e;this._visible=i,i?(at.dialog.parentElement||document.body.append(at.dialog),this._previousContainer=this.parentElement,at.dialog.style.top=`${window.scrollY||document.documentElement.scrollTop}px`,at.dialog.append(this),at.dialog.showModal(),this.updatePosition(),this.dispatchEvent(new Event("visible"))):((e=this._previousContainer)==null||e.append(this),this._previousContainer=null,this.dispatchEvent(new Event("hidden")))}async updatePosition(){if(!(this.visible&&this._previousContainer))return;const i=this.placement??"right",e=await hI(this._previousContainer,this,{placement:i,middleware:[qE(10),lI(),aI(),oI({padding:5})]}),{x:t,y:s}=e;this.style.left=`${t}px`,this.style.top=`${s}px`}connectedCallback(){super.connectedCallback(),at.menus.push(this)}render(){return de` <slot></slot> `}},at.styles=[en.scrollbar,ke`
      :host {
        pointer-events: auto;
        position: absolute;
        top: 0;
        left: 0;
        z-index: 999;
        overflow: auto;
        max-height: 20rem;
        min-width: 3rem;
        flex-direction: column;
        box-shadow: 1px 2px 8px 2px rgba(0, 0, 0, 0.15);
        padding: 0.5rem;
        border-radius: var(--bim-ui_size-4xs);
        display: flex;
        background-color: var(
          --bim-context-menu--bgc,
          var(--bim-ui_bg-contrast-20)
        );
      }

      :host(:not([visible])) {
        display: none;
      }
    `],at.dialog=gc.create(()=>de` <dialog
      @click=${i=>{i.target===at.dialog&&at.removeMenus()}}
      @cancel=${()=>at.removeMenus()}
      data-context-dialog
      style="
      width: 0;
      height: 0;
      position: relative;
      padding: 0;
      border: none;
      outline: none;
      margin: none;
      overflow: visible;
      background-color: transparent;
    "
    ></dialog>`),at.menus=[],at);$I([Z({type:String,reflect:!0})],mp.prototype,"placement");$I([Z({type:Boolean,reflect:!0})],mp.prototype,"visible");let Ud=mp;var Z2=Object.defineProperty,Q2=Object.getOwnPropertyDescriptor,Ti=(i,e,t,s)=>{for(var n=s>1?void 0:s?Q2(e,t):e,r=i.length-1,o;r>=0;r--)(o=i[r])&&(n=(s?o(e,t,n):o(n))||n);return s&&n&&Z2(e,t,n),n},Wo;const ui=(Wo=class extends Pe{constructor(){super(),this.labelHidden=!1,this.active=!1,this.disabled=!1,this.vertical=!1,this.tooltipVisible=!1,this._stateBeforeLoading={disabled:!1,icon:""},this._loading=!1,this._parent=eo(),this._tooltip=eo(),this._mouseLeave=!1,this.onClick=i=>{i.stopPropagation(),this.disabled||this.dispatchEvent(new Event("click"))},this.showContextMenu=()=>{const i=this._contextMenu;if(i){const e=this.getAttribute("data-context-group");e&&i.setAttribute("data-context-group",e),this.closeNestedContexts();const t=VI.newRandomId();for(const s of i.children)s instanceof Wo&&s.setAttribute("data-context-group",t);i.visible=!0}},this.mouseLeave=!0}set loading(i){if(this._loading=i,i)this._stateBeforeLoading={disabled:this.disabled,icon:this.icon},this.disabled=i,this.icon="eos-icons:loading";else{const{disabled:e,icon:t}=this._stateBeforeLoading;this.disabled=e,this.icon=t}}get loading(){return this._loading}set mouseLeave(i){this._mouseLeave=i,i&&(this.tooltipVisible=!1,clearTimeout(this.timeoutID))}get mouseLeave(){return this._mouseLeave}computeTooltipPosition(){const{value:i}=this._parent,{value:e}=this._tooltip;i&&e&&hI(i,e,{placement:"bottom",middleware:[qE(10),lI(),aI(),oI({padding:5})]}).then(t=>{const{x:s,y:n}=t;Object.assign(e.style,{left:`${s}px`,top:`${n}px`})})}onMouseEnter(){if(!(this.tooltipTitle||this.tooltipText))return;this.mouseLeave=!1;const i=this.tooltipTime??700;this.timeoutID=setTimeout(()=>{this.mouseLeave||(this.computeTooltipPosition(),this.tooltipVisible=!0)},i)}closeNestedContexts(){const i=this.getAttribute("data-context-group");if(i)for(const e of Ud.dialog.children){const t=e.getAttribute("data-context-group");if(e instanceof Ud&&t===i){e.visible=!1,e.removeAttribute("data-context-group");for(const s of e.children)s instanceof Wo&&(s.closeNestedContexts(),s.removeAttribute("data-context-group"))}}}click(){this.disabled||super.click()}get _contextMenu(){return this.querySelector("bim-context-menu")}connectedCallback(){super.connectedCallback(),this.addEventListener("click",this.showContextMenu)}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener("click",this.showContextMenu)}render(){const i=de`
      <div ${to(this._tooltip)} class="tooltip">
        ${this.tooltipTitle?de`<p style="text-wrap: nowrap;">
              <strong>${this.tooltipTitle}</strong>
            </p>`:null}
        ${this.tooltipText?de`<p style="width: 9rem;">${this.tooltipText}</p>`:null}
      </div>
    `,e=de`<svg
      xmlns="http://www.w3.org/2000/svg"
      height="1.125rem"
      viewBox="0 0 24 24"
      width="1.125rem"
      style="fill: var(--bim-label--c)"
    >
      <path d="M0 0h24v24H0V0z" fill="none" />
      <path d="M7.41 8.59 12 13.17l4.59-4.58L18 10l-6 6-6-6 1.41-1.41z" />
    </svg>`;return de`
      <div ${to(this._parent)} class="parent" @click=${this.onClick}>
        ${this.label||this.icon?de`
              <div
                class="button"
                @mouseenter=${this.onMouseEnter}
                @mouseleave=${()=>this.mouseLeave=!0}
              >
                <bim-label
                  .icon=${this.icon}
                  .vertical=${this.vertical}
                  .labelHidden=${this.labelHidden}
                  >${this.label}${this.label&&this._contextMenu?e:null}</bim-label
                >
              </div>
            `:null}
        ${this.tooltipTitle||this.tooltipText?i:null}
      </div>
      <slot></slot>
    `}},Wo.styles=ke`
    :host {
      --bim-label--c: var(--bim-ui_bg-contrast-100, white);
      display: block;
      flex: 1;
      pointer-events: none;
      background-color: var(--bim-button--bgc, var(--bim-ui_bg-contrast-20));
      border-radius: var(--bim-ui_size-4xs);
      transition: all 0.15s;
    }

    :host(:not([disabled]):hover) {
      cursor: pointer;
    }

    bim-label {
      pointer-events: none;
    }

    .parent {
      --bim-icon--c: var(--bim-label--c);
      position: relative;
      display: flex;
      height: 100%;
      user-select: none;
      row-gap: 0.125rem;
      min-height: var(--bim-ui_size-5xl);
      min-width: var(--bim-ui_size-5xl);
    }

    .button,
    .children {
      box-sizing: border-box;
      display: flex;
      align-items: center;
      justify-content: center;
      pointer-events: auto;
    }

    .children {
      padding: 0 0.375rem;
      position: absolute;
      height: 100%;
      right: 0;
    }

    :host(:not([label-hidden])[icon][vertical]) .parent {
      min-height: 2.5rem;
    }

    .button {
      flex-grow: 1;
    }

    :host(:not([label-hidden])[label]) .button {
      justify-content: var(--bim-button--jc, center);
    }

    :host(:hover),
    :host([active]) {
      --bim-label--c: var(--bim-ui_main-contrast);
      background-color: var(--bim-ui_main-base);
    }

    :host(:not([label]):not([icon])) .children {
      flex: 1;
    }

    :host([vertical]) .parent {
      justify-content: center;
    }

    :host(:not([label-hidden])[label]) .button {
      padding: 0 0.5rem;
    }

    :host([disabled]) {
      --bim-label--c: var(--bim-ui_bg-contrast-80) !important;
      background-color: gray !important;
    }

    ::slotted(bim-button) {
      --bim-icon--fz: var(--bim-ui_size-base);
      --bim-button--bdrs: var(--bim-ui_size-4xs);
      --bim-button--olw: 0;
      --bim-button--olc: transparent;
    }

    .tooltip {
      position: absolute;
      padding: 0.75rem;
      z-index: 99;
      display: flex;
      flex-flow: column;
      row-gap: 0.375rem;
      box-shadow: 0 0 10px 3px rgba(0 0 0 / 20%);
      outline: 1px solid var(--bim-ui_bg-contrast-40);
      font-size: var(--bim-ui_size-xs);
      border-radius: var(--bim-ui_size-4xs);
      background-color: var(--bim-ui_bg-contrast-20);
      color: var(--bim-ui_bg-contrast-100);
    }

    .tooltip p {
      margin: 0;
      padding: 0;
    }

    :host(:not([tooltip-visible])) .tooltip {
      display: none;
    }
  `,Wo);Ti([Z({type:String,reflect:!0})],ui.prototype,"label",2);Ti([Z({type:Boolean,attribute:"label-hidden",reflect:!0})],ui.prototype,"labelHidden",2);Ti([Z({type:Boolean,reflect:!0})],ui.prototype,"active",2);Ti([Z({type:Boolean,reflect:!0,attribute:"disabled"})],ui.prototype,"disabled",2);Ti([Z({type:String,reflect:!0})],ui.prototype,"icon",2);Ti([Z({type:Boolean,reflect:!0})],ui.prototype,"vertical",2);Ti([Z({type:Number,attribute:"tooltip-time",reflect:!0})],ui.prototype,"tooltipTime",2);Ti([Z({type:Boolean,attribute:"tooltip-visible",reflect:!0})],ui.prototype,"tooltipVisible",2);Ti([Z({type:String,attribute:"tooltip-title",reflect:!0})],ui.prototype,"tooltipTitle",2);Ti([Z({type:String,attribute:"tooltip-text",reflect:!0})],ui.prototype,"tooltipText",2);Ti([Z({type:Boolean,reflect:!0})],ui.prototype,"loading",1);let K2=ui;var J2=Object.defineProperty,Cl=(i,e,t,s)=>{for(var n=void 0,r=i.length-1,o;r>=0;r--)(o=i[r])&&(n=o(e,t,n)||n);return n&&J2(e,t,n),n};const HI=class extends Pe{constructor(){super(...arguments),this.checked=!1,this.inverted=!1,this.onValueChange=new Event("change")}get value(){return this.checked}onChange(e){e.stopPropagation(),this.checked=e.target.checked,this.dispatchEvent(this.onValueChange)}render(){return de`
      <div class="parent">
        ${this.label?de`<bim-label .icon="${this.icon}">${this.label}</bim-label> `:null}
        <input
          type="checkbox"
          aria-label=${this.label||this.name||"Checkbox Input"}
          @change="${this.onChange}"
          .checked="${this.checked}"
        />
      </div>
    `}};HI.styles=ke`
    :host {
      display: block;
    }

    .parent {
      display: flex;
      justify-content: space-between;
      height: 1.75rem;
      column-gap: 0.25rem;
      width: 100%;
      align-items: center;
      transition: all 0.15s;
    }

    :host([inverted]) .parent {
      flex-direction: row-reverse;
      justify-content: start;
    }

    input {
      height: 1rem;
      width: 1rem;
      cursor: pointer;
      border: none;
      outline: none;
      accent-color: var(--bim-checkbox--c, var(--bim-ui_main-base));
      transition: all 0.15s;
    }

    input:focus {
      outline: var(--bim-checkbox--olw, 2px) solid
        var(--bim-checkbox--olc, var(--bim-ui_accent-base));
    }
  `;let bo=HI;Cl([Z({type:String,reflect:!0})],bo.prototype,"icon");Cl([Z({type:String,reflect:!0})],bo.prototype,"name");Cl([Z({type:String,reflect:!0})],bo.prototype,"label");Cl([Z({type:Boolean,reflect:!0})],bo.prototype,"checked");Cl([Z({type:Boolean,reflect:!0})],bo.prototype,"inverted");var eS=Object.defineProperty,vo=(i,e,t,s)=>{for(var n=void 0,r=i.length-1,o;r>=0;r--)(o=i[r])&&(n=o(e,t,n)||n);return n&&eS(e,t,n),n};const GI=class extends Pe{constructor(){super(...arguments),this.vertical=!1,this.color="#bcf124",this._colorInput=eo(),this._textInput=eo(),this.onValueChange=new Event("input"),this.onOpacityInput=e=>{const t=e.target;this.opacity=t.value,this.dispatchEvent(this.onValueChange)}}set value(e){const{color:t,opacity:s}=e;this.color=t,s&&(this.opacity=s)}get value(){const e={color:this.color};return this.opacity&&(e.opacity=this.opacity),e}onColorInput(e){e.stopPropagation();const{value:t}=this._colorInput;t&&(this.color=t.value,this.dispatchEvent(this.onValueChange))}onTextInput(e){e.stopPropagation();const{value:t}=this._textInput;if(!t)return;const{value:s}=t;let n=s.replace(/[^a-fA-F0-9]/g,"");n.startsWith("#")||(n=`#${n}`),t.value=n.slice(0,7),t.value.length===7&&(this.color=t.value,this.dispatchEvent(this.onValueChange))}focus(){const{value:e}=this._colorInput;e&&e.click()}render(){return de`
      <div class="parent">
        <bim-input
          .label=${this.label}
          .icon=${this.icon}
          .vertical="${this.vertical}"
        >
          <div class="color-container">
            <div
              style="display: flex; align-items: center; gap: .375rem; height: 100%; flex: 1; padding: 0 0.5rem;"
            >
              <input
                ${to(this._colorInput)}
                @input="${this.onColorInput}"
                type="color"
                aria-label=${this.label||this.name||"Color Input"}
                value="${this.color}"
              />
              <div
                @click=${this.focus}
                class="sample"
                style="background-color: ${this.color}"
              ></div>
              <input
                ${to(this._textInput)}
                @input="${this.onTextInput}"
                value="${this.color}"
                type="text"
                aria-label=${this.label||this.name||"Text Color Input"}
              />
            </div>
            ${this.opacity!==void 0?de`<bim-number-input
                  @change=${this.onOpacityInput}
                  slider
                  suffix="%"
                  min="0"
                  value=${this.opacity}
                  max="100"
                ></bim-number-input>`:null}
          </div>
        </bim-input>
      </div>
    `}};GI.styles=ke`
    :host {
      --bim-input--bgc: var(--bim-ui_bg-contrast-20);
      flex: 1;
      display: block;
    }

    :host(:focus) {
      --bim-input--olw: var(--bim-number-input--olw, 2px);
      --bim-input--olc: var(--bim-ui_accent-base);
    }

    .parent {
      display: flex;
      gap: 0.375rem;
    }

    .color-container {
      position: relative;
      outline: none;
      display: flex;
      height: 100%;
      gap: 0.5rem;
      justify-content: flex-start;
      align-items: center;
      flex: 1;
      border-radius: var(--bim-color-input--bdrs, var(--bim-ui_size-4xs));
    }

    .color-container input[type="color"] {
      position: absolute;
      bottom: -0.25rem;
      visibility: hidden;
      width: 0;
      height: 0;
    }

    .color-container .sample {
      width: 1rem;
      height: 1rem;
      border-radius: 0.125rem;
      background-color: #fff;
    }

    .color-container input[type="text"] {
      height: 100%;
      flex: 1;
      width: 3.25rem;
      text-transform: uppercase;
      font-size: 0.75rem;
      background-color: transparent;
      padding: 0%;
      outline: none;
      border: none;
      color: var(--bim-color-input--c, var(--bim-ui_bg-contrast-100));
    }

    bim-number-input {
      flex-grow: 0;
    }
  `;let Qn=GI;vo([Z({type:String,reflect:!0})],Qn.prototype,"name");vo([Z({type:String,reflect:!0})],Qn.prototype,"label");vo([Z({type:String,reflect:!0})],Qn.prototype,"icon");vo([Z({type:Boolean,reflect:!0})],Qn.prototype,"vertical");vo([Z({type:Number,reflect:!0})],Qn.prototype,"opacity");vo([Z({type:String,reflect:!0})],Qn.prototype,"color");var tS=Object.defineProperty,iS=Object.getOwnPropertyDescriptor,tn=(i,e,t,s)=>{for(var n=s>1?void 0:s?iS(e,t):e,r=i.length-1,o;r>=0;r--)(o=i[r])&&(n=(s?o(e,t,n):o(n))||n);return s&&n&&tS(e,t,n),n};const YI=class extends Pe{constructor(){super(...arguments),this.checked=!1,this.checkbox=!1,this.noMark=!1,this.vertical=!1}get value(){return this._value!==void 0?this._value:this.label?su(this.label):this.label}set value(e){this._value=e}render(){return de`
      <div class="parent" .title=${this.label??""}>
        ${this.img||this.icon||this.label?de` <div style="display: flex; column-gap: 0.375rem">
              ${this.checkbox&&!this.noMark?de`<bim-checkbox
                    style="pointer-events: none"
                    .checked=${this.checked}
                  ></bim-checkbox>`:null}
              <bim-label
                .vertical=${this.vertical}
                .icon=${this.icon}
                .img=${this.img}
                >${this.label}</bim-label
              >
            </div>`:null}
        ${!this.checkbox&&!this.noMark&&this.checked?de`<svg
              xmlns="http://www.w3.org/2000/svg"
              height="1.125rem"
              viewBox="0 0 24 24"
              width="1.125rem"
              fill="#FFFFFF"
            >
              <path d="M0 0h24v24H0z" fill="none" />
              <path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z" />
            </svg>`:null}
        <slot></slot>
      </div>
    `}};YI.styles=ke`
    :host {
      --bim-label--c: var(--bim-ui_bg-contrast-100);
      display: block;
      box-sizing: border-box;
      flex: 1;
      padding: 0rem 0.5rem;
      border-radius: var(--bim-ui_size-4xs);
      transition: all 0.15s;
    }

    :host(:hover) {
      cursor: pointer;
      background-color: color-mix(
        in lab,
        var(--bim-selector--bgc, var(--bim-ui_bg-contrast-20)),
        var(--bim-ui_main-base) 10%
      );
    }

    :host([checked]) {
      --bim-label--c: color-mix(in lab, var(--bim-ui_main-base), white 30%);
    }

    :host([checked]) svg {
      fill: color-mix(in lab, var(--bim-ui_main-base), white 30%);
    }

    .parent {
      box-sizing: border-box;
      display: flex;
      justify-content: var(--bim-option--jc, space-between);
      column-gap: 0.5rem;
      align-items: center;
      min-height: 1.75rem;
      height: 100%;
    }

    input {
      height: 1rem;
      width: 1rem;
      cursor: pointer;
      border: none;
      outline: none;
      accent-color: var(--bim-checkbox--c, var(--bim-ui_main-base));
    }

    input:focus {
      outline: var(--bim-checkbox--olw, 2px) solid
        var(--bim-checkbox--olc, var(--bim-ui_accent-base));
    }

    bim-label {
      pointer-events: none;
    }
  `;let ut=YI;tn([Z({type:String,reflect:!0})],ut.prototype,"img",2);tn([Z({type:String,reflect:!0})],ut.prototype,"label",2);tn([Z({type:String,reflect:!0})],ut.prototype,"icon",2);tn([Z({type:Boolean,reflect:!0})],ut.prototype,"checked",2);tn([Z({type:Boolean,reflect:!0})],ut.prototype,"checkbox",2);tn([Z({type:Boolean,attribute:"no-mark",reflect:!0})],ut.prototype,"noMark",2);tn([Z({converter:{fromAttribute(i){return i&&su(i)}}})],ut.prototype,"value",1);tn([Z({type:Boolean,reflect:!0})],ut.prototype,"vertical",2);var sS=Object.defineProperty,nS=Object.getOwnPropertyDescriptor,sn=(i,e,t,s)=>{for(var n=s>1?void 0:s?nS(e,t):e,r=i.length-1,o;r>=0;r--)(o=i[r])&&(n=(s?o(e,t,n):o(n))||n);return s&&n&&sS(e,t,n),n};const jI=class extends gc{constructor(){super(),this.multiple=!1,this.required=!1,this.vertical=!1,this._visible=!1,this._value=new Set,this.onValueChange=new Event("change"),this._contextMenu=eo(),this.onOptionClick=e=>{const t=e.target,s=this._value.has(t);if(!this.multiple&&!this.required&&!s)this._value=new Set([t]);else if(!this.multiple&&!this.required&&s)this._value=new Set([]);else if(!this.multiple&&this.required&&!s)this._value=new Set([t]);else if(this.multiple&&!this.required&&!s)this._value=new Set([...this._value,t]);else if(this.multiple&&!this.required&&s){const n=[...this._value].filter(r=>r!==t);this._value=new Set(n)}else if(this.multiple&&this.required&&!s)this._value=new Set([...this._value,t]);else if(this.multiple&&this.required&&s){const n=[...this._value].filter(o=>o!==t),r=new Set(n);r.size!==0&&(this._value=r)}this.updateOptionsState(),this.dispatchEvent(this.onValueChange)},this.useObserver=!0}set visible(e){if(e){const{value:t}=this._contextMenu;if(!t)return;for(const s of this.elements)t.append(s);this._visible=!0}else{for(const t of this.elements)this.append(t);this._visible=!1,this.resetVisibleElements()}}get visible(){return this._visible}set value(e){if(this.required&&Object.keys(e).length===0)return;const t=new Set;for(const s of e){const n=this.findOption(s);if(n&&(t.add(n),!this.multiple&&Object.keys(e).length===1))break}this._value=t,this.updateOptionsState(),this.dispatchEvent(this.onValueChange)}get value(){return[...this._value].filter(e=>e instanceof ut&&e.checked).map(e=>e.value)}get _options(){const e=new Set([...this.elements]);for(const t of this.children)t instanceof ut&&e.add(t);return[...e]}onSlotChange(e){const t=e.target.assignedElements();this.observe(t);const s=new Set;for(const n of this.elements){if(!(n instanceof ut)){n.remove();continue}n.checked&&s.add(n),n.removeEventListener("click",this.onOptionClick),n.addEventListener("click",this.onOptionClick)}this._value=s}updateOptionsState(){for(const e of this._options)e instanceof ut&&(e.checked=this._value.has(e))}findOption(e){return this._options.find(t=>t instanceof ut?t.label===e||t.value===e:!1)}render(){let e,t,s;if(this._value.size===0)e="Select an option...";else if(this._value.size===1){const n=[...this._value][0];e=(n==null?void 0:n.label)||(n==null?void 0:n.value),t=n==null?void 0:n.img,s=n==null?void 0:n.icon}else e=`Multiple (${this._value.size})`;return de`
      <bim-input
        title=${this.label??""}
        .label=${this.label}
        .icon=${this.icon}
        .vertical=${this.vertical}
      >
        <div class="input" @click=${()=>this.visible=!this.visible}>
          <bim-label
            .img=${t}
            .icon=${s}
            style="overflow: hidden;"
            >${e}</bim-label
          >
          <svg
            style="flex-shrink: 0; fill: var(--bim-dropdown--c, var(--bim-ui_bg-contrast-100))"
            xmlns="http://www.w3.org/2000/svg"
            height="1.125rem"
            viewBox="0 0 24 24"
            width="1.125rem"
            fill="#9ca3af"
          >
            <path d="M0 0h24v24H0V0z" fill="none" />
            <path d="M7.41 8.59 12 13.17l4.59-4.58L18 10l-6 6-6-6 1.41-1.41z" />
          </svg>
          <bim-context-menu
            ${to(this._contextMenu)}
            .visible=${this.visible}
            @hidden=${()=>{this.visible&&(this.visible=!1)}}
          >
            <slot @slotchange=${this.onSlotChange}></slot>
          </bim-context-menu>
        </div>
      </bim-input>
    `}};jI.styles=[en.scrollbar,ke`
      :host {
        --bim-input--bgc: var(
          --bim-dropdown--bgc,
          var(--bim-ui_bg-contrast-20)
        );
        --bim-input--olw: 2px;
        --bim-input--olc: transparent;
        --bim-input--bdrs: var(--bim-ui_size-4xs);
        flex: 1;
        display: block;
      }

      :host([visible]) {
        --bim-input--olc: var(--bim-ui_accent-base);
      }

      .input {
        --bim-label--fz: var(--bim-drodown--fz, var(--bim-ui_size-xs));
        --bim-label--c: var(--bim-dropdown--c, var(--bim-ui_bg-contrast-100));
        height: 100%;
        display: flex;
        flex: 1;
        overflow: hidden;
        column-gap: 0.25rem;
        outline: none;
        cursor: pointer;
        align-items: center;
        justify-content: space-between;
        padding: 0 0.5rem;
      }

      bim-label {
        pointer-events: none;
      }
    `];let vs=jI;sn([Z({type:String,reflect:!0})],vs.prototype,"name",2);sn([Z({type:String,reflect:!0})],vs.prototype,"icon",2);sn([Z({type:String,reflect:!0})],vs.prototype,"label",2);sn([Z({type:Boolean,reflect:!0})],vs.prototype,"multiple",2);sn([Z({type:Boolean,reflect:!0})],vs.prototype,"required",2);sn([Z({type:Boolean,reflect:!0})],vs.prototype,"vertical",2);sn([Z({type:Boolean,reflect:!0})],vs.prototype,"visible",1);sn([Io()],vs.prototype,"_value",2);var rS=Object.defineProperty,WI=(i,e,t,s)=>{for(var n=void 0,r=i.length-1,o;r>=0;r--)(o=i[r])&&(n=o(e,t,n)||n);return n&&rS(e,t,n),n};const XI=class extends Pe{constructor(){super(...arguments),this.floating=!1,this._layouts={},this._updateFunctions={}}set layouts(e){this._layouts=e;const t={};for(const[s,n]of Object.entries(e))for(const r in n.elements)t[s]||(t[s]={}),t[s][r]=o=>{const a=this._updateFunctions[s];if(!a)return;const l=a[r];l&&l(o)};this.updateComponent=t}get layouts(){return this._layouts}getLayoutAreas(e){const{template:t}=e,s=t.split(`
`).map(n=>n.trim()).map(n=>n.split('"')[1]).filter(n=>n!==void 0).flatMap(n=>n.split(/\s+/));return[...new Set(s)].filter(n=>n!=="")}firstUpdated(){this._onLayoutChange=new Event("layoutchange")}render(){if(this.layout){if(this._updateFunctions={},this.layouts[this.layout]){this.innerHTML="",this._updateFunctions[this.layout]={};const e=this._updateFunctions[this.layout],t=this.layouts[this.layout],s=this.getLayoutAreas(t).map(n=>{const r=t.elements[n];if(!r)return null;if(r instanceof HTMLElement)return r.style.gridArea=n,r;if("template"in r){const{template:o,initialState:a}=r,[l,h]=gc.create(o,a);return l.style.gridArea=n,e[n]=h,l}return gc.create(r)}).filter(n=>!!n);this.style.gridTemplate=t.template,this.append(...s),this._onLayoutChange&&this.dispatchEvent(this._onLayoutChange)}}else this._updateFunctions={},this.innerHTML="",this.style.gridTemplate="",this._onLayoutChange&&this.dispatchEvent(this._onLayoutChange);return de`<slot></slot>`}};XI.styles=ke`
    :host {
      display: grid;
      height: 100%;
      width: 100%;
      overflow: hidden;
      box-sizing: border-box;
    }

    /* :host(:not([layout])) {
      display: none;
    } */

    :host([floating]) {
      --bim-panel--bdrs: var(--bim-ui_size-4xs);
      background-color: transparent;
      padding: 1rem;
      gap: 1rem;
      position: absolute;
      pointer-events: none;
      top: 0px;
      left: 0px;
    }

    :host(:not([floating])) {
      --bim-panel--bdrs: 0;
      background-color: var(--bim-ui_bg-contrast-20);
      gap: 1px;
    }
  `;let gp=XI;WI([Z({type:Boolean,reflect:!0})],gp.prototype,"floating");WI([Z({type:String,reflect:!0})],gp.prototype,"layout");const kd=class extends Pe{render(){return de`
      <iconify-icon .icon=${this.icon} height="none"></iconify-icon>
    `}};kd.styles=ke`
    :host {
      height: var(--bim-icon--fz, var(--bim-ui_size-sm));
      width: var(--bim-icon--fz, var(--bim-ui_size-sm));
    }

    iconify-icon {
      height: var(--bim-icon--fz, var(--bim-ui_size-sm));
      width: var(--bim-icon--fz, var(--bim-ui_size-sm));
      color: var(--bim-icon--c);
      transition: all 0.15s;
    }
  `,kd.properties={icon:{type:String}};let oS=kd;var aS=Object.defineProperty,nu=(i,e,t,s)=>{for(var n=void 0,r=i.length-1,o;r>=0;r--)(o=i[r])&&(n=o(e,t,n)||n);return n&&aS(e,t,n),n};const qI=class extends Pe{constructor(){super(...arguments),this.vertical=!1,this.onValueChange=new Event("change")}get value(){const e={};for(const t of this.children){const s=t;"value"in s?e[s.name||s.label]=s.value:"checked"in s&&(e[s.name||s.label]=s.checked)}return e}set value(e){const t=[...this.children];for(const s in e){const n=t.find(a=>{const l=a;return l.name===s||l.label===s});if(!n)continue;const r=n,o=e[s];typeof o=="boolean"?r.checked=o:r.value=o}}render(){return de`
      <div class="parent">
        ${this.label||this.icon?de`<bim-label .icon=${this.icon}>${this.label}</bim-label>`:null}
        <div class="input">
          <slot></slot>
        </div>
      </div>
    `}};qI.styles=ke`
    :host {
      flex: 1;
      display: block;
    }

    .parent {
      display: flex;
      flex-wrap: wrap;
      column-gap: 1rem;
      row-gap: 0.375rem;
      user-select: none;
      flex: 1;
    }

    :host(:not([vertical])) .parent {
      justify-content: space-between;
    }

    :host([vertical]) .parent {
      flex-direction: column;
    }

    .input {
      overflow: hidden;
      box-sizing: border-box;
      display: flex;
      align-items: center;
      flex-wrap: wrap;
      min-height: 1.75rem;
      min-width: 3rem;
      gap: var(--bim-input--g, var(--bim-ui_size-4xs));
      padding: var(--bim-input--p, 0);
      background-color: var(--bim-input--bgc, transparent);
      outline: var(--bim-input--olw, 2px) solid
        var(--bim-input--olc, transparent);
      border-radius: var(--bim-input--bdrs, var(--bim-ui_size-4xs));
      transition: all 0.15s;
    }

    :host(:not([vertical])) .input {
      flex: 1;
      justify-content: flex-end;
    }

    :host(:not([vertical])[label]) .input {
      max-width: fit-content;
    }
  `;let Tl=qI;nu([Z({type:String,reflect:!0})],Tl.prototype,"name");nu([Z({type:String,reflect:!0})],Tl.prototype,"label");nu([Z({type:String,reflect:!0})],Tl.prototype,"icon");nu([Z({type:Boolean,reflect:!0})],Tl.prototype,"vertical");var lS=Object.defineProperty,wl=(i,e,t,s)=>{for(var n=void 0,r=i.length-1,o;r>=0;r--)(o=i[r])&&(n=o(e,t,n)||n);return n&&lS(e,t,n),n};const ZI=class extends Pe{constructor(){super(...arguments),this.labelHidden=!1,this.iconHidden=!1,this.vertical=!1}get value(){return this.textContent?su(this.textContent):this.textContent}render(){return de`
      <div class="parent" .title=${this.textContent??""}>
        ${this.img?de`<img .src=${this.img} .alt=${this.textContent||""} />`:null}
        ${!this.iconHidden&&this.icon?de`<bim-icon .icon=${this.icon}></bim-icon>`:null}
        <p><slot></slot></p>
      </div>
    `}};ZI.styles=ke`
    :host {
      --bim-icon--c: var(--bim-label--c);
      color: var(--bim-label--c, var(--bim-ui_bg-contrast-60));
      font-size: var(--bim-label--fz, var(--bim-ui_size-xs));
      overflow: hidden;
      display: block;
      white-space: nowrap;
      line-height: 1.1rem;
      transition: all 0.15s;
    }

    .parent {
      display: flex;
      align-items: center;
      column-gap: 0.25rem;
      row-gap: 0.125rem;
      user-select: none;
      height: 100%;
    }

    :host([vertical]) .parent {
      flex-direction: column;
    }

    .parent p {
      margin: 0;
      text-overflow: ellipsis;
      overflow: hidden;
      display: flex;
      align-items: center;
      gap: 0.125rem;
    }

    :host([label-hidden]) .parent p,
    :host(:empty) .parent p {
      display: none;
    }

    img {
      height: 100%;
      aspect-ratio: 1;
      border-radius: 100%;
      margin-right: 0.125rem;
    }

    :host(:not([vertical])) img {
      max-height: var(
        --bim-label_icon--sz,
        calc(var(--bim-label--fz, var(--bim-ui_size-xs)) * 1.8)
      );
    }

    :host([vertical]) img {
      max-height: var(
        --bim-label_icon--sz,
        calc(var(--bim-label--fz, var(--bim-ui_size-xs)) * 4)
      );
    }
  `;let yo=ZI;wl([Z({type:String,reflect:!0})],yo.prototype,"img");wl([Z({type:Boolean,attribute:"label-hidden",reflect:!0})],yo.prototype,"labelHidden");wl([Z({type:String,reflect:!0})],yo.prototype,"icon");wl([Z({type:Boolean,attribute:"icon-hidden",reflect:!0})],yo.prototype,"iconHidden");wl([Z({type:Boolean,reflect:!0})],yo.prototype,"vertical");var hS=Object.defineProperty,cS=Object.getOwnPropertyDescriptor,di=(i,e,t,s)=>{for(var n=s>1?void 0:s?cS(e,t):e,r=i.length-1,o;r>=0;r--)(o=i[r])&&(n=(s?o(e,t,n):o(n))||n);return s&&n&&hS(e,t,n),n};const QI=class extends Pe{constructor(){super(...arguments),this._value=0,this.vertical=!1,this.slider=!1,this._input=eo(),this.onValueChange=new Event("change")}set value(e){this.setValue(e.toString())}get value(){return this._value}onChange(e){e.stopPropagation();const{value:t}=this._input;t&&this.setValue(t.value)}setValue(e){const{value:t}=this._input;let s=e;if(s=s.replace(/[^0-9.-]/g,""),s=s.replace(/(\..*)\./g,"$1"),s.endsWith(".")||(s.lastIndexOf("-")>0&&(s=s[0]+s.substring(1).replace(/-/g,"")),s==="-"||s==="-0"))return;let n=Number(s);Number.isNaN(n)||(n=this.min!==void 0?Math.max(n,this.min):n,n=this.max!==void 0?Math.min(n,this.max):n,this.value!==n&&(this._value=n,t&&(t.value=this.value.toString()),this.requestUpdate(),this.dispatchEvent(this.onValueChange)))}onBlur(){const{value:e}=this._input;e&&Number.isNaN(Number(e.value))&&(e.value=this.value.toString())}onSliderMouseDown(e){document.body.style.cursor="w-resize";const{clientX:t}=e,s=this.value;let n=!1;const r=l=>{var h;n=!0;const{clientX:u}=l,c=this.step??1,d=((h=c.toString().split(".")[1])==null?void 0:h.length)||0,f=1/(this.sensitivity??1),p=(u-t)/f;if(Math.floor(Math.abs(p))!==Math.abs(p))return;const m=s+p*c;this.setValue(m.toFixed(d))},o=()=>{this.slider=!0,this.removeEventListener("blur",o)},a=()=>{document.removeEventListener("mousemove",r),document.body.style.cursor="default",n?n=!1:(this.addEventListener("blur",o),this.slider=!1,requestAnimationFrame(()=>this.focus())),document.removeEventListener("mouseup",a)};document.addEventListener("mousemove",r),document.addEventListener("mouseup",a)}onFocus(e){e.stopPropagation();const t=s=>{s.key==="Escape"&&(this.blur(),window.removeEventListener("keydown",t))};window.addEventListener("keydown",t)}connectedCallback(){super.connectedCallback(),this.min&&this.min>this.value&&(this._value=this.min),this.max&&this.max<this.value&&(this._value=this.max)}focus(){const{value:e}=this._input;e&&e.focus()}render(){const e=de`
      ${this.pref||this.icon?de`<bim-label
            style="pointer-events: auto"
            @mousedown=${this.onSliderMouseDown}
            .icon=${this.icon}
            >${this.pref}</bim-label
          >`:null}
      <input
        ${to(this._input)}
        type="text"
        aria-label=${this.label||this.name||"Number Input"}
        size="1"
        @input=${a=>a.stopPropagation()}
        @change=${this.onChange}
        @blur=${this.onBlur}
        @focus=${this.onFocus}
        .value=${this.value.toString()}
      />
      ${this.suffix?de`<bim-label
            style="pointer-events: auto"
            @mousedown=${this.onSliderMouseDown}
            >${this.suffix}</bim-label
          >`:null}
    `,t=this.min??-1/0,s=this.max??1/0,n=100*(this.value-t)/(s-t),r=de`
      <style>
        .slider-indicator {
          width: ${`${n}%`};
        }
      </style>
      <div class="slider" @mousedown=${this.onSliderMouseDown}>
        <div class="slider-indicator"></div>
        ${this.pref||this.icon?de`<bim-label
              style="z-index: 1; margin-right: 0.125rem"
              .icon=${this.icon}
              >${`${this.pref}: `}</bim-label
            >`:null}
        <bim-label style="z-index: 1;">${this.value}</bim-label>
        ${this.suffix?de`<bim-label style="z-index: 1;">${this.suffix}</bim-label>`:null}
      </div>
    `,o=`${this.label||this.name||this.pref?`${this.label||this.name||this.pref}: `:""}${this.value}${this.suffix??""}`;return de`
      <bim-input
        title=${o}
        .label=${this.label}
        .icon=${this.icon}
        .vertical=${this.vertical}
      >
        ${this.slider?r:e}
      </bim-input>
    `}};QI.styles=ke`
    :host {
      --bim-input--bgc: var(
        --bim-number-input--bgc,
        var(--bim-ui_bg-contrast-20)
      );
      --bim-input--olw: var(--bim-number-input--olw, 2px);
      --bim-input--olc: var(--bim-number-input--olc, transparent);
      --bim-input--bdrs: var(--bim-number-input--bdrs, var(--bim-ui_size-4xs));
      --bim-input--p: 0 0.375rem;
      flex: 1;
      display: block;
    }

    :host(:focus) {
      --bim-input--olw: var(--bim-number-input--olw, 2px);
      --bim-input--olc: var(
        --bim-number-input¡focus--c,
        var(--bim-ui_accent-base)
      );
    }

    :host(:not([slider])) bim-label {
      --bim-label--c: var(
        --bim-number-input_affixes--c,
        var(--bim-ui_bg-contrast-60)
      );
      --bim-label--fz: var(
        --bim-number-input_affixes--fz,
        var(--bim-ui_size-xs)
      );
    }

    p {
      margin: 0;
      padding: 0;
    }

    input {
      background-color: transparent;
      outline: none;
      border: none;
      padding: 0;
      flex-grow: 1;
      text-align: right;
      font-family: inherit;
      font-feature-settings: inherit;
      font-variation-settings: inherit;
      font-size: var(--bim-number-input--fz, var(--bim-ui_size-xs));
      color: var(--bim-number-input--c, var(--bim-ui_bg-contrast-100));
    }

    :host([suffix]:not([pref])) input {
      text-align: left;
    }

    :host([slider]) {
      --bim-input--p: 0;
    }

    :host([slider]) .slider {
      --bim-label--c: var(--bim-ui_bg-contrast-100);
    }

    .slider {
      position: relative;
      display: flex;
      justify-content: center;
      width: 100%;
      height: 100%;
      padding: 0 0.5rem;
    }

    .slider-indicator {
      height: 100%;
      background-color: var(--bim-ui_main-base);
      position: absolute;
      top: 0;
      left: 0;
      border-radius: var(--bim-input--bdrs, var(--bim-ui_size-4xs));
    }

    bim-input {
      display: flex;
    }

    bim-label {
      pointer-events: none;
    }
  `;let Wt=QI;di([Z({type:String,reflect:!0})],Wt.prototype,"name",2);di([Z({type:String,reflect:!0})],Wt.prototype,"icon",2);di([Z({type:String,reflect:!0})],Wt.prototype,"label",2);di([Z({type:String,reflect:!0})],Wt.prototype,"pref",2);di([Z({type:Number,reflect:!0})],Wt.prototype,"min",2);di([Z({type:Number,reflect:!0})],Wt.prototype,"value",1);di([Z({type:Number,reflect:!0})],Wt.prototype,"step",2);di([Z({type:Number,reflect:!0})],Wt.prototype,"sensitivity",2);di([Z({type:Number,reflect:!0})],Wt.prototype,"max",2);di([Z({type:String,reflect:!0})],Wt.prototype,"suffix",2);di([Z({type:Boolean,reflect:!0})],Wt.prototype,"vertical",2);di([Z({type:Boolean,reflect:!0})],Wt.prototype,"slider",2);var uS=Object.defineProperty,dS=Object.getOwnPropertyDescriptor,Sl=(i,e,t,s)=>{for(var n=s>1?void 0:s?dS(e,t):e,r=i.length-1,o;r>=0;r--)(o=i[r])&&(n=(s?o(e,t,n):o(n))||n);return s&&n&&uS(e,t,n),n};const KI=class extends Pe{constructor(){super(...arguments),this.onValueChange=new Event("change"),this._hidden=!1,this.headerHidden=!1,this.valueTransform={},this.activationButton=document.createElement("bim-button")}set hidden(e){this._hidden=e,this.activationButton.active=!e,this.dispatchEvent(new Event("hiddenchange"))}get hidden(){return this._hidden}get value(){return Ec(this,this.valueTransform)}set value(e){const t=[...this.children];for(const s in e){const n=t.find(o=>{const a=o;return a.name===s||a.label===s});if(!n)continue;const r=n;r.value=e[s]}}connectedCallback(){super.connectedCallback(),this.activationButton.active=!this.hidden,this.activationButton.onclick=()=>this.hidden=!this.hidden}disconnectedCallback(){super.disconnectedCallback(),this.activationButton.remove()}collapseSections(){const e=this.querySelectorAll("bim-panel-section");for(const t of e)t.collapsed=!0}expandSections(){const e=this.querySelectorAll("bim-panel-section");for(const t of e)t.collapsed=!1}render(){return this.activationButton.icon=this.icon,this.activationButton.label=this.label||this.name,this.activationButton.tooltipTitle=this.label||this.name,de`
      <div class="parent">
        ${this.label||this.name||this.icon?de`<bim-label .icon=${this.icon}>${this.label}</bim-label>`:null}
        <div class="sections">
          <slot></slot>
        </div>
      </div>
    `}};KI.styles=[en.scrollbar,ke`
      :host {
        display: flex;
        border-radius: var(--bim-ui_size-base);
        background-color: var(--bim-ui_bg-base);
        overflow: auto;
      }

      :host([hidden]) {
        display: none;
      }

      .parent {
        display: flex;
        flex: 1;
        flex-direction: column;
        pointer-events: auto;
        overflow: auto;
      }

      .parent bim-label {
        --bim-label--c: var(--bim-panel--c, var(--bim-ui_bg-contrast-80));
        --bim-label--fz: var(--bim-panel--fz, var(--bim-ui_size-sm));
        font-weight: 600;
        padding: 1rem;
        flex-shrink: 0;
        border-bottom: 1px solid var(--bim-ui_bg-contrast-20);
      }

      :host([header-hidden]) .parent bim-label {
        display: none;
      }

      .sections {
        display: flex;
        flex-direction: column;
        overflow: auto;
      }

      ::slotted(bim-panel-section:not(:last-child)) {
        border-bottom: 1px solid var(--bim-ui_bg-contrast-20);
      }
    `];let Kn=KI;Sl([Z({type:String,reflect:!0})],Kn.prototype,"icon",2);Sl([Z({type:String,reflect:!0})],Kn.prototype,"name",2);Sl([Z({type:String,reflect:!0})],Kn.prototype,"label",2);Sl([Z({type:Boolean,reflect:!0})],Kn.prototype,"hidden",1);Sl([Z({type:Boolean,attribute:"header-hidden",reflect:!0})],Kn.prototype,"headerHidden",2);var fS=Object.defineProperty,xl=(i,e,t,s)=>{for(var n=void 0,r=i.length-1,o;r>=0;r--)(o=i[r])&&(n=o(e,t,n)||n);return n&&fS(e,t,n),n};const JI=class extends Pe{constructor(){super(...arguments),this.onValueChange=new Event("change"),this.valueTransform={}}get value(){const e=this.parentElement;let t;return e instanceof Kn&&(t=e.valueTransform),Object.values(this.valueTransform).length!==0&&(t=this.valueTransform),Ec(this,t)}set value(e){const t=[...this.children];for(const s in e){const n=t.find(o=>{const a=o;return a.name===s||a.label===s});if(!n)continue;const r=n;r.value=e[s]}}onHeaderClick(){this.fixed||(this.collapsed=!this.collapsed)}render(){const e=this.label||this.icon||this.name||this.fixed,t=de`<svg
      xmlns="http://www.w3.org/2000/svg"
      height="1.125rem"
      viewBox="0 0 24 24"
      width="1.125rem"
    >
      <path d="M0 0h24v24H0V0z" fill="none" />
      <path d="M7.41 8.59 12 13.17l4.59-4.58L18 10l-6 6-6-6 1.41-1.41z" />
    </svg>`,s=de`<svg
      xmlns="http://www.w3.org/2000/svg"
      height="1.125rem"
      viewBox="0 0 24 24"
      width="1.125rem"
    >
      <path d="M0 0h24v24H0z" fill="none" />
      <path d="M12 8l-6 6 1.41 1.41L12 10.83l4.59 4.58L18 14z" />
    </svg>`,n=this.collapsed?t:s,r=de`
      <div
        class="header"
        title=${this.label??""}
        @click=${this.onHeaderClick}
      >
        ${this.label||this.icon||this.name?de`<bim-label .icon=${this.icon}>${this.label}</bim-label>`:null}
        ${this.fixed?null:n}
      </div>
    `;return de`
      <div class="parent">
        ${e?r:null}
        <div class="components">
          <slot></slot>
        </div>
      </div>
    `}};JI.styles=[en.scrollbar,ke`
      :host {
        display: block;
        pointer-events: auto;
      }

      :host(:not([fixed])) .header:hover {
        --bim-label--c: var(--bim-ui_accent-base);
        color: var(--bim-ui_accent-base);
        cursor: pointer;
      }

      :host(:not([fixed])) .header:hover svg {
        fill: var(--bim-ui_accent-base);
      }

      .header {
        --bim-label--fz: var(--bim-ui_size-sm);
        --bim-label--c: var(--bim-ui_bg-contrast-80);
        display: flex;
        justify-content: space-between;
        align-items: center;
        font-weight: 600;
        height: 1.5rem;
        padding: 0.75rem 1rem;
      }

      .header svg {
        fill: var(--bim-ui_bg-contrast-80);
      }

      .title {
        display: flex;
        align-items: center;
        column-gap: 0.5rem;
      }

      .title p {
        font-size: var(--bim-ui_size-sm);
      }

      .components {
        display: flex;
        flex-direction: column;
        row-gap: 0.75rem;
        padding: 0.125rem 1rem 1rem;
      }

      :host(:not([fixed])[collapsed]) .components {
        display: none;
        height: 0px;
      }

      bim-label {
        pointer-events: none;
      }
    `];let Co=JI;xl([Z({type:String,reflect:!0})],Co.prototype,"icon");xl([Z({type:String,reflect:!0})],Co.prototype,"label");xl([Z({type:String,reflect:!0})],Co.prototype,"name");xl([Z({type:Boolean,reflect:!0})],Co.prototype,"fixed");xl([Z({type:Boolean,reflect:!0})],Co.prototype,"collapsed");var pS=Object.defineProperty,Rl=(i,e,t,s)=>{for(var n=void 0,r=i.length-1,o;r>=0;r--)(o=i[r])&&(n=o(e,t,n)||n);return n&&pS(e,t,n),n};const eb=class extends Pe{constructor(){super(...arguments),this.vertical=!1,this.onValueChange=new Event("change"),this._canEmitEvents=!1,this._value=document.createElement("bim-option"),this.onOptionClick=e=>{this._value=e.target,this.dispatchEvent(this.onValueChange);for(const t of this.children)t instanceof ut&&(t.checked=t===e.target)}}get _options(){return[...this.querySelectorAll("bim-option")]}set value(e){const t=this.findOption(e);if(t){for(const s of this._options)s.checked=s===t;this._value=t,this._canEmitEvents&&this.dispatchEvent(this.onValueChange)}}get value(){return this._value.value}onSlotChange(e){const t=e.target.assignedElements();for(const s of t)s instanceof ut&&(s.noMark=!0,s.removeEventListener("click",this.onOptionClick),s.addEventListener("click",this.onOptionClick))}findOption(e){return this._options.find(t=>t instanceof ut?t.label===e||t.value===e:!1)}firstUpdated(){const e=[...this.children].find(t=>t instanceof ut&&t.checked);e&&(this._value=e)}render(){return de`
      <bim-input
        .vertical=${this.vertical}
        .label=${this.label}
        .icon=${this.icon}
      >
        <slot @slotchange=${this.onSlotChange}></slot>
      </bim-input>
    `}};eb.styles=ke`
    :host {
      --bim-input--bgc: var(--bim-ui_bg-contrast-20);
      --bim-input--g: 0;
      --bim-option--jc: center;
      flex: 1;
      display: block;
    }

    ::slotted(bim-option) {
      border-radius: 0;
    }

    ::slotted(bim-option[checked]) {
      --bim-label--c: var(--bim-ui_main-contrast);
      background-color: var(--bim-ui_main-base);
    }
  `;let To=eb;Rl([Z({type:String,reflect:!0})],To.prototype,"name");Rl([Z({type:String,reflect:!0})],To.prototype,"icon");Rl([Z({type:String,reflect:!0})],To.prototype,"label");Rl([Z({type:Boolean,reflect:!0})],To.prototype,"vertical");Rl([Io()],To.prototype,"_value");const mS=()=>de`
    <style>
      div {
        display: flex;
        gap: 0.375rem;
        border-radius: 0.25rem;
        min-height: 1.25rem;
      }

      [data-type="row"] {
        background-color: var(--bim-ui_bg-contrast-10);
        animation: row-loading 1s linear infinite alternate;
        padding: 0.5rem;
      }

      [data-type="cell"] {
        background-color: var(--bim-ui_bg-contrast-20);
        flex: 0.25;
      }

      @keyframes row-loading {
        0% {
          background-color: var(--bim-ui_bg-contrast-10);
        }
        100% {
          background-color: var(--bim-ui_bg-contrast-20);
        }
      }
    </style>
    <div style="display: flex; flex-direction: column;">
      <div data-type="row" style="gap: 2rem">
        <div data-type="cell" style="flex: 1"></div>
        <div data-type="cell" style="flex: 2"></div>
        <div data-type="cell" style="flex: 1"></div>
        <div data-type="cell" style="flex: 0.5"></div>
      </div>
      <div style="display: flex;">
        <div data-type="row" style="flex: 1">
          <div data-type="cell" style="flex: 0.5"></div>
        </div>
        <div data-type="row" style="flex: 2">
          <div data-type="cell" style="flex: 0.75"></div>
        </div>
        <div data-type="row" style="flex: 1">
          <div data-type="cell"></div>
        </div>
        <div data-type="row" style="flex: 0.5">
          <div data-type="cell" style="flex: 0.75"></div>
        </div>
      </div>
      <div style="display: flex;">
        <div data-type="row" style="flex: 1">
          <div data-type="cell" style="flex: 0.75"></div>
        </div>
        <div data-type="row" style="flex: 2">
          <div data-type="cell"></div>
        </div>
        <div data-type="row" style="flex: 1">
          <div data-type="cell" style="flex: 0.5"></div>
        </div>
        <div data-type="row" style="flex: 0.5">
          <div data-type="cell" style="flex: 0.5"></div>
        </div>
      </div>
      <div style="display: flex;">
        <div data-type="row" style="flex: 1">
          <div data-type="cell"></div>
        </div>
        <div data-type="row" style="flex: 2">
          <div data-type="cell" style="flex: 0.5"></div>
        </div>
        <div data-type="row" style="flex: 1">
          <div data-type="cell" style="flex: 0.75"></div>
        </div>
        <div data-type="row" style="flex: 0.5">
          <div data-type="cell" style="flex: 0.7s5"></div>
        </div>
      </div>
    </div>
  `,gS=()=>de`
    <style>
      .loader {
        grid-area: Processing;
        position: relative;
        padding: 0.125rem;
      }
      .loader:before {
        content: "";
        position: absolute;
      }
      .loader .loaderBar {
        position: absolute;
        top: 0;
        right: 100%;
        bottom: 0;
        left: 0;
        background: var(--bim-ui_main-base);
        /* width: 25%; */
        width: 0;
        animation: borealisBar 2s linear infinite;
      }

      @keyframes borealisBar {
        0% {
          left: 0%;
          right: 100%;
          width: 0%;
        }
        10% {
          left: 0%;
          right: 75%;
          width: 25%;
        }
        90% {
          right: 0%;
          left: 75%;
          width: 25%;
        }
        100% {
          left: 100%;
          right: 0%;
          width: 0%;
        }
      }
    </style>
    <div class="loader">
      <div class="loaderBar"></div>
    </div>
  `;var ES=Object.defineProperty,IS=(i,e,t,s)=>{for(var n=void 0,r=i.length-1,o;r>=0;r--)(o=i[r])&&(n=o(e,t,n)||n);return n&&ES(e,t,n),n};const tb=class extends Pe{constructor(){super(...arguments),this.column="",this.columnIndex=0,this.rowData={}}get data(){return this.column?this.rowData[this.column]:null}render(){return de`
      <style>
        :host {
          grid-area: ${this.column??"unset"};
        }
      </style>
      <slot></slot>
    `}};tb.styles=ke`
    :host {
      padding: 0.375rem;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    :host([data-column-index="0"]) {
      justify-content: normal;
    }

    :host([data-column-index="0"]:not([data-cell-header]))
      ::slotted(bim-label) {
      text-align: left;
    }

    ::slotted(*) {
      --bim-input--bgc: transparent;
      --bim-input--olc: var(--bim-ui_bg-contrast-20);
      --bim-input--olw: 1px;
    }

    ::slotted(bim-input) {
      --bim-input--olw: 0;
    }

    ::slotted(bim-label) {
      white-space: normal;
      text-align: center;
    }
  `;let ib=tb;IS([Z({type:String,reflect:!0})],ib.prototype,"column");var bS=Object.defineProperty,vS=(i,e,t,s)=>{for(var n=void 0,r=i.length-1,o;r>=0;r--)(o=i[r])&&(n=o(e,t,n)||n);return n&&bS(e,t,n),n};const sb=class extends Pe{constructor(){super(...arguments),this._groups=[],this.data=[],this.table=this.closest("bim-table")}toggleGroups(e,t=!1){for(const s of this._groups)s.childrenHidden=typeof e>"u"?!s.childrenHidden:!e,t&&s.toggleChildren(e,t)}render(){return this._groups=[],de`
      <slot></slot>
      ${this.data.map(e=>{const t=document.createElement("bim-table-group");return this._groups.push(t),t.table=this.table,t.data=e,t})}
    `}};sb.styles=ke`
    :host {
      --bim-button--bgc: transparent;
      position: relative;
      grid-area: Children;
    }

    :host([hidden]) {
      display: none;
    }

    ::slotted(.branch.branch-vertical) {
      top: 0;
      bottom: 1.125rem;
    }
  `;let nb=sb;vS([Z({type:Array,attribute:!1})],nb.prototype,"data");var yS=Object.defineProperty,CS=(i,e,t,s)=>{for(var n=void 0,r=i.length-1,o;r>=0;r--)(o=i[r])&&(n=o(e,t,n)||n);return n&&yS(e,t,n),n};const rb=class extends Pe{constructor(){super(...arguments),this.data={data:{}},this.childrenHidden=!0,this.table=this.closest("bim-table")}connectedCallback(){super.connectedCallback(),this.table&&this.table.expanded?this.childrenHidden=!1:this.childrenHidden=!0}toggleChildren(e,t=!1){this._children&&(this.childrenHidden=typeof e>"u"?!this.childrenHidden:!e,t&&this._children.toggleGroups(e,t))}render(){if(!this.table)throw new Error("TableGroup: parent table wasn't found!");const e=this.table.getGroupIndentation(this.data)??0,t=de`
      ${this.table.noIndentation?null:de`
            <style>
              .branch-vertical {
                left: ${e+(this.table.selectableRows?1.9375:.5625)}rem;
              }
            </style>
            <div class="branch branch-vertical"></div>
          `}
    `,s=document.createDocumentFragment();Jr(t,s);let n=null;this.table.noIndentation||(n=document.createElement("div"),n.classList.add("branch","branch-horizontal"),n.style.left=`${e-1+(this.table.selectableRows?2.05:.5625)}rem`);let r=null;if(!this.table.noIndentation){const l=document.createElementNS("http://www.w3.org/2000/svg","svg");l.setAttribute("height","9.5"),l.setAttribute("width","7.5"),l.setAttribute("viewBox","0 0 4.6666672 7.3333333");const h=document.createElementNS("http://www.w3.org/2000/svg","path");h.setAttribute("d","m 1.7470835,6.9583848 2.5899999,-2.59 c 0.39,-0.39 0.39,-1.02 0,-1.41 L 1.7470835,0.36838483 c -0.63,-0.62000003 -1.71000005,-0.18 -1.71000005,0.70999997 v 5.17 c 0,0.9 1.08000005,1.34 1.71000005,0.71 z"),l.append(h);const u=document.createElementNS("http://www.w3.org/2000/svg","svg");u.setAttribute("height","6.5"),u.setAttribute("width","9.5"),u.setAttribute("viewBox","0 0 5.9111118 5.0175439");const c=document.createElementNS("http://www.w3.org/2000/svg","path");c.setAttribute("d","M -0.33616196,1.922522 2.253838,4.5125219 c 0.39,0.39 1.02,0.39 1.41,0 L 6.2538379,1.922522 c 0.6200001,-0.63 0.18,-1.71000007 -0.7099999,-1.71000007 H 0.37383804 c -0.89999997,0 -1.33999997,1.08000007 -0.71,1.71000007 z"),u.append(c),r=document.createElement("div"),r.addEventListener("click",d=>{d.stopPropagation(),this.toggleChildren()}),r.classList.add("caret"),r.style.left=`${(this.table.selectableRows?1.5:.125)+e}rem`,this.childrenHidden?r.append(l):r.append(u)}const o=document.createElement("bim-table-row");this.data.children&&!this.childrenHidden&&o.append(s),o.table=this.table,o.data=this.data.data,this.table.dispatchEvent(new CustomEvent("rowcreated",{detail:{row:o}})),r&&this.data.children&&o.append(r),e!==0&&(!this.data.children||this.childrenHidden)&&n&&o.append(n);let a;if(this.data.children){a=document.createElement("bim-table-children"),this._children=a,a.table=this.table,a.data=this.data.children;const l=document.createDocumentFragment();Jr(t,l),a.append(l)}return de`
      <div class="parent">${o} ${this.childrenHidden?null:a}</div>
    `}};rb.styles=ke`
    :host {
      position: relative;
    }

    .parent {
      display: grid;
      grid-template-areas: "Data" "Children";
    }

    .branch {
      position: absolute;
      z-index: 1;
    }

    .branch-vertical {
      border-left: 1px dotted var(--bim-ui_bg-contrast-40);
    }

    .branch-horizontal {
      top: 50%;
      width: 1rem;
      border-bottom: 1px dotted var(--bim-ui_bg-contrast-40);
    }

    .caret {
      position: absolute;
      z-index: 2;
      transform: translateY(-50%) rotate(0deg);
      top: 50%;
      display: flex;
      width: 0.95rem;
      height: 0.95rem;
      justify-content: center;
      align-items: center;
      cursor: pointer;
    }

    .caret svg {
      fill: var(--bim-ui_bg-contrast-60);
    }
  `;let ob=rb;CS([Z({type:Boolean,attribute:"children-hidden",reflect:!0})],ob.prototype,"childrenHidden");var TS=Object.defineProperty,wo=(i,e,t,s)=>{for(var n=void 0,r=i.length-1,o;r>=0;r--)(o=i[r])&&(n=o(e,t,n)||n);return n&&TS(e,t,n),n};const ab=class extends Pe{constructor(){super(...arguments),this.selected=!1,this.columns=[],this.hiddenColumns=[],this.data={},this.isHeader=!1,this.table=this.closest("bim-table"),this.onTableColumnsChange=()=>{this.table&&(this.columns=this.table.columns)},this.onTableColumnsHidden=()=>{this.table&&(this.hiddenColumns=this.table.hiddenColumns)},this._observer=new IntersectionObserver(e=>{this._intersecting=e[0].isIntersecting},{rootMargin:"36px"})}get _columnNames(){return this.columns.filter(e=>!this.hiddenColumns.includes(e.name)).map(e=>e.name)}get _columnWidths(){return this.columns.filter(e=>!this.hiddenColumns.includes(e.name)).map(e=>e.width)}get _isSelected(){var e;return(e=this.table)==null?void 0:e.selection.has(this.data)}onSelectionChange(e){if(!this.table)return;const t=e.target;this.selected=t.value,t.value?(this.table.selection.add(this.data),this.table.dispatchEvent(new CustomEvent("rowselected",{detail:{data:this.data}}))):(this.table.selection.delete(this.data),this.table.dispatchEvent(new CustomEvent("rowdeselected",{detail:{data:this.data}})))}connectedCallback(){super.connectedCallback(),this._observer.observe(this),this.table&&(this.columns=this.table.columns,this.hiddenColumns=this.table.hiddenColumns,this.table.addEventListener("columnschange",this.onTableColumnsChange),this.table.addEventListener("columnshidden",this.onTableColumnsHidden),this.toggleAttribute("selected",this._isSelected))}disconnectedCallback(){super.disconnectedCallback(),this._observer.unobserve(this),this.table&&(this.columns=[],this.hiddenColumns=[],this.table.removeEventListener("columnschange",this.onTableColumnsChange),this.table.removeEventListener("columnshidden",this.onTableColumnsHidden),this.toggleAttribute("selected",!1))}compute(){if(!this.table)throw new Error("TableRow: parent table wasn't found!");const e=this.table.getRowIndentation(this.data)??0,t=this.isHeader?this.data:this.table.applyDataTransform(this.data)??this.data,s=[];for(const n in t){if(this.hiddenColumns.includes(n))continue;const r=t[n];let o;if(typeof r=="string"||typeof r=="boolean"||typeof r=="number"?(o=document.createElement("bim-label"),o.textContent=String(r)):r instanceof HTMLElement?o=r:(o=document.createDocumentFragment(),Jr(r,o)),!o)continue;const a=document.createElement("bim-table-cell");a.append(o),a.column=n,this._columnNames.indexOf(n)===0&&(a.style.marginLeft=`${this.table.noIndentation?0:e+.75}rem`);const l=this._columnNames.indexOf(n);a.setAttribute("data-column-index",String(l)),a.toggleAttribute("data-no-indentation",l===0&&this.table.noIndentation),a.toggleAttribute("data-cell-header",this.isHeader),a.rowData=this.data,this.table.dispatchEvent(new CustomEvent("cellcreated",{detail:{cell:a}})),s.push(a)}return this.style.gridTemplateAreas=`"${this.table.selectableRows?"Selection":""} ${this._columnNames.join(" ")}"`,this.style.gridTemplateColumns=`${this.table.selectableRows?"1.6rem":""} ${this._columnWidths.join(" ")}`,de`
      ${!this.isHeader&&this.table.selectableRows?de`<bim-checkbox
            @change=${this.onSelectionChange}
            .checked=${this._isSelected}
            style="align-self: center; justify-self: center"
          ></bim-checkbox>`:null}
      ${s}
      <slot></slot>
    `}render(){return de`${this._intersecting?this.compute():de``}`}};ab.styles=ke`
    :host {
      position: relative;
      grid-area: Data;
      display: grid;
      min-height: 2.25rem;
      transition: all 0.15s;
    }

    ::slotted(.branch.branch-vertical) {
      top: 50%;
      bottom: 0;
    }

    :host([selected]) {
      background-color: color-mix(
        in lab,
        var(--bim-ui_bg-contrast-20) 30%,
        var(--bim-ui_main-base) 10%
      );
    }
  `;let Jn=ab;wo([Z({type:Boolean,reflect:!0})],Jn.prototype,"selected");wo([Z({attribute:!1})],Jn.prototype,"columns");wo([Z({attribute:!1})],Jn.prototype,"hiddenColumns");wo([Z({attribute:!1})],Jn.prototype,"data");wo([Z({type:Boolean,attribute:"is-header",reflect:!0})],Jn.prototype,"isHeader");wo([Io()],Jn.prototype,"_intersecting");var wS=Object.defineProperty,SS=Object.getOwnPropertyDescriptor,wi=(i,e,t,s)=>{for(var n=s>1?void 0:s?SS(e,t):e,r=i.length-1,o;r>=0;r--)(o=i[r])&&(n=(s?o(e,t,n):o(n))||n);return s&&n&&wS(e,t,n),n};const lb=class extends Pe{constructor(){super(...arguments),this._filteredData=[],this.headersHidden=!1,this.minColWidth="4rem",this._columns=[],this._textDelimiters={comma:",",tab:"	"},this._queryString=null,this._data=[],this.expanded=!1,this.preserveStructureOnFilter=!1,this.indentationInText=!1,this.dataTransform={},this.selectableRows=!1,this.selection=new Set,this.noIndentation=!1,this.loading=!1,this._errorLoading=!1,this._onColumnsHidden=new Event("columnshidden"),this._hiddenColumns=[],this._stringFilterFunction=(e,t)=>Object.values(t.data).some(s=>String(s).toLowerCase().includes(e.toLowerCase())),this._queryFilterFunction=(e,t)=>{let s=!1;const n=Dd(e)??[];for(const r of n){if("queries"in r){s=!1;break}const{condition:o,value:a}=r;let{key:l}=r;if(l.startsWith("[")&&l.endsWith("]")){const h=l.replace("[","").replace("]","");l=h,s=Object.keys(t.data).filter(u=>u.includes(h)).map(u=>Zm(t.data[u],o,a)).some(u=>u)}else s=Zm(t.data[l],o,a);if(!s)break}return s}}set columns(e){const t=[];for(const s of e){const n=typeof s=="string"?{name:s,width:`minmax(${this.minColWidth}, 1fr)`}:s;t.push(n)}this._columns=t,this.computeMissingColumns(this.data),this.dispatchEvent(new Event("columnschange"))}get columns(){return this._columns}get _headerRowData(){const e={};for(const t of this.columns){const{name:s}=t;e[s]=String(s)}return e}get value(){return this._filteredData}set queryString(e){this.toggleAttribute("data-processing",!0),this._queryString=e&&e.trim()!==""?e.trim():null,this.updateFilteredData(),this.toggleAttribute("data-processing",!1)}get queryString(){return this._queryString}set data(e){this._data=e,this.updateFilteredData(),this.computeMissingColumns(e)&&(this.columns=this._columns)}get data(){return this._data}get dataAsync(){return new Promise(e=>{setTimeout(()=>{e(this.data)})})}set hiddenColumns(e){this._hiddenColumns=e,setTimeout(()=>{this.dispatchEvent(this._onColumnsHidden)})}get hiddenColumns(){return this._hiddenColumns}updateFilteredData(){this.queryString?(Dd(this.queryString)?(this.filterFunction=this._queryFilterFunction,this._filteredData=this.filter(this.queryString)):(this.filterFunction=this._stringFilterFunction,this._filteredData=this.filter(this.queryString)),this.preserveStructureOnFilter&&(this._expandedBeforeFilter===void 0&&(this._expandedBeforeFilter=this.expanded),this.expanded=!0)):(this.preserveStructureOnFilter&&this._expandedBeforeFilter!==void 0&&(this.expanded=this._expandedBeforeFilter,this._expandedBeforeFilter=void 0),this._filteredData=this.data)}computeMissingColumns(e){let t=!1;for(const s of e){const{children:n,data:r}=s;for(const o in r)this._columns.map(a=>typeof a=="string"?a:a.name).includes(o)||(this._columns.push({name:o,width:`minmax(${this.minColWidth}, 1fr)`}),t=!0);if(n){const o=this.computeMissingColumns(n);o&&!t&&(t=o)}}return t}generateText(e="comma",t=this.value,s="",n=!0){const r=this._textDelimiters[e];let o="";const a=this.columns.map(l=>l.name);if(n){this.indentationInText&&(o+=`Indentation${r}`);const l=`${a.join(r)}
`;o+=l}for(const[l,h]of t.entries()){const{data:u,children:c}=h,d=this.indentationInText?`${s}${l+1}${r}`:"",f=a.map(m=>u[m]??""),p=`${d}${f.join(r)}
`;o+=p,c&&(o+=this.generateText(e,h.children,`${s}${l+1}.`,!1))}return o}get csv(){return this.generateText("comma")}get tsv(){return this.generateText("tab")}applyDataTransform(e){const t={};for(const n of Object.keys(this.dataTransform)){const r=this.columns.find(o=>o.name===n);r&&r.forceDataTransform&&(n in e||(e[n]=""))}const s=e;for(const n in s){const r=this.dataTransform[n];r?t[n]=r(s[n],e):t[n]=e[n]}return t}downloadData(e="BIM Table Data",t="json"){let s=null;if(t==="json"&&(s=new File([JSON.stringify(this.value,void 0,2)],`${e}.json`)),t==="csv"&&(s=new File([this.csv],`${e}.csv`)),t==="tsv"&&(s=new File([this.tsv],`${e}.tsv`)),!s)return;const n=document.createElement("a");n.href=URL.createObjectURL(s),n.download=s.name,n.click(),URL.revokeObjectURL(n.href)}getRowIndentation(e,t=this.value,s=0){for(const n of t){if(n.data===e)return s;if(n.children){const r=this.getRowIndentation(e,n.children,s+1);if(r!==null)return r}}return null}getGroupIndentation(e,t=this.value,s=0){for(const n of t){if(n===e)return s;if(n.children){const r=this.getGroupIndentation(e,n.children,s+1);if(r!==null)return r}}return null}connectedCallback(){super.connectedCallback(),this.dispatchEvent(new Event("connected"))}disconnectedCallback(){super.disconnectedCallback(),this.dispatchEvent(new Event("disconnected"))}async loadData(e=!1){if(this._filteredData.length!==0&&!e||!this.loadFunction)return!1;this.loading=!0;try{const t=await this.loadFunction();return this.data=t,this.loading=!1,this._errorLoading=!1,!0}catch(t){if(this.loading=!1,this._filteredData.length!==0)return!1;const s=this.querySelector("[slot='error-loading']"),n=s==null?void 0:s.querySelector("[data-table-element='error-message']");return t instanceof Error&&n&&t.message.trim()!==""&&(n.textContent=t.message),this._errorLoading=!0,!1}}filter(e,t=this.filterFunction??this._stringFilterFunction,s=this.data){const n=[];for(const r of s)if(t(e,r)){if(this.preserveStructureOnFilter){const o={data:r.data};if(r.children){const a=this.filter(e,t,r.children);a.length&&(o.children=a)}n.push(o)}else if(n.push({data:r.data}),r.children){const o=this.filter(e,t,r.children);n.push(...o)}}else if(r.children){const o=this.filter(e,t,r.children);this.preserveStructureOnFilter&&o.length?n.push({data:r.data,children:o}):n.push(...o)}return n}get _missingDataElement(){return this.querySelector("[slot='missing-data']")}render(){if(this.loading)return mS();if(this._errorLoading)return de`<slot name="error-loading"></slot>`;if(this._filteredData.length===0&&this._missingDataElement)return de`<slot name="missing-data"></slot>`;const e=document.createElement("bim-table-row");e.table=this,e.isHeader=!0,e.data=this._headerRowData,e.style.gridArea="Header",e.style.position="sticky",e.style.top="0",e.style.zIndex="5";const t=document.createElement("bim-table-children");return t.table=this,t.data=this.value,t.style.gridArea="Body",t.style.backgroundColor="transparent",de`
      <div class="parent">
        ${this.headersHidden?null:e} ${gS()}
        <div style="overflow-x: hidden; grid-area: Body">${t}</div>
      </div>
    `}};lb.styles=[en.scrollbar,ke`
      :host {
        position: relative;
        overflow: auto;
        display: block;
        pointer-events: auto;
      }

      :host(:not([data-processing])) .loader {
        display: none;
      }

      .parent {
        display: grid;
        grid-template:
          "Header" auto
          "Processing" auto
          "Body" 1fr
          "Footer" auto;
        overflow: auto;
        height: 100%;
      }

      .parent > bim-table-row[is-header] {
        color: var(--bim-table_header--c, var(--bim-ui_bg-contrast-100));
        background-color: var(
          --bim-table_header--bgc,
          var(--bim-ui_bg-contrast-20)
        );
      }

      .controls {
        display: flex;
        gap: 0.375rem;
        flex-wrap: wrap;
        margin-bottom: 0.5rem;
      }
    `];let fi=lb;wi([Io()],fi.prototype,"_filteredData",2);wi([Z({type:Boolean,attribute:"headers-hidden",reflect:!0})],fi.prototype,"headersHidden",2);wi([Z({type:String,attribute:"min-col-width",reflect:!0})],fi.prototype,"minColWidth",2);wi([Z({type:Array,attribute:!1})],fi.prototype,"columns",1);wi([Z({type:Array,attribute:!1})],fi.prototype,"data",1);wi([Z({type:Boolean,reflect:!0})],fi.prototype,"expanded",2);wi([Z({type:Boolean,reflect:!0,attribute:"selectable-rows"})],fi.prototype,"selectableRows",2);wi([Z({attribute:!1})],fi.prototype,"selection",2);wi([Z({type:Boolean,attribute:"no-indentation",reflect:!0})],fi.prototype,"noIndentation",2);wi([Z({type:Boolean,reflect:!0})],fi.prototype,"loading",2);wi([Io()],fi.prototype,"_errorLoading",2);var xS=Object.defineProperty,RS=Object.getOwnPropertyDescriptor,ru=(i,e,t,s)=>{for(var n=s>1?void 0:s?RS(e,t):e,r=i.length-1,o;r>=0;r--)(o=i[r])&&(n=(s?o(e,t,n):o(n))||n);return s&&n&&xS(e,t,n),n};const hb=class extends Pe{constructor(){super(...arguments),this._defaultName="__unnamed__",this.name=this._defaultName,this._hidden=!1}set hidden(e){this._hidden=e,this.dispatchEvent(new Event("hiddenchange"))}get hidden(){return this._hidden}connectedCallback(){super.connectedCallback();const{parentElement:e}=this;if(e&&this.name===this._defaultName){const t=[...e.children].indexOf(this);this.name=`${this._defaultName}${t}`}}render(){return de` <slot></slot> `}};hb.styles=ke`
    :host {
      display: block;
      height: 100%;
    }

    :host([hidden]) {
      display: none;
    }
  `;let ei=hb;ru([Z({type:String,reflect:!0})],ei.prototype,"name",2);ru([Z({type:String,reflect:!0})],ei.prototype,"label",2);ru([Z({type:String,reflect:!0})],ei.prototype,"icon",2);ru([Z({type:Boolean,reflect:!0})],ei.prototype,"hidden",1);var _S=Object.defineProperty,AS=Object.getOwnPropertyDescriptor,So=(i,e,t,s)=>{for(var n=s>1?void 0:s?AS(e,t):e,r=i.length-1,o;r>=0;r--)(o=i[r])&&(n=(s?o(e,t,n):o(n))||n);return s&&n&&_S(e,t,n),n};const cb=class extends Pe{constructor(){super(...arguments),this._switchers=[],this.bottom=!1,this.switchersHidden=!1,this.floating=!1,this.switchersFull=!1,this.onTabHiddenChange=e=>{const t=e.target;t instanceof ei&&!t.hidden&&(t.removeEventListener("hiddenchange",this.onTabHiddenChange),this.tab=t.name,t.addEventListener("hiddenchange",this.onTabHiddenChange))}}set tab(e){this._tab=e;const t=[...this.children],s=t.find(n=>n instanceof ei&&n.name===e);for(const n of t){if(!(n instanceof ei))continue;n.hidden=s!==n;const r=this.getTabSwitcher(n.name);r&&r.toggleAttribute("data-active",!n.hidden)}}get tab(){return this._tab}getTabSwitcher(e){return this._switchers.find(t=>t.getAttribute("data-name")===e)}createSwitchers(){this._switchers=[];for(const e of this.children){if(!(e instanceof ei))continue;const t=document.createElement("div");t.addEventListener("click",()=>{this.tab===e.name?this.toggleAttribute("tab",!1):this.tab=e.name}),t.setAttribute("data-name",e.name),t.className="switcher";const s=document.createElement("bim-label");s.textContent=e.label??"",s.icon=e.icon,t.append(s),this._switchers.push(t)}}onSlotChange(e){this.createSwitchers();const t=e.target.assignedElements(),s=t.find(n=>n instanceof ei?this.tab?n.name===this.tab:!n.hidden:!1);s&&s instanceof ei&&(this.tab=s.name);for(const n of t){if(!(n instanceof ei)){n.remove();continue}n.removeEventListener("hiddenchange",this.onTabHiddenChange),s!==n&&(n.hidden=!0),n.addEventListener("hiddenchange",this.onTabHiddenChange)}}render(){return de`
      <div class="parent">
        <div class="switchers">${this._switchers}</div>
        <div class="content">
          <slot @slotchange=${this.onSlotChange}></slot>
        </div>
      </div>
    `}};cb.styles=[en.scrollbar,ke`
      * {
        box-sizing: border-box;
      }

      :host {
        background-color: var(--bim-ui_bg-base);
        display: block;
        overflow: auto;
      }

      .parent {
        display: grid;
        grid-template: "switchers" auto "content" 1fr;
        height: 100%;
      }

      :host([bottom]) .parent {
        grid-template: "content" 1fr "switchers" auto;
      }

      .switchers {
        display: flex;
        height: 2.25rem;
        font-weight: 600;
        grid-area: switchers;
      }

      .switcher {
        --bim-label--c: var(--bim-ui_bg-contrast-80);
        background-color: var(--bim-ui_bg-base);
        cursor: pointer;
        pointer-events: auto;
        padding: 0rem 0.75rem;
        display: flex;
        justify-content: center;
        transition: all 0.15s;
      }

      :host([switchers-full]) .switcher {
        flex: 1;
      }

      .switcher:hover,
      .switcher[data-active] {
        --bim-label--c: var(--bim-ui_main-contrast);
        background-color: var(--bim-ui_main-base);
      }

      .switchers bim-label {
        pointer-events: none;
      }

      :host([switchers-hidden]) .switchers {
        display: none;
      }

      .content {
        grid-area: content;
        overflow: auto;
      }

      :host(:not([bottom])) .content {
        border-top: 1px solid var(--bim-ui_bg-contrast-20);
      }

      :host([bottom]) .content {
        border-bottom: 1px solid var(--bim-ui_bg-contrast-20);
      }

      :host(:not([tab])) .content {
        display: none;
      }

      :host([floating]) {
        background-color: transparent;
      }

      :host([floating]) .switchers {
        justify-self: center;
        overflow: auto;
      }

      :host([floating]:not([bottom])) .switchers {
        border-radius: var(--bim-ui_size-2xs) var(--bim-ui_size-2xs) 0 0;
        border-top: 1px solid var(--bim-ui_bg-contrast-20);
        border-left: 1px solid var(--bim-ui_bg-contrast-20);
        border-right: 1px solid var(--bim-ui_bg-contrast-20);
      }

      :host([floating][bottom]) .switchers {
        border-radius: 0 0 var(--bim-ui_size-2xs) var(--bim-ui_size-2xs);
        border-bottom: 1px solid var(--bim-ui_bg-contrast-20);
        border-left: 1px solid var(--bim-ui_bg-contrast-20);
        border-right: 1px solid var(--bim-ui_bg-contrast-20);
      }

      :host([floating]:not([tab])) .switchers {
        border-radius: var(--bim-ui_size-2xs);
        border-bottom: 1px solid var(--bim-ui_bg-contrast-20);
      }

      :host([floating][bottom]:not([tab])) .switchers {
        border-top: 1px solid var(--bim-ui_bg-contrast-20);
      }

      :host([floating]) .content {
        border: 1px solid var(--bim-ui_bg-contrast-20);
        border-radius: var(--bim-ui_size-2xs);
        background-color: var(--bim-ui_bg-base);
      }
    `];let er=cb;So([Io()],er.prototype,"_switchers",2);So([Z({type:Boolean,reflect:!0})],er.prototype,"bottom",2);So([Z({type:Boolean,attribute:"switchers-hidden",reflect:!0})],er.prototype,"switchersHidden",2);So([Z({type:Boolean,reflect:!0})],er.prototype,"floating",2);So([Z({type:String,reflect:!0})],er.prototype,"tab",1);So([Z({type:Boolean,attribute:"switchers-full",reflect:!0})],er.prototype,"switchersFull",2);/**
 * @license
 * Copyright 2018 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Qm=i=>i??it;var MS=Object.defineProperty,FS=Object.getOwnPropertyDescriptor,ys=(i,e,t,s)=>{for(var n=s>1?void 0:s?FS(e,t):e,r=i.length-1,o;r>=0;r--)(o=i[r])&&(n=(s?o(e,t,n):o(n))||n);return s&&n&&MS(e,t,n),n};const ub=class extends Pe{constructor(){super(...arguments),this._inputTypes=["date","datetime-local","email","month","password","search","tel","text","time","url","week","area"],this.value="",this.vertical=!1,this._type="text",this.onValueChange=new Event("input")}set type(e){this._inputTypes.includes(e)&&(this._type=e)}get type(){return this._type}get query(){return Dd(this.value)}onInputChange(e){e.stopPropagation();const t=e.target;clearTimeout(this._debounceTimeoutID),this._debounceTimeoutID=setTimeout(()=>{this.value=t.value,this.dispatchEvent(this.onValueChange)},this.debounce)}focus(){setTimeout(()=>{var e;const t=(e=this.shadowRoot)==null?void 0:e.querySelector("input");t==null||t.focus()})}render(){return de`
      <bim-input
        .name=${this.name}
        .icon=${this.icon}
        .label=${this.label}
        .vertical=${this.vertical}
      >
        ${this.type==="area"?de` <textarea
              aria-label=${this.label||this.name||"Text Input"}
              .value=${this.value}
              .rows=${this.rows??5}
              placeholder=${Qm(this.placeholder)}
              @input=${this.onInputChange}
            ></textarea>`:de` <input
              aria-label=${this.label||this.name||"Text Input"}
              .type=${this.type}
              .value=${this.value}
              placeholder=${Qm(this.placeholder)}
              @input=${this.onInputChange}
            />`}
      </bim-input>
    `}};ub.styles=[en.scrollbar,ke`
      :host {
        --bim-input--bgc: var(--bim-ui_bg-contrast-20);
        flex: 1;
        display: block;
      }

      input,
      textarea {
        font-family: inherit;
        background-color: transparent;
        border: none;
        width: 100%;
        padding: var(--bim-ui_size-3xs);
        color: var(--bim-text-input--c, var(--bim-ui_bg-contrast-100));
      }

      input {
        outline: none;
        height: 100%;
        padding: 0 var(--bim-ui_size-3xs); /* Override padding */
        border-radius: var(--bim-text-input--bdrs, var(--bim-ui_size-4xs));
      }

      textarea {
        line-height: 1.1rem;
        resize: vertical;
      }

      :host(:focus) {
        --bim-input--olc: var(--bim-ui_accent-base);
      }

      /* :host([disabled]) {
      --bim-input--bgc: var(--bim-ui_bg-contrast-20);
    } */
    `];let qi=ub;ys([Z({type:String,reflect:!0})],qi.prototype,"icon",2);ys([Z({type:String,reflect:!0})],qi.prototype,"label",2);ys([Z({type:String,reflect:!0})],qi.prototype,"name",2);ys([Z({type:String,reflect:!0})],qi.prototype,"placeholder",2);ys([Z({type:String,reflect:!0})],qi.prototype,"value",2);ys([Z({type:Boolean,reflect:!0})],qi.prototype,"vertical",2);ys([Z({type:Number,reflect:!0})],qi.prototype,"debounce",2);ys([Z({type:Number,reflect:!0})],qi.prototype,"rows",2);ys([Z({type:String,reflect:!0})],qi.prototype,"type",1);var OS=Object.defineProperty,NS=Object.getOwnPropertyDescriptor,db=(i,e,t,s)=>{for(var n=s>1?void 0:s?NS(e,t):e,r=i.length-1,o;r>=0;r--)(o=i[r])&&(n=(s?o(e,t,n):o(n))||n);return s&&n&&OS(e,t,n),n};const fb=class extends Pe{constructor(){super(...arguments),this.rows=2,this._vertical=!1}set vertical(e){this._vertical=e,this.updateChildren()}get vertical(){return this._vertical}updateChildren(){const e=this.children;for(const t of e)this.vertical?t.setAttribute("label-hidden",""):t.removeAttribute("label-hidden")}render(){return de`
      <style>
        .parent {
          grid-auto-flow: ${this.vertical?"row":"column"};
          grid-template-rows: repeat(${this.rows}, 1fr);
        }
      </style>
      <div class="parent">
        <slot @slotchange=${this.updateChildren}></slot>
      </div>
    `}};fb.styles=ke`
    .parent {
      display: grid;
      gap: 0.25rem;
    }

    ::slotted(bim-button[label]:not([vertical])) {
      --bim-button--jc: flex-start;
    }

    ::slotted(bim-button) {
      --bim-label--c: var(--bim-ui_bg-contrast-80);
    }
  `;let ou=fb;db([Z({type:Number,reflect:!0})],ou.prototype,"rows",2);db([Z({type:Boolean,reflect:!0})],ou.prototype,"vertical",1);var PS=Object.defineProperty,LS=Object.getOwnPropertyDescriptor,au=(i,e,t,s)=>{for(var n=s>1?void 0:s?LS(e,t):e,r=i.length-1,o;r>=0;r--)(o=i[r])&&(n=(s?o(e,t,n):o(n))||n);return s&&n&&PS(e,t,n),n};const pb=class extends Pe{constructor(){super(...arguments),this._vertical=!1,this._labelHidden=!1}set vertical(e){this._vertical=e,this.updateChildren()}get vertical(){return this._vertical}set labelHidden(e){this._labelHidden=e,this.updateChildren()}get labelHidden(){return this._labelHidden}updateChildren(){const e=this.children;for(const t of e)t instanceof ou&&(t.vertical=this.vertical),t.toggleAttribute("label-hidden",this.vertical)}render(){return de`
      <div class="parent">
        <div class="children">
          <slot @slotchange=${this.updateChildren}></slot>
        </div>
        ${!this.labelHidden&&(this.label||this.icon)?de`<bim-label .icon=${this.icon}>${this.label}</bim-label>`:null}
      </div>
    `}};pb.styles=ke`
    :host {
      --bim-label--fz: var(--bim-ui_size-xs);
      --bim-label--c: var(--bim-ui_bg-contrast-60);
      display: block;
      flex: 1;
    }

    :host(:not([vertical])) ::slotted(bim-button[vertical]) {
      --bim-icon--fz: var(--bim-ui_size-5xl);
      min-height: 3.75rem;
    }

    ::slotted(bim-button) {
      --bim-label--c: var(--bim-ui_bg-contrast-80);
    }

    .parent {
      display: flex;
      flex-direction: column;
      gap: 0.5rem;
      align-items: center;
      padding: 0.5rem;
      height: 100%;
      box-sizing: border-box;
      justify-content: space-between;
    }

    :host([vertical]) .parent {
      flex-direction: row-reverse;
    }

    :host([vertical]) .parent > bim-label {
      writing-mode: tb;
    }

    .children {
      display: flex;
      gap: 0.25rem;
    }

    :host([vertical]) .children {
      flex-direction: column;
    }
  `;let xo=pb;au([Z({type:String,reflect:!0})],xo.prototype,"label",2);au([Z({type:String,reflect:!0})],xo.prototype,"icon",2);au([Z({type:Boolean,reflect:!0})],xo.prototype,"vertical",1);au([Z({type:Boolean,attribute:"label-hidden",reflect:!0})],xo.prototype,"labelHidden",1);var DS=Object.defineProperty,US=Object.getOwnPropertyDescriptor,Ep=(i,e,t,s)=>{for(var n=s>1?void 0:s?US(e,t):e,r=i.length-1,o;r>=0;r--)(o=i[r])&&(n=(s?o(e,t,n):o(n))||n);return s&&n&&DS(e,t,n),n};const mb=class extends Pe{constructor(){super(...arguments),this.labelsHidden=!1,this._vertical=!1,this._hidden=!1}set vertical(e){this._vertical=e,this.updateSections()}get vertical(){return this._vertical}set hidden(e){this._hidden=e,this.dispatchEvent(new Event("hiddenchange"))}get hidden(){return this._hidden}updateSections(){const e=this.children;for(const t of e)t instanceof xo&&(t.labelHidden=this.vertical&&!VI.config.sectionLabelOnVerticalToolbar,t.vertical=this.vertical)}render(){return de`
      <div class="parent">
        <slot @slotchange=${this.updateSections}></slot>
      </div>
    `}};mb.styles=ke`
    :host {
      --bim-button--bgc: transparent;
      background-color: var(--bim-ui_bg-base);
      border-radius: var(--bim-ui_size-2xs);
      display: block;
    }

    :host([hidden]) {
      display: none;
    }

    .parent {
      display: flex;
      width: min-content;
      pointer-events: auto;
    }

    :host([vertical]) .parent {
      flex-direction: column;
    }

    :host([vertical]) {
      width: min-content;
      border-radius: var(--bim-ui_size-2xs);
      border: 1px solid var(--bim-ui_bg-contrast-20);
    }

    ::slotted(bim-toolbar-section:not(:last-child)) {
      border-right: 1px solid var(--bim-ui_bg-contrast-20);
      border-bottom: none;
    }

    :host([vertical]) ::slotted(bim-toolbar-section:not(:last-child)) {
      border-bottom: 1px solid var(--bim-ui_bg-contrast-20);
      border-right: none;
    }
  `;let lu=mb;Ep([Z({type:String,reflect:!0})],lu.prototype,"icon",2);Ep([Z({type:Boolean,attribute:"labels-hidden",reflect:!0})],lu.prototype,"labelsHidden",2);Ep([Z({type:Boolean,reflect:!0})],lu.prototype,"vertical",1);var kS=Object.defineProperty,BS=(i,e,t,s)=>{for(var n=void 0,r=i.length-1,o;r>=0;r--)(o=i[r])&&(n=o(e,t,n)||n);return n&&kS(e,t,n),n};const gb=class extends Pe{constructor(){super(),this._onResize=new Event("resize"),new ResizeObserver(()=>{setTimeout(()=>{this.dispatchEvent(this._onResize)})}).observe(this)}render(){return de`
      <div class="parent">
        <slot></slot>
      </div>
    `}};gb.styles=ke`
    :host {
      display: grid;
      min-width: 0;
      min-height: 0;
      height: 100%;
    }

    .parent {
      overflow: hidden;
      position: relative;
    }
  `;let Eb=gb;BS([Z({type:String,reflect:!0})],Eb.prototype,"name");var zS=Object.defineProperty,VS=(i,e,t)=>e in i?zS(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,R=(i,e,t)=>(VS(i,typeof e!="symbol"?e+"":e,t),t),$S=Object.defineProperty,HS=(i,e,t)=>e in i?$S(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,T=(i,e,t)=>(HS(i,typeof e!="symbol"?e+"":e,t),t);const Ib=0,GS=1,YS=2,Km=2,zu=1.25,Jm=1,Gh=6*4+4+4,hu=65535,jS=Math.pow(2,-24),Vu=Symbol("SKIP_GENERATION");function WS(i){return i.index?i.index.count:i.attributes.position.count}function Ro(i){return WS(i)/3}function XS(i,e=ArrayBuffer){return i>65535?new Uint32Array(new e(4*i)):new Uint16Array(new e(2*i))}function qS(i,e){if(!i.index){const t=i.attributes.position.count,s=e.useSharedArrayBuffer?SharedArrayBuffer:ArrayBuffer,n=XS(t,s);i.setIndex(new Ct(n,1));for(let r=0;r<t;r++)n[r]=r}}function bb(i){const e=Ro(i),t=i.drawRange,s=t.start/3,n=(t.start+t.count)/3,r=Math.max(0,s),o=Math.min(e,n)-r;return[{offset:Math.floor(r),count:Math.floor(o)}]}function vb(i){if(!i.groups||!i.groups.length)return bb(i);const e=[],t=new Set,s=i.drawRange,n=s.start/3,r=(s.start+s.count)/3;for(const a of i.groups){const l=a.start/3,h=(a.start+a.count)/3;t.add(Math.max(n,l)),t.add(Math.min(r,h))}const o=Array.from(t.values()).sort((a,l)=>a-l);for(let a=0;a<o.length-1;a++){const l=o[a],h=o[a+1];e.push({offset:Math.floor(l),count:Math.floor(h-l)})}return e}function ZS(i){if(i.groups.length===0)return!1;const e=Ro(i),t=vb(i).sort((r,o)=>r.offset-o.offset),s=t[t.length-1];s.count=Math.min(e-s.offset,s.count);let n=0;return t.forEach(({count:r})=>n+=r),e!==n}function qe(i,e,t){return t.min.x=e[i],t.min.y=e[i+1],t.min.z=e[i+2],t.max.x=e[i+3],t.max.y=e[i+4],t.max.z=e[i+5],t}function QS(i){i[0]=i[1]=i[2]=1/0,i[3]=i[4]=i[5]=-1/0}function eg(i){let e=-1,t=-1/0;for(let s=0;s<3;s++){const n=i[s+3]-i[s];n>t&&(t=n,e=s)}return e}function tg(i,e){e.set(i)}function ig(i,e,t){let s,n;for(let r=0;r<3;r++){const o=r+3;s=i[r],n=e[r],t[r]=s<n?s:n,s=i[o],n=e[o],t[o]=s>n?s:n}}function eh(i,e,t){for(let s=0;s<3;s++){const n=e[i+2*s],r=e[i+2*s+1],o=n-r,a=n+r;o<t[s]&&(t[s]=o),a>t[s+3]&&(t[s+3]=a)}}function Xo(i){const e=i[3]-i[0],t=i[4]-i[1],s=i[5]-i[2];return 2*(e*t+t*s+s*e)}function $u(i,e,t,s,n=null){let r=1/0,o=1/0,a=1/0,l=-1/0,h=-1/0,u=-1/0,c=1/0,d=1/0,f=1/0,p=-1/0,m=-1/0,g=-1/0;const E=n!==null;for(let I=e*6,v=(e+t)*6;I<v;I+=6){const b=i[I+0],C=i[I+1],S=b-C,_=b+C;S<r&&(r=S),_>l&&(l=_),E&&b<c&&(c=b),E&&b>p&&(p=b);const M=i[I+2],A=i[I+3],F=M-A,D=M+A;F<o&&(o=F),D>h&&(h=D),E&&M<d&&(d=M),E&&M>m&&(m=M);const x=i[I+4],N=i[I+5],y=x-N,U=x+N;y<a&&(a=y),U>u&&(u=U),E&&x<f&&(f=x),E&&x>g&&(g=x)}s[0]=r,s[1]=o,s[2]=a,s[3]=l,s[4]=h,s[5]=u,E&&(n[0]=c,n[1]=d,n[2]=f,n[3]=p,n[4]=m,n[5]=g)}function KS(i,e,t,s){let n=1/0,r=1/0,o=1/0,a=-1/0,l=-1/0,h=-1/0;for(let u=e*6,c=(e+t)*6;u<c;u+=6){const d=i[u+0];d<n&&(n=d),d>a&&(a=d);const f=i[u+2];f<r&&(r=f),f>l&&(l=f);const p=i[u+4];p<o&&(o=p),p>h&&(h=p)}s[0]=n,s[1]=r,s[2]=o,s[3]=a,s[4]=l,s[5]=h}function JS(i,e){QS(e);const t=i.attributes.position,s=i.index?i.index.array:null,n=Ro(i),r=new Float32Array(n*6),o=t.normalized,a=t.array,l=t.offset||0;let h=3;t.isInterleavedBufferAttribute&&(h=t.data.stride);const u=["getX","getY","getZ"];for(let c=0;c<n;c++){const d=c*3,f=c*6;let p=d+0,m=d+1,g=d+2;s&&(p=s[p],m=s[m],g=s[g]),o||(p=p*h+l,m=m*h+l,g=g*h+l);for(let E=0;E<3;E++){let I,v,b;o?(I=t[u[E]](p),v=t[u[E]](m),b=t[u[E]](g)):(I=a[p+E],v=a[m+E],b=a[g+E]);let C=I;v<C&&(C=v),b<C&&(C=b);let S=I;v>S&&(S=v),b>S&&(S=b);const _=(S-C)/2,M=E*2;r[f+M+0]=C+_,r[f+M+1]=_+(Math.abs(C)+_)*jS,C<e[E]&&(e[E]=C),S>e[E+3]&&(e[E+3]=S)}}return r}const es=32,ex=(i,e)=>i.candidate-e.candidate,xs=new Array(es).fill().map(()=>({count:0,bounds:new Float32Array(6),rightCacheBounds:new Float32Array(6),leftCacheBounds:new Float32Array(6),candidate:0})),th=new Float32Array(6);function tx(i,e,t,s,n,r){let o=-1,a=0;if(r===Ib)o=eg(e),o!==-1&&(a=(e[o]+e[o+3])/2);else if(r===GS)o=eg(i),o!==-1&&(a=ix(t,s,n,o));else if(r===YS){const l=Xo(i);let h=zu*n;const u=s*6,c=(s+n)*6;for(let d=0;d<3;d++){const f=e[d],p=(e[d+3]-f)/es;if(n<es/4){const m=[...xs];m.length=n;let g=0;for(let I=u;I<c;I+=6,g++){const v=m[g];v.candidate=t[I+2*d],v.count=0;const{bounds:b,leftCacheBounds:C,rightCacheBounds:S}=v;for(let _=0;_<3;_++)S[_]=1/0,S[_+3]=-1/0,C[_]=1/0,C[_+3]=-1/0,b[_]=1/0,b[_+3]=-1/0;eh(I,t,b)}m.sort(ex);let E=n;for(let I=0;I<E;I++){const v=m[I];for(;I+1<E&&m[I+1].candidate===v.candidate;)m.splice(I+1,1),E--}for(let I=u;I<c;I+=6){const v=t[I+2*d];for(let b=0;b<E;b++){const C=m[b];v>=C.candidate?eh(I,t,C.rightCacheBounds):(eh(I,t,C.leftCacheBounds),C.count++)}}for(let I=0;I<E;I++){const v=m[I],b=v.count,C=n-v.count,S=v.leftCacheBounds,_=v.rightCacheBounds;let M=0;b!==0&&(M=Xo(S)/l);let A=0;C!==0&&(A=Xo(_)/l);const F=Jm+zu*(M*b+A*C);F<h&&(o=d,h=F,a=v.candidate)}}else{for(let E=0;E<es;E++){const I=xs[E];I.count=0,I.candidate=f+p+E*p;const v=I.bounds;for(let b=0;b<3;b++)v[b]=1/0,v[b+3]=-1/0}for(let E=u;E<c;E+=6){let I=~~((t[E+2*d]-f)/p);I>=es&&(I=es-1);const v=xs[I];v.count++,eh(E,t,v.bounds)}const m=xs[es-1];tg(m.bounds,m.rightCacheBounds);for(let E=es-2;E>=0;E--){const I=xs[E],v=xs[E+1];ig(I.bounds,v.rightCacheBounds,I.rightCacheBounds)}let g=0;for(let E=0;E<es-1;E++){const I=xs[E],v=I.count,b=I.bounds,C=xs[E+1].rightCacheBounds;v!==0&&(g===0?tg(b,th):ig(b,th,th)),g+=v;let S=0,_=0;g!==0&&(S=Xo(th)/l);const M=n-g;M!==0&&(_=Xo(C)/l);const A=Jm+zu*(S*g+_*M);A<h&&(o=d,h=A,a=I.candidate)}}}}else console.warn(`MeshBVH: Invalid build strategy value ${r} used.`);return{axis:o,pos:a}}function ix(i,e,t,s){let n=0;for(let r=e,o=e+t;r<o;r++)n+=i[r*6+s*2];return n/t}let ih=class{constructor(){}};function sx(i,e,t,s,n,r){let o=s,a=s+n-1;const l=r.pos,h=r.axis*2;for(;;){for(;o<=a&&t[o*6+h]<l;)o++;for(;o<=a&&t[a*6+h]>=l;)a--;if(o<a){for(let u=0;u<3;u++){let c=e[o*3+u];e[o*3+u]=e[a*3+u],e[a*3+u]=c}for(let u=0;u<6;u++){let c=t[o*6+u];t[o*6+u]=t[a*6+u],t[a*6+u]=c}o++,a--}else return o}}function nx(i,e,t,s,n,r){let o=s,a=s+n-1;const l=r.pos,h=r.axis*2;for(;;){for(;o<=a&&t[o*6+h]<l;)o++;for(;o<=a&&t[a*6+h]>=l;)a--;if(o<a){let u=i[o];i[o]=i[a],i[a]=u;for(let c=0;c<6;c++){let d=t[o*6+c];t[o*6+c]=t[a*6+c],t[a*6+c]=d}o++,a--}else return o}}function rx(i,e){const t=(i.index?i.index.count:i.attributes.position.count)/3,s=t>2**16,n=s?4:2,r=e?new SharedArrayBuffer(t*n):new ArrayBuffer(t*n),o=s?new Uint32Array(r):new Uint16Array(r);for(let a=0,l=o.length;a<l;a++)o[a]=a;return o}function ox(i,e){const t=i.geometry,s=t.index?t.index.array:null,n=e.maxDepth,r=e.verbose,o=e.maxLeafTris,a=e.strategy,l=e.onProgress,h=Ro(t),u=i._indirectBuffer;let c=!1;const d=new Float32Array(6),f=new Float32Array(6),p=JS(t,d),m=e.indirect?nx:sx,g=[],E=e.indirect?bb(t):vb(t);if(E.length===1){const b=E[0],C=new ih;C.boundingData=d,KS(p,b.offset,b.count,f),v(C,b.offset,b.count,f),g.push(C)}else for(let b of E){const C=new ih;C.boundingData=new Float32Array(6),$u(p,b.offset,b.count,C.boundingData,f),v(C,b.offset,b.count,f),g.push(C)}return g;function I(b){l&&l(b/h)}function v(b,C,S,_=null,M=0){if(!c&&M>=n&&(c=!0,r&&(console.warn(`MeshBVH: Max depth of ${n} reached when generating BVH. Consider increasing maxDepth.`),console.warn(t))),S<=o||M>=n)return I(C+S),b.offset=C,b.count=S,b;const A=tx(b.boundingData,_,p,C,S,a);if(A.axis===-1)return I(C+S),b.offset=C,b.count=S,b;const F=m(u,s,p,C,S,A);if(F===C||F===C+S)I(C+S),b.offset=C,b.count=S;else{b.splitAxis=A.axis;const D=new ih,x=C,N=F-C;b.left=D,D.boundingData=new Float32Array(6),$u(p,x,N,D.boundingData,f),v(D,x,N,f,M+1);const y=new ih,U=F,B=S-N;b.right=y,y.boundingData=new Float32Array(6),$u(p,U,B,y.boundingData,f),v(y,U,B,f,M+1)}return b}}function ax(i,e){const t=i.geometry;e.indirect&&(i._indirectBuffer=rx(t,e.useSharedArrayBuffer),ZS(t)&&!e.verbose&&console.warn('MeshBVH: Provided geometry contains groups that do not fully span the vertex contents while using the "indirect" option. BVH may incorrectly report intersections on unrendered portions of the geometry.')),i._indirectBuffer||qS(t,e);const s=ox(i,e);let n,r,o;const a=[],l=e.useSharedArrayBuffer?SharedArrayBuffer:ArrayBuffer;for(let c=0;c<s.length;c++){const d=s[c];let f=h(d);const p=new l(Gh*f);n=new Float32Array(p),r=new Uint32Array(p),o=new Uint16Array(p),u(0,d),a.push(p)}i._roots=a;return;function h(c){return c.count?1:1+h(c.left)+h(c.right)}function u(c,d){const f=c/4,p=c/2,m=!!d.count,g=d.boundingData;for(let E=0;E<6;E++)n[f+E]=g[E];if(m){const E=d.offset,I=d.count;return r[f+6]=E,o[p+14]=I,o[p+15]=hu,c+Gh}else{const E=d.left,I=d.right,v=d.splitAxis;let b;if(b=u(c+Gh,E),b/4>Math.pow(2,32))throw new Error("MeshBVH: Cannot store child pointer greater than 32 bits.");return r[f+6]=b/4,b=u(b,I),r[f+7]=v,b}}}let ps=class{constructor(){this.min=1/0,this.max=-1/0}setFromPointsField(e,t){let s=1/0,n=-1/0;for(let r=0,o=e.length;r<o;r++){const a=e[r][t];s=a<s?a:s,n=a>n?a:n}this.min=s,this.max=n}setFromPoints(e,t){let s=1/0,n=-1/0;for(let r=0,o=t.length;r<o;r++){const a=t[r],l=e.dot(a);s=l<s?l:s,n=l>n?l:n}this.min=s,this.max=n}isSeparated(e){return this.min>e.max||e.min>this.max}};ps.prototype.setFromBox=function(){const i=new P;return function(e,t){const s=t.min,n=t.max;let r=1/0,o=-1/0;for(let a=0;a<=1;a++)for(let l=0;l<=1;l++)for(let h=0;h<=1;h++){i.x=s.x*a+n.x*(1-a),i.y=s.y*l+n.y*(1-l),i.z=s.z*h+n.z*(1-h);const u=e.dot(i);r=Math.min(u,r),o=Math.max(u,o)}this.min=r,this.max=o}}();const lx=function(){const i=new P,e=new P,t=new P;return function(s,n,r){const o=s.start,a=i,l=n.start,h=e;t.subVectors(o,l),i.subVectors(s.end,s.start),e.subVectors(n.end,n.start);const u=t.dot(h),c=h.dot(a),d=h.dot(h),f=t.dot(a),p=a.dot(a)*d-c*c;let m,g;p!==0?m=(u*c-f*d)/p:m=0,g=(u+m*c)/d,r.x=m,r.y=g}}(),Ip=function(){const i=new Ue,e=new P,t=new P;return function(s,n,r,o){lx(s,n,i);let a=i.x,l=i.y;if(a>=0&&a<=1&&l>=0&&l<=1){s.at(a,r),n.at(l,o);return}else if(a>=0&&a<=1){l<0?n.at(0,o):n.at(1,o),s.closestPointToPoint(o,!0,r);return}else if(l>=0&&l<=1){a<0?s.at(0,r):s.at(1,r),n.closestPointToPoint(r,!0,o);return}else{let h;a<0?h=s.start:h=s.end;let u;l<0?u=n.start:u=n.end;const c=e,d=t;if(s.closestPointToPoint(u,!0,e),n.closestPointToPoint(h,!0,t),c.distanceToSquared(u)<=d.distanceToSquared(h)){r.copy(c),o.copy(u);return}else{r.copy(h),o.copy(d);return}}}}(),hx=function(){const i=new P,e=new P,t=new Es,s=new Nt;return function(n,r){const{radius:o,center:a}=n,{a:l,b:h,c:u}=r;if(s.start=l,s.end=h,s.closestPointToPoint(a,!0,i).distanceTo(a)<=o||(s.start=l,s.end=u,s.closestPointToPoint(a,!0,i).distanceTo(a)<=o)||(s.start=h,s.end=u,s.closestPointToPoint(a,!0,i).distanceTo(a)<=o))return!0;const c=r.getPlane(t);if(Math.abs(c.distanceToPoint(a))<=o){const d=c.projectPoint(a,e);if(r.containsPoint(d))return!0}return!1}}(),cx=1e-15;function Hu(i){return Math.abs(i)<cx}let yi=class extends wn{constructor(...e){super(...e),this.isExtendedTriangle=!0,this.satAxes=new Array(4).fill().map(()=>new P),this.satBounds=new Array(4).fill().map(()=>new ps),this.points=[this.a,this.b,this.c],this.sphere=new qn,this.plane=new Es,this.needsUpdate=!0}intersectsSphere(e){return hx(e,this)}update(){const e=this.a,t=this.b,s=this.c,n=this.points,r=this.satAxes,o=this.satBounds,a=r[0],l=o[0];this.getNormal(a),l.setFromPoints(a,n);const h=r[1],u=o[1];h.subVectors(e,t),u.setFromPoints(h,n);const c=r[2],d=o[2];c.subVectors(t,s),d.setFromPoints(c,n);const f=r[3],p=o[3];f.subVectors(s,e),p.setFromPoints(f,n),this.sphere.setFromPoints(this.points),this.plane.setFromNormalAndCoplanarPoint(a,e),this.needsUpdate=!1}};yi.prototype.closestPointToSegment=function(){const i=new P,e=new P,t=new Nt;return function(s,n=null,r=null){const{start:o,end:a}=s,l=this.points;let h,u=1/0;for(let c=0;c<3;c++){const d=(c+1)%3;t.start.copy(l[c]),t.end.copy(l[d]),Ip(t,s,i,e),h=i.distanceToSquared(e),h<u&&(u=h,n&&n.copy(i),r&&r.copy(e))}return this.closestPointToPoint(o,i),h=o.distanceToSquared(i),h<u&&(u=h,n&&n.copy(i),r&&r.copy(o)),this.closestPointToPoint(a,i),h=a.distanceToSquared(i),h<u&&(u=h,n&&n.copy(i),r&&r.copy(a)),Math.sqrt(u)}}();yi.prototype.intersectsTriangle=function(){const i=new yi,e=new Array(3),t=new Array(3),s=new ps,n=new ps,r=new P,o=new P,a=new P,l=new P,h=new P,u=new Nt,c=new Nt,d=new Nt,f=new P;function p(m,g,E){const I=m.points;let v=0,b=-1;for(let C=0;C<3;C++){const{start:S,end:_}=u;S.copy(I[C]),_.copy(I[(C+1)%3]),u.delta(o);const M=Hu(g.distanceToPoint(S));if(Hu(g.normal.dot(o))&&M){E.copy(u),v=2;break}const A=g.intersectLine(u,f);if(!A&&M&&f.copy(S),(A||M)&&!Hu(f.distanceTo(_))){if(v<=1)(v===1?E.start:E.end).copy(f),M&&(b=v);else if(v>=2){(b===1?E.start:E.end).copy(f),v=2;break}if(v++,v===2&&b===-1)break}}return v}return function(m,g=null,E=!1){this.needsUpdate&&this.update(),m.isExtendedTriangle?m.needsUpdate&&m.update():(i.copy(m),i.update(),m=i);const I=this.plane,v=m.plane;if(Math.abs(I.normal.dot(v.normal))>1-1e-10){const b=this.satBounds,C=this.satAxes;t[0]=m.a,t[1]=m.b,t[2]=m.c;for(let M=0;M<4;M++){const A=b[M],F=C[M];if(s.setFromPoints(F,t),A.isSeparated(s))return!1}const S=m.satBounds,_=m.satAxes;e[0]=this.a,e[1]=this.b,e[2]=this.c;for(let M=0;M<4;M++){const A=S[M],F=_[M];if(s.setFromPoints(F,e),A.isSeparated(s))return!1}for(let M=0;M<4;M++){const A=C[M];for(let F=0;F<4;F++){const D=_[F];if(r.crossVectors(A,D),s.setFromPoints(r,e),n.setFromPoints(r,t),s.isSeparated(n))return!1}}return g&&(E||console.warn("ExtendedTriangle.intersectsTriangle: Triangles are coplanar which does not support an output edge. Setting edge to 0, 0, 0."),g.start.set(0,0,0),g.end.set(0,0,0)),!0}else{const b=p(this,v,c);if(b===1&&m.containsPoint(c.end))return g&&(g.start.copy(c.end),g.end.copy(c.end)),!0;if(b!==2)return!1;const C=p(m,I,d);if(C===1&&this.containsPoint(d.end))return g&&(g.start.copy(d.end),g.end.copy(d.end)),!0;if(C!==2)return!1;if(c.delta(a),d.delta(l),a.dot(l)<0){let x=d.start;d.start=d.end,d.end=x}const S=c.start.dot(a),_=c.end.dot(a),M=d.start.dot(a),A=d.end.dot(a),F=_<M,D=S<A;return S!==A&&M!==_&&F===D?!1:(g&&(h.subVectors(c.start,d.start),h.dot(a)>0?g.start.copy(c.start):g.start.copy(d.start),h.subVectors(c.end,d.end),h.dot(a)<0?g.end.copy(c.end):g.end.copy(d.end)),!0)}}}();yi.prototype.distanceToPoint=function(){const i=new P;return function(e){return this.closestPointToPoint(e,i),e.distanceTo(i)}}();yi.prototype.distanceToTriangle=function(){const i=new P,e=new P,t=["a","b","c"],s=new Nt,n=new Nt;return function(r,o=null,a=null){const l=o||a?s:null;if(this.intersectsTriangle(r,l))return(o||a)&&(o&&l.getCenter(o),a&&l.getCenter(a)),0;let h=1/0;for(let u=0;u<3;u++){let c;const d=t[u],f=r[d];this.closestPointToPoint(f,i),c=f.distanceToSquared(i),c<h&&(h=c,o&&o.copy(i),a&&a.copy(f));const p=this[d];r.closestPointToPoint(p,i),c=p.distanceToSquared(i),c<h&&(h=c,o&&o.copy(p),a&&a.copy(i))}for(let u=0;u<3;u++){const c=t[u],d=t[(u+1)%3];s.set(this[c],this[d]);for(let f=0;f<3;f++){const p=t[f],m=t[(f+1)%3];n.set(r[p],r[m]),Ip(s,n,i,e);const g=i.distanceToSquared(e);g<h&&(h=g,o&&o.copy(i),a&&a.copy(e))}}return Math.sqrt(h)}}();let At=class{constructor(e,t,s){this.isOrientedBox=!0,this.min=new P,this.max=new P,this.matrix=new ce,this.invMatrix=new ce,this.points=new Array(8).fill().map(()=>new P),this.satAxes=new Array(3).fill().map(()=>new P),this.satBounds=new Array(3).fill().map(()=>new ps),this.alignedSatBounds=new Array(3).fill().map(()=>new ps),this.needsUpdate=!1,e&&this.min.copy(e),t&&this.max.copy(t),s&&this.matrix.copy(s)}set(e,t,s){this.min.copy(e),this.max.copy(t),this.matrix.copy(s),this.needsUpdate=!0}copy(e){this.min.copy(e.min),this.max.copy(e.max),this.matrix.copy(e.matrix),this.needsUpdate=!0}};At.prototype.update=function(){return function(){const i=this.matrix,e=this.min,t=this.max,s=this.points;for(let l=0;l<=1;l++)for(let h=0;h<=1;h++)for(let u=0;u<=1;u++){const c=1*l|2*h|4*u,d=s[c];d.x=l?t.x:e.x,d.y=h?t.y:e.y,d.z=u?t.z:e.z,d.applyMatrix4(i)}const n=this.satBounds,r=this.satAxes,o=s[0];for(let l=0;l<3;l++){const h=r[l],u=n[l],c=1<<l,d=s[c];h.subVectors(o,d),u.setFromPoints(h,s)}const a=this.alignedSatBounds;a[0].setFromPointsField(s,"x"),a[1].setFromPointsField(s,"y"),a[2].setFromPointsField(s,"z"),this.invMatrix.copy(this.matrix).invert(),this.needsUpdate=!1}}();At.prototype.intersectsBox=function(){const i=new ps;return function(e){this.needsUpdate&&this.update();const t=e.min,s=e.max,n=this.satBounds,r=this.satAxes,o=this.alignedSatBounds;if(i.min=t.x,i.max=s.x,o[0].isSeparated(i)||(i.min=t.y,i.max=s.y,o[1].isSeparated(i))||(i.min=t.z,i.max=s.z,o[2].isSeparated(i)))return!1;for(let a=0;a<3;a++){const l=r[a],h=n[a];if(i.setFromBox(l,e),h.isSeparated(i))return!1}return!0}}();At.prototype.intersectsTriangle=function(){const i=new yi,e=new Array(3),t=new ps,s=new ps,n=new P;return function(r){this.needsUpdate&&this.update(),r.isExtendedTriangle?r.needsUpdate&&r.update():(i.copy(r),i.update(),r=i);const o=this.satBounds,a=this.satAxes;e[0]=r.a,e[1]=r.b,e[2]=r.c;for(let c=0;c<3;c++){const d=o[c],f=a[c];if(t.setFromPoints(f,e),d.isSeparated(t))return!1}const l=r.satBounds,h=r.satAxes,u=this.points;for(let c=0;c<3;c++){const d=l[c],f=h[c];if(t.setFromPoints(f,u),d.isSeparated(t))return!1}for(let c=0;c<3;c++){const d=a[c];for(let f=0;f<4;f++){const p=h[f];if(n.crossVectors(d,p),t.setFromPoints(n,e),s.setFromPoints(n,u),t.isSeparated(s))return!1}}return!0}}();At.prototype.closestPointToPoint=function(){return function(i,e){return this.needsUpdate&&this.update(),e.copy(i).applyMatrix4(this.invMatrix).clamp(this.min,this.max).applyMatrix4(this.matrix),e}}();At.prototype.distanceToPoint=function(){const i=new P;return function(e){return this.closestPointToPoint(e,i),e.distanceTo(i)}}();At.prototype.distanceToBox=function(){const i=["x","y","z"],e=new Array(12).fill().map(()=>new Nt),t=new Array(12).fill().map(()=>new Nt),s=new P,n=new P;return function(r,o=0,a=null,l=null){if(this.needsUpdate&&this.update(),this.intersectsBox(r))return(a||l)&&(r.getCenter(n),this.closestPointToPoint(n,s),r.closestPointToPoint(s,n),a&&a.copy(s),l&&l.copy(n)),0;const h=o*o,u=r.min,c=r.max,d=this.points;let f=1/0;for(let m=0;m<8;m++){const g=d[m];n.copy(g).clamp(u,c);const E=g.distanceToSquared(n);if(E<f&&(f=E,a&&a.copy(g),l&&l.copy(n),E<h))return Math.sqrt(E)}let p=0;for(let m=0;m<3;m++)for(let g=0;g<=1;g++)for(let E=0;E<=1;E++){const I=(m+1)%3,v=(m+2)%3,b=g<<I|E<<v,C=1<<m|g<<I|E<<v,S=d[b],_=d[C];e[p].set(S,_);const M=i[m],A=i[I],F=i[v],D=t[p],x=D.start,N=D.end;x[M]=u[M],x[A]=g?u[A]:c[A],x[F]=E?u[F]:c[A],N[M]=c[M],N[A]=g?u[A]:c[A],N[F]=E?u[F]:c[A],p++}for(let m=0;m<=1;m++)for(let g=0;g<=1;g++)for(let E=0;E<=1;E++){n.x=m?c.x:u.x,n.y=g?c.y:u.y,n.z=E?c.z:u.z,this.closestPointToPoint(n,s);const I=n.distanceToSquared(s);if(I<f&&(f=I,a&&a.copy(s),l&&l.copy(n),I<h))return Math.sqrt(I)}for(let m=0;m<12;m++){const g=e[m];for(let E=0;E<12;E++){const I=t[E];Ip(g,I,s,n);const v=s.distanceToSquared(n);if(v<f&&(f=v,a&&a.copy(s),l&&l.copy(n),v<h))return Math.sqrt(v)}}return Math.sqrt(f)}}();let bp=class{constructor(e){this._getNewPrimitive=e,this._primitives=[]}getPrimitive(){const e=this._primitives;return e.length===0?this._getNewPrimitive():e.pop()}releasePrimitive(e){this._primitives.push(e)}};class ux extends bp{constructor(){super(()=>new yi)}}const ii=new ux;function Bt(i,e){return e[i+15]===65535}function Vt(i,e){return e[i+6]}function si(i,e){return e[i+14]}function ni(i){return i+8}function ri(i,e){return e[i+6]}function yb(i,e){return e[i+7]}class dx{constructor(){this.float32Array=null,this.uint16Array=null,this.uint32Array=null;const e=[];let t=null;this.setBuffer=s=>{t&&e.push(t),t=s,this.float32Array=new Float32Array(s),this.uint16Array=new Uint16Array(s),this.uint32Array=new Uint32Array(s)},this.clearBuffer=()=>{t=null,this.float32Array=null,this.uint16Array=null,this.uint32Array=null,e.length!==0&&this.setBuffer(e.pop())}}}const Ye=new dx;let Us,Ar;const or=[],sh=new bp(()=>new Ge);function fx(i,e,t,s,n,r){Us=sh.getPrimitive(),Ar=sh.getPrimitive(),or.push(Us,Ar),Ye.setBuffer(i._roots[e]);const o=Bd(0,i.geometry,t,s,n,r);Ye.clearBuffer(),sh.releasePrimitive(Us),sh.releasePrimitive(Ar),or.pop(),or.pop();const a=or.length;return a>0&&(Ar=or[a-1],Us=or[a-2]),o}function Bd(i,e,t,s,n=null,r=0,o=0){const{float32Array:a,uint16Array:l,uint32Array:h}=Ye;let u=i*2;if(Bt(u,l)){const c=Vt(i,h),d=si(u,l);return qe(i,a,Us),s(c,d,!1,o,r+i,Us)}else{let c=function(D){const{uint16Array:x,uint32Array:N}=Ye;let y=D*2;for(;!Bt(y,x);)D=ni(D),y=D*2;return Vt(D,N)},d=function(D){const{uint16Array:x,uint32Array:N}=Ye;let y=D*2;for(;!Bt(y,x);)D=ri(D,N),y=D*2;return Vt(D,N)+si(y,x)};const f=ni(i),p=ri(i,h);let m=f,g=p,E,I,v,b;if(n&&(v=Us,b=Ar,qe(m,a,v),qe(g,a,b),E=n(v),I=n(b),I<E)){m=p,g=f;const D=E;E=I,I=D,v=b}v||(v=Us,qe(m,a,v));const C=Bt(m*2,l),S=t(v,C,E,o+1,r+m);let _;if(S===Km){const D=c(m),x=d(m)-D;_=s(D,x,!0,o+1,r+m,v)}else _=S&&Bd(m,e,t,s,n,r,o+1);if(_)return!0;b=Ar,qe(g,a,b);const M=Bt(g*2,l),A=t(b,M,I,o+1,r+g);let F;if(A===Km){const D=c(g),x=d(g)-D;F=s(D,x,!0,o+1,r+g,b)}else F=A&&Bd(g,e,t,s,n,r,o+1);return!!F}}const qo=new P,Gu=new P;function px(i,e,t={},s=0,n=1/0){const r=s*s,o=n*n;let a=1/0,l=null;if(i.shapecast({boundsTraverseOrder:u=>(qo.copy(e).clamp(u.min,u.max),qo.distanceToSquared(e)),intersectsBounds:(u,c,d)=>d<a&&d<o,intersectsTriangle:(u,c)=>{u.closestPointToPoint(e,qo);const d=e.distanceToSquared(qo);return d<a&&(Gu.copy(qo),a=d,l=c),d<r}}),a===1/0)return null;const h=Math.sqrt(a);return t.point?t.point.copy(Gu):t.point=Gu.clone(),t.distance=h,t.faceIndex=l,t}const ar=new P,lr=new P,hr=new P,nh=new Ue,rh=new Ue,oh=new Ue,sg=new P,ng=new P,rg=new P,ah=new P;function mx(i,e,t,s,n,r){let o;return r===vT?o=i.intersectTriangle(s,t,e,!0,n):o=i.intersectTriangle(e,t,s,r!==gl,n),o===null?null:{distance:i.origin.distanceTo(n),point:n.clone()}}function gx(i,e,t,s,n,r,o,a,l){ar.fromBufferAttribute(e,r),lr.fromBufferAttribute(e,o),hr.fromBufferAttribute(e,a);const h=mx(i,ar,lr,hr,ah,l);if(h){s&&(nh.fromBufferAttribute(s,r),rh.fromBufferAttribute(s,o),oh.fromBufferAttribute(s,a),h.uv=wn.getInterpolation(ah,ar,lr,hr,nh,rh,oh,new Ue)),n&&(nh.fromBufferAttribute(n,r),rh.fromBufferAttribute(n,o),oh.fromBufferAttribute(n,a),h.uv1=wn.getInterpolation(ah,ar,lr,hr,nh,rh,oh,new Ue)),t&&(sg.fromBufferAttribute(t,r),ng.fromBufferAttribute(t,o),rg.fromBufferAttribute(t,a),h.normal=wn.getInterpolation(ah,ar,lr,hr,sg,ng,rg,new P),h.normal.dot(i.direction)>0&&h.normal.multiplyScalar(-1));const u={a:r,b:o,c:a,normal:new P,materialIndex:0};wn.getNormal(ar,lr,hr,u.normal),h.face=u,h.faceIndex=r}return h}function cu(i,e,t,s,n){const r=s*3;let o=r+0,a=r+1,l=r+2;const h=i.index;i.index&&(o=h.getX(o),a=h.getX(a),l=h.getX(l));const{position:u,normal:c,uv:d,uv1:f}=i.attributes,p=gx(t,u,c,d,f,o,a,l,e);return p?(p.faceIndex=s,n&&n.push(p),p):null}function rt(i,e,t,s){const n=i.a,r=i.b,o=i.c;let a=e,l=e+1,h=e+2;t&&(a=t.getX(a),l=t.getX(l),h=t.getX(h)),n.x=s.getX(a),n.y=s.getY(a),n.z=s.getZ(a),r.x=s.getX(l),r.y=s.getY(l),r.z=s.getZ(l),o.x=s.getX(h),o.y=s.getY(h),o.z=s.getZ(h)}function Ex(i,e,t,s,n,r){const{geometry:o,_indirectBuffer:a}=i;for(let l=s,h=s+n;l<h;l++)cu(o,e,t,l,r)}function Ix(i,e,t,s,n){const{geometry:r,_indirectBuffer:o}=i;let a=1/0,l=null;for(let h=s,u=s+n;h<u;h++){let c;c=cu(r,e,t,h),c&&c.distance<a&&(l=c,a=c.distance)}return l}function bx(i,e,t,s,n,r,o){const{geometry:a}=t,{index:l}=a,h=a.attributes.position;for(let u=i,c=e+i;u<c;u++){let d;if(d=u,rt(o,d*3,l,h),o.needsUpdate=!0,s(o,d,n,r))return!0}return!1}function vx(i,e=null){e&&Array.isArray(e)&&(e=new Set(e));const t=i.geometry,s=t.index?t.index.array:null,n=t.attributes.position;let r,o,a,l,h=0;const u=i._roots;for(let d=0,f=u.length;d<f;d++)r=u[d],o=new Uint32Array(r),a=new Uint16Array(r),l=new Float32Array(r),c(0,h),h+=r.byteLength;function c(d,f,p=!1){const m=d*2;if(a[m+15]===hu){const g=o[d+6],E=a[m+14];let I=1/0,v=1/0,b=1/0,C=-1/0,S=-1/0,_=-1/0;for(let M=3*g,A=3*(g+E);M<A;M++){let F=s[M];const D=n.getX(F),x=n.getY(F),N=n.getZ(F);D<I&&(I=D),D>C&&(C=D),x<v&&(v=x),x>S&&(S=x),N<b&&(b=N),N>_&&(_=N)}return l[d+0]!==I||l[d+1]!==v||l[d+2]!==b||l[d+3]!==C||l[d+4]!==S||l[d+5]!==_?(l[d+0]=I,l[d+1]=v,l[d+2]=b,l[d+3]=C,l[d+4]=S,l[d+5]=_,!0):!1}else{const g=d+8,E=o[d+6],I=g+f,v=E+f;let b=p,C=!1,S=!1;e?b||(C=e.has(I),S=e.has(v),b=!C&&!S):(C=!0,S=!0);const _=b||C,M=b||S;let A=!1;_&&(A=c(g,f,b));let F=!1;M&&(F=c(E,f,b));const D=A||F;if(D)for(let x=0;x<3;x++){const N=g+x,y=E+x,U=l[N],B=l[N+3],k=l[y],W=l[y+3];l[d+x]=U<k?U:k,l[d+x+3]=B>W?B:W}return D}}}const og=new Ge;function Gs(i,e,t,s){return qe(i,e,og),t.intersectBox(og,s)}function yx(i,e,t,s,n,r){const{geometry:o,_indirectBuffer:a}=i;for(let l=s,h=s+n;l<h;l++){let u=a?a[l]:l;cu(o,e,t,u,r)}}function Cx(i,e,t,s,n){const{geometry:r,_indirectBuffer:o}=i;let a=1/0,l=null;for(let h=s,u=s+n;h<u;h++){let c;c=cu(r,e,t,o?o[h]:h),c&&c.distance<a&&(l=c,a=c.distance)}return l}function Tx(i,e,t,s,n,r,o){const{geometry:a}=t,{index:l}=a,h=a.attributes.position;for(let u=i,c=e+i;u<c;u++){let d;if(d=t.resolveTriangleIndex(u),rt(o,d*3,l,h),o.needsUpdate=!0,s(o,d,n,r))return!0}return!1}const ag=new P;function wx(i,e,t,s,n){Ye.setBuffer(i._roots[e]),zd(0,i,t,s,n),Ye.clearBuffer()}function zd(i,e,t,s,n){const{float32Array:r,uint16Array:o,uint32Array:a}=Ye,l=i*2;if(Bt(l,o)){const h=Vt(i,a),u=si(l,o);Ex(e,t,s,h,u,n)}else{const h=ni(i);Gs(h,r,s,ag)&&zd(h,e,t,s,n);const u=ri(i,a);Gs(u,r,s,ag)&&zd(u,e,t,s,n)}}const lg=new P,Sx=["x","y","z"];function xx(i,e,t,s){Ye.setBuffer(i._roots[e]);const n=Vd(0,i,t,s);return Ye.clearBuffer(),n}function Vd(i,e,t,s){const{float32Array:n,uint16Array:r,uint32Array:o}=Ye;let a=i*2;if(Bt(a,r)){const l=Vt(i,o),h=si(a,r);return Ix(e,t,s,l,h)}else{const l=yb(i,o),h=Sx[l],u=s.direction[h]>=0;let c,d;u?(c=ni(i),d=ri(i,o)):(c=ri(i,o),d=ni(i));const f=Gs(c,n,s,lg)?Vd(c,e,t,s):null;if(f){const m=f.point[h];if(u?m<=n[d+l]:m>=n[d+l+3])return f}const p=Gs(d,n,s,lg)?Vd(d,e,t,s):null;return f&&p?f.distance<=p.distance?f:p:f||p||null}}const lh=new Ge,cr=new yi,ur=new yi,Zo=new ce,hg=new At,hh=new At;function Rx(i,e,t,s){Ye.setBuffer(i._roots[e]);const n=$d(0,i,t,s);return Ye.clearBuffer(),n}function $d(i,e,t,s,n=null){const{float32Array:r,uint16Array:o,uint32Array:a}=Ye;let l=i*2;if(n===null&&(t.boundingBox||t.computeBoundingBox(),hg.set(t.boundingBox.min,t.boundingBox.max,s),n=hg),Bt(l,o)){const h=e.geometry,u=h.index,c=h.attributes.position,d=t.index,f=t.attributes.position,p=Vt(i,a),m=si(l,o);if(Zo.copy(s).invert(),t.boundsTree)return qe(i,r,hh),hh.matrix.copy(Zo),hh.needsUpdate=!0,t.boundsTree.shapecast({intersectsBounds:g=>hh.intersectsBox(g),intersectsTriangle:g=>{g.a.applyMatrix4(s),g.b.applyMatrix4(s),g.c.applyMatrix4(s),g.needsUpdate=!0;for(let E=p*3,I=(m+p)*3;E<I;E+=3)if(rt(ur,E,u,c),ur.needsUpdate=!0,g.intersectsTriangle(ur))return!0;return!1}});for(let g=p*3,E=(m+p)*3;g<E;g+=3){rt(cr,g,u,c),cr.a.applyMatrix4(Zo),cr.b.applyMatrix4(Zo),cr.c.applyMatrix4(Zo),cr.needsUpdate=!0;for(let I=0,v=d.count;I<v;I+=3)if(rt(ur,I,d,f),ur.needsUpdate=!0,cr.intersectsTriangle(ur))return!0}}else{const h=i+8,u=a[i+6];return qe(h,r,lh),!!(n.intersectsBox(lh)&&$d(h,e,t,s,n)||(qe(u,r,lh),n.intersectsBox(lh)&&$d(u,e,t,s,n)))}}const ch=new ce,Yu=new At,Qo=new At,_x=new P,Ax=new P,Mx=new P,Fx=new P;function Ox(i,e,t,s={},n={},r=0,o=1/0){e.boundingBox||e.computeBoundingBox(),Yu.set(e.boundingBox.min,e.boundingBox.max,t),Yu.needsUpdate=!0;const a=i.geometry,l=a.attributes.position,h=a.index,u=e.attributes.position,c=e.index,d=ii.getPrimitive(),f=ii.getPrimitive();let p=_x,m=Ax,g=null,E=null;n&&(g=Mx,E=Fx);let I=1/0,v=null,b=null;return ch.copy(t).invert(),Qo.matrix.copy(ch),i.shapecast({boundsTraverseOrder:C=>Yu.distanceToBox(C),intersectsBounds:(C,S,_)=>_<I&&_<o?(S&&(Qo.min.copy(C.min),Qo.max.copy(C.max),Qo.needsUpdate=!0),!0):!1,intersectsRange:(C,S)=>{if(e.boundsTree)return e.boundsTree.shapecast({boundsTraverseOrder:_=>Qo.distanceToBox(_),intersectsBounds:(_,M,A)=>A<I&&A<o,intersectsRange:(_,M)=>{for(let A=_,F=_+M;A<F;A++){rt(f,3*A,c,u),f.a.applyMatrix4(t),f.b.applyMatrix4(t),f.c.applyMatrix4(t),f.needsUpdate=!0;for(let D=C,x=C+S;D<x;D++){rt(d,3*D,h,l),d.needsUpdate=!0;const N=d.distanceToTriangle(f,p,g);if(N<I&&(m.copy(p),E&&E.copy(g),I=N,v=D,b=A),N<r)return!0}}}});{const _=Ro(e);for(let M=0,A=_;M<A;M++){rt(f,3*M,c,u),f.a.applyMatrix4(t),f.b.applyMatrix4(t),f.c.applyMatrix4(t),f.needsUpdate=!0;for(let F=C,D=C+S;F<D;F++){rt(d,3*F,h,l),d.needsUpdate=!0;const x=d.distanceToTriangle(f,p,g);if(x<I&&(m.copy(p),E&&E.copy(g),I=x,v=F,b=M),x<r)return!0}}}}}),ii.releasePrimitive(d),ii.releasePrimitive(f),I===1/0?null:(s.point?s.point.copy(m):s.point=m.clone(),s.distance=I,s.faceIndex=v,n&&(n.point?n.point.copy(E):n.point=E.clone(),n.point.applyMatrix4(ch),m.applyMatrix4(ch),n.distance=m.sub(n.point).length(),n.faceIndex=b),s)}function Nx(i,e=null){e&&Array.isArray(e)&&(e=new Set(e));const t=i.geometry,s=t.index?t.index.array:null,n=t.attributes.position;let r,o,a,l,h=0;const u=i._roots;for(let d=0,f=u.length;d<f;d++)r=u[d],o=new Uint32Array(r),a=new Uint16Array(r),l=new Float32Array(r),c(0,h),h+=r.byteLength;function c(d,f,p=!1){const m=d*2;if(a[m+15]===hu){const g=o[d+6],E=a[m+14];let I=1/0,v=1/0,b=1/0,C=-1/0,S=-1/0,_=-1/0;for(let M=g,A=g+E;M<A;M++){const F=3*i.resolveTriangleIndex(M);for(let D=0;D<3;D++){let x=F+D;x=s?s[x]:x;const N=n.getX(x),y=n.getY(x),U=n.getZ(x);N<I&&(I=N),N>C&&(C=N),y<v&&(v=y),y>S&&(S=y),U<b&&(b=U),U>_&&(_=U)}}return l[d+0]!==I||l[d+1]!==v||l[d+2]!==b||l[d+3]!==C||l[d+4]!==S||l[d+5]!==_?(l[d+0]=I,l[d+1]=v,l[d+2]=b,l[d+3]=C,l[d+4]=S,l[d+5]=_,!0):!1}else{const g=d+8,E=o[d+6],I=g+f,v=E+f;let b=p,C=!1,S=!1;e?b||(C=e.has(I),S=e.has(v),b=!C&&!S):(C=!0,S=!0);const _=b||C,M=b||S;let A=!1;_&&(A=c(g,f,b));let F=!1;M&&(F=c(E,f,b));const D=A||F;if(D)for(let x=0;x<3;x++){const N=g+x,y=E+x,U=l[N],B=l[N+3],k=l[y],W=l[y+3];l[d+x]=U<k?U:k,l[d+x+3]=B>W?B:W}return D}}}const cg=new P;function Px(i,e,t,s,n){Ye.setBuffer(i._roots[e]),Hd(0,i,t,s,n),Ye.clearBuffer()}function Hd(i,e,t,s,n){const{float32Array:r,uint16Array:o,uint32Array:a}=Ye,l=i*2;if(Bt(l,o)){const h=Vt(i,a),u=si(l,o);yx(e,t,s,h,u,n)}else{const h=ni(i);Gs(h,r,s,cg)&&Hd(h,e,t,s,n);const u=ri(i,a);Gs(u,r,s,cg)&&Hd(u,e,t,s,n)}}const ug=new P,Lx=["x","y","z"];function Dx(i,e,t,s){Ye.setBuffer(i._roots[e]);const n=Gd(0,i,t,s);return Ye.clearBuffer(),n}function Gd(i,e,t,s){const{float32Array:n,uint16Array:r,uint32Array:o}=Ye;let a=i*2;if(Bt(a,r)){const l=Vt(i,o),h=si(a,r);return Cx(e,t,s,l,h)}else{const l=yb(i,o),h=Lx[l],u=s.direction[h]>=0;let c,d;u?(c=ni(i),d=ri(i,o)):(c=ri(i,o),d=ni(i));const f=Gs(c,n,s,ug)?Gd(c,e,t,s):null;if(f){const m=f.point[h];if(u?m<=n[d+l]:m>=n[d+l+3])return f}const p=Gs(d,n,s,ug)?Gd(d,e,t,s):null;return f&&p?f.distance<=p.distance?f:p:f||p||null}}const uh=new Ge,dr=new yi,fr=new yi,Ko=new ce,dg=new At,dh=new At;function Ux(i,e,t,s){Ye.setBuffer(i._roots[e]);const n=Yd(0,i,t,s);return Ye.clearBuffer(),n}function Yd(i,e,t,s,n=null){const{float32Array:r,uint16Array:o,uint32Array:a}=Ye;let l=i*2;if(n===null&&(t.boundingBox||t.computeBoundingBox(),dg.set(t.boundingBox.min,t.boundingBox.max,s),n=dg),Bt(l,o)){const h=e.geometry,u=h.index,c=h.attributes.position,d=t.index,f=t.attributes.position,p=Vt(i,a),m=si(l,o);if(Ko.copy(s).invert(),t.boundsTree)return qe(i,r,dh),dh.matrix.copy(Ko),dh.needsUpdate=!0,t.boundsTree.shapecast({intersectsBounds:g=>dh.intersectsBox(g),intersectsTriangle:g=>{g.a.applyMatrix4(s),g.b.applyMatrix4(s),g.c.applyMatrix4(s),g.needsUpdate=!0;for(let E=p,I=m+p;E<I;E++)if(rt(fr,3*e.resolveTriangleIndex(E),u,c),fr.needsUpdate=!0,g.intersectsTriangle(fr))return!0;return!1}});for(let g=p,E=m+p;g<E;g++){const I=e.resolveTriangleIndex(g);rt(dr,3*I,u,c),dr.a.applyMatrix4(Ko),dr.b.applyMatrix4(Ko),dr.c.applyMatrix4(Ko),dr.needsUpdate=!0;for(let v=0,b=d.count;v<b;v+=3)if(rt(fr,v,d,f),fr.needsUpdate=!0,dr.intersectsTriangle(fr))return!0}}else{const h=i+8,u=a[i+6];return qe(h,r,uh),!!(n.intersectsBox(uh)&&Yd(h,e,t,s,n)||(qe(u,r,uh),n.intersectsBox(uh)&&Yd(u,e,t,s,n)))}}const fh=new ce,ju=new At,Jo=new At,kx=new P,Bx=new P,zx=new P,Vx=new P;function $x(i,e,t,s={},n={},r=0,o=1/0){e.boundingBox||e.computeBoundingBox(),ju.set(e.boundingBox.min,e.boundingBox.max,t),ju.needsUpdate=!0;const a=i.geometry,l=a.attributes.position,h=a.index,u=e.attributes.position,c=e.index,d=ii.getPrimitive(),f=ii.getPrimitive();let p=kx,m=Bx,g=null,E=null;n&&(g=zx,E=Vx);let I=1/0,v=null,b=null;return fh.copy(t).invert(),Jo.matrix.copy(fh),i.shapecast({boundsTraverseOrder:C=>ju.distanceToBox(C),intersectsBounds:(C,S,_)=>_<I&&_<o?(S&&(Jo.min.copy(C.min),Jo.max.copy(C.max),Jo.needsUpdate=!0),!0):!1,intersectsRange:(C,S)=>{if(e.boundsTree){const _=e.boundsTree;return _.shapecast({boundsTraverseOrder:M=>Jo.distanceToBox(M),intersectsBounds:(M,A,F)=>F<I&&F<o,intersectsRange:(M,A)=>{for(let F=M,D=M+A;F<D;F++){const x=_.resolveTriangleIndex(F);rt(f,3*x,c,u),f.a.applyMatrix4(t),f.b.applyMatrix4(t),f.c.applyMatrix4(t),f.needsUpdate=!0;for(let N=C,y=C+S;N<y;N++){const U=i.resolveTriangleIndex(N);rt(d,3*U,h,l),d.needsUpdate=!0;const B=d.distanceToTriangle(f,p,g);if(B<I&&(m.copy(p),E&&E.copy(g),I=B,v=N,b=F),B<r)return!0}}}})}else{const _=Ro(e);for(let M=0,A=_;M<A;M++){rt(f,3*M,c,u),f.a.applyMatrix4(t),f.b.applyMatrix4(t),f.c.applyMatrix4(t),f.needsUpdate=!0;for(let F=C,D=C+S;F<D;F++){const x=i.resolveTriangleIndex(F);rt(d,3*x,h,l),d.needsUpdate=!0;const N=d.distanceToTriangle(f,p,g);if(N<I&&(m.copy(p),E&&E.copy(g),I=N,v=F,b=M),N<r)return!0}}}}}),ii.releasePrimitive(d),ii.releasePrimitive(f),I===1/0?null:(s.point?s.point.copy(m):s.point=m.clone(),s.distance=I,s.faceIndex=v,n&&(n.point?n.point.copy(E):n.point=E.clone(),n.point.applyMatrix4(fh),m.applyMatrix4(fh),n.distance=m.sub(n.point).length(),n.faceIndex=b),s)}function Hx(){return typeof SharedArrayBuffer<"u"}const Sa=new Ye.constructor,Ic=new Ye.constructor,Ns=new bp(()=>new Ge),pr=new Ge,mr=new Ge,Wu=new Ge,Xu=new Ge;let qu=!1;function Gx(i,e,t,s){if(qu)throw new Error("MeshBVH: Recursive calls to bvhcast not supported.");qu=!0;const n=i._roots,r=e._roots;let o,a=0,l=0;const h=new ce().copy(t).invert();for(let u=0,c=n.length;u<c;u++){Sa.setBuffer(n[u]),l=0;const d=Ns.getPrimitive();qe(0,Sa.float32Array,d),d.applyMatrix4(h);for(let f=0,p=r.length;f<p&&(Ic.setBuffer(r[u]),o=Ii(0,0,t,h,s,a,l,0,0,d),Ic.clearBuffer(),l+=r[f].length,!o);f++);if(Ns.releasePrimitive(d),Sa.clearBuffer(),a+=n[u].length,o)break}return qu=!1,o}function Ii(i,e,t,s,n,r=0,o=0,a=0,l=0,h=null,u=!1){let c,d;u?(c=Ic,d=Sa):(c=Sa,d=Ic);const f=c.float32Array,p=c.uint32Array,m=c.uint16Array,g=d.float32Array,E=d.uint32Array,I=d.uint16Array,v=i*2,b=e*2,C=Bt(v,m),S=Bt(b,I);let _=!1;if(S&&C)u?_=n(Vt(e,E),si(e*2,I),Vt(i,p),si(i*2,m),l,o+e,a,r+i):_=n(Vt(i,p),si(i*2,m),Vt(e,E),si(e*2,I),a,r+i,l,o+e);else if(S){const M=Ns.getPrimitive();qe(e,g,M),M.applyMatrix4(t);const A=ni(i),F=ri(i,p);qe(A,f,pr),qe(F,f,mr);const D=M.intersectsBox(pr),x=M.intersectsBox(mr);_=D&&Ii(e,A,s,t,n,o,r,l,a+1,M,!u)||x&&Ii(e,F,s,t,n,o,r,l,a+1,M,!u),Ns.releasePrimitive(M)}else{const M=ni(e),A=ri(e,E);qe(M,g,Wu),qe(A,g,Xu);const F=h.intersectsBox(Wu),D=h.intersectsBox(Xu);if(F&&D)_=Ii(i,M,t,s,n,r,o,a,l+1,h,u)||Ii(i,A,t,s,n,r,o,a,l+1,h,u);else if(F)if(C)_=Ii(i,M,t,s,n,r,o,a,l+1,h,u);else{const x=Ns.getPrimitive();x.copy(Wu).applyMatrix4(t);const N=ni(i),y=ri(i,p);qe(N,f,pr),qe(y,f,mr);const U=x.intersectsBox(pr),B=x.intersectsBox(mr);_=U&&Ii(M,N,s,t,n,o,r,l,a+1,x,!u)||B&&Ii(M,y,s,t,n,o,r,l,a+1,x,!u),Ns.releasePrimitive(x)}else if(D)if(C)_=Ii(i,A,t,s,n,r,o,a,l+1,h,u);else{const x=Ns.getPrimitive();x.copy(Xu).applyMatrix4(t);const N=ni(i),y=ri(i,p);qe(N,f,pr),qe(y,f,mr);const U=x.intersectsBox(pr),B=x.intersectsBox(mr);_=U&&Ii(A,N,s,t,n,o,r,l,a+1,x,!u)||B&&Ii(A,y,s,t,n,o,r,l,a+1,x,!u),Ns.releasePrimitive(x)}}return _}const ph=new At,fg=new Ge;let Yx=class Cb{static serialize(e,t={}){t={cloneBuffers:!0,...t};const s=e.geometry,n=e._roots,r=e._indirectBuffer,o=s.getIndex();let a;return t.cloneBuffers?a={roots:n.map(l=>l.slice()),index:o.array.slice(),indirectBuffer:r?r.slice():null}:a={roots:n,index:o.array,indirectBuffer:r},a}static deserialize(e,t,s={}){s={setIndex:!0,indirect:!!e.indirectBuffer,...s};const{index:n,roots:r,indirectBuffer:o}=e,a=new Cb(t,{...s,[Vu]:!0});if(a._roots=r,a._indirectBuffer=o||null,s.setIndex){const l=t.getIndex();if(l===null){const h=new Ct(e.index,1,!1);t.setIndex(h)}else l.array!==n&&(l.array.set(n),l.needsUpdate=!0)}return a}get indirect(){return!!this._indirectBuffer}constructor(e,t={}){if(e.isBufferGeometry){if(e.index&&e.index.isInterleavedBufferAttribute)throw new Error("MeshBVH: InterleavedBufferAttribute is not supported for the index attribute.")}else throw new Error("MeshBVH: Only BufferGeometries are supported.");if(t=Object.assign({strategy:Ib,maxDepth:40,maxLeafTris:10,verbose:!0,useSharedArrayBuffer:!1,setBoundingBox:!0,onProgress:null,indirect:!1,[Vu]:!1},t),t.useSharedArrayBuffer&&!Hx())throw new Error("MeshBVH: SharedArrayBuffer is not available.");this.geometry=e,this._roots=null,this._indirectBuffer=null,t[Vu]||(ax(this,t),!e.boundingBox&&t.setBoundingBox&&(e.boundingBox=this.getBoundingBox(new Ge)));const{_indirectBuffer:s}=this;this.resolveTriangleIndex=t.indirect?n=>s[n]:n=>n}refit(e=null){return(this.indirect?Nx:vx)(this,e)}traverse(e,t=0){const s=this._roots[t],n=new Uint32Array(s),r=new Uint16Array(s);o(0);function o(a,l=0){const h=a*2,u=r[h+15]===hu;if(u){const c=n[a+6],d=r[h+14];e(l,u,new Float32Array(s,a*4,6),c,d)}else{const c=a+Gh/4,d=n[a+6],f=n[a+7];e(l,u,new Float32Array(s,a*4,6),f)||(o(c,l+1),o(d,l+1))}}}raycast(e,t=cm){const s=this._roots,n=this.geometry,r=[],o=t.isMaterial,a=Array.isArray(t),l=n.groups,h=o?t.side:t,u=this.indirect?Px:wx;for(let c=0,d=s.length;c<d;c++){const f=a?t[l[c].materialIndex].side:h,p=r.length;if(u(this,c,f,e,r),a){const m=l[c].materialIndex;for(let g=p,E=r.length;g<E;g++)r[g].face.materialIndex=m}}return r}raycastFirst(e,t=cm){const s=this._roots,n=this.geometry,r=t.isMaterial,o=Array.isArray(t);let a=null;const l=n.groups,h=r?t.side:t,u=this.indirect?Dx:xx;for(let c=0,d=s.length;c<d;c++){const f=o?t[l[c].materialIndex].side:h,p=u(this,c,f,e);p!=null&&(a==null||p.distance<a.distance)&&(a=p,o&&(p.face.materialIndex=l[c].materialIndex))}return a}intersectsGeometry(e,t){let s=!1;const n=this._roots,r=this.indirect?Ux:Rx;for(let o=0,a=n.length;o<a&&(s=r(this,o,e,t),!s);o++);return s}shapecast(e){const t=ii.getPrimitive(),s=this.indirect?Tx:bx;let{boundsTraverseOrder:n,intersectsBounds:r,intersectsRange:o,intersectsTriangle:a}=e;if(o&&a){const c=o;o=(d,f,p,m,g)=>c(d,f,p,m,g)?!0:s(d,f,this,a,p,m,t)}else o||(a?o=(c,d,f,p)=>s(c,d,this,a,f,p,t):o=(c,d,f)=>f);let l=!1,h=0;const u=this._roots;for(let c=0,d=u.length;c<d;c++){const f=u[c];if(l=fx(this,c,r,o,n,h),l)break;h+=f.byteLength}return ii.releasePrimitive(t),l}bvhcast(e,t,s){let{intersectsRanges:n,intersectsTriangles:r}=s;const o=ii.getPrimitive(),a=this.geometry.index,l=this.geometry.attributes.position,h=this.indirect?p=>{const m=this.resolveTriangleIndex(p);rt(o,m*3,a,l)}:p=>{rt(o,p*3,a,l)},u=ii.getPrimitive(),c=e.geometry.index,d=e.geometry.attributes.position,f=e.indirect?p=>{const m=e.resolveTriangleIndex(p);rt(u,m*3,c,d)}:p=>{rt(u,p*3,c,d)};if(r){const p=(m,g,E,I,v,b,C,S)=>{for(let _=E,M=E+I;_<M;_++){f(_),u.a.applyMatrix4(t),u.b.applyMatrix4(t),u.c.applyMatrix4(t),u.needsUpdate=!0;for(let A=m,F=m+g;A<F;A++)if(h(A),o.needsUpdate=!0,r(o,u,A,_,v,b,C,S))return!0}return!1};if(n){const m=n;n=function(g,E,I,v,b,C,S,_){return m(g,E,I,v,b,C,S,_)?!0:p(g,E,I,v,b,C,S,_)}}else n=p}return Gx(this,e,t,n)}intersectsBox(e,t){return ph.set(e.min,e.max,t),ph.needsUpdate=!0,this.shapecast({intersectsBounds:s=>ph.intersectsBox(s),intersectsTriangle:s=>ph.intersectsTriangle(s)})}intersectsSphere(e){return this.shapecast({intersectsBounds:t=>e.intersectsBox(t),intersectsTriangle:t=>t.intersectsSphere(e)})}closestPointToGeometry(e,t,s={},n={},r=0,o=1/0){return(this.indirect?$x:Ox)(this,e,t,s,n,r,o)}closestPointToPoint(e,t={},s=0,n=1/0){return px(this,e,t,s,n)}getBoundingBox(e){return e.makeEmpty(),this._roots.forEach(t=>{qe(0,new Float32Array(t),fg),e.union(fg)}),e}};function pg(i,e,t){return i===null||(i.point.applyMatrix4(e.matrixWorld),i.distance=i.point.distanceTo(t.ray.origin),i.object=e,i.distance<t.near||i.distance>t.far)?null:i}const Zu=new iT,mg=new ce,jx=ne.prototype.raycast;function Wx(i,e){if(this.geometry.boundsTree){if(this.material===void 0)return;mg.copy(this.matrixWorld).invert(),Zu.copy(i.ray).applyMatrix4(mg);const t=this.geometry.boundsTree;if(i.firstHitOnly===!0){const s=pg(t.raycastFirst(Zu,this.material),this,i);s&&e.push(s)}else{const s=t.raycast(Zu,this.material);for(let n=0,r=s.length;n<r;n++){const o=pg(s[n],this,i);o&&e.push(o)}}}else jx.call(this,i,e)}function Xx(i){return this.boundsTree=new Yx(this,i),this.boundsTree}function qx(){this.boundsTree=null}let Y=class{constructor(){T(this,"enabled",!0),T(this,"trigger",i=>{if(!this.enabled)return;const e=this.handlers.slice(0);for(const t of e)t(i)}),T(this,"handlers",[])}add(i){this.handlers.push(i)}remove(i){this.handlers=this.handlers.filter(e=>e!==i)}reset(){this.handlers.length=0}},rs=class{constructor(){T(this,"enabled",!0),T(this,"trigger",async e=>{if(!this.enabled)return;const t=this.handlers.slice(0);for(const s of t)await s(e)}),T(this,"handlers",[])}add(e){this.handlers.push(e)}remove(e){this.handlers=this.handlers.filter(t=>t!==e)}reset(){this.handlers.length=0}},vp=class{constructor(e){T(this,"isDisposeable",()=>"dispose"in this&&"onDisposed"in this),T(this,"isResizeable",()=>"resize"in this&&"getSize"in this),T(this,"isUpdateable",()=>"onAfterUpdate"in this&&"onBeforeUpdate"in this&&"update"in this),T(this,"isHideable",()=>"visible"in this),T(this,"isConfigurable",()=>"setup"in this&&"config"in this&&"onSetup"in this),this.components=e}},be=class extends vp{},Tb=class extends vp{constructor(e){super(e),T(this,"worlds",new Map),T(this,"onWorldChanged",new Y),T(this,"currentWorld",null),this.onWorldChanged.add(({world:t,action:s})=>{s==="removed"&&this.worlds.delete(t.uuid)})}};class Zx extends Tb{constructor(){super(...arguments),T(this,"hasCameraControls",()=>"controls"in this)}}class Qx extends Tb{constructor(){super(...arguments),T(this,"onAfterUpdate",new Y),T(this,"onBeforeUpdate",new Y),T(this,"onDisposed",new Y),T(this,"onResize",new Y),T(this,"onClippingPlanesUpdated",new Y),T(this,"clippingPlanes",[])}updateClippingPlanes(){this.onClippingPlanesUpdated.trigger()}setPlane(e,t,s){t.isLocal=s;const n=this.clippingPlanes.indexOf(t);e&&n===-1?this.clippingPlanes.push(t):!e&&n>-1&&this.clippingPlanes.splice(n,1),this.three.clippingPlanes=this.clippingPlanes.filter(r=>!r.isLocal)}}const wb=class jd extends be{constructor(e){super(e),T(this,"_disposedComponents",new Set),T(this,"enabled",!0),e.add(jd.uuid,this)}get(){return this._disposedComponents}destroy(e,t=!0,s=!0){e.removeFromParent();const n=e;n.dispose&&n.dispose(),this.disposeGeometryAndMaterials(e,t),s&&n.children&&n.children.length&&this.disposeChildren(n),e.children.length=0}disposeGeometry(e){e.boundsTree&&e.disposeBoundsTree&&e.disposeBoundsTree(),e.dispose()}disposeGeometryAndMaterials(e,t){const s=e;s.geometry&&this.disposeGeometry(s.geometry),t&&s.material&&jd.disposeMaterial(s),s.material=[],s.geometry=null}disposeChildren(e){for(const t of e.children)this.destroy(t)}static disposeMaterial(e){if(e.material)if(Array.isArray(e.material))for(const t of e.material)t.dispose();else e.material.dispose()}};T(wb,"uuid","76e9cd8e-ad8f-4753-9ef6-cbc60f7247fe");let Gi=wb,Bs=class extends Set{constructor(e){super(e),T(this,"onItemAdded",new Y),T(this,"onItemDeleted",new Y),T(this,"onCleared",new Y),T(this,"guard",()=>!0)}clear(){super.clear(),this.onCleared.trigger()}add(...e){for(const t of e)this.has(t)||!this.guard(t)||(super.add(t),this.onItemAdded||(this.onItemAdded=new Y),this.onItemAdded.trigger(t));return this}delete(e){const t=super.delete(e);return t&&this.onItemDeleted.trigger(),t}dispose(){this.clear(),this.onItemAdded.reset(),this.onItemDeleted.reset(),this.onCleared.reset()}};class Ci extends Map{constructor(e){super(e),T(this,"onItemSet",new Y),T(this,"onItemUpdated",new Y),T(this,"onItemDeleted",new Y),T(this,"onCleared",new Y),T(this,"guard",()=>!0)}clear(){super.clear(),this.onCleared.trigger()}set(e,t){const s=this.has(e);if(!(this.guard??(()=>!0))(e,t))return this;const n=super.set(e,t);return s?(this.onItemUpdated||(this.onItemUpdated=new Y),this.onItemUpdated.trigger({key:e,value:t})):(this.onItemSet||(this.onItemSet=new Y),this.onItemSet.trigger({key:e,value:t})),n}delete(e){const t=super.delete(e);return t&&this.onItemDeleted.trigger(e),t}dispose(){this.clear(),this.onItemSet.reset(),this.onItemDeleted.reset(),this.onCleared.reset()}}let Qu=class{static isEntry(e){return new Set(["Boolean","Color","Text","Number","Select","Vector3","TextSet","None"]).has(e.type)}static copySchema(e,t={}){for(const s in e){const n=e[s];this.isEntry(n)?t[s]=this.copyEntry(n):(t[s]={},this.copySchema(n,t[s]))}return t}static copyEntry(e){if(e.type==="Boolean"){const t=e;return{type:t.type,value:t.value}}if(e.type==="Color"){const t=e;return{type:t.type,value:t.value.clone()}}if(e.type==="Text"){const t=e;return{type:t.type,value:t.value}}if(e.type==="Number"){const t=e;return{type:t.type,value:t.value,min:t.min,max:t.max,interpolable:t.interpolable}}if(e.type==="Select"){const t=e;return{type:t.type,value:t.value,multiple:t.multiple,options:new Set(t.options)}}if(e.type==="Vector3"){const t=e;return{type:t.type,value:t.value.clone()}}if(e.type==="TextSet"){const t=e;return{type:t.type,value:new Set(t.value)}}if(e.type==="None"){const t=e;return{type:t.type,value:t.value}}throw new Error("Invalid entry!")}};class Kx{constructor(){T(this,"list",new Set)}add(e){for(const t of e)this.list.add(t)}remove(e){for(const t of e)this.list.delete(t)}set(e){for(const t of this.list)t.enabled=e}reset(){for(const e of this.list)e.reset()}}const Yh=0,Jx=1,eR=new P,gg=new Nt,Ku=new Es,Eg=new P,mh=new wn;class tR{constructor(){this.tolerance=-1,this.faces=[],this.newFaces=[],this.assigned=new Ig,this.unassigned=new Ig,this.vertices=[]}setFromPoints(e){if(e.length>=4){this.makeEmpty();for(let t=0,s=e.length;t<s;t++)this.vertices.push(new iR(e[t]));this.compute()}return this}setFromObject(e){const t=[];return e.updateMatrixWorld(!0),e.traverse(function(s){const n=s.geometry;if(n!==void 0){const r=n.attributes.position;if(r!==void 0)for(let o=0,a=r.count;o<a;o++){const l=new P;l.fromBufferAttribute(r,o).applyMatrix4(s.matrixWorld),t.push(l)}}}),this.setFromPoints(t)}containsPoint(e){const t=this.faces;for(let s=0,n=t.length;s<n;s++)if(t[s].distanceToPoint(e)>this.tolerance)return!1;return!0}intersectRay(e,t){const s=this.faces;let n=-1/0,r=1/0;for(let o=0,a=s.length;o<a;o++){const l=s[o],h=l.distanceToPoint(e.origin),u=l.normal.dot(e.direction);if(h>0&&u>=0)return null;const c=u!==0?-h/u:0;if(!(c<=0)&&(u>0?r=Math.min(c,r):n=Math.max(c,n),n>r))return null}return n!==-1/0?e.at(n,t):e.at(r,t),t}intersectsRay(e){return this.intersectRay(e,eR)!==null}makeEmpty(){return this.faces=[],this.vertices=[],this}addVertexToFace(e,t){return e.face=t,t.outside===null?this.assigned.append(e):this.assigned.insertBefore(t.outside,e),t.outside=e,this}removeVertexFromFace(e,t){return e===t.outside&&(e.next!==null&&e.next.face===t?t.outside=e.next:t.outside=null),this.assigned.remove(e),this}removeAllVerticesFromFace(e){if(e.outside!==null){const t=e.outside;let s=e.outside;for(;s.next!==null&&s.next.face===e;)s=s.next;return this.assigned.removeSubList(t,s),t.prev=s.next=null,e.outside=null,t}}deleteFaceVertices(e,t){const s=this.removeAllVerticesFromFace(e);if(s!==void 0)if(t===void 0)this.unassigned.appendChain(s);else{let n=s;do{const r=n.next;t.distanceToPoint(n.point)>this.tolerance?this.addVertexToFace(n,t):this.unassigned.append(n),n=r}while(n!==null)}return this}resolveUnassignedPoints(e){if(this.unassigned.isEmpty()===!1){let t=this.unassigned.first();do{const s=t.next;let n=this.tolerance,r=null;for(let o=0;o<e.length;o++){const a=e[o];if(a.mark===Yh){const l=a.distanceToPoint(t.point);if(l>n&&(n=l,r=a),n>1e3*this.tolerance)break}}r!==null&&this.addVertexToFace(t,r),t=s}while(t!==null)}return this}computeExtremes(){const e=new P,t=new P,s=[],n=[];for(let r=0;r<3;r++)s[r]=n[r]=this.vertices[0];e.copy(this.vertices[0].point),t.copy(this.vertices[0].point);for(let r=0,o=this.vertices.length;r<o;r++){const a=this.vertices[r],l=a.point;for(let h=0;h<3;h++)l.getComponent(h)<e.getComponent(h)&&(e.setComponent(h,l.getComponent(h)),s[h]=a);for(let h=0;h<3;h++)l.getComponent(h)>t.getComponent(h)&&(t.setComponent(h,l.getComponent(h)),n[h]=a)}return this.tolerance=3*Number.EPSILON*(Math.max(Math.abs(e.x),Math.abs(t.x))+Math.max(Math.abs(e.y),Math.abs(t.y))+Math.max(Math.abs(e.z),Math.abs(t.z))),{min:s,max:n}}computeInitialHull(){const e=this.vertices,t=this.computeExtremes(),s=t.min,n=t.max;let r=0,o=0;for(let d=0;d<3;d++){const f=n[d].point.getComponent(d)-s[d].point.getComponent(d);f>r&&(r=f,o=d)}const a=s[o],l=n[o];let h,u;r=0,gg.set(a.point,l.point);for(let d=0,f=this.vertices.length;d<f;d++){const p=e[d];if(p!==a&&p!==l){gg.closestPointToPoint(p.point,!0,Eg);const m=Eg.distanceToSquared(p.point);m>r&&(r=m,h=p)}}r=-1,Ku.setFromCoplanarPoints(a.point,l.point,h.point);for(let d=0,f=this.vertices.length;d<f;d++){const p=e[d];if(p!==a&&p!==l&&p!==h){const m=Math.abs(Ku.distanceToPoint(p.point));m>r&&(r=m,u=p)}}const c=[];if(Ku.distanceToPoint(u.point)<0){c.push(Qi.create(a,l,h),Qi.create(u,l,a),Qi.create(u,h,l),Qi.create(u,a,h));for(let d=0;d<3;d++){const f=(d+1)%3;c[d+1].getEdge(2).setTwin(c[0].getEdge(f)),c[d+1].getEdge(1).setTwin(c[f+1].getEdge(0))}}else{c.push(Qi.create(a,h,l),Qi.create(u,a,l),Qi.create(u,l,h),Qi.create(u,h,a));for(let d=0;d<3;d++){const f=(d+1)%3;c[d+1].getEdge(2).setTwin(c[0].getEdge((3-d)%3)),c[d+1].getEdge(0).setTwin(c[f+1].getEdge(1))}}for(let d=0;d<4;d++)this.faces.push(c[d]);for(let d=0,f=e.length;d<f;d++){const p=e[d];if(p!==a&&p!==l&&p!==h&&p!==u){r=this.tolerance;let m=null;for(let g=0;g<4;g++){const E=this.faces[g].distanceToPoint(p.point);E>r&&(r=E,m=this.faces[g])}m!==null&&this.addVertexToFace(p,m)}}return this}reindexFaces(){const e=[];for(let t=0;t<this.faces.length;t++){const s=this.faces[t];s.mark===Yh&&e.push(s)}return this.faces=e,this}nextVertexToAdd(){if(this.assigned.isEmpty()===!1){let e,t=0;const s=this.assigned.first().face;let n=s.outside;do{const r=s.distanceToPoint(n.point);r>t&&(t=r,e=n),n=n.next}while(n!==null&&n.face===s);return e}}computeHorizon(e,t,s,n){this.deleteFaceVertices(s),s.mark=Jx;let r;t===null?r=t=s.getEdge(0):r=t.next;do{const o=r.twin,a=o.face;a.mark===Yh&&(a.distanceToPoint(e)>this.tolerance?this.computeHorizon(e,o,a,n):n.push(r)),r=r.next}while(r!==t);return this}addAdjoiningFace(e,t){const s=Qi.create(e,t.tail(),t.head());return this.faces.push(s),s.getEdge(-1).setTwin(t.twin),s.getEdge(0)}addNewFaces(e,t){this.newFaces=[];let s=null,n=null;for(let r=0;r<t.length;r++){const o=t[r],a=this.addAdjoiningFace(e,o);s===null?s=a:a.next.setTwin(n),this.newFaces.push(a.face),n=a}return s.next.setTwin(n),this}addVertexToHull(e){const t=[];return this.unassigned.clear(),this.removeVertexFromFace(e,e.face),this.computeHorizon(e.point,null,e.face,t),this.addNewFaces(e,t),this.resolveUnassignedPoints(this.newFaces),this}cleanup(){return this.assigned.clear(),this.unassigned.clear(),this.newFaces=[],this}compute(){let e;for(this.computeInitialHull();(e=this.nextVertexToAdd())!==void 0;)this.addVertexToHull(e);return this.reindexFaces(),this.cleanup(),this}}let Qi=class Sb{constructor(){this.normal=new P,this.midpoint=new P,this.area=0,this.constant=0,this.outside=null,this.mark=Yh,this.edge=null}static create(e,t,s){const n=new Sb,r=new Ju(e,n),o=new Ju(t,n),a=new Ju(s,n);return r.next=a.prev=o,o.next=r.prev=a,a.next=o.prev=r,n.edge=r,n.compute()}getEdge(e){let t=this.edge;for(;e>0;)t=t.next,e--;for(;e<0;)t=t.prev,e++;return t}compute(){const e=this.edge.tail(),t=this.edge.head(),s=this.edge.next.head();return mh.set(e.point,t.point,s.point),mh.getNormal(this.normal),mh.getMidpoint(this.midpoint),this.area=mh.getArea(),this.constant=this.normal.dot(this.midpoint),this}distanceToPoint(e){return this.normal.dot(e)-this.constant}},Ju=class{constructor(e,t){this.vertex=e,this.prev=null,this.next=null,this.twin=null,this.face=t}head(){return this.vertex}tail(){return this.prev?this.prev.vertex:null}length(){const e=this.head(),t=this.tail();return t!==null?t.point.distanceTo(e.point):-1}lengthSquared(){const e=this.head(),t=this.tail();return t!==null?t.point.distanceToSquared(e.point):-1}setTwin(e){return this.twin=e,e.twin=this,this}};class iR{constructor(e){this.point=e,this.prev=null,this.next=null,this.face=null}}let Ig=class{constructor(){this.head=null,this.tail=null}first(){return this.head}last(){return this.tail}clear(){return this.head=this.tail=null,this}insertBefore(e,t){return t.prev=e.prev,t.next=e,t.prev===null?this.head=t:t.prev.next=t,e.prev=t,this}insertAfter(e,t){return t.prev=e,t.next=e.next,t.next===null?this.tail=t:t.next.prev=t,e.next=t,this}append(e){return this.head===null?this.head=e:this.tail.next=e,e.prev=this.tail,e.next=null,this.tail=e,this}appendChain(e){for(this.head===null?this.head=e:this.tail.next=e,e.prev=this.tail;e.next!==null;)e=e.next;return this.tail=e,this}remove(e){return e.prev===null?this.head=e.next:e.prev.next=e.next,e.next===null?this.tail=e.prev:e.next.prev=e.prev,this}removeSubList(e,t){return e.prev===null?this.head=t.next:e.prev.next=t.next,t.next===null?this.tail=e.prev:t.next.prev=e.prev,this}isEmpty(){return this.head===null}};const Wd=[2,2,1],Xd=[1,0,0];function Di(i,e){return i*3+e}function sR(i){const e=i.elements;let t=0;for(let s=0;s<9;s++)t+=e[s]*e[s];return Math.sqrt(t)}function nR(i){const e=i.elements;let t=0;for(let s=0;s<3;s++){const n=e[Di(Wd[s],Xd[s])];t+=2*n*n}return Math.sqrt(t)}function rR(i,e){let t=0,s=1;const n=i.elements;for(let h=0;h<3;h++){const u=Math.abs(n[Di(Wd[h],Xd[h])]);u>t&&(t=u,s=h)}let r=1,o=0;const a=Xd[s],l=Wd[s];if(Math.abs(n[Di(l,a)])>Number.EPSILON){const h=n[Di(l,l)],u=n[Di(a,a)],c=n[Di(l,a)],d=(h-u)/2/c;let f;d<0?f=-1/(-d+Math.sqrt(1+d*d)):f=1/(d+Math.sqrt(1+d*d)),r=1/Math.sqrt(1+f*f),o=f*r}return e.identity(),e.elements[Di(a,a)]=r,e.elements[Di(l,l)]=r,e.elements[Di(l,a)]=o,e.elements[Di(a,l)]=-o,e}function oR(i,e){let t=0,s=0;const n=10;e.unitary.identity(),e.diagonal.copy(i);const r=e.unitary,o=e.diagonal,a=new xn,l=new xn,h=Number.EPSILON*sR(o);for(;s<n&&nR(o)>h;)rR(o,a),l.copy(a).transpose(),o.multiply(a),o.premultiply(l),r.multiply(a),++t>2&&(s++,t=0);return e}function aR(i){const e=[];for(let fe=0;fe<i.length-2;fe+=3){const ye=i[fe],Ce=i[fe+1],De=i[fe+2];e.push(new P(ye,Ce,De))}const t=new tR;t.setFromPoints(e);const s={unitary:new xn,diagonal:new xn},n=t.faces,r=[],o=[];for(let fe=0,ye=n.length;fe<ye;fe++){const Ce=n[fe];let De=Ce.edge;r.length=0;do r.push(De),De=De.next;while(De!==Ce.edge);const qt=r.length-2;for(let It=1,w=qt;It<=w;It++){const K=r[0].vertex,X=r[It+0].vertex,L=r[It+1].vertex;o.push(K.point.x,K.point.y,K.point.z),o.push(X.point.x,X.point.y,X.point.z),o.push(L.point.x,L.point.y,L.point.z)}}const a=new P,l=new P,h=new P,u=new P,c=new P,d=new P,f=new P,p=new P;let m=0,g=0,E=0,I=0,v=0,b=0,C=0;for(let fe=0,ye=o.length;fe<ye;fe+=9){a.fromArray(o,fe),l.fromArray(o,fe+3),h.fromArray(o,fe+6),f.set(0,0,0),f.add(a).add(l).add(h).divideScalar(3),u.subVectors(l,a),c.subVectors(h,a);const Ce=d.crossVectors(u,c).length()/2;p.add(d.copy(f).multiplyScalar(Ce)),m+=Ce,g+=(9*f.x*f.x+a.x*a.x+l.x*l.x+h.x*h.x)*(Ce/12),E+=(9*f.x*f.y+a.x*a.y+l.x*l.y+h.x*h.y)*(Ce/12),I+=(9*f.x*f.z+a.x*a.z+l.x*l.z+h.x*h.z)*(Ce/12),v+=(9*f.y*f.y+a.y*a.y+l.y*l.y+h.y*h.y)*(Ce/12),b+=(9*f.y*f.z+a.y*a.z+l.y*l.z+h.y*h.z)*(Ce/12),C+=(9*f.z*f.z+a.z*a.z+l.z*l.z+h.z*h.z)*(Ce/12)}p.divideScalar(m),g/=m,E/=m,I/=m,v/=m,b/=m,C/=m,g-=p.x*p.x,E-=p.x*p.y,I-=p.x*p.z,v-=p.y*p.y,b-=p.y*p.z,C-=p.z*p.z;const S=new xn;S.elements[0]=g,S.elements[1]=E,S.elements[2]=I,S.elements[3]=E,S.elements[4]=v,S.elements[5]=b,S.elements[6]=I,S.elements[7]=b,S.elements[8]=C,oR(S,s);const _=s.unitary,M=new P,A=new P,F=new P;_.extractBasis(M,A,F);let D=-1/0,x=-1/0,N=-1/0,y=1/0,U=1/0,B=1/0;for(let fe=0,ye=e.length;fe<ye;fe++){const Ce=e[fe];D=Math.max(M.dot(Ce),D),x=Math.max(A.dot(Ce),x),N=Math.max(F.dot(Ce),N),y=Math.min(M.dot(Ce),y),U=Math.min(A.dot(Ce),U),B=Math.min(F.dot(Ce),B)}M.multiplyScalar(.5*(y+D)),A.multiplyScalar(.5*(U+x)),F.multiplyScalar(.5*(B+N));const k=new P,W=new P,z=new xn;k.add(M).add(A).add(F),W.x=D-y,W.y=x-U,W.z=N-B,W.multiplyScalar(.5),z.copy(_);const{x:he,y:G,z:H}=W,pe=new ce;pe.makeScale(he*2,G*2,H*2);const le=new ce;le.makeTranslation(-he,-G,-H);const re=new ce;re.makeTranslation(k.x,k.y,k.z);const Te=new ce;Te.setFromMatrix3(z);const we=new ce;return we.multiply(re),we.multiply(Te),we.multiply(le),we.multiply(pe),{center:k,halfSizes:W,rotation:z,transformation:we}}let bg=class{static isTransparent(e){return e.transparent&&e.opacity<1}};const yp=class ht{static create(){const e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,s=Math.random()*4294967295|0,n=Math.random()*4294967295|0;return`${ht._lut[e&255]+ht._lut[e>>8&255]+ht._lut[e>>16&255]+ht._lut[e>>24&255]}-${ht._lut[t&255]}${ht._lut[t>>8&255]}-${ht._lut[t>>16&15|64]}${ht._lut[t>>24&255]}-${ht._lut[s&63|128]}${ht._lut[s>>8&255]}-${ht._lut[s>>16&255]}${ht._lut[s>>24&255]}${ht._lut[n&255]}${ht._lut[n>>8&255]}${ht._lut[n>>16&255]}${ht._lut[n>>24&255]}`.toLowerCase()}static validate(e){if(!ht._pattern.test(e))throw new Error(`${e} is not a valid UUID v4.

- If you're the tool creator, you can take one from https://www.uuidgenerator.net/.

- If you're using a platform tool, verify the uuid isn't misspelled or contact the tool creator.`)}};T(yp,"_pattern",/^[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-4[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}$/);T(yp,"_lut",["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"]);let ms=yp,lR=class extends be{constructor(e,t){super(e),T(this,"onDisposed",new Y),T(this,"onVertexFound",new Y),T(this,"onVertexLost",new Y),T(this,"onEnabled",new Y),T(this,"components"),T(this,"workingPlane",null),T(this,"_pickedPoint",null),T(this,"_config"),T(this,"_enabled",!1),this.components=e,this.config={snapDistance:.25,showOnlyVertex:!1,...t},this.enabled=!1}set enabled(e){this._enabled=e,e||(this._pickedPoint=null),this.onEnabled.trigger(e)}get enabled(){return this._enabled}set config(e){this._config={...this._config,...e}}get config(){return this._config}dispose(){this.onVertexFound.reset(),this.onVertexLost.reset(),this.components=null,this.onDisposed.trigger(),this.onDisposed.reset()}get(e){if(!this.enabled)return this._pickedPoint;const t=this.components.get(ai).get(e).castRay();if(!t)return this._pickedPoint!==null&&(this.onVertexLost.trigger(),this._pickedPoint=null),this._pickedPoint;const s=this.getClosestVertex(t);return s?!this.workingPlane||Math.abs(this.workingPlane.distanceToPoint(s))<.001?((this._pickedPoint===null||!this._pickedPoint.equals(s))&&(this._pickedPoint=s.clone(),this.onVertexFound.trigger(this._pickedPoint)),this._pickedPoint):(this._pickedPoint=null,this._pickedPoint):(this._pickedPoint!==null&&(this.onVertexLost.trigger(),this._pickedPoint=null),this._pickedPoint)}getClosestVertex(e){let t=new P,s=!1,n=Number.MAX_SAFE_INTEGER;const r=this.getVertices(e);if(r===null)return null;for(const o of r){if(!o)continue;const a=e.point.distanceTo(o);a>n||a>this._config.snapDistance||(s=!0,t=o,n=e.point.distanceTo(o))}return s?t:this.config.showOnlyVertex?null:e.point}getVertices(e){const t=e.object;if(!e.face||!t)return null;const s=t.geometry,n=new ce,{instanceId:r}=e,o=r!==void 0,a=t instanceof oi;return a&&o&&t.getMatrixAt(r,n),[this.getVertex(e.face.a,s),this.getVertex(e.face.b,s),this.getVertex(e.face.c,s)].map(l=>(l&&(a&&o&&l.applyMatrix4(n),l.applyMatrix4(t.matrixWorld)),l))}getVertex(e,t){if(e===void 0)return null;const s=t.attributes.position;return new P(s.getX(e),s.getY(e),s.getZ(e))}};var gh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function xb(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var Cp={exports:{}};Cp.exports=uu;Cp.exports.default=uu;function uu(i,e,t){t=t||2;var s=e&&e.length,n=s?e[0]*t:i.length,r=Rb(i,0,n,t,!0),o=[];if(!r||r.next===r.prev)return o;var a,l,h,u,c,d,f;if(s&&(r=fR(i,e,r,t)),i.length>80*t){a=h=i[0],l=u=i[1];for(var p=t;p<n;p+=t)c=i[p],d=i[p+1],c<a&&(a=c),d<l&&(l=d),c>h&&(h=c),d>u&&(u=d);f=Math.max(h-a,u-l),f=f!==0?32767/f:0}return Wa(r,o,t,a,l,f,0),o}function Rb(i,e,t,s,n){var r,o;if(n===Qd(i,e,t,s)>0)for(r=e;r<t;r+=s)o=vg(r,i[r],i[r+1],o);else for(r=t-s;r>=e;r-=s)o=vg(r,i[r],i[r+1],o);return o&&du(o,o.next)&&(qa(o),o=o.next),o}function Vn(i,e){if(!i)return i;e||(e=i);var t=i,s;do if(s=!1,!t.steiner&&(du(t,t.next)||Qe(t.prev,t,t.next)===0)){if(qa(t),t=e=t.prev,t===t.next)break;s=!0}else t=t.next;while(s||t!==e);return e}function Wa(i,e,t,s,n,r,o){if(i){!o&&r&&IR(i,s,n,r);for(var a=i,l,h;i.prev!==i.next;){if(l=i.prev,h=i.next,r?cR(i,s,n,r):hR(i)){e.push(l.i/t|0),e.push(i.i/t|0),e.push(h.i/t|0),qa(i),i=h.next,a=h.next;continue}if(i=h,i===a){o?o===1?(i=uR(Vn(i),e,t),Wa(i,e,t,s,n,r,2)):o===2&&dR(i,e,t,s,n,r):Wa(Vn(i),e,t,s,n,r,1);break}}}}function hR(i){var e=i.prev,t=i,s=i.next;if(Qe(e,t,s)>=0)return!1;for(var n=e.x,r=t.x,o=s.x,a=e.y,l=t.y,h=s.y,u=n<r?n<o?n:o:r<o?r:o,c=a<l?a<h?a:h:l<h?l:h,d=n>r?n>o?n:o:r>o?r:o,f=a>l?a>h?a:h:l>h?l:h,p=s.next;p!==e;){if(p.x>=u&&p.x<=d&&p.y>=c&&p.y<=f&&Mr(n,a,r,l,o,h,p.x,p.y)&&Qe(p.prev,p,p.next)>=0)return!1;p=p.next}return!0}function cR(i,e,t,s){var n=i.prev,r=i,o=i.next;if(Qe(n,r,o)>=0)return!1;for(var a=n.x,l=r.x,h=o.x,u=n.y,c=r.y,d=o.y,f=a<l?a<h?a:h:l<h?l:h,p=u<c?u<d?u:d:c<d?c:d,m=a>l?a>h?a:h:l>h?l:h,g=u>c?u>d?u:d:c>d?c:d,E=qd(f,p,e,t,s),I=qd(m,g,e,t,s),v=i.prevZ,b=i.nextZ;v&&v.z>=E&&b&&b.z<=I;){if(v.x>=f&&v.x<=m&&v.y>=p&&v.y<=g&&v!==n&&v!==o&&Mr(a,u,l,c,h,d,v.x,v.y)&&Qe(v.prev,v,v.next)>=0||(v=v.prevZ,b.x>=f&&b.x<=m&&b.y>=p&&b.y<=g&&b!==n&&b!==o&&Mr(a,u,l,c,h,d,b.x,b.y)&&Qe(b.prev,b,b.next)>=0))return!1;b=b.nextZ}for(;v&&v.z>=E;){if(v.x>=f&&v.x<=m&&v.y>=p&&v.y<=g&&v!==n&&v!==o&&Mr(a,u,l,c,h,d,v.x,v.y)&&Qe(v.prev,v,v.next)>=0)return!1;v=v.prevZ}for(;b&&b.z<=I;){if(b.x>=f&&b.x<=m&&b.y>=p&&b.y<=g&&b!==n&&b!==o&&Mr(a,u,l,c,h,d,b.x,b.y)&&Qe(b.prev,b,b.next)>=0)return!1;b=b.nextZ}return!0}function uR(i,e,t){var s=i;do{var n=s.prev,r=s.next.next;!du(n,r)&&_b(n,s,s.next,r)&&Xa(n,r)&&Xa(r,n)&&(e.push(n.i/t|0),e.push(s.i/t|0),e.push(r.i/t|0),qa(s),qa(s.next),s=i=r),s=s.next}while(s!==i);return Vn(s)}function dR(i,e,t,s,n,r){var o=i;do{for(var a=o.next.next;a!==o.prev;){if(o.i!==a.i&&yR(o,a)){var l=Ab(o,a);o=Vn(o,o.next),l=Vn(l,l.next),Wa(o,e,t,s,n,r,0),Wa(l,e,t,s,n,r,0);return}a=a.next}o=o.next}while(o!==i)}function fR(i,e,t,s){var n=[],r,o,a,l,h;for(r=0,o=e.length;r<o;r++)a=e[r]*s,l=r<o-1?e[r+1]*s:i.length,h=Rb(i,a,l,s,!1),h===h.next&&(h.steiner=!0),n.push(vR(h));for(n.sort(pR),r=0;r<n.length;r++)t=mR(n[r],t);return t}function pR(i,e){return i.x-e.x}function mR(i,e){var t=gR(i,e);if(!t)return e;var s=Ab(t,i);return Vn(s,s.next),Vn(t,t.next)}function gR(i,e){var t=e,s=i.x,n=i.y,r=-1/0,o;do{if(n<=t.y&&n>=t.next.y&&t.next.y!==t.y){var a=t.x+(n-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(a<=s&&a>r&&(r=a,o=t.x<t.next.x?t:t.next,a===s))return o}t=t.next}while(t!==e);if(!o)return null;var l=o,h=o.x,u=o.y,c=1/0,d;t=o;do s>=t.x&&t.x>=h&&s!==t.x&&Mr(n<u?s:r,n,h,u,n<u?r:s,n,t.x,t.y)&&(d=Math.abs(n-t.y)/(s-t.x),Xa(t,i)&&(d<c||d===c&&(t.x>o.x||t.x===o.x&&ER(o,t)))&&(o=t,c=d)),t=t.next;while(t!==l);return o}function ER(i,e){return Qe(i.prev,i,e.prev)<0&&Qe(e.next,i,i.next)<0}function IR(i,e,t,s){var n=i;do n.z===0&&(n.z=qd(n.x,n.y,e,t,s)),n.prevZ=n.prev,n.nextZ=n.next,n=n.next;while(n!==i);n.prevZ.nextZ=null,n.prevZ=null,bR(n)}function bR(i){var e,t,s,n,r,o,a,l,h=1;do{for(t=i,i=null,r=null,o=0;t;){for(o++,s=t,a=0,e=0;e<h&&(a++,s=s.nextZ,!!s);e++);for(l=h;a>0||l>0&&s;)a!==0&&(l===0||!s||t.z<=s.z)?(n=t,t=t.nextZ,a--):(n=s,s=s.nextZ,l--),r?r.nextZ=n:i=n,n.prevZ=r,r=n;t=s}r.nextZ=null,h*=2}while(o>1);return i}function qd(i,e,t,s,n){return i=(i-t)*n|0,e=(e-s)*n|0,i=(i|i<<8)&16711935,i=(i|i<<4)&252645135,i=(i|i<<2)&858993459,i=(i|i<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,i|e<<1}function vR(i){var e=i,t=i;do(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next;while(e!==i);return t}function Mr(i,e,t,s,n,r,o,a){return(n-o)*(e-a)>=(i-o)*(r-a)&&(i-o)*(s-a)>=(t-o)*(e-a)&&(t-o)*(r-a)>=(n-o)*(s-a)}function yR(i,e){return i.next.i!==e.i&&i.prev.i!==e.i&&!CR(i,e)&&(Xa(i,e)&&Xa(e,i)&&TR(i,e)&&(Qe(i.prev,i,e.prev)||Qe(i,e.prev,e))||du(i,e)&&Qe(i.prev,i,i.next)>0&&Qe(e.prev,e,e.next)>0)}function Qe(i,e,t){return(e.y-i.y)*(t.x-e.x)-(e.x-i.x)*(t.y-e.y)}function du(i,e){return i.x===e.x&&i.y===e.y}function _b(i,e,t,s){var n=Ih(Qe(i,e,t)),r=Ih(Qe(i,e,s)),o=Ih(Qe(t,s,i)),a=Ih(Qe(t,s,e));return!!(n!==r&&o!==a||n===0&&Eh(i,t,e)||r===0&&Eh(i,s,e)||o===0&&Eh(t,i,s)||a===0&&Eh(t,e,s))}function Eh(i,e,t){return e.x<=Math.max(i.x,t.x)&&e.x>=Math.min(i.x,t.x)&&e.y<=Math.max(i.y,t.y)&&e.y>=Math.min(i.y,t.y)}function Ih(i){return i>0?1:i<0?-1:0}function CR(i,e){var t=i;do{if(t.i!==i.i&&t.next.i!==i.i&&t.i!==e.i&&t.next.i!==e.i&&_b(t,t.next,i,e))return!0;t=t.next}while(t!==i);return!1}function Xa(i,e){return Qe(i.prev,i,i.next)<0?Qe(i,e,i.next)>=0&&Qe(i,i.prev,e)>=0:Qe(i,e,i.prev)<0||Qe(i,i.next,e)<0}function TR(i,e){var t=i,s=!1,n=(i.x+e.x)/2,r=(i.y+e.y)/2;do t.y>r!=t.next.y>r&&t.next.y!==t.y&&n<(t.next.x-t.x)*(r-t.y)/(t.next.y-t.y)+t.x&&(s=!s),t=t.next;while(t!==i);return s}function Ab(i,e){var t=new Zd(i.i,i.x,i.y),s=new Zd(e.i,e.x,e.y),n=i.next,r=e.prev;return i.next=e,e.prev=i,t.next=n,n.prev=t,s.next=t,t.prev=s,r.next=s,s.prev=r,s}function vg(i,e,t,s){var n=new Zd(i,e,t);return s?(n.next=s.next,n.prev=s,s.next.prev=n,s.next=n):(n.prev=n,n.next=n),n}function qa(i){i.next.prev=i.prev,i.prev.next=i.next,i.prevZ&&(i.prevZ.nextZ=i.nextZ),i.nextZ&&(i.nextZ.prevZ=i.prevZ)}function Zd(i,e,t){this.i=i,this.x=e,this.y=t,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}uu.deviation=function(i,e,t,s){var n=e&&e.length,r=n?e[0]*t:i.length,o=Math.abs(Qd(i,0,r,t));if(n)for(var a=0,l=e.length;a<l;a++){var h=e[a]*t,u=a<l-1?e[a+1]*t:i.length;o-=Math.abs(Qd(i,h,u,t))}var c=0;for(a=0;a<s.length;a+=3){var d=s[a]*t,f=s[a+1]*t,p=s[a+2]*t;c+=Math.abs((i[d]-i[p])*(i[f+1]-i[d+1])-(i[d]-i[f])*(i[p+1]-i[d+1]))}return o===0&&c===0?0:Math.abs((c-o)/o)};function Qd(i,e,t,s){for(var n=0,r=e,o=t-s;r<t;r+=s)n+=(i[o]-i[r])*(i[r+1]+i[o+1]),o=r;return n}uu.flatten=function(i){for(var e=i[0][0].length,t={vertices:[],holes:[],dimensions:e},s=0,n=0;n<i.length;n++){for(var r=0;r<i[n].length;r++)for(var o=0;o<e;o++)t.vertices.push(i[n][r][o]);n>0&&(s+=i[n-1].length,t.holes.push(s))}return t};var wR=Cp.exports;const SR=xb(wR);let xR=class extends be{constructor(){super(...arguments),T(this,"enabled",!0),T(this,"_inverseMatrix",new ce),T(this,"_localPlane",new Es),T(this,"_tempLine",new Nt),T(this,"_tempVector",new P),T(this,"_plane"),T(this,"_plane2DCoordinateSystem",new ce),T(this,"_precission",1e4),T(this,"_planeAxis")}get plane(){if(!this._plane)throw new Error("Plane not set");return this._plane}set plane(e){this._plane=e}createEdges(e){const{meshes:t,posAttr:s}=e;let n=0;s.array.fill(0);const r=[];let o=0;const a=new ne;for(const l of t)if(l.geometry){if(l.geometry.boundsTree||l.geometry.computeBoundsTree(),!l.geometry.boundsTree)throw new Error("Bounds tree not found for edges generation.");if(l instanceof oi){if(l.count===0)continue;const h=l;for(let u=0;u<h.count;u++){a.geometry=l.geometry,a.matrix.copy(l.matrix);const c=new ce;h.getMatrixAt(u,c),a.applyMatrix4(c),a.applyMatrix4(l.matrixWorld),a.updateMatrix(),a.updateMatrixWorld(),this._inverseMatrix.copy(a.matrixWorld).invert(),this._localPlane.copy(this.plane).applyMatrix4(this._inverseMatrix),n=this.shapecast(a,s,n),n!==o&&(r.push(n),o=n)}}else this._inverseMatrix.copy(l.matrixWorld).invert(),this._localPlane.copy(this.plane).applyMatrix4(this._inverseMatrix),n=this.shapecast(l,s,n),n!==o&&(r.push(n),o=n)}return{indexes:r,index:n}}createFills(e,t){this.updatePlane2DCoordinateSystem();const s=[];let n=0;for(let r=0;r<t.length;r++){const o=t[r],a=[];for(let h=n;h<o;h+=2)a.push(h*3);const l=this.computeFill(a,e);for(const h of l)s.push(h);n=o}return s}computeFill(e,t){const s=new Map,n={},r=new Map;let o=0;const a=new Map,l=new Map,h=new Set,u=this._precission;for(let d=0;d<e.length;d++){const f=e[d];let p=0,m=0,g=0,E=0;const I=t[f],v=t[f+1],b=t[f+2],C=t[f+3],S=t[f+4],_=t[f+5];if(this._tempVector.set(I,v,b),this._tempVector.applyMatrix4(this._plane2DCoordinateSystem),p=Math.trunc(this._tempVector.x*u)/u,m=Math.trunc(this._tempVector.y*u)/u,this._tempVector.set(C,S,_),this._tempVector.applyMatrix4(this._plane2DCoordinateSystem),g=Math.trunc(this._tempVector.x*u)/u,E=Math.trunc(this._tempVector.y*u)/u,p===g&&m===E)continue;const M=`${p}|${m}`,A=`${g}|${E}`;s.has(M)||s.set(M,f/3),s.has(A)||s.set(A,f/3+1);const F=s.get(M),D=s.get(A);n[F]=[p,m],n[D]=[g,E];const x=l.has(F),N=a.has(F),y=l.has(D),U=a.has(D);if(!x&&!N&&!y&&!U)l.set(F,o),a.set(D,o),h.add(o),r.set(o,[F,D]),o++;else if(x&&U){const B=l.get(F),k=a.get(D);if(B!==k){const W=r.get(k),z=r.get(B);if(!W||!z)continue;r.delete(B),h.delete(B),a.set(z[z.length-1],k),a.delete(W[W.length-1]);for(const he of z)W.push(he)}else h.delete(k);l.delete(F),a.delete(D)}else if(N&&y){const B=l.get(D),k=a.get(F);if(B!==k){const W=r.get(k),z=r.get(B);if(!W||!z)continue;r.delete(B),h.delete(B),a.set(z[z.length-1],k),a.delete(W[W.length-1]);for(const he of z)W.push(he)}else h.delete(k);l.delete(D),a.delete(F)}else if(x&&y){const B=l.get(D),k=l.get(F),W=r.get(k),z=r.get(B);if(!W||!z)continue;r.delete(B),h.delete(B),l.delete(W[0]),l.delete(z[0]),a.delete(z[z.length-1]),l.set(z[z.length-1],k),z.reverse(),W.splice(0,0,...z)}else if(N&&U){const B=a.get(D),k=a.get(F),W=r.get(k),z=r.get(B);if(!W||!z)continue;r.delete(B),h.delete(B),a.delete(W[W.length-1]),a.delete(z[z.length-1]),l.delete(z[0]),a.set(z[0],k),z.reverse(),W.push(...z)}else if(x){const B=l.get(F),k=r.get(B);if(!k)continue;k.unshift(D),l.delete(F),l.set(D,B)}else if(N){const B=a.get(F),k=r.get(B);if(!k)continue;k.push(D),a.delete(F),a.set(D,B)}else if(y){const B=l.get(D),k=r.get(B);if(!k)continue;k.unshift(F),l.delete(D),l.set(F,B)}else if(U){const B=a.get(D),k=r.get(B);if(!k)continue;k.push(F),a.delete(D),a.set(F,B)}}const c=[];for(const[d,f]of r){if(h.has(d))continue;const p=[],m=new Map;let g=0;for(const I of f){const v=n[I];p.push(v[0],v[1]),m.set(g++,I)}const E=SR(p);for(const I of E){const v=m.get(I);if(v===void 0)throw new Error("Map error!");c.push(v)}}return c}updatePlane2DCoordinateSystem(){this._plane2DCoordinateSystem=new ce;const e=new P(1,0,0),t=new P(0,1,0),s=this.plane.normal,n=new P;this.plane.coplanarPoint(n),this._planeAxis==="x"?e.crossVectors(t,s):this._planeAxis==="y"?t.crossVectors(s,e):this._planeAxis==="z"||(e.crossVectors(t,s).normalize(),t.crossVectors(s,e)),this._plane2DCoordinateSystem.fromArray([e.x,e.y,e.z,0,t.x,t.y,t.z,0,s.x,s.y,s.z,0,n.x,n.y,n.z,1]),this._plane2DCoordinateSystem.invert()}shapecast(e,t,s){return e.geometry.boundsTree.shapecast({intersectsBounds:n=>this._localPlane.intersectsBox(n),intersectsTriangle:n=>{let r=0;if(this._tempLine.start.copy(n.a),this._tempLine.end.copy(n.b),this._localPlane.intersectLine(this._tempLine,this._tempVector)){const o=this._tempVector.applyMatrix4(e.matrixWorld);t.setXYZ(s,o.x,o.y,o.z),r++,s++}if(this._tempLine.start.copy(n.b),this._tempLine.end.copy(n.c),this._localPlane.intersectLine(this._tempLine,this._tempVector)){const o=this._tempVector.applyMatrix4(e.matrixWorld);t.setXYZ(s,o.x,o.y,o.z),r++,s++}if(this._tempLine.start.copy(n.c),this._tempLine.end.copy(n.a),this._localPlane.intersectLine(this._tempLine,this._tempVector)){const o=this._tempVector.applyMatrix4(e.matrixWorld);t.setXYZ(s,o.x,o.y,o.z),r++,s++}r!==2&&(s-=r)}}),s}};T(xR,"uuid","1a193b87-6376-46c8-9e65-62a1576fdb64");const Mb=class Fb{constructor(){T(this,"onDisposed",new Y),T(this,"list",new Map),T(this,"enabled",!1),T(this,"_clock"),T(this,"onInit",new Y),T(this,"update",()=>{if(!this.enabled)return;const e=this._clock.getDelta();for(const[t,s]of this.list)s.enabled&&s.isUpdateable()&&s.update(e);requestAnimationFrame(this.update)}),this._clock=new SE,Fb.setupBVH()}add(e,t){if(this.list.has(e))throw new Error("You're trying to add a component that already exists in the components instance. Use Components.get() instead.");ms.validate(e),this.list.set(e,t)}get(e){const t=e.uuid;if(!this.list.has(t)){const s=new e(this);return this.list.has(t)||this.add(t,s),s}return this.list.get(t)}init(){this.enabled=!0,this._clock.start(),this.update(),this.onInit.trigger()}dispose(){this.enabled=!1;for(const[e,t]of this.list)t.enabled=!1,t.isDisposeable()&&t.dispose();this._clock.stop(),this.onDisposed.trigger(),this.onDisposed.reset()}static setupBVH(){Ne.prototype.computeBoundsTree=Xx,Ne.prototype.disposeBoundsTree=qx,ne.prototype.raycast=Wx}};T(Mb,"release","2.4.3");let Ob=Mb,RR=class extends vp{constructor(){super(...arguments),T(this,"meshes",new Set),T(this,"onAfterUpdate",new Y),T(this,"onBeforeUpdate",new Y),T(this,"onDisposed",new Y),T(this,"isDisposing",!1),T(this,"enabled",!0),T(this,"uuid",ms.create()),T(this,"name"),T(this,"_scene"),T(this,"_camera"),T(this,"_renderer",null)}get scene(){if(!this._scene)throw new Error("No scene initialized!");return this._scene}set scene(e){this._scene=e,e.worlds.set(this.uuid,this),e.currentWorld=this,e.onWorldChanged.trigger({world:this,action:"added"})}get camera(){if(!this._camera)throw new Error("No camera initialized!");return this._camera}set camera(e){this._camera=e,e.worlds.set(this.uuid,this),e.currentWorld=this,e.onWorldChanged.trigger({world:this,action:"added"})}get renderer(){return this._renderer}set renderer(e){this._renderer=e,e&&(e.worlds.set(this.uuid,this),e.currentWorld=this,e.onWorldChanged.trigger({world:this,action:"added"}))}update(e){this.enabled&&(!this._scene||!this._camera||(this.scene.currentWorld=this,this.camera.currentWorld=this,this.renderer&&(this.renderer.currentWorld=this),this.onBeforeUpdate.trigger(),this.scene.isUpdateable()&&this.scene.update(e),this.camera.isUpdateable()&&this.camera.update(e),this.renderer&&this.renderer.update(e),this.onAfterUpdate.trigger()))}dispose(e=!0){if(this.enabled=!1,this.isDisposing=!0,this.scene.onWorldChanged.trigger({world:this,action:"removed"}),this.camera.onWorldChanged.trigger({world:this,action:"removed"}),this.renderer&&this.renderer.onWorldChanged.trigger({world:this,action:"removed"}),e){const t=this.components.get(Gi);this.scene.dispose(),this.camera.isDisposeable()&&this.camera.dispose(),this.renderer&&this.renderer.dispose();for(const s of this.meshes)t.destroy(s);this.meshes.clear()}this._scene=null,this._camera=null,this._renderer=null,this.components.get(zb).list.delete(this.uuid),this.onDisposed.trigger(),this.onDisposed.reset()}},_o=class{constructor(e,t,s,n){T(this,"_component"),T(this,"name"),T(this,"uuid"),this._component=e,this.name=s,this.uuid=n??ms.create(),t.get(fu).list.set(this.uuid,this)}get controls(){return Qu.copySchema(this._config)}set(e){for(const t in e)if(t in this){const s=t;this[s]=e[t].value}}export(e=this._config,t={}){for(const s in e){const n=e[s];if(Qu.isEntry(n))if(n.type==="Color"){const{r,g:o,b:a}=n.value;t[s]={...n,value:{r,g:o,b:a}}}else if(n.type==="Vector3"){const{x:r,y:o,z:a}=n.value;t[s]={...n,value:{x:r,y:o,z:a}}}else if(n.type==="TextSet"){const r=Array.from(n.value);t[s]={...n,value:r}}else if(n.type==="Select"){const r=Array.from(n.options);t[s]={...n,options:r}}else t[s]={...n};else t[s]={},this.export(n,t[s])}return t}import(e,t={},s=!0){for(const n in e){const r=e[n];if(Qu.isEntry(r))if(r.type==="Color"){const{r:o,g:a,b:l}=r.value;t[n]={...r,value:new He(o,a,l)}}else if(r.type==="Vector3"){const{x:o,y:a,z:l}=r.value;t[n]={...r,value:new P(o,a,l)}}else r.type==="TextSet"?t[n]={...r,value:new Set(r.value)}:r.type==="Select"?t[n]={...r,options:new Set(r.options)}:t[n]={...r};else t[n]={},this.import(r,t[n],!1)}s&&this.set(t)}};const Nb=class Pb extends be{constructor(e){super(e),T(this,"list",new Ci),T(this,"enabled",!0),e.add(Pb.uuid,this)}};T(Nb,"uuid","b8c764e0-6b24-4e77-9a32-35fa728ee5b4");let fu=Nb,_R=class extends Qx{constructor(e,t,s){super(e),T(this,"enabled",!0),T(this,"container"),T(this,"three"),T(this,"_canvas"),T(this,"_parameters"),T(this,"_resizeObserver",null),T(this,"onContainerUpdated",new Y),T(this,"_resizing",!1),T(this,"resize",o=>{if(this._resizing)return;this._resizing=!0,this.onContainerUpdated.trigger();const a=o?o.x:this.container.clientWidth,l=o?o.y:this.container.clientHeight;this.three.setSize(a,l),this.onResize.trigger(new Ue(a,l)),this._resizing=!1}),T(this,"resizeEvent",()=>{this.resize()}),T(this,"onContextLost",o=>{o.preventDefault(),this.enabled=!1}),T(this,"onContextBack",()=>{this.three.setRenderTarget(null),this.three.dispose(),this.three=new za({canvas:this._canvas,antialias:!0,alpha:!0,...this._parameters}),this.enabled=!0}),this.container=t,this._parameters=s,this.three=new za({antialias:!0,alpha:!0,...s}),this.three.setPixelRatio(Math.min(window.devicePixelRatio,2)),this.setupRenderer(),this.setupEvents(!0),this.resize(),this._canvas=this.three.domElement;const n=this.three.getContext(),{canvas:r}=n;r.addEventListener("webglcontextlost",this.onContextLost,!1),r.addEventListener("webglcontextrestored",this.onContextBack,!1)}update(){if(!this.enabled||!this.currentWorld)return;this.onBeforeUpdate.trigger(this);const e=this.currentWorld.scene.three,t=this.currentWorld.camera.three;this.three.render(e,t),this.onAfterUpdate.trigger(this)}dispose(){this.enabled=!1,this.setupEvents(!1),this.three.domElement.remove(),this.three.forceContextLoss(),this.three.dispose(),this.onResize.reset(),this.onAfterUpdate.reset(),this.onBeforeUpdate.reset(),this.onDisposed.trigger(),this.onDisposed.reset()}getSize(){return new Ue(this.three.domElement.clientWidth,this.three.domElement.clientHeight)}setupEvents(e){const t=this.three.domElement.parentElement;if(!t)throw new Error("This renderer needs to have an HTML container!");this._resizeObserver&&(this._resizeObserver.disconnect(),this._resizeObserver=null),window.removeEventListener("resize",this.resizeEvent),e&&(this._resizeObserver=new ResizeObserver(this.resizeEvent),this._resizeObserver.observe(t),window.addEventListener("resize",this.resizeEvent))}setupRenderer(){this.three.localClippingEnabled=!0,this.container&&this.container.appendChild(this.three.domElement),this.onContainerUpdated.trigger()}};/*!
 * camera-controls
 * https://github.com/yomotsu/camera-controls
 * (c) 2017 @yomotsu
 * Released under the MIT License.
 */const Ee={LEFT:1,RIGHT:2,MIDDLE:4},q=Object.freeze({NONE:0,ROTATE:1,TRUCK:2,OFFSET:4,DOLLY:8,ZOOM:16,TOUCH_ROTATE:32,TOUCH_TRUCK:64,TOUCH_OFFSET:128,TOUCH_DOLLY:256,TOUCH_ZOOM:512,TOUCH_DOLLY_TRUCK:1024,TOUCH_DOLLY_OFFSET:2048,TOUCH_DOLLY_ROTATE:4096,TOUCH_ZOOM_TRUCK:8192,TOUCH_ZOOM_OFFSET:16384,TOUCH_ZOOM_ROTATE:32768}),gr={NONE:0,IN:1,OUT:-1};function pn(i){return i.isPerspectiveCamera}function Ms(i){return i.isOrthographicCamera}const Er=Math.PI*2,yg=Math.PI/2,Lb=1e-5,ea=Math.PI/180;function bi(i,e,t){return Math.max(e,Math.min(t,i))}function $e(i,e=Lb){return Math.abs(i)<e}function Me(i,e,t=Lb){return $e(i-e,t)}function Cg(i,e){return Math.round(i/e)*e}function ta(i){return isFinite(i)?i:i<0?-Number.MAX_VALUE:Number.MAX_VALUE}function ia(i){return Math.abs(i)<Number.MAX_VALUE?i:i*(1/0)}function bh(i,e,t,s,n=1/0,r){s=Math.max(1e-4,s);const o=2/s,a=o*r,l=1/(1+a+.48*a*a+.235*a*a*a);let h=i-e;const u=e,c=n*s;h=bi(h,-c,c),e=i-h;const d=(t.value+o*h)*r;t.value=(t.value-o*d)*l;let f=e+(h+d)*l;return u-i>0==f>u&&(f=u,t.value=(f-u)/r),f}function Tg(i,e,t,s,n=1/0,r,o){s=Math.max(1e-4,s);const a=2/s,l=a*r,h=1/(1+l+.48*l*l+.235*l*l*l);let u=e.x,c=e.y,d=e.z,f=i.x-u,p=i.y-c,m=i.z-d;const g=u,E=c,I=d,v=n*s,b=v*v,C=f*f+p*p+m*m;if(C>b){const U=Math.sqrt(C);f=f/U*v,p=p/U*v,m=m/U*v}u=i.x-f,c=i.y-p,d=i.z-m;const S=(t.x+a*f)*r,_=(t.y+a*p)*r,M=(t.z+a*m)*r;t.x=(t.x-a*S)*h,t.y=(t.y-a*_)*h,t.z=(t.z-a*M)*h,o.x=u+(f+S)*h,o.y=c+(p+_)*h,o.z=d+(m+M)*h;const A=g-i.x,F=E-i.y,D=I-i.z,x=o.x-g,N=o.y-E,y=o.z-I;return A*x+F*N+D*y>0&&(o.x=g,o.y=E,o.z=I,t.x=(o.x-g)/r,t.y=(o.y-E)/r,t.z=(o.z-I)/r),o}function ed(i,e){e.set(0,0),i.forEach(t=>{e.x+=t.clientX,e.y+=t.clientY}),e.x/=i.length,e.y/=i.length}function td(i,e){return Ms(i)?(console.warn(`${e} is not supported in OrthographicCamera`),!0):!1}let AR=class{constructor(){this._listeners={}}addEventListener(e,t){const s=this._listeners;s[e]===void 0&&(s[e]=[]),s[e].indexOf(t)===-1&&s[e].push(t)}hasEventListener(e,t){const s=this._listeners;return s[e]!==void 0&&s[e].indexOf(t)!==-1}removeEventListener(e,t){const s=this._listeners[e];if(s!==void 0){const n=s.indexOf(t);n!==-1&&s.splice(n,1)}}removeAllEventListeners(e){if(!e){this._listeners={};return}Array.isArray(this._listeners[e])&&(this._listeners[e].length=0)}dispatchEvent(e){const t=this._listeners[e.type];if(t!==void 0){e.target=this;const s=t.slice(0);for(let n=0,r=s.length;n<r;n++)s[n].call(this,e)}}};const MR="2.7.3",vh=1/8,Db=typeof window<"u",FR=Db&&/Mac/.test(navigator.platform),OR=!(Db&&"PointerEvent"in window);let ge,wg,yh,id,Mt,Se,Re,Ir,sa,_i,Ai,mn,Sg,xg,Qt,na,br,Rg,sd,_g,nd,rd,Ch,zt=class Kd extends AR{static install(e){ge=e.THREE,wg=Object.freeze(new ge.Vector3(0,0,0)),yh=Object.freeze(new ge.Vector3(0,1,0)),id=Object.freeze(new ge.Vector3(0,0,1)),Mt=new ge.Vector2,Se=new ge.Vector3,Re=new ge.Vector3,Ir=new ge.Vector3,sa=new ge.Vector3,_i=new ge.Vector3,Ai=new ge.Vector3,mn=new ge.Vector3,Sg=new ge.Vector3,xg=new ge.Vector3,Qt=new ge.Spherical,na=new ge.Spherical,br=new ge.Box3,Rg=new ge.Box3,sd=new ge.Sphere,_g=new ge.Quaternion,nd=new ge.Quaternion,rd=new ge.Matrix4,Ch=new ge.Raycaster}static get ACTION(){return q}constructor(e,t){super(),this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.minDistance=Number.EPSILON,this.maxDistance=1/0,this.infinityDolly=!1,this.minZoom=.01,this.maxZoom=1/0,this.smoothTime=.25,this.draggingSmoothTime=.125,this.maxSpeed=1/0,this.azimuthRotateSpeed=1,this.polarRotateSpeed=1,this.dollySpeed=1,this.dollyDragInverted=!1,this.truckSpeed=2,this.dollyToCursor=!1,this.dragToOffset=!1,this.verticalDragToForward=!1,this.boundaryFriction=0,this.restThreshold=.01,this.colliderMeshes=[],this.cancel=()=>{},this._enabled=!0,this._state=q.NONE,this._viewport=null,this._changedDolly=0,this._changedZoom=0,this._hasRested=!0,this._boundaryEnclosesCamera=!1,this._needsUpdate=!0,this._updatedLastTime=!1,this._elementRect=new DOMRect,this._isDragging=!1,this._dragNeedsUpdate=!0,this._activePointers=[],this._lockedPointer=null,this._interactiveArea=new DOMRect(0,0,1,1),this._isUserControllingRotate=!1,this._isUserControllingDolly=!1,this._isUserControllingTruck=!1,this._isUserControllingOffset=!1,this._isUserControllingZoom=!1,this._lastDollyDirection=gr.NONE,this._thetaVelocity={value:0},this._phiVelocity={value:0},this._radiusVelocity={value:0},this._targetVelocity=new ge.Vector3,this._focalOffsetVelocity=new ge.Vector3,this._zoomVelocity={value:0},this._truckInternal=(b,C,S)=>{let _,M;if(pn(this._camera)){const A=Se.copy(this._camera.position).sub(this._target),F=this._camera.getEffectiveFOV()*ea,D=A.length()*Math.tan(F*.5);_=this.truckSpeed*b*D/this._elementRect.height,M=this.truckSpeed*C*D/this._elementRect.height}else if(Ms(this._camera)){const A=this._camera;_=b*(A.right-A.left)/A.zoom/this._elementRect.width,M=C*(A.top-A.bottom)/A.zoom/this._elementRect.height}else return;this.verticalDragToForward?(S?this.setFocalOffset(this._focalOffsetEnd.x+_,this._focalOffsetEnd.y,this._focalOffsetEnd.z,!0):this.truck(_,0,!0),this.forward(-M,!0)):S?this.setFocalOffset(this._focalOffsetEnd.x+_,this._focalOffsetEnd.y+M,this._focalOffsetEnd.z,!0):this.truck(_,M,!0)},this._rotateInternal=(b,C)=>{const S=Er*this.azimuthRotateSpeed*b/this._elementRect.height,_=Er*this.polarRotateSpeed*C/this._elementRect.height;this.rotate(S,_,!0)},this._dollyInternal=(b,C,S)=>{const _=Math.pow(.95,-b*this.dollySpeed),M=this._sphericalEnd.radius,A=this._sphericalEnd.radius*_,F=bi(A,this.minDistance,this.maxDistance),D=F-A;this.infinityDolly&&this.dollyToCursor?this._dollyToNoClamp(A,!0):this.infinityDolly&&!this.dollyToCursor?(this.dollyInFixed(D,!0),this._dollyToNoClamp(F,!0)):this._dollyToNoClamp(F,!0),this.dollyToCursor&&(this._changedDolly+=(this.infinityDolly?A:F)-M,this._dollyControlCoord.set(C,S)),this._lastDollyDirection=Math.sign(-b)},this._zoomInternal=(b,C,S)=>{const _=Math.pow(.95,b*this.dollySpeed),M=this._zoom,A=this._zoom*_;this.zoomTo(A,!0),this.dollyToCursor&&(this._changedZoom+=A-M,this._dollyControlCoord.set(C,S))},typeof ge>"u"&&console.error("camera-controls: `THREE` is undefined. You must first run `CameraControls.install( { THREE: THREE } )`. Check the docs for further information."),this._camera=e,this._yAxisUpSpace=new ge.Quaternion().setFromUnitVectors(this._camera.up,yh),this._yAxisUpSpaceInverse=this._yAxisUpSpace.clone().invert(),this._state=q.NONE,this._target=new ge.Vector3,this._targetEnd=this._target.clone(),this._focalOffset=new ge.Vector3,this._focalOffsetEnd=this._focalOffset.clone(),this._spherical=new ge.Spherical().setFromVector3(Se.copy(this._camera.position).applyQuaternion(this._yAxisUpSpace)),this._sphericalEnd=this._spherical.clone(),this._lastDistance=this._spherical.radius,this._zoom=this._camera.zoom,this._zoomEnd=this._zoom,this._lastZoom=this._zoom,this._nearPlaneCorners=[new ge.Vector3,new ge.Vector3,new ge.Vector3,new ge.Vector3],this._updateNearPlaneCorners(),this._boundary=new ge.Box3(new ge.Vector3(-1/0,-1/0,-1/0),new ge.Vector3(1/0,1/0,1/0)),this._cameraUp0=this._camera.up.clone(),this._target0=this._target.clone(),this._position0=this._camera.position.clone(),this._zoom0=this._zoom,this._focalOffset0=this._focalOffset.clone(),this._dollyControlCoord=new ge.Vector2,this.mouseButtons={left:q.ROTATE,middle:q.DOLLY,right:q.TRUCK,wheel:pn(this._camera)?q.DOLLY:Ms(this._camera)?q.ZOOM:q.NONE},this.touches={one:q.TOUCH_ROTATE,two:pn(this._camera)?q.TOUCH_DOLLY_TRUCK:Ms(this._camera)?q.TOUCH_ZOOM_TRUCK:q.NONE,three:q.TOUCH_TRUCK};const s=new ge.Vector2,n=new ge.Vector2,r=new ge.Vector2,o=b=>{if(!this._enabled||!this._domElement)return;if(this._interactiveArea.left!==0||this._interactiveArea.top!==0||this._interactiveArea.width!==1||this._interactiveArea.height!==1){const _=this._domElement.getBoundingClientRect(),M=b.clientX/_.width,A=b.clientY/_.height;if(M<this._interactiveArea.left||M>this._interactiveArea.right||A<this._interactiveArea.top||A>this._interactiveArea.bottom)return}const C=b.pointerType!=="mouse"?null:(b.buttons&Ee.LEFT)===Ee.LEFT?Ee.LEFT:(b.buttons&Ee.MIDDLE)===Ee.MIDDLE?Ee.MIDDLE:(b.buttons&Ee.RIGHT)===Ee.RIGHT?Ee.RIGHT:null;if(C!==null){const _=this._findPointerByMouseButton(C);_&&this._disposePointer(_)}if((b.buttons&Ee.LEFT)===Ee.LEFT&&this._lockedPointer)return;const S={pointerId:b.pointerId,clientX:b.clientX,clientY:b.clientY,deltaX:0,deltaY:0,mouseButton:C};this._activePointers.push(S),this._domElement.ownerDocument.removeEventListener("pointermove",l,{passive:!1}),this._domElement.ownerDocument.removeEventListener("pointerup",u),this._domElement.ownerDocument.addEventListener("pointermove",l,{passive:!1}),this._domElement.ownerDocument.addEventListener("pointerup",u),this._isDragging=!0,m(b)},a=b=>{if(!this._enabled||!this._domElement||this._lockedPointer)return;if(this._interactiveArea.left!==0||this._interactiveArea.top!==0||this._interactiveArea.width!==1||this._interactiveArea.height!==1){const _=this._domElement.getBoundingClientRect(),M=b.clientX/_.width,A=b.clientY/_.height;if(M<this._interactiveArea.left||M>this._interactiveArea.right||A<this._interactiveArea.top||A>this._interactiveArea.bottom)return}const C=(b.buttons&Ee.LEFT)===Ee.LEFT?Ee.LEFT:(b.buttons&Ee.MIDDLE)===Ee.MIDDLE?Ee.MIDDLE:(b.buttons&Ee.RIGHT)===Ee.RIGHT?Ee.RIGHT:null;if(C!==null){const _=this._findPointerByMouseButton(C);_&&this._disposePointer(_)}const S={pointerId:1,clientX:b.clientX,clientY:b.clientY,deltaX:0,deltaY:0,mouseButton:(b.buttons&Ee.LEFT)===Ee.LEFT?Ee.LEFT:(b.buttons&Ee.MIDDLE)===Ee.LEFT?Ee.MIDDLE:(b.buttons&Ee.RIGHT)===Ee.LEFT?Ee.RIGHT:null};this._activePointers.push(S),this._domElement.ownerDocument.removeEventListener("mousemove",h),this._domElement.ownerDocument.removeEventListener("mouseup",c),this._domElement.ownerDocument.addEventListener("mousemove",h),this._domElement.ownerDocument.addEventListener("mouseup",c),this._isDragging=!0,m(b)},l=b=>{b.cancelable&&b.preventDefault();const C=b.pointerId,S=this._lockedPointer||this._findPointerById(C);if(S){if(S.clientX=b.clientX,S.clientY=b.clientY,S.deltaX=b.movementX,S.deltaY=b.movementY,this._state=0,b.pointerType==="touch")switch(this._activePointers.length){case 1:this._state=this.touches.one;break;case 2:this._state=this.touches.two;break;case 3:this._state=this.touches.three;break}else(!this._isDragging&&this._lockedPointer||this._isDragging&&(b.buttons&Ee.LEFT)===Ee.LEFT)&&(this._state=this._state|this.mouseButtons.left),this._isDragging&&(b.buttons&Ee.MIDDLE)===Ee.MIDDLE&&(this._state=this._state|this.mouseButtons.middle),this._isDragging&&(b.buttons&Ee.RIGHT)===Ee.RIGHT&&(this._state=this._state|this.mouseButtons.right);g()}},h=b=>{const C=this._lockedPointer||this._findPointerById(1);C&&(C.clientX=b.clientX,C.clientY=b.clientY,C.deltaX=b.movementX,C.deltaY=b.movementY,this._state=0,(this._lockedPointer||(b.buttons&Ee.LEFT)===Ee.LEFT)&&(this._state=this._state|this.mouseButtons.left),(b.buttons&Ee.MIDDLE)===Ee.MIDDLE&&(this._state=this._state|this.mouseButtons.middle),(b.buttons&Ee.RIGHT)===Ee.RIGHT&&(this._state=this._state|this.mouseButtons.right),g())},u=b=>{const C=this._findPointerById(b.pointerId);if(!(C&&C===this._lockedPointer)){if(C&&this._disposePointer(C),b.pointerType==="touch")switch(this._activePointers.length){case 0:this._state=q.NONE;break;case 1:this._state=this.touches.one;break;case 2:this._state=this.touches.two;break;case 3:this._state=this.touches.three;break}else this._state=q.NONE;E()}},c=()=>{const b=this._findPointerById(1);b&&b===this._lockedPointer||(b&&this._disposePointer(b),this._state=q.NONE,E())};let d=-1;const f=b=>{if(!this._domElement||!this._enabled||this.mouseButtons.wheel===q.NONE)return;if(this._interactiveArea.left!==0||this._interactiveArea.top!==0||this._interactiveArea.width!==1||this._interactiveArea.height!==1){const A=this._domElement.getBoundingClientRect(),F=b.clientX/A.width,D=b.clientY/A.height;if(F<this._interactiveArea.left||F>this._interactiveArea.right||D<this._interactiveArea.top||D>this._interactiveArea.bottom)return}if(b.preventDefault(),this.dollyToCursor||this.mouseButtons.wheel===q.ROTATE||this.mouseButtons.wheel===q.TRUCK){const A=performance.now();d-A<1e3&&this._getClientRect(this._elementRect),d=A}const C=FR?-1:-3,S=b.deltaMode===1?b.deltaY/C:b.deltaY/(C*10),_=this.dollyToCursor?(b.clientX-this._elementRect.x)/this._elementRect.width*2-1:0,M=this.dollyToCursor?(b.clientY-this._elementRect.y)/this._elementRect.height*-2+1:0;switch(this.mouseButtons.wheel){case q.ROTATE:{this._rotateInternal(b.deltaX,b.deltaY),this._isUserControllingRotate=!0;break}case q.TRUCK:{this._truckInternal(b.deltaX,b.deltaY,!1),this._isUserControllingTruck=!0;break}case q.OFFSET:{this._truckInternal(b.deltaX,b.deltaY,!0),this._isUserControllingOffset=!0;break}case q.DOLLY:{this._dollyInternal(-S,_,M),this._isUserControllingDolly=!0;break}case q.ZOOM:{this._zoomInternal(-S,_,M),this._isUserControllingZoom=!0;break}}this.dispatchEvent({type:"control"})},p=b=>{if(!(!this._domElement||!this._enabled)){if(this.mouseButtons.right===Kd.ACTION.NONE){const C=b instanceof PointerEvent?b.pointerId:0,S=this._findPointerById(C);S&&this._disposePointer(S),this._domElement.ownerDocument.removeEventListener("pointermove",l,{passive:!1}),this._domElement.ownerDocument.removeEventListener("pointerup",u),this._domElement.ownerDocument.removeEventListener("mousemove",h),this._domElement.ownerDocument.removeEventListener("mouseup",c);return}b.preventDefault()}},m=b=>{if(this._enabled){if(ed(this._activePointers,Mt),this._getClientRect(this._elementRect),s.copy(Mt),n.copy(Mt),this._activePointers.length>=2){const C=Mt.x-this._activePointers[1].clientX,S=Mt.y-this._activePointers[1].clientY,_=Math.sqrt(C*C+S*S);r.set(0,_);const M=(this._activePointers[0].clientX+this._activePointers[1].clientX)*.5,A=(this._activePointers[0].clientY+this._activePointers[1].clientY)*.5;n.set(M,A)}if(this._state=0,!b)this._lockedPointer&&(this._state=this._state|this.mouseButtons.left);else if("pointerType"in b&&b.pointerType==="touch")switch(this._activePointers.length){case 1:this._state=this.touches.one;break;case 2:this._state=this.touches.two;break;case 3:this._state=this.touches.three;break}else!this._lockedPointer&&(b.buttons&Ee.LEFT)===Ee.LEFT&&(this._state=this._state|this.mouseButtons.left),(b.buttons&Ee.MIDDLE)===Ee.MIDDLE&&(this._state=this._state|this.mouseButtons.middle),(b.buttons&Ee.RIGHT)===Ee.RIGHT&&(this._state=this._state|this.mouseButtons.right);((this._state&q.ROTATE)===q.ROTATE||(this._state&q.TOUCH_ROTATE)===q.TOUCH_ROTATE||(this._state&q.TOUCH_DOLLY_ROTATE)===q.TOUCH_DOLLY_ROTATE||(this._state&q.TOUCH_ZOOM_ROTATE)===q.TOUCH_ZOOM_ROTATE)&&(this._sphericalEnd.theta=this._spherical.theta,this._sphericalEnd.phi=this._spherical.phi,this._thetaVelocity.value=0,this._phiVelocity.value=0),((this._state&q.TRUCK)===q.TRUCK||(this._state&q.TOUCH_TRUCK)===q.TOUCH_TRUCK||(this._state&q.TOUCH_DOLLY_TRUCK)===q.TOUCH_DOLLY_TRUCK||(this._state&q.TOUCH_ZOOM_TRUCK)===q.TOUCH_ZOOM_TRUCK)&&(this._targetEnd.copy(this._target),this._targetVelocity.set(0,0,0)),((this._state&q.DOLLY)===q.DOLLY||(this._state&q.TOUCH_DOLLY)===q.TOUCH_DOLLY||(this._state&q.TOUCH_DOLLY_TRUCK)===q.TOUCH_DOLLY_TRUCK||(this._state&q.TOUCH_DOLLY_OFFSET)===q.TOUCH_DOLLY_OFFSET||(this._state&q.TOUCH_DOLLY_ROTATE)===q.TOUCH_DOLLY_ROTATE)&&(this._sphericalEnd.radius=this._spherical.radius,this._radiusVelocity.value=0),((this._state&q.ZOOM)===q.ZOOM||(this._state&q.TOUCH_ZOOM)===q.TOUCH_ZOOM||(this._state&q.TOUCH_ZOOM_TRUCK)===q.TOUCH_ZOOM_TRUCK||(this._state&q.TOUCH_ZOOM_OFFSET)===q.TOUCH_ZOOM_OFFSET||(this._state&q.TOUCH_ZOOM_ROTATE)===q.TOUCH_ZOOM_ROTATE)&&(this._zoomEnd=this._zoom,this._zoomVelocity.value=0),((this._state&q.OFFSET)===q.OFFSET||(this._state&q.TOUCH_OFFSET)===q.TOUCH_OFFSET||(this._state&q.TOUCH_DOLLY_OFFSET)===q.TOUCH_DOLLY_OFFSET||(this._state&q.TOUCH_ZOOM_OFFSET)===q.TOUCH_ZOOM_OFFSET)&&(this._focalOffsetEnd.copy(this._focalOffset),this._focalOffsetVelocity.set(0,0,0)),this.dispatchEvent({type:"controlstart"})}},g=()=>{if(!this._enabled||!this._dragNeedsUpdate)return;this._dragNeedsUpdate=!1,ed(this._activePointers,Mt);const b=this._domElement&&document.pointerLockElement===this._domElement?this._lockedPointer||this._activePointers[0]:null,C=b?-b.deltaX:n.x-Mt.x,S=b?-b.deltaY:n.y-Mt.y;if(n.copy(Mt),((this._state&q.ROTATE)===q.ROTATE||(this._state&q.TOUCH_ROTATE)===q.TOUCH_ROTATE||(this._state&q.TOUCH_DOLLY_ROTATE)===q.TOUCH_DOLLY_ROTATE||(this._state&q.TOUCH_ZOOM_ROTATE)===q.TOUCH_ZOOM_ROTATE)&&(this._rotateInternal(C,S),this._isUserControllingRotate=!0),(this._state&q.DOLLY)===q.DOLLY||(this._state&q.ZOOM)===q.ZOOM){const _=this.dollyToCursor?(s.x-this._elementRect.x)/this._elementRect.width*2-1:0,M=this.dollyToCursor?(s.y-this._elementRect.y)/this._elementRect.height*-2+1:0,A=this.dollyDragInverted?-1:1;(this._state&q.DOLLY)===q.DOLLY?(this._dollyInternal(A*S*vh,_,M),this._isUserControllingDolly=!0):(this._zoomInternal(A*S*vh,_,M),this._isUserControllingZoom=!0)}if((this._state&q.TOUCH_DOLLY)===q.TOUCH_DOLLY||(this._state&q.TOUCH_ZOOM)===q.TOUCH_ZOOM||(this._state&q.TOUCH_DOLLY_TRUCK)===q.TOUCH_DOLLY_TRUCK||(this._state&q.TOUCH_ZOOM_TRUCK)===q.TOUCH_ZOOM_TRUCK||(this._state&q.TOUCH_DOLLY_OFFSET)===q.TOUCH_DOLLY_OFFSET||(this._state&q.TOUCH_ZOOM_OFFSET)===q.TOUCH_ZOOM_OFFSET||(this._state&q.TOUCH_DOLLY_ROTATE)===q.TOUCH_DOLLY_ROTATE||(this._state&q.TOUCH_ZOOM_ROTATE)===q.TOUCH_ZOOM_ROTATE){const _=Mt.x-this._activePointers[1].clientX,M=Mt.y-this._activePointers[1].clientY,A=Math.sqrt(_*_+M*M),F=r.y-A;r.set(0,A);const D=this.dollyToCursor?(n.x-this._elementRect.x)/this._elementRect.width*2-1:0,x=this.dollyToCursor?(n.y-this._elementRect.y)/this._elementRect.height*-2+1:0;(this._state&q.TOUCH_DOLLY)===q.TOUCH_DOLLY||(this._state&q.TOUCH_DOLLY_ROTATE)===q.TOUCH_DOLLY_ROTATE||(this._state&q.TOUCH_DOLLY_TRUCK)===q.TOUCH_DOLLY_TRUCK||(this._state&q.TOUCH_DOLLY_OFFSET)===q.TOUCH_DOLLY_OFFSET?(this._dollyInternal(F*vh,D,x),this._isUserControllingDolly=!0):(this._zoomInternal(F*vh,D,x),this._isUserControllingZoom=!0)}((this._state&q.TRUCK)===q.TRUCK||(this._state&q.TOUCH_TRUCK)===q.TOUCH_TRUCK||(this._state&q.TOUCH_DOLLY_TRUCK)===q.TOUCH_DOLLY_TRUCK||(this._state&q.TOUCH_ZOOM_TRUCK)===q.TOUCH_ZOOM_TRUCK)&&(this._truckInternal(C,S,!1),this._isUserControllingTruck=!0),((this._state&q.OFFSET)===q.OFFSET||(this._state&q.TOUCH_OFFSET)===q.TOUCH_OFFSET||(this._state&q.TOUCH_DOLLY_OFFSET)===q.TOUCH_DOLLY_OFFSET||(this._state&q.TOUCH_ZOOM_OFFSET)===q.TOUCH_ZOOM_OFFSET)&&(this._truckInternal(C,S,!0),this._isUserControllingOffset=!0),this.dispatchEvent({type:"control"})},E=()=>{ed(this._activePointers,Mt),n.copy(Mt),this._dragNeedsUpdate=!1,(this._activePointers.length===0||this._activePointers.length===1&&this._activePointers[0]===this._lockedPointer)&&(this._isDragging=!1),this._activePointers.length===0&&this._domElement&&(this._domElement.ownerDocument.removeEventListener("pointermove",l,{passive:!1}),this._domElement.ownerDocument.removeEventListener("mousemove",h),this._domElement.ownerDocument.removeEventListener("pointerup",u),this._domElement.ownerDocument.removeEventListener("mouseup",c),this.dispatchEvent({type:"controlend"}))};this.lockPointer=()=>{!this._enabled||!this._domElement||(this.cancel(),this._lockedPointer={pointerId:-1,clientX:0,clientY:0,deltaX:0,deltaY:0,mouseButton:null},this._activePointers.push(this._lockedPointer),this._domElement.ownerDocument.removeEventListener("pointermove",l,{passive:!1}),this._domElement.ownerDocument.removeEventListener("pointerup",u),this._domElement.requestPointerLock(),this._domElement.ownerDocument.addEventListener("pointerlockchange",I),this._domElement.ownerDocument.addEventListener("pointerlockerror",v),this._domElement.ownerDocument.addEventListener("pointermove",l,{passive:!1}),this._domElement.ownerDocument.addEventListener("pointerup",u),m())},this.unlockPointer=()=>{this._lockedPointer!==null&&(this._disposePointer(this._lockedPointer),this._lockedPointer=null),document.exitPointerLock(),this.cancel(),this._domElement&&(this._domElement.ownerDocument.removeEventListener("pointerlockchange",I),this._domElement.ownerDocument.removeEventListener("pointerlockerror",v))};const I=()=>{this._domElement&&this._domElement.ownerDocument.pointerLockElement===this._domElement||this.unlockPointer()},v=()=>{this.unlockPointer()};this._addAllEventListeners=b=>{this._domElement=b,this._domElement.style.touchAction="none",this._domElement.style.userSelect="none",this._domElement.style.webkitUserSelect="none",this._domElement.addEventListener("pointerdown",o),OR&&this._domElement.addEventListener("mousedown",a),this._domElement.addEventListener("pointercancel",u),this._domElement.addEventListener("wheel",f,{passive:!1}),this._domElement.addEventListener("contextmenu",p)},this._removeAllEventListeners=()=>{this._domElement&&(this._domElement.style.touchAction="",this._domElement.style.userSelect="",this._domElement.style.webkitUserSelect="",this._domElement.removeEventListener("pointerdown",o),this._domElement.removeEventListener("mousedown",a),this._domElement.removeEventListener("pointercancel",u),this._domElement.removeEventListener("wheel",f,{passive:!1}),this._domElement.removeEventListener("contextmenu",p),this._domElement.ownerDocument.removeEventListener("pointermove",l,{passive:!1}),this._domElement.ownerDocument.removeEventListener("mousemove",h),this._domElement.ownerDocument.removeEventListener("pointerup",u),this._domElement.ownerDocument.removeEventListener("mouseup",c),this._domElement.ownerDocument.removeEventListener("pointerlockchange",I),this._domElement.ownerDocument.removeEventListener("pointerlockerror",v))},this.cancel=()=>{this._state!==q.NONE&&(this._state=q.NONE,this._activePointers.length=0,E())},t&&this.connect(t),this.update(0)}get camera(){return this._camera}set camera(e){this._camera=e,this.updateCameraUp(),this._camera.updateProjectionMatrix(),this._updateNearPlaneCorners(),this._needsUpdate=!0}get enabled(){return this._enabled}set enabled(e){this._enabled=e,this._domElement&&(e?(this._domElement.style.touchAction="none",this._domElement.style.userSelect="none",this._domElement.style.webkitUserSelect="none"):(this.cancel(),this._domElement.style.touchAction="",this._domElement.style.userSelect="",this._domElement.style.webkitUserSelect=""))}get active(){return!this._hasRested}get currentAction(){return this._state}get distance(){return this._spherical.radius}set distance(e){this._spherical.radius===e&&this._sphericalEnd.radius===e||(this._spherical.radius=e,this._sphericalEnd.radius=e,this._needsUpdate=!0)}get azimuthAngle(){return this._spherical.theta}set azimuthAngle(e){this._spherical.theta===e&&this._sphericalEnd.theta===e||(this._spherical.theta=e,this._sphericalEnd.theta=e,this._needsUpdate=!0)}get polarAngle(){return this._spherical.phi}set polarAngle(e){this._spherical.phi===e&&this._sphericalEnd.phi===e||(this._spherical.phi=e,this._sphericalEnd.phi=e,this._needsUpdate=!0)}get boundaryEnclosesCamera(){return this._boundaryEnclosesCamera}set boundaryEnclosesCamera(e){this._boundaryEnclosesCamera=e,this._needsUpdate=!0}set interactiveArea(e){this._interactiveArea.width=bi(e.width,0,1),this._interactiveArea.height=bi(e.height,0,1),this._interactiveArea.x=bi(e.x,0,1-this._interactiveArea.width),this._interactiveArea.y=bi(e.y,0,1-this._interactiveArea.height)}addEventListener(e,t){super.addEventListener(e,t)}removeEventListener(e,t){super.removeEventListener(e,t)}rotate(e,t,s=!1){return this.rotateTo(this._sphericalEnd.theta+e,this._sphericalEnd.phi+t,s)}rotateAzimuthTo(e,t=!1){return this.rotateTo(e,this._sphericalEnd.phi,t)}rotatePolarTo(e,t=!1){return this.rotateTo(this._sphericalEnd.theta,e,t)}rotateTo(e,t,s=!1){this._isUserControllingRotate=!1;const n=bi(e,this.minAzimuthAngle,this.maxAzimuthAngle),r=bi(t,this.minPolarAngle,this.maxPolarAngle);this._sphericalEnd.theta=n,this._sphericalEnd.phi=r,this._sphericalEnd.makeSafe(),this._needsUpdate=!0,s||(this._spherical.theta=this._sphericalEnd.theta,this._spherical.phi=this._sphericalEnd.phi);const o=!s||Me(this._spherical.theta,this._sphericalEnd.theta,this.restThreshold)&&Me(this._spherical.phi,this._sphericalEnd.phi,this.restThreshold);return this._createOnRestPromise(o)}dolly(e,t=!1){return this.dollyTo(this._sphericalEnd.radius-e,t)}dollyTo(e,t=!1){return this._isUserControllingDolly=!1,this._lastDollyDirection=gr.NONE,this._changedDolly=0,this._dollyToNoClamp(bi(e,this.minDistance,this.maxDistance),t)}_dollyToNoClamp(e,t=!1){const s=this._sphericalEnd.radius;if(this.colliderMeshes.length>=1){const r=this._collisionTest(),o=Me(r,this._spherical.radius);if(!(s>e)&&o)return Promise.resolve();this._sphericalEnd.radius=Math.min(e,r)}else this._sphericalEnd.radius=e;this._needsUpdate=!0,t||(this._spherical.radius=this._sphericalEnd.radius);const n=!t||Me(this._spherical.radius,this._sphericalEnd.radius,this.restThreshold);return this._createOnRestPromise(n)}dollyInFixed(e,t=!1){this._targetEnd.add(this._getCameraDirection(sa).multiplyScalar(e)),t||this._target.copy(this._targetEnd);const s=!t||Me(this._target.x,this._targetEnd.x,this.restThreshold)&&Me(this._target.y,this._targetEnd.y,this.restThreshold)&&Me(this._target.z,this._targetEnd.z,this.restThreshold);return this._createOnRestPromise(s)}zoom(e,t=!1){return this.zoomTo(this._zoomEnd+e,t)}zoomTo(e,t=!1){this._isUserControllingZoom=!1,this._zoomEnd=bi(e,this.minZoom,this.maxZoom),this._needsUpdate=!0,t||(this._zoom=this._zoomEnd);const s=!t||Me(this._zoom,this._zoomEnd,this.restThreshold);return this._changedZoom=0,this._createOnRestPromise(s)}pan(e,t,s=!1){return console.warn("`pan` has been renamed to `truck`"),this.truck(e,t,s)}truck(e,t,s=!1){this._camera.updateMatrix(),_i.setFromMatrixColumn(this._camera.matrix,0),Ai.setFromMatrixColumn(this._camera.matrix,1),_i.multiplyScalar(e),Ai.multiplyScalar(-t);const n=Se.copy(_i).add(Ai),r=Re.copy(this._targetEnd).add(n);return this.moveTo(r.x,r.y,r.z,s)}forward(e,t=!1){Se.setFromMatrixColumn(this._camera.matrix,0),Se.crossVectors(this._camera.up,Se),Se.multiplyScalar(e);const s=Re.copy(this._targetEnd).add(Se);return this.moveTo(s.x,s.y,s.z,t)}elevate(e,t=!1){return Se.copy(this._camera.up).multiplyScalar(e),this.moveTo(this._targetEnd.x+Se.x,this._targetEnd.y+Se.y,this._targetEnd.z+Se.z,t)}moveTo(e,t,s,n=!1){this._isUserControllingTruck=!1;const r=Se.set(e,t,s).sub(this._targetEnd);this._encloseToBoundary(this._targetEnd,r,this.boundaryFriction),this._needsUpdate=!0,n||this._target.copy(this._targetEnd);const o=!n||Me(this._target.x,this._targetEnd.x,this.restThreshold)&&Me(this._target.y,this._targetEnd.y,this.restThreshold)&&Me(this._target.z,this._targetEnd.z,this.restThreshold);return this._createOnRestPromise(o)}lookInDirectionOf(e,t,s,n=!1){const r=Se.set(e,t,s).sub(this._targetEnd).normalize().multiplyScalar(-this._sphericalEnd.radius);return this.setPosition(r.x,r.y,r.z,n)}fitToBox(e,t,{cover:s=!1,paddingLeft:n=0,paddingRight:r=0,paddingBottom:o=0,paddingTop:a=0}={}){const l=[],h=e.isBox3?br.copy(e):br.setFromObject(e);h.isEmpty()&&(console.warn("camera-controls: fitTo() cannot be used with an empty box. Aborting"),Promise.resolve());const u=Cg(this._sphericalEnd.theta,yg),c=Cg(this._sphericalEnd.phi,yg);l.push(this.rotateTo(u,c,t));const d=Se.setFromSpherical(this._sphericalEnd).normalize(),f=_g.setFromUnitVectors(d,id),p=Me(Math.abs(d.y),1);p&&f.multiply(nd.setFromAxisAngle(yh,u)),f.multiply(this._yAxisUpSpaceInverse);const m=Rg.makeEmpty();Re.copy(h.min).applyQuaternion(f),m.expandByPoint(Re),Re.copy(h.min).setX(h.max.x).applyQuaternion(f),m.expandByPoint(Re),Re.copy(h.min).setY(h.max.y).applyQuaternion(f),m.expandByPoint(Re),Re.copy(h.max).setZ(h.min.z).applyQuaternion(f),m.expandByPoint(Re),Re.copy(h.min).setZ(h.max.z).applyQuaternion(f),m.expandByPoint(Re),Re.copy(h.max).setY(h.min.y).applyQuaternion(f),m.expandByPoint(Re),Re.copy(h.max).setX(h.min.x).applyQuaternion(f),m.expandByPoint(Re),Re.copy(h.max).applyQuaternion(f),m.expandByPoint(Re),m.min.x-=n,m.min.y-=o,m.max.x+=r,m.max.y+=a,f.setFromUnitVectors(id,d),p&&f.premultiply(nd.invert()),f.premultiply(this._yAxisUpSpace);const g=m.getSize(Se),E=m.getCenter(Re).applyQuaternion(f);if(pn(this._camera)){const I=this.getDistanceToFitBox(g.x,g.y,g.z,s);l.push(this.moveTo(E.x,E.y,E.z,t)),l.push(this.dollyTo(I,t)),l.push(this.setFocalOffset(0,0,0,t))}else if(Ms(this._camera)){const I=this._camera,v=I.right-I.left,b=I.top-I.bottom,C=s?Math.max(v/g.x,b/g.y):Math.min(v/g.x,b/g.y);l.push(this.moveTo(E.x,E.y,E.z,t)),l.push(this.zoomTo(C,t)),l.push(this.setFocalOffset(0,0,0,t))}return Promise.all(l)}fitToSphere(e,t){const s=[],n=e instanceof ge.Sphere?sd.copy(e):Kd.createBoundingSphere(e,sd);if(s.push(this.moveTo(n.center.x,n.center.y,n.center.z,t)),pn(this._camera)){const r=this.getDistanceToFitSphere(n.radius);s.push(this.dollyTo(r,t))}else if(Ms(this._camera)){const r=this._camera.right-this._camera.left,o=this._camera.top-this._camera.bottom,a=2*n.radius,l=Math.min(r/a,o/a);s.push(this.zoomTo(l,t))}return s.push(this.setFocalOffset(0,0,0,t)),Promise.all(s)}setLookAt(e,t,s,n,r,o,a=!1){this._isUserControllingRotate=!1,this._isUserControllingDolly=!1,this._isUserControllingTruck=!1,this._lastDollyDirection=gr.NONE,this._changedDolly=0;const l=Re.set(n,r,o),h=Se.set(e,t,s);this._targetEnd.copy(l),this._sphericalEnd.setFromVector3(h.sub(l).applyQuaternion(this._yAxisUpSpace)),this.normalizeRotations(),this._needsUpdate=!0,a||(this._target.copy(this._targetEnd),this._spherical.copy(this._sphericalEnd));const u=!a||Me(this._target.x,this._targetEnd.x,this.restThreshold)&&Me(this._target.y,this._targetEnd.y,this.restThreshold)&&Me(this._target.z,this._targetEnd.z,this.restThreshold)&&Me(this._spherical.theta,this._sphericalEnd.theta,this.restThreshold)&&Me(this._spherical.phi,this._sphericalEnd.phi,this.restThreshold)&&Me(this._spherical.radius,this._sphericalEnd.radius,this.restThreshold);return this._createOnRestPromise(u)}lerpLookAt(e,t,s,n,r,o,a,l,h,u,c,d,f,p=!1){this._isUserControllingRotate=!1,this._isUserControllingDolly=!1,this._isUserControllingTruck=!1,this._lastDollyDirection=gr.NONE,this._changedDolly=0;const m=Se.set(n,r,o),g=Re.set(e,t,s);Qt.setFromVector3(g.sub(m).applyQuaternion(this._yAxisUpSpace));const E=Ir.set(u,c,d),I=Re.set(a,l,h);na.setFromVector3(I.sub(E).applyQuaternion(this._yAxisUpSpace)),this._targetEnd.copy(m.lerp(E,f));const v=na.theta-Qt.theta,b=na.phi-Qt.phi,C=na.radius-Qt.radius;this._sphericalEnd.set(Qt.radius+C*f,Qt.phi+b*f,Qt.theta+v*f),this.normalizeRotations(),this._needsUpdate=!0,p||(this._target.copy(this._targetEnd),this._spherical.copy(this._sphericalEnd));const S=!p||Me(this._target.x,this._targetEnd.x,this.restThreshold)&&Me(this._target.y,this._targetEnd.y,this.restThreshold)&&Me(this._target.z,this._targetEnd.z,this.restThreshold)&&Me(this._spherical.theta,this._sphericalEnd.theta,this.restThreshold)&&Me(this._spherical.phi,this._sphericalEnd.phi,this.restThreshold)&&Me(this._spherical.radius,this._sphericalEnd.radius,this.restThreshold);return this._createOnRestPromise(S)}setPosition(e,t,s,n=!1){return this.setLookAt(e,t,s,this._targetEnd.x,this._targetEnd.y,this._targetEnd.z,n)}setTarget(e,t,s,n=!1){const r=this.getPosition(Se),o=this.setLookAt(r.x,r.y,r.z,e,t,s,n);return this._sphericalEnd.phi=bi(this._sphericalEnd.phi,this.minPolarAngle,this.maxPolarAngle),o}setFocalOffset(e,t,s,n=!1){this._isUserControllingOffset=!1,this._focalOffsetEnd.set(e,t,s),this._needsUpdate=!0,n||this._focalOffset.copy(this._focalOffsetEnd);const r=!n||Me(this._focalOffset.x,this._focalOffsetEnd.x,this.restThreshold)&&Me(this._focalOffset.y,this._focalOffsetEnd.y,this.restThreshold)&&Me(this._focalOffset.z,this._focalOffsetEnd.z,this.restThreshold);return this._createOnRestPromise(r)}setOrbitPoint(e,t,s){this._camera.updateMatrixWorld(),_i.setFromMatrixColumn(this._camera.matrixWorldInverse,0),Ai.setFromMatrixColumn(this._camera.matrixWorldInverse,1),mn.setFromMatrixColumn(this._camera.matrixWorldInverse,2);const n=Se.set(e,t,s),r=n.distanceTo(this._camera.position),o=n.sub(this._camera.position);_i.multiplyScalar(o.x),Ai.multiplyScalar(o.y),mn.multiplyScalar(o.z),Se.copy(_i).add(Ai).add(mn),Se.z=Se.z+r,this.dollyTo(r,!1),this.setFocalOffset(-Se.x,Se.y,-Se.z,!1),this.moveTo(e,t,s,!1)}setBoundary(e){if(!e){this._boundary.min.set(-1/0,-1/0,-1/0),this._boundary.max.set(1/0,1/0,1/0),this._needsUpdate=!0;return}this._boundary.copy(e),this._boundary.clampPoint(this._targetEnd,this._targetEnd),this._needsUpdate=!0}setViewport(e,t,s,n){if(e===null){this._viewport=null;return}this._viewport=this._viewport||new ge.Vector4,typeof e=="number"?this._viewport.set(e,t,s,n):this._viewport.copy(e)}getDistanceToFitBox(e,t,s,n=!1){if(td(this._camera,"getDistanceToFitBox"))return this._spherical.radius;const r=e/t,o=this._camera.getEffectiveFOV()*ea,a=this._camera.aspect;return((n?r>a:r<a)?t:e/a)*.5/Math.tan(o*.5)+s*.5}getDistanceToFitSphere(e){if(td(this._camera,"getDistanceToFitSphere"))return this._spherical.radius;const t=this._camera.getEffectiveFOV()*ea,s=Math.atan(Math.tan(t*.5)*this._camera.aspect)*2,n=1<this._camera.aspect?t:s;return e/Math.sin(n*.5)}getTarget(e,t=!0){return(e&&e.isVector3?e:new ge.Vector3).copy(t?this._targetEnd:this._target)}getPosition(e,t=!0){return(e&&e.isVector3?e:new ge.Vector3).setFromSpherical(t?this._sphericalEnd:this._spherical).applyQuaternion(this._yAxisUpSpaceInverse).add(t?this._targetEnd:this._target)}getSpherical(e,t=!0){return(e&&e instanceof ge.Spherical?e:new ge.Spherical).copy(t?this._sphericalEnd:this._spherical)}getFocalOffset(e,t=!0){return(e&&e.isVector3?e:new ge.Vector3).copy(t?this._focalOffsetEnd:this._focalOffset)}normalizeRotations(){this._sphericalEnd.theta=this._sphericalEnd.theta%Er,this._sphericalEnd.theta<0&&(this._sphericalEnd.theta+=Er),this._spherical.theta+=Er*Math.round((this._sphericalEnd.theta-this._spherical.theta)/Er)}reset(e=!1){if(!Me(this._camera.up.x,this._cameraUp0.x)||!Me(this._camera.up.y,this._cameraUp0.y)||!Me(this._camera.up.z,this._cameraUp0.z)){this._camera.up.copy(this._cameraUp0);const s=this.getPosition(Se);this.updateCameraUp(),this.setPosition(s.x,s.y,s.z)}const t=[this.setLookAt(this._position0.x,this._position0.y,this._position0.z,this._target0.x,this._target0.y,this._target0.z,e),this.setFocalOffset(this._focalOffset0.x,this._focalOffset0.y,this._focalOffset0.z,e),this.zoomTo(this._zoom0,e)];return Promise.all(t)}saveState(){this._cameraUp0.copy(this._camera.up),this.getTarget(this._target0),this.getPosition(this._position0),this._zoom0=this._zoom,this._focalOffset0.copy(this._focalOffset)}updateCameraUp(){this._yAxisUpSpace.setFromUnitVectors(this._camera.up,yh),this._yAxisUpSpaceInverse.copy(this._yAxisUpSpace).invert()}applyCameraUp(){const e=Se.subVectors(this._target,this._camera.position).normalize(),t=Re.crossVectors(e,this._camera.up);this._camera.up.crossVectors(t,e).normalize(),this._camera.updateMatrixWorld();const s=this.getPosition(Se);this.updateCameraUp(),this.setPosition(s.x,s.y,s.z)}update(e){const t=this._sphericalEnd.theta-this._spherical.theta,s=this._sphericalEnd.phi-this._spherical.phi,n=this._sphericalEnd.radius-this._spherical.radius,r=Sg.subVectors(this._targetEnd,this._target),o=xg.subVectors(this._focalOffsetEnd,this._focalOffset),a=this._zoomEnd-this._zoom;if($e(t))this._thetaVelocity.value=0,this._spherical.theta=this._sphericalEnd.theta;else{const u=this._isUserControllingRotate?this.draggingSmoothTime:this.smoothTime;this._spherical.theta=bh(this._spherical.theta,this._sphericalEnd.theta,this._thetaVelocity,u,1/0,e),this._needsUpdate=!0}if($e(s))this._phiVelocity.value=0,this._spherical.phi=this._sphericalEnd.phi;else{const u=this._isUserControllingRotate?this.draggingSmoothTime:this.smoothTime;this._spherical.phi=bh(this._spherical.phi,this._sphericalEnd.phi,this._phiVelocity,u,1/0,e),this._needsUpdate=!0}if($e(n))this._radiusVelocity.value=0,this._spherical.radius=this._sphericalEnd.radius;else{const u=this._isUserControllingDolly?this.draggingSmoothTime:this.smoothTime;this._spherical.radius=bh(this._spherical.radius,this._sphericalEnd.radius,this._radiusVelocity,u,this.maxSpeed,e),this._needsUpdate=!0}if($e(r.x)&&$e(r.y)&&$e(r.z))this._targetVelocity.set(0,0,0),this._target.copy(this._targetEnd);else{const u=this._isUserControllingTruck?this.draggingSmoothTime:this.smoothTime;Tg(this._target,this._targetEnd,this._targetVelocity,u,this.maxSpeed,e,this._target),this._needsUpdate=!0}if($e(o.x)&&$e(o.y)&&$e(o.z))this._focalOffsetVelocity.set(0,0,0),this._focalOffset.copy(this._focalOffsetEnd);else{const u=this._isUserControllingOffset?this.draggingSmoothTime:this.smoothTime;Tg(this._focalOffset,this._focalOffsetEnd,this._focalOffsetVelocity,u,this.maxSpeed,e,this._focalOffset),this._needsUpdate=!0}if($e(a))this._zoomVelocity.value=0,this._zoom=this._zoomEnd;else{const u=this._isUserControllingZoom?this.draggingSmoothTime:this.smoothTime;this._zoom=bh(this._zoom,this._zoomEnd,this._zoomVelocity,u,1/0,e)}if(this.dollyToCursor){if(pn(this._camera)&&this._changedDolly!==0){const u=this._spherical.radius-this._lastDistance,c=this._camera,d=this._getCameraDirection(sa),f=Se.copy(d).cross(c.up).normalize();f.lengthSq()===0&&(f.x=1);const p=Re.crossVectors(f,d),m=this._sphericalEnd.radius*Math.tan(c.getEffectiveFOV()*ea*.5),g=(this._sphericalEnd.radius-u-this._sphericalEnd.radius)/this._sphericalEnd.radius,E=Ir.copy(this._targetEnd).add(f.multiplyScalar(this._dollyControlCoord.x*m*c.aspect)).add(p.multiplyScalar(this._dollyControlCoord.y*m)),I=Se.copy(this._targetEnd).lerp(E,g),v=this._lastDollyDirection===gr.IN&&this._spherical.radius<=this.minDistance,b=this._lastDollyDirection===gr.OUT&&this.maxDistance<=this._spherical.radius;if(this.infinityDolly&&(v||b)){this._sphericalEnd.radius-=u,this._spherical.radius-=u;const S=Re.copy(d).multiplyScalar(-u);I.add(S)}this._boundary.clampPoint(I,I);const C=Re.subVectors(I,this._targetEnd);this._targetEnd.copy(I),this._target.add(C),this._changedDolly-=u,$e(this._changedDolly)&&(this._changedDolly=0)}else if(Ms(this._camera)&&this._changedZoom!==0){const u=this._zoom-this._lastZoom,c=this._camera,d=Se.set(this._dollyControlCoord.x,this._dollyControlCoord.y,(c.near+c.far)/(c.near-c.far)).unproject(c),f=Re.set(0,0,-1).applyQuaternion(c.quaternion),p=Ir.copy(d).add(f.multiplyScalar(-d.dot(c.up))),m=-(this._zoom-u-this._zoom)/this._zoom,g=this._getCameraDirection(sa),E=this._targetEnd.dot(g),I=Se.copy(this._targetEnd).lerp(p,m),v=I.dot(g),b=g.multiplyScalar(v-E);I.sub(b),this._boundary.clampPoint(I,I);const C=Re.subVectors(I,this._targetEnd);this._targetEnd.copy(I),this._target.add(C),this._changedZoom-=u,$e(this._changedZoom)&&(this._changedZoom=0)}}this._camera.zoom!==this._zoom&&(this._camera.zoom=this._zoom,this._camera.updateProjectionMatrix(),this._updateNearPlaneCorners(),this._needsUpdate=!0),this._dragNeedsUpdate=!0;const l=this._collisionTest();this._spherical.radius=Math.min(this._spherical.radius,l),this._spherical.makeSafe(),this._camera.position.setFromSpherical(this._spherical).applyQuaternion(this._yAxisUpSpaceInverse).add(this._target),this._camera.lookAt(this._target),(!$e(this._focalOffset.x)||!$e(this._focalOffset.y)||!$e(this._focalOffset.z))&&(this._camera.updateMatrixWorld(),_i.setFromMatrixColumn(this._camera.matrix,0),Ai.setFromMatrixColumn(this._camera.matrix,1),mn.setFromMatrixColumn(this._camera.matrix,2),_i.multiplyScalar(this._focalOffset.x),Ai.multiplyScalar(-this._focalOffset.y),mn.multiplyScalar(this._focalOffset.z),Se.copy(_i).add(Ai).add(mn),this._camera.position.add(Se)),this._boundaryEnclosesCamera&&this._encloseToBoundary(this._camera.position.copy(this._target),Se.setFromSpherical(this._spherical).applyQuaternion(this._yAxisUpSpaceInverse),1);const h=this._needsUpdate;return h&&!this._updatedLastTime?(this._hasRested=!1,this.dispatchEvent({type:"wake"}),this.dispatchEvent({type:"update"})):h?(this.dispatchEvent({type:"update"}),$e(t,this.restThreshold)&&$e(s,this.restThreshold)&&$e(n,this.restThreshold)&&$e(r.x,this.restThreshold)&&$e(r.y,this.restThreshold)&&$e(r.z,this.restThreshold)&&$e(o.x,this.restThreshold)&&$e(o.y,this.restThreshold)&&$e(o.z,this.restThreshold)&&$e(a,this.restThreshold)&&!this._hasRested&&(this._hasRested=!0,this.dispatchEvent({type:"rest"}))):!h&&this._updatedLastTime&&this.dispatchEvent({type:"sleep"}),this._lastDistance=this._spherical.radius,this._lastZoom=this._zoom,this._updatedLastTime=h,this._needsUpdate=!1,h}toJSON(){return JSON.stringify({enabled:this._enabled,minDistance:this.minDistance,maxDistance:ta(this.maxDistance),minZoom:this.minZoom,maxZoom:ta(this.maxZoom),minPolarAngle:this.minPolarAngle,maxPolarAngle:ta(this.maxPolarAngle),minAzimuthAngle:ta(this.minAzimuthAngle),maxAzimuthAngle:ta(this.maxAzimuthAngle),smoothTime:this.smoothTime,draggingSmoothTime:this.draggingSmoothTime,dollySpeed:this.dollySpeed,truckSpeed:this.truckSpeed,dollyToCursor:this.dollyToCursor,verticalDragToForward:this.verticalDragToForward,target:this._targetEnd.toArray(),position:Se.setFromSpherical(this._sphericalEnd).add(this._targetEnd).toArray(),zoom:this._zoomEnd,focalOffset:this._focalOffsetEnd.toArray(),target0:this._target0.toArray(),position0:this._position0.toArray(),zoom0:this._zoom0,focalOffset0:this._focalOffset0.toArray()})}fromJSON(e,t=!1){const s=JSON.parse(e);this.enabled=s.enabled,this.minDistance=s.minDistance,this.maxDistance=ia(s.maxDistance),this.minZoom=s.minZoom,this.maxZoom=ia(s.maxZoom),this.minPolarAngle=s.minPolarAngle,this.maxPolarAngle=ia(s.maxPolarAngle),this.minAzimuthAngle=ia(s.minAzimuthAngle),this.maxAzimuthAngle=ia(s.maxAzimuthAngle),this.smoothTime=s.smoothTime,this.draggingSmoothTime=s.draggingSmoothTime,this.dollySpeed=s.dollySpeed,this.truckSpeed=s.truckSpeed,this.dollyToCursor=s.dollyToCursor,this.verticalDragToForward=s.verticalDragToForward,this._target0.fromArray(s.target0),this._position0.fromArray(s.position0),this._zoom0=s.zoom0,this._focalOffset0.fromArray(s.focalOffset0),this.moveTo(s.target[0],s.target[1],s.target[2],t),Qt.setFromVector3(Se.fromArray(s.position).sub(this._targetEnd).applyQuaternion(this._yAxisUpSpace)),this.rotateTo(Qt.theta,Qt.phi,t),this.dollyTo(Qt.radius,t),this.zoomTo(s.zoom,t),this.setFocalOffset(s.focalOffset[0],s.focalOffset[1],s.focalOffset[2],t),this._needsUpdate=!0}connect(e){if(this._domElement){console.warn("camera-controls is already connected.");return}e.setAttribute("data-camera-controls-version",MR),this._addAllEventListeners(e),this._getClientRect(this._elementRect)}disconnect(){this.cancel(),this._removeAllEventListeners(),this._domElement&&(this._domElement.removeAttribute("data-camera-controls-version"),this._domElement=void 0)}dispose(){this.removeAllEventListeners(),this.disconnect()}_getTargetDirection(e){return e.setFromSpherical(this._spherical).divideScalar(this._spherical.radius).applyQuaternion(this._yAxisUpSpaceInverse)}_getCameraDirection(e){return this._getTargetDirection(e).negate()}_findPointerById(e){return this._activePointers.find(t=>t.pointerId===e)}_findPointerByMouseButton(e){return this._activePointers.find(t=>t.mouseButton===e)}_disposePointer(e){this._activePointers.splice(this._activePointers.indexOf(e),1)}_encloseToBoundary(e,t,s){const n=t.lengthSq();if(n===0)return e;const r=Re.copy(t).add(e),o=this._boundary.clampPoint(r,Ir).sub(r),a=o.lengthSq();if(a===0)return e.add(t);if(a===n)return e;if(s===0)return e.add(t).add(o);{const l=1+s*a/t.dot(o);return e.add(Re.copy(t).multiplyScalar(l)).add(o.multiplyScalar(1-s))}}_updateNearPlaneCorners(){if(pn(this._camera)){const e=this._camera,t=e.near,s=e.getEffectiveFOV()*ea,n=Math.tan(s*.5)*t,r=n*e.aspect;this._nearPlaneCorners[0].set(-r,-n,0),this._nearPlaneCorners[1].set(r,-n,0),this._nearPlaneCorners[2].set(r,n,0),this._nearPlaneCorners[3].set(-r,n,0)}else if(Ms(this._camera)){const e=this._camera,t=1/e.zoom,s=e.left*t,n=e.right*t,r=e.top*t,o=e.bottom*t;this._nearPlaneCorners[0].set(s,r,0),this._nearPlaneCorners[1].set(n,r,0),this._nearPlaneCorners[2].set(n,o,0),this._nearPlaneCorners[3].set(s,o,0)}}_collisionTest(){let e=1/0;if(!(this.colliderMeshes.length>=1)||td(this._camera,"_collisionTest"))return e;const t=this._getTargetDirection(sa);rd.lookAt(wg,t,this._camera.up);for(let s=0;s<4;s++){const n=Re.copy(this._nearPlaneCorners[s]);n.applyMatrix4(rd);const r=Ir.addVectors(this._target,n);Ch.set(r,t),Ch.far=this._spherical.radius+1;const o=Ch.intersectObjects(this.colliderMeshes);o.length!==0&&o[0].distance<e&&(e=o[0].distance)}return e}_getClientRect(e){if(!this._domElement)return;const t=this._domElement.getBoundingClientRect();return e.x=t.left,e.y=t.top,this._viewport?(e.x+=this._viewport.x,e.y+=t.height-this._viewport.w-this._viewport.y,e.width=this._viewport.z,e.height=this._viewport.w):(e.width=t.width,e.height=t.height),e}_createOnRestPromise(e){return e?Promise.resolve():(this._hasRested=!1,this.dispatchEvent({type:"transitionstart"}),new Promise(t=>{const s=()=>{this.removeEventListener("rest",s),t()};this.addEventListener("rest",s)}))}_addAllEventListeners(e){}_removeAllEventListeners(){}get dampingFactor(){return console.warn(".dampingFactor has been deprecated. use smoothTime (in seconds) instead."),0}set dampingFactor(e){console.warn(".dampingFactor has been deprecated. use smoothTime (in seconds) instead.")}get draggingDampingFactor(){return console.warn(".draggingDampingFactor has been deprecated. use draggingSmoothTime (in seconds) instead."),0}set draggingDampingFactor(e){console.warn(".draggingDampingFactor has been deprecated. use draggingSmoothTime (in seconds) instead.")}static createBoundingSphere(e,t=new ge.Sphere){const s=t,n=s.center;br.makeEmpty(),e.traverseVisible(o=>{o.isMesh&&br.expandByObject(o)}),br.getCenter(n);let r=0;return e.traverseVisible(o=>{if(!o.isMesh)return;const a=o,l=a.geometry.clone();l.applyMatrix4(a.matrixWorld);const h=l.attributes.position;for(let u=0,c=h.count;u<c;u++)Se.fromBufferAttribute(h,u),r=Math.max(r,n.distanceToSquared(Se))}),s.radius=Math.sqrt(r),s}},Jd=class Ub extends Zx{constructor(e){super(e),T(this,"onBeforeUpdate",new Y),T(this,"onAfterUpdate",new Y),T(this,"onAspectUpdated",new Y),T(this,"onDisposed",new Y),T(this,"three"),T(this,"_allControls",new Map),T(this,"updateAspect",()=>{var t;if(!(!this.currentWorld||!this.currentWorld.renderer)){if(this.three instanceof Qs){this.onAspectUpdated.trigger();return}if((t=this.currentWorld.renderer)!=null&&t.isResizeable()){const s=this.currentWorld.renderer.getSize();this.three.aspect=s.width/s.height,this.three.updateProjectionMatrix(),this.onAspectUpdated.trigger()}}}),this.three=this.setupCamera(),this.setupEvents(!0),this.onWorldChanged.add(({action:t,world:s})=>{if(t==="added"){const n=this.newCameraControls();this._allControls.set(s.uuid,n)}if(t==="removed"){const n=this._allControls.get(s.uuid);n&&(n.dispose(),this._allControls.delete(s.uuid))}})}get controls(){if(!this.currentWorld)throw new Error("This camera needs a world to work!");const e=this._allControls.get(this.currentWorld.uuid);if(!e)throw new Error("Controls not found!");return e}get enabled(){return this.currentWorld===null?!1:this.controls.enabled}set enabled(e){this.currentWorld!==null&&(this.controls.enabled=e)}dispose(){this.setupEvents(!1),this.onAspectUpdated.reset(),this.onBeforeUpdate.reset(),this.onAfterUpdate.reset(),this.three.removeFromParent(),this.onDisposed.trigger(),this.onDisposed.reset();for(const[e,t]of this._allControls)t.dispose()}update(e){this.enabled&&(this.onBeforeUpdate.trigger(this),this.controls.update(e),this.onAfterUpdate.trigger(this))}setupCamera(){const e=window.innerWidth/window.innerHeight,t=new Sn(60,e,1,1e3);return t.position.set(50,50,50),t.lookAt(new P(0,0,0)),t}newCameraControls(){if(!this.currentWorld)throw new Error("This camera needs a world to work!");if(!this.currentWorld.renderer)throw new Error("This camera needs a renderer to work!");zt.install({THREE:Ub.getSubsetOfThree()});const{domElement:e}=this.currentWorld.renderer.three,t=new zt(this.three,e);return t.smoothTime=.2,t.dollyToCursor=!0,t.infinityDolly=!0,t.minDistance=6,t}setupEvents(e){e?window.addEventListener("resize",this.updateAspect):window.removeEventListener("resize",this.updateAspect)}static getSubsetOfThree(){return{MOUSE:H1,Vector2:Ue,Vector3:P,Vector4:Eo,Quaternion:Jt,Matrix4:ce,Spherical:G1,Box3:Ge,Sphere:qn,Raycaster:$c,MathUtils:Un}}};const kb=class Bb extends be{constructor(e){super(e),T(this,"onAfterUpdate",new Y),T(this,"onBeforeUpdate",new Y),T(this,"onDisposed",new Y),T(this,"list",new Ci),T(this,"enabled",!0),e.add(Bb.uuid,this)}create(){const e=new RR(this.components),t=e.uuid;if(this.list.has(t))throw new Error("There is already a world with this name!");return this.list.set(t,e),e}delete(e){if(!this.list.has(e.uuid))throw new Error("The provided world is not found in the list!");this.list.delete(e.uuid),e.dispose()}dispose(){this.enabled=!1;for(const[e,t]of this.list)t.dispose();this.list.clear(),this.onDisposed.trigger()}update(e){if(this.enabled)for(const[t,s]of this.list)s.update(e)}};T(kb,"uuid","fdb61dc4-2ec1-4966-b83d-54ea795fad4a");let zb=kb;function NR(i,e,t,s){return new Promise((n,r)=>{function o(){const a=i.clientWaitSync(e,t,0);if(a===i.WAIT_FAILED){r();return}if(a===i.TIMEOUT_EXPIRED){setTimeout(o,s);return}n()}o()})}async function PR(i,e,t,s,n,r,o){const a=i.fenceSync(i.SYNC_GPU_COMMANDS_COMPLETE,0);i.flush(),await NR(i,a,0,10),i.deleteSync(a),i.bindBuffer(e,t),i.getBufferSubData(e,s,n,r,o),i.bindBuffer(e,null)}async function LR(i,e,t,s,n,r,o,a){const l=i.createBuffer();return i.bindBuffer(i.PIXEL_PACK_BUFFER,l),i.bufferData(i.PIXEL_PACK_BUFFER,a.byteLength,i.STREAM_READ),i.readPixels(e,t,s,n,r,o,0),i.bindBuffer(i.PIXEL_PACK_BUFFER,null),await PR(i,i.PIXEL_PACK_BUFFER,l,0,a),i.deleteBuffer(l),a}let DR=class extends _o{constructor(){super(...arguments),T(this,"_config",{enabled:{value:!0,type:"Boolean"},width:{type:"Number",interpolable:!0,value:512,min:32,max:1024},height:{type:"Number",interpolable:!0,value:512,min:32,max:1024},autoUpdate:{value:!0,type:"Boolean"},renderDebugFrame:{value:!1,type:"Boolean"},updateInterval:{type:"Number",interpolable:!0,value:1,min:0,max:1},threshold:{type:"Number",interpolable:!0,value:100,min:1,max:512}}),T(this,"_interval",null)}get enabled(){return this._config.enabled.value}set enabled(e){this._config.enabled.value=e,this._component.enabled=e}get width(){return this._config.width.value}set width(e){this.setWidthHeight(e,this.height)}get height(){return this._config.height.value}set height(e){this.setWidthHeight(this.width,e)}get autoUpdate(){return this._config.autoUpdate.value}set autoUpdate(e){this.setAutoAndInterval(e,this.updateInterval)}get updateInterval(){return this._config.updateInterval.value}set updateInterval(e){this.setAutoAndInterval(this.autoUpdate,e)}get renderDebugFrame(){return this._config.renderDebugFrame.value}set renderDebugFrame(e){this._config.renderDebugFrame.value=e}get threshold(){return this._config.threshold.value}set threshold(e){this._config.threshold.value=e}setWidthHeight(e,t){if(e<=0||t<=0)throw new Error("The width and height of the culler renderer must be more than 0!");this._config.width.value=e,this._config.height.value=t,this.resetRenderTarget()}setAutoAndInterval(e,t){if(t<=0)throw new Error("The updateInterval of the culler renderer must be more than 0!");this._config.autoUpdate.value=e,this._config.updateInterval.value=t,this.resetInterval(e)}resetRenderTarget(){this._component.renderTarget.dispose(),this._component.renderTarget=new zi(this.width,this.height),this._component.bufferSize=this.width*this.height*4,this._component.buffer=new Uint8Array(this._component.bufferSize)}resetInterval(e){this._interval!==null&&window.clearInterval(this._interval),e&&(this._interval=window.setInterval(async()=>{this._component.preventUpdate||await this._component.updateVisibility()},this.updateInterval))}},Vb=class{constructor(e,t){if(T(this,"onSetup",new Y),T(this,"onDisposed",new Y),T(this,"onViewUpdated",new rs),T(this,"enabled",!0),T(this,"needsUpdate",!1),T(this,"components"),T(this,"renderTarget",new zi),T(this,"bufferSize",1),T(this,"buffer",new Uint8Array),T(this,"preventUpdate",!1),T(this,"config"),T(this,"isSetup",!1),T(this,"world"),T(this,"renderer"),T(this,"_defaultConfig",{enabled:!0,height:512,width:512,updateInterval:1e3,autoUpdate:!0,renderDebugFrame:!1,threshold:100}),T(this,"worker"),T(this,"scene",new Ks),T(this,"_availableColor",1),T(this,"_isWorkerBusy",!1),T(this,"updateVisibility",async r=>{if(!this.enabled||!this.needsUpdate&&!r||this._isWorkerBusy)return;this._isWorkerBusy=!0;const o=this.world.camera.three;o.updateMatrix();const{width:a,height:l}=this.config;this.renderer.setSize(a,l),this.renderer.setRenderTarget(this.renderTarget),this.renderer.render(this.scene,o);const h=this.renderer.getContext();await LR(h,0,0,a,l,h.RGBA,h.UNSIGNED_BYTE,this.buffer),this.renderer.setRenderTarget(null),this.config.renderDebugFrame&&this.renderer.render(this.scene,o),this.worker.postMessage({buffer:this.buffer}),this.needsUpdate=!1}),!t.renderer)throw new Error("The given world must have a renderer!");this.components=e,this.config=new DR(this,this.components,"Culler renderer"),this.world=t,this.renderer=new za,this.renderer.clippingPlanes=t.renderer.clippingPlanes;const s=`
      addEventListener("message", (event) => {
        const { buffer } = event.data;
        const colors = new Map();
        for (let i = 0; i < buffer.length; i += 4) {
          const r = buffer[i];
          const g = buffer[i + 1];
          const b = buffer[i + 2];
          const code = "" + r + "-" + g + "-" + b;
          if(colors.has(code)) {
            colors.set(code, colors.get(code) + 1);
          } else {
            colors.set(code, 1);
          }
        }
        postMessage({ colors });
      });
    `,n=new Blob([s],{type:"application/javascript"});this.worker=new Worker(URL.createObjectURL(n)),this.setup()}dispose(){this.enabled=!1,this.config.autoUpdate=!1,this.components.get(fu).list.delete(this.config.uuid);for(const e of this.scene.children)e.removeFromParent();this.onViewUpdated.reset(),this.worker.terminate(),this.renderer.forceContextLoss(),this.renderer.dispose(),this.renderTarget.dispose(),this.buffer=null,this.onDisposed.reset()}setup(e){const t={...this._defaultConfig,...e},{width:s,height:n}=t;this.config.setWidthHeight(s,n);const{updateInterval:r,autoUpdate:o}=t;this.config.setAutoAndInterval(o,r),this.config.threshold=t.threshold,this.isSetup=!0,this.onSetup.trigger()}getAvailableColor(){let e=BigInt(this._availableColor.toString());const t=[];do t.unshift(Number(e%256n)),e/=256n;while(e);for(;t.length!==3;)t.unshift(0);const[s,n,r]=t,o=`${s}-${n}-${r}`;return{r:s,g:n,b:r,code:o}}increaseColor(){if(this._availableColor===256*256*256){console.warn("Color can't be increased over 256 x 256 x 256!");return}this._availableColor++}decreaseColor(){if(this._availableColor===1){console.warn("Color can't be decreased under 0!");return}this._availableColor--}},UR=class extends Vb{constructor(e,t){super(e,t),T(this,"onViewUpdated",new Y),T(this,"colorMeshes",new Map),T(this,"_colorCodeMeshMap",new Map),T(this,"_meshIDColorCodeMap",new Map),T(this,"_currentVisibleMeshes",new Set),T(this,"_recentlyHiddenMeshes",new Set),T(this,"_transparentMat",new jt({transparent:!0,opacity:0})),T(this,"handleWorkerMessage",async s=>{if(this.preventUpdate)return;const n=s.data.colors;this._recentlyHiddenMeshes=new Set(this._currentVisibleMeshes),this._currentVisibleMeshes.clear();for(const[r,o]of n){if(o<this.config.threshold)continue;const a=this._colorCodeMeshMap.get(r);a&&(this._currentVisibleMeshes.add(a),this._recentlyHiddenMeshes.delete(a))}this.onViewUpdated.trigger({seen:this._currentVisibleMeshes,unseen:this._recentlyHiddenMeshes}),this._isWorkerBusy=!1}),this.worker.addEventListener("message",this.handleWorkerMessage),this.onViewUpdated.add(({seen:s,unseen:n})=>{for(const r of s)r.visible=!0;for(const r of n)r.visible=!1})}get threshold(){return this.config.threshold}set threshold(e){this.config.threshold=e}dispose(){super.dispose(),this._currentVisibleMeshes.clear(),this._recentlyHiddenMeshes.clear(),this._meshIDColorCodeMap.clear(),this._transparentMat.dispose(),this._colorCodeMeshMap.clear();const e=this.components.get(Gi);for(const t in this.colorMeshes){const s=this.colorMeshes.get(t);s&&e.destroy(s,!0)}this.colorMeshes.clear()}add(e){if(!this.enabled)return;if(this.preventUpdate){console.log("Culler processing not finished yet.");return}this.preventUpdate=!0;const t=e instanceof oi,{geometry:s,material:n}=e,{colorMaterial:r,code:o}=this.getAvailableMaterial();let a;if(Array.isArray(n)){let u=!0;const c=[];for(const d of n)bg.isTransparent(d)?c.push(this._transparentMat):(u=!1,c.push(r));if(u){r.dispose(),this.preventUpdate=!1;return}a=c}else if(bg.isTransparent(n)){r.dispose(),this.preventUpdate=!1;return}else a=r;this._colorCodeMeshMap.set(o,e),this._meshIDColorCodeMap.set(e.uuid,o);const l=t?e.count:1,h=new oi(s,a,l);t?h.instanceMatrix=e.instanceMatrix:h.setMatrixAt(0,new ce),e.visible=!1,e.updateWorldMatrix(!0,!1),h.applyMatrix4(e.matrixWorld),h.updateMatrix(),this.scene.add(h),this.colorMeshes.set(e.uuid,h),this.increaseColor(),this.preventUpdate=!1}remove(e){if(this.preventUpdate){console.log("Culler processing not finished yet.");return}this.preventUpdate=!0;const t=this.components.get(Gi);this._currentVisibleMeshes.delete(e),this._recentlyHiddenMeshes.delete(e);const s=this.colorMeshes.get(e.uuid),n=this._meshIDColorCodeMap.get(e.uuid);if(!s||!n){this.preventUpdate=!1;return}this._colorCodeMeshMap.delete(n),this._meshIDColorCodeMap.delete(e.uuid),this.colorMeshes.delete(e.uuid),s.geometry=void 0,s.material=[],t.destroy(s,!0),this._recentlyHiddenMeshes.delete(e),this._currentVisibleMeshes.delete(e),this.preventUpdate=!1}updateInstanced(e){for(const t of e){const s=this.colorMeshes.get(t.uuid);s&&(s.count=t.count)}}getAvailableMaterial(){const{r:e,g:t,b:s,code:n}=this.getAvailableColor(),r=ns.enabled;ns.enabled=!1;const o=new He(`rgb(${e}, ${t}, ${s})`);if(!this.world.renderer)throw new Error("Renderer not found in the world!");const a=this.world.renderer.clippingPlanes,l=new jt({color:o,clippingPlanes:a,side:gl});return ns.enabled=r,{colorMaterial:l,code:n}}};const $b=class ef extends be{constructor(e){super(e),T(this,"onDisposed",new Y),T(this,"_enabled",!0),T(this,"list",new Map),e.add(ef.uuid,this)}get enabled(){return this._enabled}set enabled(e){this._enabled=e;for(const[t,s]of this.list)s.enabled=e}create(e){if(this.list.has(e.uuid))return this.list.get(e.uuid);const t=new UR(this.components,e);return this.list.set(e.uuid,t),t}delete(e){const t=this.list.get(e.uuid);t&&t.dispose(),this.list.delete(e.uuid)}dispose(){this.enabled=!1,this.onDisposed.trigger(ef.uuid),this.onDisposed.reset();for(const[e,t]of this.list)t.dispose();this.list.clear()}updateInstanced(e){for(const[,t]of this.list)t.updateInstanced(e)}};T($b,"uuid","69f2a50d-c266-44fc-b1bd-fa4d34be89e6");let kR=$b,BR=class{constructor(e){T(this,"_event"),T(this,"_position",new Ue),T(this,"onDisposed",new Y),T(this,"updateMouseInfo",t=>{this._event=t}),this.dom=e,this.setupEvents(!0)}get position(){if(this._event){const e=this.dom.getBoundingClientRect();this._position.x=this.getPositionX(e,this._event),this._position.y=this.getPositionY(e,this._event)}return this._position}dispose(){this.setupEvents(!1),this.onDisposed.trigger(),this.onDisposed.reset()}getPositionY(e,t){return-((this.getDataObject(t).clientY-e.top)/(e.bottom-e.top))*2+1}getPositionX(e,t){return(this.getDataObject(t).clientX-e.left)/(e.right-e.left)*2-1}getDataObject(e){return e instanceof MouseEvent?e:e.touches[0]}setupEvents(e){e?(this.dom.addEventListener("pointermove",this.updateMouseInfo),this.dom.addEventListener("touchstart",this.updateMouseInfo)):(this.dom.removeEventListener("pointermove",this.updateMouseInfo),this.dom.removeEventListener("touchstart",this.updateMouseInfo))}},zR=class{constructor(e,t){T(this,"enabled",!0),T(this,"components"),T(this,"onDisposed",new Y),T(this,"mouse"),T(this,"three",new $c),T(this,"world");const s=t.renderer;if(!s)throw new Error("A renderer is needed for the raycaster to work!");this.world=t,this.mouse=new BR(s.three.domElement),this.components=e}dispose(){this.mouse.dispose(),this.onDisposed.trigger(),this.onDisposed.reset()}castRay(e=Array.from(this.world.meshes),t=this.mouse.position){if(!this.world)throw new Error("A world is needed to cast rays!");const s=this.world.camera.three;return this.three.setFromCamera(t,s),this.intersect(e)}castRayFromVector(e,t,s=Array.from(this.world.meshes)){return this.three.set(e,t),this.intersect(s)}intersect(e=Array.from(this.world.meshes)){const t=this.three.intersectObjects(e),s=this.filterClippingPlanes(t);return s.length>0?s[0]:null}filterClippingPlanes(e){if(!this.world.renderer)throw new Error("Renderer not found!");const t=this.world.renderer.three;if(!t.clippingPlanes)return e;const s=t.clippingPlanes;return e.length<=0||!s||(s==null?void 0:s.length)<=0?e:e.filter(n=>s.every(r=>r.distanceToPoint(n.point)>0))}};const Hb=class Gb extends be{constructor(e){super(e),T(this,"enabled",!0),T(this,"list",new Map),T(this,"onDisposed",new Y),e.add(Gb.uuid,this)}get(e){if(this.list.has(e.uuid))return this.list.get(e.uuid);const t=new zR(this.components,e);return this.list.set(e.uuid,t),e.onDisposed.add(()=>{this.delete(e)}),t}delete(e){const t=this.list.get(e.uuid);t&&t.dispose(),this.list.delete(e.uuid)}dispose(){for(const[e,t]of this.list)t.dispose();this.list.clear(),this.onDisposed.trigger()}};T(Hb,"uuid","d5d8bdf0-db25-4952-b951-b643af207ace");let ai=Hb,VR=class extends _o{constructor(){super(...arguments),T(this,"_config",{visible:{value:!0,type:"Boolean"},color:{value:new He,type:"Color"},primarySize:{type:"Number",interpolable:!0,value:1,min:0,max:1e3},secondarySize:{type:"Number",interpolable:!0,value:10,min:0,max:1e3},distance:{type:"Number",interpolable:!0,value:500,min:0,max:500}})}get visible(){return this._config.visible.value}set visible(e){this._config.visible.value=e,this._component.visible=e}get color(){return this._config.color.value}set color(e){this._config.color.value=e,this._component.material.uniforms.uColor.value=e,this._component.material.uniformsNeedUpdate=!0}get primarySize(){return this._config.primarySize.value}set primarySize(e){this._config.primarySize.value=e,this._component.material.uniforms.uSize1.value=e,this._component.material.uniformsNeedUpdate=!0}get secondarySize(){return this._config.secondarySize.value}set secondarySize(e){this._config.secondarySize.value=e,this._component.material.uniforms.uSize2.value=e,this._component.material.uniformsNeedUpdate=!0}get distance(){return this._config.distance.value}set distance(e){this._config.distance.value=e,this._component.material.uniforms.uDistance.value=e,this._component.material.uniformsNeedUpdate=!0}},$R=class{constructor(e,t){T(this,"onDisposed",new Y),T(this,"onSetup",new Y),T(this,"isSetup",!1),T(this,"world"),T(this,"components"),T(this,"config"),T(this,"_defaultConfig",{visible:!0,color:new He(12303291),primarySize:1,secondarySize:10,distance:500}),T(this,"three"),T(this,"_fade",3),T(this,"updateZoom",()=>{this.world.camera instanceof Jd&&(this.material.uniforms.uZoom.value=this.world.camera.three.zoom)}),this.world=t;const{color:s,primarySize:n,secondarySize:r,distance:o}=this._defaultConfig;this.components=e,this.config=new VR(this,this.components,"Grid");const a=new Yc(2,2,1,1),l=new yt({side:gl,uniforms:{uSize1:{value:n},uSize2:{value:r},uColor:{value:s},uDistance:{value:o},uFade:{value:this._fade},uZoom:{value:1}},transparent:!0,vertexShader:`
            
            varying vec3 worldPosition;
            
            uniform float uDistance;
            
            void main() {
            
                    vec3 pos = position.xzy * uDistance;
                    pos.xz += cameraPosition.xz;
                    
                    worldPosition = pos;
                    
                    gl_Position = projectionMatrix * modelViewMatrix * vec4(pos, 1.0);
            
            }
            `,fragmentShader:`
            
            varying vec3 worldPosition;
            
            uniform float uZoom;
            uniform float uFade;
            uniform float uSize1;
            uniform float uSize2;
            uniform vec3 uColor;
            uniform float uDistance;
                
                
                
                float getGrid(float size) {
                
                    vec2 r = worldPosition.xz / size;
                    
                    
                    vec2 grid = abs(fract(r - 0.5) - 0.5) / fwidth(r);
                    float line = min(grid.x, grid.y);
                    
                
                    return 1.0 - min(line, 1.0);
                }
                
            void main() {
            
                    
                    float d = 1.0 - min(distance(cameraPosition.xz, worldPosition.xz) / uDistance, 1.0);
                    
                    float g1 = getGrid(uSize1);
                    float g2 = getGrid(uSize2);
                    
                    // Ortho camera fades the grid away when zooming out
                    float minZoom = step(0.2, uZoom);
                    float zoomFactor = pow(min(uZoom, 1.), 2.) * minZoom;
                    
                    gl_FragColor = vec4(uColor.rgb, mix(g2, g1, g1) * pow(d, uFade));
                    gl_FragColor.a = mix(0.5 * gl_FragColor.a, gl_FragColor.a, g2) * zoomFactor;
                    
                    if ( gl_FragColor.a <= 0.0 ) discard;
                    
            
            }
            
            `,extensions:{derivatives:!0}});this.three=new ne(a,l),this.three.frustumCulled=!1,t.scene.three.add(this.three),this.setupEvents(!0)}get visible(){return this.three.visible}set visible(e){e?this.world.scene.three.add(this.three):this.three.removeFromParent()}get material(){return this.three.material}get fade(){return this._fade===3}set fade(e){this._fade=e?3:0,this.material.uniforms.uFade.value=this._fade}setup(e){const t={...this._defaultConfig,...e};this.config.visible=!0,this.config.color=t.color,this.config.primarySize=t.primarySize,this.config.secondarySize=t.secondarySize,this.config.distance=t.distance,this.isSetup=!0,this.onSetup.trigger()}dispose(){this.setupEvents(!1),this.components.get(fu).list.delete(this.config.uuid),this.components.get(Gi).destroy(this.three),this.onDisposed.trigger(),this.onDisposed.reset(),this.world=null,this.components=null}setupEvents(e){if(this.world.isDisposing||!(this.world.camera instanceof Jd))return;const t=this.world.camera.controls;e?t.addEventListener("update",this.updateZoom):t.removeEventListener("update",this.updateZoom)}};const HR=class Yb extends be{constructor(e){super(e),T(this,"list",new Map),T(this,"onDisposed",new Y),T(this,"enabled",!0),e.add(Yb.uuid,this)}create(e){if(this.list.has(e.uuid))throw new Error("This world already has a grid!");const t=new $R(this.components,e);return this.list.set(e.uuid,t),e.onDisposed.add(()=>{this.delete(e)}),t}delete(e){const t=this.list.get(e.uuid);t&&t.dispose(),this.list.delete(e.uuid)}dispose(){for(const[e,t]of this.list)t.dispose();this.list.clear(),this.onDisposed.trigger(),this.onDisposed.reset()}};T(HR,"uuid","d1e814d5-b81c-4452-87a2-f039375e0489");const gn=new $c,bt=new P,Rs=new P,je=new Jt,Ag={X:new P(1,0,0),Y:new P(0,1,0),Z:new P(0,0,1)},od={type:"change"},Mg={type:"mouseDown"},Fg={type:"mouseUp",mode:null},Og={type:"objectChange"};let GR=class extends kn{constructor(e,t){super(),t===void 0&&(console.warn('THREE.TransformControls: The second parameter "domElement" is now mandatory.'),t=document),this.isTransformControls=!0,this.visible=!1,this.domElement=t,this.domElement.style.touchAction="none";const s=new ZR;this._gizmo=s,this.add(s);const n=new QR;this._plane=n,this.add(n);const r=this;function o(I,v){let b=v;Object.defineProperty(r,I,{get:function(){return b!==void 0?b:v},set:function(C){b!==C&&(b=C,n[I]=C,s[I]=C,r.dispatchEvent({type:I+"-changed",value:C}),r.dispatchEvent(od))}}),r[I]=v,n[I]=v,s[I]=v}o("camera",e),o("object",void 0),o("enabled",!0),o("axis",null),o("mode","translate"),o("translationSnap",null),o("rotationSnap",null),o("scaleSnap",null),o("space","world"),o("size",1),o("dragging",!1),o("showX",!0),o("showY",!0),o("showZ",!0);const a=new P,l=new P,h=new Jt,u=new Jt,c=new P,d=new Jt,f=new P,p=new P,m=new P,g=0,E=new P;o("worldPosition",a),o("worldPositionStart",l),o("worldQuaternion",h),o("worldQuaternionStart",u),o("cameraPosition",c),o("cameraQuaternion",d),o("pointStart",f),o("pointEnd",p),o("rotationAxis",m),o("rotationAngle",g),o("eye",E),this._offset=new P,this._startNorm=new P,this._endNorm=new P,this._cameraScale=new P,this._parentPosition=new P,this._parentQuaternion=new Jt,this._parentQuaternionInv=new Jt,this._parentScale=new P,this._worldScaleStart=new P,this._worldQuaternionInv=new Jt,this._worldScale=new P,this._positionStart=new P,this._quaternionStart=new Jt,this._scaleStart=new P,this._getPointer=YR.bind(this),this._onPointerDown=WR.bind(this),this._onPointerHover=jR.bind(this),this._onPointerMove=XR.bind(this),this._onPointerUp=qR.bind(this),this.domElement.addEventListener("pointerdown",this._onPointerDown),this.domElement.addEventListener("pointermove",this._onPointerHover),this.domElement.addEventListener("pointerup",this._onPointerUp)}updateMatrixWorld(){this.object!==void 0&&(this.object.updateMatrixWorld(),this.object.parent===null?console.error("TransformControls: The attached 3D object must be a part of the scene graph."):this.object.parent.matrixWorld.decompose(this._parentPosition,this._parentQuaternion,this._parentScale),this.object.matrixWorld.decompose(this.worldPosition,this.worldQuaternion,this._worldScale),this._parentQuaternionInv.copy(this._parentQuaternion).invert(),this._worldQuaternionInv.copy(this.worldQuaternion).invert()),this.camera.updateMatrixWorld(),this.camera.matrixWorld.decompose(this.cameraPosition,this.cameraQuaternion,this._cameraScale),this.camera.isOrthographicCamera?this.camera.getWorldDirection(this.eye).negate():this.eye.copy(this.cameraPosition).sub(this.worldPosition).normalize(),super.updateMatrixWorld(this)}pointerHover(e){if(this.object===void 0||this.dragging===!0)return;gn.setFromCamera(e,this.camera);const t=ad(this._gizmo.picker[this.mode],gn);t?this.axis=t.object.name:this.axis=null}pointerDown(e){if(!(this.object===void 0||this.dragging===!0||e.button!==0)&&this.axis!==null){gn.setFromCamera(e,this.camera);const t=ad(this._plane,gn,!0);t&&(this.object.updateMatrixWorld(),this.object.parent.updateMatrixWorld(),this._positionStart.copy(this.object.position),this._quaternionStart.copy(this.object.quaternion),this._scaleStart.copy(this.object.scale),this.object.matrixWorld.decompose(this.worldPositionStart,this.worldQuaternionStart,this._worldScaleStart),this.pointStart.copy(t.point).sub(this.worldPositionStart)),this.dragging=!0,Mg.mode=this.mode,this.dispatchEvent(Mg)}}pointerMove(e){const t=this.axis,s=this.mode,n=this.object;let r=this.space;if(s==="scale"?r="local":(t==="E"||t==="XYZE"||t==="XYZ")&&(r="world"),n===void 0||t===null||this.dragging===!1||e.button!==-1)return;gn.setFromCamera(e,this.camera);const o=ad(this._plane,gn,!0);if(o){if(this.pointEnd.copy(o.point).sub(this.worldPositionStart),s==="translate")this._offset.copy(this.pointEnd).sub(this.pointStart),r==="local"&&t!=="XYZ"&&this._offset.applyQuaternion(this._worldQuaternionInv),t.indexOf("X")===-1&&(this._offset.x=0),t.indexOf("Y")===-1&&(this._offset.y=0),t.indexOf("Z")===-1&&(this._offset.z=0),r==="local"&&t!=="XYZ"?this._offset.applyQuaternion(this._quaternionStart).divide(this._parentScale):this._offset.applyQuaternion(this._parentQuaternionInv).divide(this._parentScale),n.position.copy(this._offset).add(this._positionStart),this.translationSnap&&(r==="local"&&(n.position.applyQuaternion(je.copy(this._quaternionStart).invert()),t.search("X")!==-1&&(n.position.x=Math.round(n.position.x/this.translationSnap)*this.translationSnap),t.search("Y")!==-1&&(n.position.y=Math.round(n.position.y/this.translationSnap)*this.translationSnap),t.search("Z")!==-1&&(n.position.z=Math.round(n.position.z/this.translationSnap)*this.translationSnap),n.position.applyQuaternion(this._quaternionStart)),r==="world"&&(n.parent&&n.position.add(bt.setFromMatrixPosition(n.parent.matrixWorld)),t.search("X")!==-1&&(n.position.x=Math.round(n.position.x/this.translationSnap)*this.translationSnap),t.search("Y")!==-1&&(n.position.y=Math.round(n.position.y/this.translationSnap)*this.translationSnap),t.search("Z")!==-1&&(n.position.z=Math.round(n.position.z/this.translationSnap)*this.translationSnap),n.parent&&n.position.sub(bt.setFromMatrixPosition(n.parent.matrixWorld))));else if(s==="scale"){if(t.search("XYZ")!==-1){let a=this.pointEnd.length()/this.pointStart.length();this.pointEnd.dot(this.pointStart)<0&&(a*=-1),Rs.set(a,a,a)}else bt.copy(this.pointStart),Rs.copy(this.pointEnd),bt.applyQuaternion(this._worldQuaternionInv),Rs.applyQuaternion(this._worldQuaternionInv),Rs.divide(bt),t.search("X")===-1&&(Rs.x=1),t.search("Y")===-1&&(Rs.y=1),t.search("Z")===-1&&(Rs.z=1);n.scale.copy(this._scaleStart).multiply(Rs),this.scaleSnap&&(t.search("X")!==-1&&(n.scale.x=Math.round(n.scale.x/this.scaleSnap)*this.scaleSnap||this.scaleSnap),t.search("Y")!==-1&&(n.scale.y=Math.round(n.scale.y/this.scaleSnap)*this.scaleSnap||this.scaleSnap),t.search("Z")!==-1&&(n.scale.z=Math.round(n.scale.z/this.scaleSnap)*this.scaleSnap||this.scaleSnap))}else if(s==="rotate"){this._offset.copy(this.pointEnd).sub(this.pointStart);const a=20/this.worldPosition.distanceTo(bt.setFromMatrixPosition(this.camera.matrixWorld));let l=!1;t==="XYZE"?(this.rotationAxis.copy(this._offset).cross(this.eye).normalize(),this.rotationAngle=this._offset.dot(bt.copy(this.rotationAxis).cross(this.eye))*a):(t==="X"||t==="Y"||t==="Z")&&(this.rotationAxis.copy(Ag[t]),bt.copy(Ag[t]),r==="local"&&bt.applyQuaternion(this.worldQuaternion),bt.cross(this.eye),bt.length()===0?l=!0:this.rotationAngle=this._offset.dot(bt.normalize())*a),(t==="E"||l)&&(this.rotationAxis.copy(this.eye),this.rotationAngle=this.pointEnd.angleTo(this.pointStart),this._startNorm.copy(this.pointStart).normalize(),this._endNorm.copy(this.pointEnd).normalize(),this.rotationAngle*=this._endNorm.cross(this._startNorm).dot(this.eye)<0?1:-1),this.rotationSnap&&(this.rotationAngle=Math.round(this.rotationAngle/this.rotationSnap)*this.rotationSnap),r==="local"&&t!=="E"&&t!=="XYZE"?(n.quaternion.copy(this._quaternionStart),n.quaternion.multiply(je.setFromAxisAngle(this.rotationAxis,this.rotationAngle)).normalize()):(this.rotationAxis.applyQuaternion(this._parentQuaternionInv),n.quaternion.copy(je.setFromAxisAngle(this.rotationAxis,this.rotationAngle)),n.quaternion.multiply(this._quaternionStart).normalize())}this.dispatchEvent(od),this.dispatchEvent(Og)}}pointerUp(e){e.button===0&&(this.dragging&&this.axis!==null&&(Fg.mode=this.mode,this.dispatchEvent(Fg)),this.dragging=!1,this.axis=null)}dispose(){this.domElement.removeEventListener("pointerdown",this._onPointerDown),this.domElement.removeEventListener("pointermove",this._onPointerHover),this.domElement.removeEventListener("pointermove",this._onPointerMove),this.domElement.removeEventListener("pointerup",this._onPointerUp),this.traverse(function(e){e.geometry&&e.geometry.dispose(),e.material&&e.material.dispose()})}attach(e){return this.object=e,this.visible=!0,this}detach(){return this.object=void 0,this.visible=!1,this.axis=null,this}reset(){this.enabled&&this.dragging&&(this.object.position.copy(this._positionStart),this.object.quaternion.copy(this._quaternionStart),this.object.scale.copy(this._scaleStart),this.dispatchEvent(od),this.dispatchEvent(Og),this.pointStart.copy(this.pointEnd))}getRaycaster(){return gn}getMode(){return this.mode}setMode(e){this.mode=e}setTranslationSnap(e){this.translationSnap=e}setRotationSnap(e){this.rotationSnap=e}setScaleSnap(e){this.scaleSnap=e}setSize(e){this.size=e}setSpace(e){this.space=e}};function YR(i){if(this.domElement.ownerDocument.pointerLockElement)return{x:0,y:0,button:i.button};{const e=this.domElement.getBoundingClientRect();return{x:(i.clientX-e.left)/e.width*2-1,y:-(i.clientY-e.top)/e.height*2+1,button:i.button}}}function jR(i){if(this.enabled)switch(i.pointerType){case"mouse":case"pen":this.pointerHover(this._getPointer(i));break}}function WR(i){this.enabled&&(document.pointerLockElement||this.domElement.setPointerCapture(i.pointerId),this.domElement.addEventListener("pointermove",this._onPointerMove),this.pointerHover(this._getPointer(i)),this.pointerDown(this._getPointer(i)))}function XR(i){this.enabled&&this.pointerMove(this._getPointer(i))}function qR(i){this.enabled&&(this.domElement.releasePointerCapture(i.pointerId),this.domElement.removeEventListener("pointermove",this._onPointerMove),this.pointerUp(this._getPointer(i)))}function ad(i,e,t){const s=e.intersectObject(i,!0);for(let n=0;n<s.length;n++)if(s[n].object.visible||t)return s[n];return!1}const Th=new FE,ze=new P(0,1,0),Ng=new P(0,0,0),Pg=new ce,wh=new Jt,jh=new Jt,Mi=new P,Lg=new ce,ma=new P(1,0,0),Cn=new P(0,1,0),ga=new P(0,0,1),Sh=new P,ra=new P,oa=new P;class ZR extends kn{constructor(){super(),this.isTransformControlsGizmo=!0,this.type="TransformControlsGizmo";const e=new jt({depthTest:!1,depthWrite:!1,fog:!1,toneMapped:!1,transparent:!0}),t=new Is({depthTest:!1,depthWrite:!1,fog:!1,toneMapped:!1,transparent:!0}),s=e.clone();s.opacity=.15;const n=t.clone();n.opacity=.5;const r=e.clone();r.color.setHex(16711680);const o=e.clone();o.color.setHex(65280);const a=e.clone();a.color.setHex(255);const l=e.clone();l.color.setHex(16711680),l.opacity=.5;const h=e.clone();h.color.setHex(65280),h.opacity=.5;const u=e.clone();u.color.setHex(255),u.opacity=.5;const c=e.clone();c.opacity=.25;const d=e.clone();d.color.setHex(16776960),d.opacity=.25,e.clone().color.setHex(16776960);const f=e.clone();f.color.setHex(7895160);const p=new Tt(0,.04,.1,12);p.translate(0,.05,0);const m=new ct(.08,.08,.08);m.translate(0,.04,0);const g=new Ne;g.setAttribute("position",new Hr([0,0,0,1,0,0],3));const E=new Tt(.0075,.0075,.5,3);E.translate(0,.25,0);function I(y,U){const B=new Ho(y,.0075,3,64,U*Math.PI*2);return B.rotateY(Math.PI/2),B.rotateX(Math.PI/2),B}function v(){const y=new Ne;return y.setAttribute("position",new Hr([0,0,0,1,1,1],3)),y}const b={X:[[new ne(p,r),[.5,0,0],[0,0,-Math.PI/2]],[new ne(p,r),[-.5,0,0],[0,0,Math.PI/2]],[new ne(E,r),[0,0,0],[0,0,-Math.PI/2]]],Y:[[new ne(p,o),[0,.5,0]],[new ne(p,o),[0,-.5,0],[Math.PI,0,0]],[new ne(E,o)]],Z:[[new ne(p,a),[0,0,.5],[Math.PI/2,0,0]],[new ne(p,a),[0,0,-.5],[-Math.PI/2,0,0]],[new ne(E,a),null,[Math.PI/2,0,0]]],XYZ:[[new ne(new Ql(.1,0),c.clone()),[0,0,0]]],XY:[[new ne(new ct(.15,.15,.01),u.clone()),[.15,.15,0]]],YZ:[[new ne(new ct(.15,.15,.01),l.clone()),[0,.15,.15],[0,Math.PI/2,0]]],XZ:[[new ne(new ct(.15,.15,.01),h.clone()),[.15,0,.15],[-Math.PI/2,0,0]]]},C={X:[[new ne(new Tt(.2,0,.6,4),s),[.3,0,0],[0,0,-Math.PI/2]],[new ne(new Tt(.2,0,.6,4),s),[-.3,0,0],[0,0,Math.PI/2]]],Y:[[new ne(new Tt(.2,0,.6,4),s),[0,.3,0]],[new ne(new Tt(.2,0,.6,4),s),[0,-.3,0],[0,0,Math.PI]]],Z:[[new ne(new Tt(.2,0,.6,4),s),[0,0,.3],[Math.PI/2,0,0]],[new ne(new Tt(.2,0,.6,4),s),[0,0,-.3],[-Math.PI/2,0,0]]],XYZ:[[new ne(new Ql(.2,0),s)]],XY:[[new ne(new ct(.2,.2,.01),s),[.15,.15,0]]],YZ:[[new ne(new ct(.2,.2,.01),s),[0,.15,.15],[0,Math.PI/2,0]]],XZ:[[new ne(new ct(.2,.2,.01),s),[.15,0,.15],[-Math.PI/2,0,0]]]},S={START:[[new ne(new Ql(.01,2),n),null,null,null,"helper"]],END:[[new ne(new Ql(.01,2),n),null,null,null,"helper"]],DELTA:[[new tt(v(),n),null,null,null,"helper"]],X:[[new tt(g,n.clone()),[-1e3,0,0],null,[1e6,1,1],"helper"]],Y:[[new tt(g,n.clone()),[0,-1e3,0],[0,0,Math.PI/2],[1e6,1,1],"helper"]],Z:[[new tt(g,n.clone()),[0,0,-1e3],[0,-Math.PI/2,0],[1e6,1,1],"helper"]]},_={XYZE:[[new ne(I(.5,1),f),null,[0,Math.PI/2,0]]],X:[[new ne(I(.5,.5),r)]],Y:[[new ne(I(.5,.5),o),null,[0,0,-Math.PI/2]]],Z:[[new ne(I(.5,.5),a),null,[0,Math.PI/2,0]]],E:[[new ne(I(.75,1),d),null,[0,Math.PI/2,0]]]},M={AXIS:[[new tt(g,n.clone()),[-1e3,0,0],null,[1e6,1,1],"helper"]]},A={XYZE:[[new ne(new sT(.25,10,8),s)]],X:[[new ne(new Ho(.5,.1,4,24),s),[0,0,0],[0,-Math.PI/2,-Math.PI/2]]],Y:[[new ne(new Ho(.5,.1,4,24),s),[0,0,0],[Math.PI/2,0,0]]],Z:[[new ne(new Ho(.5,.1,4,24),s),[0,0,0],[0,0,-Math.PI/2]]],E:[[new ne(new Ho(.75,.1,2,24),s)]]},F={X:[[new ne(m,r),[.5,0,0],[0,0,-Math.PI/2]],[new ne(E,r),[0,0,0],[0,0,-Math.PI/2]],[new ne(m,r),[-.5,0,0],[0,0,Math.PI/2]]],Y:[[new ne(m,o),[0,.5,0]],[new ne(E,o)],[new ne(m,o),[0,-.5,0],[0,0,Math.PI]]],Z:[[new ne(m,a),[0,0,.5],[Math.PI/2,0,0]],[new ne(E,a),[0,0,0],[Math.PI/2,0,0]],[new ne(m,a),[0,0,-.5],[-Math.PI/2,0,0]]],XY:[[new ne(new ct(.15,.15,.01),u),[.15,.15,0]]],YZ:[[new ne(new ct(.15,.15,.01),l),[0,.15,.15],[0,Math.PI/2,0]]],XZ:[[new ne(new ct(.15,.15,.01),h),[.15,0,.15],[-Math.PI/2,0,0]]],XYZ:[[new ne(new ct(.1,.1,.1),c.clone())]]},D={X:[[new ne(new Tt(.2,0,.6,4),s),[.3,0,0],[0,0,-Math.PI/2]],[new ne(new Tt(.2,0,.6,4),s),[-.3,0,0],[0,0,Math.PI/2]]],Y:[[new ne(new Tt(.2,0,.6,4),s),[0,.3,0]],[new ne(new Tt(.2,0,.6,4),s),[0,-.3,0],[0,0,Math.PI]]],Z:[[new ne(new Tt(.2,0,.6,4),s),[0,0,.3],[Math.PI/2,0,0]],[new ne(new Tt(.2,0,.6,4),s),[0,0,-.3],[-Math.PI/2,0,0]]],XY:[[new ne(new ct(.2,.2,.01),s),[.15,.15,0]]],YZ:[[new ne(new ct(.2,.2,.01),s),[0,.15,.15],[0,Math.PI/2,0]]],XZ:[[new ne(new ct(.2,.2,.01),s),[.15,0,.15],[-Math.PI/2,0,0]]],XYZ:[[new ne(new ct(.2,.2,.2),s),[0,0,0]]]},x={X:[[new tt(g,n.clone()),[-1e3,0,0],null,[1e6,1,1],"helper"]],Y:[[new tt(g,n.clone()),[0,-1e3,0],[0,0,Math.PI/2],[1e6,1,1],"helper"]],Z:[[new tt(g,n.clone()),[0,0,-1e3],[0,-Math.PI/2,0],[1e6,1,1],"helper"]]};function N(y){const U=new kn;for(const B in y)for(let k=y[B].length;k--;){const W=y[B][k][0].clone(),z=y[B][k][1],he=y[B][k][2],G=y[B][k][3],H=y[B][k][4];W.name=B,W.tag=H,z&&W.position.set(z[0],z[1],z[2]),he&&W.rotation.set(he[0],he[1],he[2]),G&&W.scale.set(G[0],G[1],G[2]),W.updateMatrix();const pe=W.geometry.clone();pe.applyMatrix4(W.matrix),W.geometry=pe,W.renderOrder=1/0,W.position.set(0,0,0),W.rotation.set(0,0,0),W.scale.set(1,1,1),U.add(W)}return U}this.gizmo={},this.picker={},this.helper={},this.add(this.gizmo.translate=N(b)),this.add(this.gizmo.rotate=N(_)),this.add(this.gizmo.scale=N(F)),this.add(this.picker.translate=N(C)),this.add(this.picker.rotate=N(A)),this.add(this.picker.scale=N(D)),this.add(this.helper.translate=N(S)),this.add(this.helper.rotate=N(M)),this.add(this.helper.scale=N(x)),this.picker.translate.visible=!1,this.picker.rotate.visible=!1,this.picker.scale.visible=!1}updateMatrixWorld(e){const t=(this.mode==="scale"?"local":this.space)==="local"?this.worldQuaternion:jh;this.gizmo.translate.visible=this.mode==="translate",this.gizmo.rotate.visible=this.mode==="rotate",this.gizmo.scale.visible=this.mode==="scale",this.helper.translate.visible=this.mode==="translate",this.helper.rotate.visible=this.mode==="rotate",this.helper.scale.visible=this.mode==="scale";let s=[];s=s.concat(this.picker[this.mode].children),s=s.concat(this.gizmo[this.mode].children),s=s.concat(this.helper[this.mode].children);for(let n=0;n<s.length;n++){const r=s[n];r.visible=!0,r.rotation.set(0,0,0),r.position.copy(this.worldPosition);let o;if(this.camera.isOrthographicCamera?o=(this.camera.top-this.camera.bottom)/this.camera.zoom:o=this.worldPosition.distanceTo(this.cameraPosition)*Math.min(1.9*Math.tan(Math.PI*this.camera.fov/360)/this.camera.zoom,7),r.scale.set(1,1,1).multiplyScalar(o*this.size/4),r.tag==="helper"){r.visible=!1,r.name==="AXIS"?(r.visible=!!this.axis,this.axis==="X"&&(je.setFromEuler(Th.set(0,0,0)),r.quaternion.copy(t).multiply(je),Math.abs(ze.copy(ma).applyQuaternion(t).dot(this.eye))>.9&&(r.visible=!1)),this.axis==="Y"&&(je.setFromEuler(Th.set(0,0,Math.PI/2)),r.quaternion.copy(t).multiply(je),Math.abs(ze.copy(Cn).applyQuaternion(t).dot(this.eye))>.9&&(r.visible=!1)),this.axis==="Z"&&(je.setFromEuler(Th.set(0,Math.PI/2,0)),r.quaternion.copy(t).multiply(je),Math.abs(ze.copy(ga).applyQuaternion(t).dot(this.eye))>.9&&(r.visible=!1)),this.axis==="XYZE"&&(je.setFromEuler(Th.set(0,Math.PI/2,0)),ze.copy(this.rotationAxis),r.quaternion.setFromRotationMatrix(Pg.lookAt(Ng,ze,Cn)),r.quaternion.multiply(je),r.visible=this.dragging),this.axis==="E"&&(r.visible=!1)):r.name==="START"?(r.position.copy(this.worldPositionStart),r.visible=this.dragging):r.name==="END"?(r.position.copy(this.worldPosition),r.visible=this.dragging):r.name==="DELTA"?(r.position.copy(this.worldPositionStart),r.quaternion.copy(this.worldQuaternionStart),bt.set(1e-10,1e-10,1e-10).add(this.worldPositionStart).sub(this.worldPosition).multiplyScalar(-1),bt.applyQuaternion(this.worldQuaternionStart.clone().invert()),r.scale.copy(bt),r.visible=this.dragging):(r.quaternion.copy(t),this.dragging?r.position.copy(this.worldPositionStart):r.position.copy(this.worldPosition),this.axis&&(r.visible=this.axis.search(r.name)!==-1));continue}r.quaternion.copy(t),this.mode==="translate"||this.mode==="scale"?(r.name==="X"&&Math.abs(ze.copy(ma).applyQuaternion(t).dot(this.eye))>.99&&(r.scale.set(1e-10,1e-10,1e-10),r.visible=!1),r.name==="Y"&&Math.abs(ze.copy(Cn).applyQuaternion(t).dot(this.eye))>.99&&(r.scale.set(1e-10,1e-10,1e-10),r.visible=!1),r.name==="Z"&&Math.abs(ze.copy(ga).applyQuaternion(t).dot(this.eye))>.99&&(r.scale.set(1e-10,1e-10,1e-10),r.visible=!1),r.name==="XY"&&Math.abs(ze.copy(ga).applyQuaternion(t).dot(this.eye))<.2&&(r.scale.set(1e-10,1e-10,1e-10),r.visible=!1),r.name==="YZ"&&Math.abs(ze.copy(ma).applyQuaternion(t).dot(this.eye))<.2&&(r.scale.set(1e-10,1e-10,1e-10),r.visible=!1),r.name==="XZ"&&Math.abs(ze.copy(Cn).applyQuaternion(t).dot(this.eye))<.2&&(r.scale.set(1e-10,1e-10,1e-10),r.visible=!1)):this.mode==="rotate"&&(wh.copy(t),ze.copy(this.eye).applyQuaternion(je.copy(t).invert()),r.name.search("E")!==-1&&r.quaternion.setFromRotationMatrix(Pg.lookAt(this.eye,Ng,Cn)),r.name==="X"&&(je.setFromAxisAngle(ma,Math.atan2(-ze.y,ze.z)),je.multiplyQuaternions(wh,je),r.quaternion.copy(je)),r.name==="Y"&&(je.setFromAxisAngle(Cn,Math.atan2(ze.x,ze.z)),je.multiplyQuaternions(wh,je),r.quaternion.copy(je)),r.name==="Z"&&(je.setFromAxisAngle(ga,Math.atan2(ze.y,ze.x)),je.multiplyQuaternions(wh,je),r.quaternion.copy(je))),r.visible=r.visible&&(r.name.indexOf("X")===-1||this.showX),r.visible=r.visible&&(r.name.indexOf("Y")===-1||this.showY),r.visible=r.visible&&(r.name.indexOf("Z")===-1||this.showZ),r.visible=r.visible&&(r.name.indexOf("E")===-1||this.showX&&this.showY&&this.showZ),r.material._color=r.material._color||r.material.color.clone(),r.material._opacity=r.material._opacity||r.material.opacity,r.material.color.copy(r.material._color),r.material.opacity=r.material._opacity,this.enabled&&this.axis&&(r.name===this.axis||this.axis.split("").some(function(a){return r.name===a}))&&(r.material.color.setHex(16776960),r.material.opacity=1)}super.updateMatrixWorld(e)}}class QR extends ne{constructor(){super(new Yc(1e5,1e5,2,2),new jt({visible:!1,wireframe:!0,side:gl,transparent:!0,opacity:.1,toneMapped:!1})),this.isTransformControlsPlane=!0,this.type="TransformControlsPlane"}updateMatrixWorld(e){let t=this.space;switch(this.position.copy(this.worldPosition),this.mode==="scale"&&(t="local"),Sh.copy(ma).applyQuaternion(t==="local"?this.worldQuaternion:jh),ra.copy(Cn).applyQuaternion(t==="local"?this.worldQuaternion:jh),oa.copy(ga).applyQuaternion(t==="local"?this.worldQuaternion:jh),ze.copy(ra),this.mode){case"translate":case"scale":switch(this.axis){case"X":ze.copy(this.eye).cross(Sh),Mi.copy(Sh).cross(ze);break;case"Y":ze.copy(this.eye).cross(ra),Mi.copy(ra).cross(ze);break;case"Z":ze.copy(this.eye).cross(oa),Mi.copy(oa).cross(ze);break;case"XY":Mi.copy(oa);break;case"YZ":Mi.copy(Sh);break;case"XZ":ze.copy(oa),Mi.copy(ra);break;case"XYZ":case"E":Mi.set(0,0,0);break}break;case"rotate":default:Mi.set(0,0,0)}Mi.length()===0?this.quaternion.copy(this.cameraQuaternion):(Lg.lookAt(bt.set(0,0,0),Mi,ze),this.quaternion.setFromRotationMatrix(Lg)),super.updateMatrixWorld(e)}}let jb=class Wb{constructor(e,t,s,n,r,o=5,a=!0){if(T(this,"onDraggingStarted",new Y),T(this,"onDraggingEnded",new Y),T(this,"onDisposed",new Y),T(this,"normal"),T(this,"origin"),T(this,"three",new Es),T(this,"components"),T(this,"world"),T(this,"type","default"),T(this,"_helper"),T(this,"_visible",!0),T(this,"_enabled",!0),T(this,"_controlsActive",!1),T(this,"_arrowBoundBox",new ne),T(this,"_planeMesh"),T(this,"_controls"),T(this,"_hiddenMaterial",new jt({visible:!1})),T(this,"update",()=>{this._enabled&&this.three.setFromNormalAndCoplanarPoint(this.normal,this._helper.position)}),T(this,"changeDrag",l=>{this._visible=!l.value,this.preventCameraMovement(),this.notifyDraggingChanged(l)}),this.components=e,this.world=t,!t.renderer)throw new Error("The given world must have a renderer!");this.normal=n,this.origin=s,t.renderer.setPlane(!0,this.three),this._planeMesh=Wb.newPlaneMesh(o,r),this._helper=this.newHelper(),this._controls=this.newTransformControls(),this.three.setFromNormalAndCoplanarPoint(n,s),a&&this.toggleControls(!0)}get enabled(){return this._enabled}set enabled(e){if(!this.world.isDisposing){if(!this.world.renderer)throw new Error("No renderer found for clipping plane!");this._enabled=e,this.world.renderer.setPlane(e,this.three)}}get visible(){return this._visible}set visible(e){this._visible=e,this._controls.visible=e,this._helper.visible=e,this.toggleControls(e)}get meshes(){return[this._planeMesh,this._arrowBoundBox]}get planeMaterial(){return this._planeMesh.material}set planeMaterial(e){this._planeMesh.material=e}get size(){return this._planeMesh.scale.x}set size(e){this._planeMesh.scale.set(e,e,e)}get helper(){return this._helper}setFromNormalAndCoplanarPoint(e,t){this.reset(),this.normal.equals(e)||(this.normal.copy(e),this._helper.lookAt(e)),this.origin.copy(t),this._helper.position.copy(t),this._helper.updateMatrix(),this.update()}dispose(){this._enabled=!1,this.onDraggingStarted.reset(),this.onDraggingEnded.reset(),this._helper.removeFromParent(),this.world.renderer&&this.world.renderer.setPlane(!1,this.three),this._arrowBoundBox.removeFromParent(),this._arrowBoundBox.geometry.dispose(),this._planeMesh.geometry.dispose(),this._controls.removeFromParent(),this._controls.dispose(),this.onDisposed.trigger(),this.onDisposed.reset()}reset(){const e=new P(1,0,0),t=new P;this.normal.equals(e)||(this.normal.copy(e),this._helper.lookAt(e)),this.origin.copy(t),this._helper.position.copy(t),this._helper.updateMatrix()}toggleControls(e){if(e){if(this._controlsActive)return;this._controls.addEventListener("change",this.update),this._controls.addEventListener("dragging-changed",this.changeDrag)}else this._controls.removeEventListener("change",this.update),this._controls.removeEventListener("dragging-changed",this.changeDrag);this._controlsActive=e}newTransformControls(){if(!this.world.renderer)throw new Error("No renderer found for clipping plane!");const e=this.world.camera.three,t=this.world.renderer.three.domElement,s=new GR(e,t);return this.initializeControls(s),this.world.scene.three.add(s),s}initializeControls(e){e.attach(this._helper),e.showX=!1,e.showY=!1,e.setSpace("local"),this.createArrowBoundingBox(),e.children[0].children[0].add(this._arrowBoundBox)}createArrowBoundingBox(){this._arrowBoundBox.geometry=new Tt(.18,.18,1.2),this._arrowBoundBox.material=this._hiddenMaterial,this._arrowBoundBox.rotateX(Math.PI/2),this._arrowBoundBox.updateMatrix(),this._arrowBoundBox.geometry.applyMatrix4(this._arrowBoundBox.matrix)}notifyDraggingChanged(e){e.value?this.onDraggingStarted.trigger():this.onDraggingEnded.trigger()}preventCameraMovement(){this.world.camera.enabled=this._visible}newHelper(){const e=new kn;return e.lookAt(this.normal),e.position.copy(this.origin),this._planeMesh.position.z+=.01,e.add(this._planeMesh),this.world.scene.three.add(e),e}static newPlaneMesh(e,t){const s=new Yc(1),n=new ne(s,t);return n.scale.set(e,e,e),n}};class KR extends _o{constructor(){super(...arguments),T(this,"_config",{enabled:{value:!0,type:"Boolean"},visible:{value:!0,type:"Boolean"},color:{value:new He,type:"Color"},opacity:{type:"Number",interpolable:!0,value:1,min:0,max:1},size:{type:"Number",interpolable:!0,value:2,min:0,max:100}})}get enabled(){return this._config.enabled.value}set enabled(e){this._config.enabled.value=e,this._component.enabled=e}get visible(){return this._config.visible.value}set visible(e){this._config.visible.value=e,this._component.visible=e}get color(){return this._config.color.value}set color(e){this._config.color.value=e,this._component.material.color.copy(e)}get opacity(){return this._config.opacity.value}set opacity(e){this._config.opacity.value=e,this._component.material.opacity=e}get size(){return this._config.size.value}set size(e){this._config.size.value=e,this._component.size=e}}const Xb=class Wh extends be{constructor(e){super(e),T(this,"onSetup",new Y),T(this,"onBeforeDrag",new Y),T(this,"onAfterDrag",new Y),T(this,"onBeforeCreate",new Y),T(this,"onBeforeCancel",new Y),T(this,"onAfterCancel",new Y),T(this,"onBeforeDelete",new Y),T(this,"onAfterCreate",new Y),T(this,"onAfterDelete",new Y),T(this,"onDisposed",new Y),T(this,"isSetup",!1),T(this,"orthogonalY",!1),T(this,"toleranceOrthogonalY",.7),T(this,"Type",jb),T(this,"list",[]),T(this,"config",new KR(this,this.components,"Clipper",Wh.uuid)),T(this,"_defaultConfig",{color:new He(12255487),opacity:.2,size:2}),T(this,"_material",new jt({color:12255487,side:gl,transparent:!0,opacity:.2})),T(this,"_size",5),T(this,"_enabled",!1),T(this,"_visible",!0),T(this,"_onStartDragging",()=>{this.onBeforeDrag.trigger()}),T(this,"_onEndDragging",()=>{this.onAfterDrag.trigger()}),this.components.add(Wh.uuid,this)}get enabled(){return this._enabled}set enabled(e){this._enabled=e;for(const t of this.list)t.enabled=e;this.updateMaterialsAndPlanes()}get visible(){return this._visible}set visible(e){this._visible=e;for(const t of this.list)t.visible=e}get material(){return this._material}set material(e){this._material=e;for(const t of this.list)t.planeMaterial=e}get size(){return this._size}set size(e){this._size=e;for(const t of this.list)t.size=e}dispose(){this._enabled=!1,this.components.get(fu).list.delete(this.config.uuid);for(const e of this.list)e.dispose();this.list.length=0,this._material.dispose(),this.onBeforeCreate.reset(),this.onBeforeCancel.reset(),this.onBeforeDelete.reset(),this.onBeforeDrag.reset(),this.onAfterCreate.reset(),this.onAfterCancel.reset(),this.onAfterDelete.reset(),this.onAfterDrag.reset(),this.onDisposed.trigger(Wh.uuid),this.onDisposed.reset()}create(e){const t=this.components.get(ai).get(e).castRay();return t?this.createPlaneFromIntersection(e,t):null}createFromNormalAndCoplanarPoint(e,t,s){const n=this.newPlane(e,s,t);return this.updateMaterialsAndPlanes(),n}delete(e,t){t||(t=this.pickPlane(e)),t&&this.deletePlane(t)}deleteAll(e){const t=[...this.list];for(const s of t)if(!e||e.has(s.type)){this.delete(s.world,s);const n=this.list.indexOf(s);n!==-1&&this.list.splice(n,1)}}setup(e){const t={...this._defaultConfig,...e};this.config.color=t.color,this.config.opacity=t.opacity,this.config.size=t.size,this.isSetup=!0,this.onSetup.trigger()}deletePlane(e){const t=this.list.indexOf(e);if(t!==-1){if(this.list.splice(t,1),!e.world.renderer)throw new Error("Renderer not found for this plane's world!");e.world.renderer.setPlane(!1,e.three),e.dispose(),this.updateMaterialsAndPlanes(),this.onAfterDelete.trigger(e)}}pickPlane(e){const t=this.components.get(ai).get(e),s=this.getAllPlaneMeshes(),n=t.castRay(s);if(n){const r=n.object;return this.list.find(o=>o.meshes.includes(r))}}getAllPlaneMeshes(){const e=[];for(const t of this.list)e.push(...t.meshes);return e}createPlaneFromIntersection(e,t){var s;if(!e.renderer)throw new Error("The given world must have a renderer!");const n=t.point.distanceTo(new P(0,0,0)),r=(s=t.face)==null?void 0:s.normal;if(!n||!r)return null;const o=this.getWorldNormal(t,r),a=this.newPlane(e,t.point,o.negate());return a.visible=this._visible,a.size=this._size,e.renderer.setPlane(!0,a.three),this.updateMaterialsAndPlanes(),a}getWorldNormal(e,t){const s=e.object;let n=e.object.matrixWorld.clone();if(s instanceof oi&&e.instanceId!==void 0){const a=new ce;s.getMatrixAt(e.instanceId,a),n=a.multiply(n)}const r=new xn().getNormalMatrix(n),o=t.clone().applyMatrix3(r).normalize();return this.normalizePlaneDirectionY(o),o}normalizePlaneDirectionY(e){this.orthogonalY&&(e.y>this.toleranceOrthogonalY&&(e.x=0,e.y=1,e.z=0),e.y<-this.toleranceOrthogonalY&&(e.x=0,e.y=-1,e.z=0))}newPlane(e,t,s){const n=new this.Type(this.components,e,t,s,this._material);return n.onDraggingStarted.add(this._onStartDragging),n.onDraggingEnded.add(this._onEndDragging),this.list.push(n),this.onAfterCreate.trigger(n),n}updateMaterialsAndPlanes(){const e=this.components.get(zb);for(const[t,s]of e.list){if(!s.renderer)continue;s.renderer.updateClippingPlanes();const{clippingPlanes:n}=s.renderer;for(const r of s.meshes)if(r.material)if(Array.isArray(r.material))for(const o of r.material)o.clippingPlanes=n;else r.material.clippingPlanes=n}}};T(Xb,"uuid","66290bc5-18c4-4cd1-9379-2e17a0617611");let io=Xb;class JR{constructor(e){T(this,"enabled",!1),T(this,"id","FirstPerson"),this.camera=e}set(e){if(this.enabled=e,e){if(this.camera.projection.current!=="Perspective"){this.camera.set("Orbit");return}this.setupFirstPersonCamera()}}setupFirstPersonCamera(){const e=this.camera.controls,t=new P;e.distance--,e.getPosition(t),e.minDistance=1,e.maxDistance=1,e.distance=1,e.moveTo(t.x,t.y,t.z),e.truckSpeed=50,e.mouseButtons.wheel=zt.ACTION.DOLLY,e.touches.two=zt.ACTION.TOUCH_ZOOM_TRUCK}}class e_{constructor(e){T(this,"enabled",!0),T(this,"id","Orbit"),this.camera=e,this.activateOrbitControls()}set(e){this.enabled=e,e&&this.activateOrbitControls()}activateOrbitControls(){const e=this.camera.controls;e.minDistance=1,e.maxDistance=300;const t=new P;e.getPosition(t);const s=t.length();e.distance=s,e.truckSpeed=2;const{rotation:n}=this.camera.three,r=new P(0,0,-1).applyEuler(n),o=t.addScaledVector(r,s);e.moveTo(o.x,o.y,o.z)}}class t_{constructor(e){T(this,"enabled",!1),T(this,"id","Plan"),T(this,"mouseAction1"),T(this,"mouseAction2"),T(this,"mouseInitialized",!1),T(this,"defaultAzimuthSpeed"),T(this,"defaultPolarSpeed"),this.camera=e,this.defaultAzimuthSpeed=e.controls.azimuthRotateSpeed,this.defaultPolarSpeed=e.controls.polarRotateSpeed}set(e){this.enabled=e;const t=this.camera.controls;t.azimuthRotateSpeed=e?0:this.defaultAzimuthSpeed,t.polarRotateSpeed=e?0:this.defaultPolarSpeed,this.mouseInitialized||(this.mouseAction1=t.touches.one,this.mouseAction2=t.touches.two,this.mouseInitialized=!0),e?(t.mouseButtons.left=zt.ACTION.TRUCK,t.touches.one=zt.ACTION.TOUCH_TRUCK,t.touches.two=zt.ACTION.TOUCH_ZOOM):(t.mouseButtons.left=zt.ACTION.ROTATE,t.touches.one=this.mouseAction1,t.touches.two=this.mouseAction2)}}class i_{constructor(e){T(this,"onChanged",new Y),T(this,"current","Perspective"),T(this,"camera"),T(this,"matchOrthoDistanceEnabled",!1),T(this,"_component"),T(this,"_previousDistance",-1),this._component=e,this.camera=e.three}async set(e){this.current!==e&&(e==="Orthographic"?this.setOrthoCamera():await this.setPerspectiveCamera(),this.onChanged.trigger(this.camera))}async toggle(){const e=this.current==="Perspective"?"Orthographic":"Perspective";await this.set(e)}setOrthoCamera(){if(this._component.mode===null||this._component.mode.id==="FirstPerson")return;this._previousDistance=this._component.controls.distance,this._component.controls.distance=200;const e=this.getPerspectiveDims();if(!e)return;const{width:t,height:s}=e;this.setupOrthoCamera(s,t),this.camera=this._component.threeOrtho,this.current="Orthographic"}getPerspectiveDims(){const e=this._component.currentWorld;if(!e||!e.renderer)return null;const t=new P;this._component.threePersp.getWorldDirection(t);const s=new P;this._component.controls.getTarget(s);const n=s.clone().sub(this._component.threePersp.position).dot(t),r=e.renderer.getSize(),o=r.x/r.y,a=this._component.threePersp,l=n*2*Math.atan(a.fov*(Math.PI/180)/2);return{width:l*o,height:l}}setupOrthoCamera(e,t){this._component.controls.mouseButtons.wheel=zt.ACTION.ZOOM,this._component.controls.mouseButtons.middle=zt.ACTION.ZOOM;const s=this._component.threePersp,n=this._component.threeOrtho;n.zoom=1,n.left=t/-2,n.right=t/2,n.top=e/2,n.bottom=e/-2,n.updateProjectionMatrix(),n.position.copy(s.position),n.quaternion.copy(s.quaternion),this._component.controls.camera=n}getDistance(){const e=this._component.threePersp,t=this._component.threeOrtho;return(t.top-t.bottom)/t.zoom/(2*Math.atan(e.fov*(Math.PI/180)/2))}async setPerspectiveCamera(){this._component.controls.mouseButtons.wheel=zt.ACTION.DOLLY,this._component.controls.mouseButtons.middle=zt.ACTION.DOLLY;const e=this._component.threePersp,t=this._component.threeOrtho;e.position.copy(t.position),e.quaternion.copy(t.quaternion),this._component.controls.mouseButtons.wheel=zt.ACTION.DOLLY,this.matchOrthoDistanceEnabled?this._component.controls.distance=this.getDistance():this._component.controls.distance=this._previousDistance,await this._component.controls.zoomTo(1),e.updateProjectionMatrix(),this._component.controls.camera=e,this.camera=e,this.current="Perspective"}}class s_ extends Jd{constructor(e){super(e),T(this,"projection"),T(this,"threeOrtho"),T(this,"threePersp"),T(this,"_userInputButtons",{}),T(this,"_frustumSize",50),T(this,"_navigationModes",new Map),T(this,"_mode",null),T(this,"previousSize",null),this.threePersp=this.three,this.threeOrtho=this.newOrthoCamera(),this.projection=new i_(this),this.onAspectUpdated.add(()=>{this.setOrthoPerspCameraAspect()}),this.projection.onChanged.add(t=>{this.three=t,this.updateAspect()}),this.onWorldChanged.add(({action:t})=>{t==="added"&&(this._navigationModes.clear(),this._navigationModes.set("Orbit",new e_(this)),this._navigationModes.set("FirstPerson",new JR(this)),this._navigationModes.set("Plan",new t_(this)),this._mode=this._navigationModes.get("Orbit"),this.mode.set(!0,{preventTargetAdjustment:!0}),this.currentWorld&&this.currentWorld.renderer&&(this.previousSize=this.currentWorld.renderer.getSize().clone()))})}get mode(){if(!this._mode)throw new Error("Mode not found, camera not initialized");return this._mode}dispose(){super.dispose(),this.threeOrtho.removeFromParent()}set(e){if(this.mode!==null&&this.mode.id!==e){if(this.mode.set(!1),!this._navigationModes.has(e))throw new Error("The specified mode does not exist!");this._mode=this._navigationModes.get(e),this.mode.set(!0)}}async fit(e,t=1.5){if(!this.enabled)return;const s=Number.MAX_VALUE,n=Number.MIN_VALUE,r=new P(s,s,s),o=new P(n,n,n);for(const d of e){const f=new Ge().setFromObject(d);f.min.x<r.x&&(r.x=f.min.x),f.min.y<r.y&&(r.y=f.min.y),f.min.z<r.z&&(r.z=f.min.z),f.max.x>o.x&&(o.x=f.max.x),f.max.y>o.y&&(o.y=f.max.y),f.max.z>o.z&&(o.z=f.max.z)}const a=new Ge(r,o),l=new P;a.getSize(l);const h=new P;a.getCenter(h);const u=Math.max(l.x,l.y,l.z)*t,c=new qn(h,u);await this.controls.fitToSphere(c,!0)}setUserInput(e){e?this.enableUserInput():this.disableUserInput()}disableUserInput(){this._userInputButtons.left=this.controls.mouseButtons.left,this._userInputButtons.right=this.controls.mouseButtons.right,this._userInputButtons.middle=this.controls.mouseButtons.middle,this._userInputButtons.wheel=this.controls.mouseButtons.wheel,this.controls.mouseButtons.left=0,this.controls.mouseButtons.right=0,this.controls.mouseButtons.middle=0,this.controls.mouseButtons.wheel=0}enableUserInput(){Object.keys(this._userInputButtons).length!==0&&(this.controls.mouseButtons.left=this._userInputButtons.left,this.controls.mouseButtons.right=this._userInputButtons.right,this.controls.mouseButtons.middle=this._userInputButtons.middle,this.controls.mouseButtons.wheel=this._userInputButtons.wheel)}newOrthoCamera(){const e=window.innerWidth/window.innerHeight;return new Qs(this._frustumSize*e/-2,this._frustumSize*e/2,this._frustumSize/2,this._frustumSize/-2,.1,1e3)}setOrthoPerspCameraAspect(){if(!this.currentWorld||!this.currentWorld.renderer||!this.previousSize)return;const e=this.currentWorld.renderer.getSize(),t=this.threeOrtho.top,s=this.threeOrtho.right,n=e.y/this.previousSize.y,r=e.x/this.previousSize.x,o=t*n,a=s*r;this.threeOrtho.left=-a,this.threeOrtho.right=a,this.threeOrtho.top=o,this.threeOrtho.bottom=-o,this.threeOrtho.updateProjectionMatrix(),this.previousSize.copy(e)}}const Dg=new Map([[Hc,{forRelated:"Decomposes",forRelating:"IsDecomposedBy"}],[Bf,{forRelated:"HasAssociations",forRelating:"AssociatedTo"}],[zf,{forRelated:"HasAssociations",forRelating:"ClassificationForObjects"}],[Vf,{forRelated:"HasAssignments",forRelating:"IsGroupedBy"}],[El,{forRelated:"IsDefinedBy",forRelating:"DefinesOcurrence"}],[$f,{forRelated:"IsTypedBy",forRelating:"Types"}],[Hf,{forRelated:"IsDefinedBy",forRelating:"Defines"}],[Gc,{forRelated:"ContainedInStructure",forRelating:"ContainsElements"}],[Gf,{forRelated:"AssignedToFlowElement",forRelating:"HasControlElements"}],[Yf,{forRelated:"ConnectedFrom",forRelating:"ConnectedTo"}],[jf,{forRelated:"HasAssignments",forRelating:"ReferencedBy"}],[Wf,{forRelated:"HasContext",forRelating:"Declares"}],[Xf,{forRelated:"HasAssignments",forRelating:"Controls"}],[qf,{forRelated:"Nests",forRelating:"IsNestedBy"}],[Zf,{forRelated:"HasAssociations",forRelating:"DocumentRefForObjects"}]]),bc={950732822:"IFCURIREFERENCE",4075327185:"IFCTIME",1209108979:"IFCTEMPERATURERATEOFCHANGEMEASURE",3457685358:"IFCSOUNDPRESSURELEVELMEASURE",4157543285:"IFCSOUNDPOWERLEVELMEASURE",2798247006:"IFCPROPERTYSETDEFINITIONSET",1790229001:"IFCPOSITIVEINTEGER",525895558:"IFCNONNEGATIVELENGTHMEASURE",1774176899:"IFCLINEINDEX",1275358634:"IFCLANGUAGEID",2541165894:"IFCDURATION",3701338814:"IFCDAYINWEEKNUMBER",2195413836:"IFCDATETIME",937566702:"IFCDATE",1683019596:"IFCCARDINALPOINTREFERENCE",2314439260:"IFCBINARY",1500781891:"IFCAREADENSITYMEASURE",3683503648:"IFCARCINDEX",4065007721:"IFCYEARNUMBER",1718600412:"IFCWARPINGMOMENTMEASURE",51269191:"IFCWARPINGCONSTANTMEASURE",2593997549:"IFCVOLUMETRICFLOWRATEMEASURE",3458127941:"IFCVOLUMEMEASURE",3345633955:"IFCVAPORPERMEABILITYMEASURE",1278329552:"IFCTORQUEMEASURE",2591213694:"IFCTIMESTAMP",2726807636:"IFCTIMEMEASURE",743184107:"IFCTHERMODYNAMICTEMPERATUREMEASURE",2016195849:"IFCTHERMALTRANSMITTANCEMEASURE",857959152:"IFCTHERMALRESISTANCEMEASURE",2281867870:"IFCTHERMALEXPANSIONCOEFFICIENTMEASURE",2645777649:"IFCTHERMALCONDUCTIVITYMEASURE",232962298:"IFCTHERMALADMITTANCEMEASURE",296282323:"IFCTEXTTRANSFORMATION",603696268:"IFCTEXTFONTNAME",3490877962:"IFCTEXTDECORATION",1460886941:"IFCTEXTALIGNMENT",2801250643:"IFCTEXT",58845555:"IFCTEMPERATUREGRADIENTMEASURE",361837227:"IFCSPECULARROUGHNESS",2757832317:"IFCSPECULAREXPONENT",3477203348:"IFCSPECIFICHEATCAPACITYMEASURE",993287707:"IFCSOUNDPRESSUREMEASURE",846465480:"IFCSOUNDPOWERMEASURE",3471399674:"IFCSOLIDANGLEMEASURE",408310005:"IFCSHEARMODULUSMEASURE",2190458107:"IFCSECTIONALAREAINTEGRALMEASURE",3467162246:"IFCSECTIONMODULUSMEASURE",2766185779:"IFCSECONDINMINUTE",3211557302:"IFCROTATIONALSTIFFNESSMEASURE",1755127002:"IFCROTATIONALMASSMEASURE",2133746277:"IFCROTATIONALFREQUENCYMEASURE",200335297:"IFCREAL",96294661:"IFCRATIOMEASURE",3972513137:"IFCRADIOACTIVITYMEASURE",3665567075:"IFCPRESSUREMEASURE",2169031380:"IFCPRESENTABLETEXT",1364037233:"IFCPOWERMEASURE",1245737093:"IFCPOSITIVERATIOMEASURE",3054510233:"IFCPOSITIVEPLANEANGLEMEASURE",2815919920:"IFCPOSITIVELENGTHMEASURE",4042175685:"IFCPLANEANGLEMEASURE",2642773653:"IFCPLANARFORCEMEASURE",2260317790:"IFCPARAMETERVALUE",929793134:"IFCPHMEASURE",2395907400:"IFCNUMERICMEASURE",2095195183:"IFCNORMALISEDRATIOMEASURE",765770214:"IFCMONTHINYEARNUMBER",2615040989:"IFCMONETARYMEASURE",3114022597:"IFCMOMENTOFINERTIAMEASURE",1648970520:"IFCMOLECULARWEIGHTMEASURE",3177669450:"IFCMOISTUREDIFFUSIVITYMEASURE",1753493141:"IFCMODULUSOFSUBGRADEREACTIONMEASURE",1052454078:"IFCMODULUSOFROTATIONALSUBGRADEREACTIONMEASURE",2173214787:"IFCMODULUSOFLINEARSUBGRADEREACTIONMEASURE",3341486342:"IFCMODULUSOFELASTICITYMEASURE",102610177:"IFCMINUTEINHOUR",3531705166:"IFCMASSPERLENGTHMEASURE",3124614049:"IFCMASSMEASURE",4017473158:"IFCMASSFLOWRATEMEASURE",1477762836:"IFCMASSDENSITYMEASURE",2486716878:"IFCMAGNETICFLUXMEASURE",286949696:"IFCMAGNETICFLUXDENSITYMEASURE",151039812:"IFCLUMINOUSINTENSITYMEASURE",2755797622:"IFCLUMINOUSINTENSITYDISTRIBUTIONMEASURE",2095003142:"IFCLUMINOUSFLUXMEASURE",503418787:"IFCLOGICAL",3086160713:"IFCLINEARVELOCITYMEASURE",1307019551:"IFCLINEARSTIFFNESSMEASURE",2128979029:"IFCLINEARMOMENTMEASURE",191860431:"IFCLINEARFORCEMEASURE",1243674935:"IFCLENGTHMEASURE",3258342251:"IFCLABEL",2054016361:"IFCKINEMATICVISCOSITYMEASURE",3192672207:"IFCISOTHERMALMOISTURECAPACITYMEASURE",3686016028:"IFCIONCONCENTRATIONMEASURE",3809634241:"IFCINTEGERCOUNTRATEMEASURE",1939436016:"IFCINTEGER",2679005408:"IFCINDUCTANCEMEASURE",3358199106:"IFCILLUMINANCEMEASURE",983778844:"IFCIDENTIFIER",2589826445:"IFCHOURINDAY",1158859006:"IFCHEATINGVALUEMEASURE",3113092358:"IFCHEATFLUXDENSITYMEASURE",3064340077:"IFCGLOBALLYUNIQUEID",3044325142:"IFCFREQUENCYMEASURE",1361398929:"IFCFORCEMEASURE",2590844177:"IFCFONTWEIGHT",2715512545:"IFCFONTVARIANT",1102727119:"IFCFONTSTYLE",2078135608:"IFCENERGYMEASURE",2506197118:"IFCELECTRICVOLTAGEMEASURE",2951915441:"IFCELECTRICRESISTANCEMEASURE",3790457270:"IFCELECTRICCURRENTMEASURE",2093906313:"IFCELECTRICCONDUCTANCEMEASURE",3818826038:"IFCELECTRICCHARGEMEASURE",1827137117:"IFCELECTRICCAPACITANCEMEASURE",69416015:"IFCDYNAMICVISCOSITYMEASURE",524656162:"IFCDOSEEQUIVALENTMEASURE",4134073009:"IFCDIMENSIONCOUNT",1514641115:"IFCDESCRIPTIVEMEASURE",300323983:"IFCDAYLIGHTSAVINGHOUR",86635668:"IFCDAYINMONTHNUMBER",94842927:"IFCCURVATUREMEASURE",1778710042:"IFCCOUNTMEASURE",3238673880:"IFCCONTEXTDEPENDENTMEASURE",3812528620:"IFCCOMPOUNDPLANEANGLEMEASURE",2991860651:"IFCCOMPLEXNUMBER",1867003952:"IFCBOXALIGNMENT",2735952531:"IFCBOOLEAN",2650437152:"IFCAREAMEASURE",632304761:"IFCANGULARVELOCITYMEASURE",360377573:"IFCAMOUNTOFSUBSTANCEMEASURE",4182062534:"IFCACCELERATIONMEASURE",3699917729:"IFCABSORBEDDOSEMEASURE",1971632696:"IFCGEOSLICE",2680139844:"IFCGEOMODEL",24726584:"IFCELECTRICFLOWTREATMENTDEVICE",3693000487:"IFCDISTRIBUTIONBOARD",3460952963:"IFCCONVEYORSEGMENT",3999819293:"IFCCAISSONFOUNDATION",3314249567:"IFCBOREHOLE",4196446775:"IFCBEARING",325726236:"IFCALIGNMENT",3425753595:"IFCTRACKELEMENT",991950508:"IFCSIGNAL",3798194928:"IFCREINFORCEDSOIL",3290496277:"IFCRAIL",1383356374:"IFCPAVEMENT",2182337498:"IFCNAVIGATIONELEMENT",234836483:"IFCMOORINGDEVICE",2078563270:"IFCMOBILETELECOMMUNICATIONSAPPLIANCE",1638804497:"IFCLIQUIDTERMINAL",1154579445:"IFCLINEARPOSITIONINGELEMENT",2696325953:"IFCKERB",2713699986:"IFCGEOTECHNICALASSEMBLY",2142170206:"IFCELECTRICFLOWTREATMENTDEVICETYPE",3376911765:"IFCEARTHWORKSFILL",1077100507:"IFCEARTHWORKSELEMENT",3071239417:"IFCEARTHWORKSCUT",479945903:"IFCDISTRIBUTIONBOARDTYPE",3426335179:"IFCDEEPFOUNDATION",1502416096:"IFCCOURSE",2940368186:"IFCCONVEYORSEGMENTTYPE",3203706013:"IFCCAISSONFOUNDATIONTYPE",3862327254:"IFCBUILTSYSTEM",1876633798:"IFCBUILTELEMENT",963979645:"IFCBRIDGEPART",644574406:"IFCBRIDGE",3649138523:"IFCBEARINGTYPE",1662888072:"IFCALIGNMENTVERTICAL",317615605:"IFCALIGNMENTSEGMENT",1545765605:"IFCALIGNMENTHORIZONTAL",4266260250:"IFCALIGNMENTCANT",3956297820:"IFCVIBRATIONDAMPERTYPE",1530820697:"IFCVIBRATIONDAMPER",840318589:"IFCVEHICLE",1953115116:"IFCTRANSPORTATIONDEVICE",618700268:"IFCTRACKELEMENTTYPE",2281632017:"IFCTENDONCONDUITTYPE",3663046924:"IFCTENDONCONDUIT",42703149:"IFCSINESPIRAL",1894708472:"IFCSIGNALTYPE",3599934289:"IFCSIGNTYPE",33720170:"IFCSIGN",1027922057:"IFCSEVENTHORDERPOLYNOMIALSPIRAL",544395925:"IFCSEGMENTEDREFERENCECURVE",3649235739:"IFCSECONDORDERPOLYNOMIALSPIRAL",550521510:"IFCROADPART",146592293:"IFCROAD",3818125796:"IFCRELADHERESTOELEMENT",4021432810:"IFCREFERENT",1891881377:"IFCRAILWAYPART",3992365140:"IFCRAILWAY",1763565496:"IFCRAILTYPE",1946335990:"IFCPOSITIONINGELEMENT",514975943:"IFCPAVEMENTTYPE",506776471:"IFCNAVIGATIONELEMENTTYPE",710110818:"IFCMOORINGDEVICETYPE",1950438474:"IFCMOBILETELECOMMUNICATIONSAPPLIANCETYPE",976884017:"IFCMARINEPART",525669439:"IFCMARINEFACILITY",1770583370:"IFCLIQUIDTERMINALTYPE",2176059722:"IFCLINEARELEMENT",679976338:"IFCKERBTYPE",3948183225:"IFCIMPACTPROTECTIONDEVICETYPE",2568555532:"IFCIMPACTPROTECTIONDEVICE",2898700619:"IFCGRADIENTCURVE",1594536857:"IFCGEOTECHNICALSTRATUM",4230923436:"IFCGEOTECHNICALELEMENT",4228831410:"IFCFACILITYPARTCOMMON",1310830890:"IFCFACILITYPART",24185140:"IFCFACILITY",4234616927:"IFCDIRECTRIXDERIVEDREFERENCESWEPTAREASOLID",1306400036:"IFCDEEPFOUNDATIONTYPE",4189326743:"IFCCOURSETYPE",2000195564:"IFCCOSINESPIRAL",3497074424:"IFCCLOTHOID",1626504194:"IFCBUILTELEMENTTYPE",3651464721:"IFCVEHICLETYPE",1229763772:"IFCTRIANGULATEDIRREGULARNETWORK",3665877780:"IFCTRANSPORTATIONDEVICETYPE",782932809:"IFCTHIRDORDERPOLYNOMIALSPIRAL",2735484536:"IFCSPIRAL",1356537516:"IFCSECTIONEDSURFACE",1290935644:"IFCSECTIONEDSOLIDHORIZONTAL",1862484736:"IFCSECTIONEDSOLID",1441486842:"IFCRELPOSITIONS",1033248425:"IFCRELASSOCIATESPROFILEDEF",3381221214:"IFCPOLYNOMIALCURVE",2485787929:"IFCOFFSETCURVEBYDISTANCES",590820931:"IFCOFFSETCURVE",3465909080:"IFCINDEXEDPOLYGONALTEXTUREMAP",593015953:"IFCDIRECTRIXCURVESWEPTAREASOLID",4212018352:"IFCCURVESEGMENT",3425423356:"IFCAXIS2PLACEMENTLINEAR",823603102:"IFCSEGMENT",2165702409:"IFCPOINTBYDISTANCEEXPRESSION",182550632:"IFCOPENCROSSPROFILEDEF",388784114:"IFCLINEARPLACEMENT",536804194:"IFCALIGNMENTHORIZONTALSEGMENT",3752311538:"IFCALIGNMENTCANTSEGMENT",1010789467:"IFCTEXTURECOORDINATEINDICESWITHVOIDS",222769930:"IFCTEXTURECOORDINATEINDICES",2691318326:"IFCQUANTITYNUMBER",3633395639:"IFCALIGNMENTVERTICALSEGMENT",2879124712:"IFCALIGNMENTPARAMETERSEGMENT",25142252:"IFCCONTROLLER",3087945054:"IFCALARM",4288193352:"IFCACTUATOR",630975310:"IFCUNITARYCONTROLELEMENT",4086658281:"IFCSENSOR",2295281155:"IFCPROTECTIVEDEVICETRIPPINGUNIT",182646315:"IFCFLOWINSTRUMENT",1426591983:"IFCFIRESUPPRESSIONTERMINAL",819412036:"IFCFILTER",3415622556:"IFCFAN",1003880860:"IFCELECTRICTIMECONTROL",402227799:"IFCELECTRICMOTOR",264262732:"IFCELECTRICGENERATOR",3310460725:"IFCELECTRICFLOWSTORAGEDEVICE",862014818:"IFCELECTRICDISTRIBUTIONBOARD",1904799276:"IFCELECTRICAPPLIANCE",1360408905:"IFCDUCTSILENCER",3518393246:"IFCDUCTSEGMENT",342316401:"IFCDUCTFITTING",562808652:"IFCDISTRIBUTIONCIRCUIT",4074379575:"IFCDAMPER",3640358203:"IFCCOOLINGTOWER",4136498852:"IFCCOOLEDBEAM",2272882330:"IFCCONDENSER",3571504051:"IFCCOMPRESSOR",3221913625:"IFCCOMMUNICATIONSAPPLIANCE",639361253:"IFCCOIL",3902619387:"IFCCHILLER",4217484030:"IFCCABLESEGMENT",1051757585:"IFCCABLEFITTING",3758799889:"IFCCABLECARRIERSEGMENT",635142910:"IFCCABLECARRIERFITTING",2938176219:"IFCBURNER",32344328:"IFCBOILER",2906023776:"IFCBEAMSTANDARDCASE",277319702:"IFCAUDIOVISUALAPPLIANCE",2056796094:"IFCAIRTOAIRHEATRECOVERY",177149247:"IFCAIRTERMINALBOX",1634111441:"IFCAIRTERMINAL",486154966:"IFCWINDOWSTANDARDCASE",4237592921:"IFCWASTETERMINAL",4156078855:"IFCWALLELEMENTEDCASE",4207607924:"IFCVALVE",4292641817:"IFCUNITARYEQUIPMENT",3179687236:"IFCUNITARYCONTROLELEMENTTYPE",3026737570:"IFCTUBEBUNDLE",3825984169:"IFCTRANSFORMER",812556717:"IFCTANK",1162798199:"IFCSWITCHINGDEVICE",385403989:"IFCSTRUCTURALLOADCASE",1404847402:"IFCSTACKTERMINAL",1999602285:"IFCSPACEHEATER",3420628829:"IFCSOLARDEVICE",3027962421:"IFCSLABSTANDARDCASE",3127900445:"IFCSLABELEMENTEDCASE",1329646415:"IFCSHADINGDEVICE",3053780830:"IFCSANITARYTERMINAL",2572171363:"IFCREINFORCINGBARTYPE",1232101972:"IFCRATIONALBSPLINECURVEWITHKNOTS",90941305:"IFCPUMP",655969474:"IFCPROTECTIVEDEVICETRIPPINGUNITTYPE",738039164:"IFCPROTECTIVEDEVICE",1156407060:"IFCPLATESTANDARDCASE",3612865200:"IFCPIPESEGMENT",310824031:"IFCPIPEFITTING",3694346114:"IFCOUTLET",144952367:"IFCOUTERBOUNDARYCURVE",2474470126:"IFCMOTORCONNECTION",1911478936:"IFCMEMBERSTANDARDCASE",1437502449:"IFCMEDICALDEVICE",629592764:"IFCLIGHTFIXTURE",76236018:"IFCLAMP",2176052936:"IFCJUNCTIONBOX",4175244083:"IFCINTERCEPTOR",2068733104:"IFCHUMIDIFIER",3319311131:"IFCHEATEXCHANGER",2188021234:"IFCFLOWMETER",1209101575:"IFCEXTERNALSPATIALELEMENT",484807127:"IFCEVAPORATOR",3747195512:"IFCEVAPORATIVECOOLER",2814081492:"IFCENGINE",2417008758:"IFCELECTRICDISTRIBUTIONBOARDTYPE",3242481149:"IFCDOORSTANDARDCASE",3205830791:"IFCDISTRIBUTIONSYSTEM",400855858:"IFCCOMMUNICATIONSAPPLIANCETYPE",905975707:"IFCCOLUMNSTANDARDCASE",1677625105:"IFCCIVILELEMENT",3296154744:"IFCCHIMNEY",2674252688:"IFCCABLEFITTINGTYPE",2188180465:"IFCBURNERTYPE",1177604601:"IFCBUILDINGSYSTEM",39481116:"IFCBUILDINGELEMENTPARTTYPE",1136057603:"IFCBOUNDARYCURVE",2461110595:"IFCBSPLINECURVEWITHKNOTS",1532957894:"IFCAUDIOVISUALAPPLIANCETYPE",4088093105:"IFCWORKCALENDAR",4009809668:"IFCWINDOWTYPE",926996030:"IFCVOIDINGFEATURE",2391383451:"IFCVIBRATIONISOLATOR",2415094496:"IFCTENDONTYPE",3081323446:"IFCTENDONANCHORTYPE",413509423:"IFCSYSTEMFURNITUREELEMENT",3101698114:"IFCSURFACEFEATURE",3657597509:"IFCSTRUCTURALSURFACEACTION",2757150158:"IFCSTRUCTURALCURVEREACTION",1004757350:"IFCSTRUCTURALCURVEACTION",338393293:"IFCSTAIRTYPE",1072016465:"IFCSOLARDEVICETYPE",4074543187:"IFCSHADINGDEVICETYPE",2157484638:"IFCSEAMCURVE",2781568857:"IFCROOFTYPE",2310774935:"IFCREINFORCINGMESHTYPE",964333572:"IFCREINFORCINGELEMENTTYPE",683857671:"IFCRATIONALBSPLINESURFACEWITHKNOTS",1469900589:"IFCRAMPTYPE",2839578677:"IFCPOLYGONALFACESET",1158309216:"IFCPILETYPE",3079942009:"IFCOPENINGSTANDARDCASE",1114901282:"IFCMEDICALDEVICETYPE",3113134337:"IFCINTERSECTIONCURVE",3946677679:"IFCINTERCEPTORTYPE",2571569899:"IFCINDEXEDPOLYCURVE",3493046030:"IFCGEOGRAPHICELEMENT",1509553395:"IFCFURNITURE",1893162501:"IFCFOOTINGTYPE",2853485674:"IFCEXTERNALSPATIALSTRUCTUREELEMENT",4148101412:"IFCEVENT",132023988:"IFCENGINETYPE",2397081782:"IFCELEMENTASSEMBLYTYPE",2323601079:"IFCDOORTYPE",1213902940:"IFCCYLINDRICALSURFACE",1525564444:"IFCCONSTRUCTIONPRODUCTRESOURCETYPE",4105962743:"IFCCONSTRUCTIONMATERIALRESOURCETYPE",2185764099:"IFCCONSTRUCTIONEQUIPMENTRESOURCETYPE",15328376:"IFCCOMPOSITECURVEONSURFACE",3875453745:"IFCCOMPLEXPROPERTYTEMPLATE",3893394355:"IFCCIVILELEMENTTYPE",2197970202:"IFCCHIMNEYTYPE",167062518:"IFCBSPLINESURFACEWITHKNOTS",2887950389:"IFCBSPLINESURFACE",2603310189:"IFCADVANCEDBREPWITHVOIDS",1635779807:"IFCADVANCEDBREP",2916149573:"IFCTRIANGULATEDFACESET",1935646853:"IFCTOROIDALSURFACE",2387106220:"IFCTESSELLATEDFACESET",3206491090:"IFCTASKTYPE",699246055:"IFCSURFACECURVE",4095615324:"IFCSUBCONTRACTRESOURCETYPE",603775116:"IFCSTRUCTURALSURFACEREACTION",4015995234:"IFCSPHERICALSURFACE",2481509218:"IFCSPATIALZONETYPE",463610769:"IFCSPATIALZONE",710998568:"IFCSPATIALELEMENTTYPE",1412071761:"IFCSPATIALELEMENT",3663146110:"IFCSIMPLEPROPERTYTEMPLATE",3243963512:"IFCREVOLVEDAREASOLIDTAPERED",816062949:"IFCREPARAMETRISEDCOMPOSITECURVESEGMENT",1521410863:"IFCRELSPACEBOUNDARY2NDLEVEL",3523091289:"IFCRELSPACEBOUNDARY1STLEVEL",427948657:"IFCRELINTERFERESELEMENTS",307848117:"IFCRELDEFINESBYTEMPLATE",1462361463:"IFCRELDEFINESBYOBJECT",2565941209:"IFCRELDECLARES",1027710054:"IFCRELASSIGNSTOGROUPBYFACTOR",3521284610:"IFCPROPERTYTEMPLATE",492091185:"IFCPROPERTYSETTEMPLATE",653396225:"IFCPROJECTLIBRARY",569719735:"IFCPROCEDURETYPE",3967405729:"IFCPREDEFINEDPROPERTYSET",1682466193:"IFCPCURVE",428585644:"IFCLABORRESOURCETYPE",2294589976:"IFCINDEXEDPOLYGONALFACEWITHVOIDS",178912537:"IFCINDEXEDPOLYGONALFACE",4095422895:"IFCGEOGRAPHICELEMENTTYPE",2652556860:"IFCFIXEDREFERENCESWEPTAREASOLID",2804161546:"IFCEXTRUDEDAREASOLIDTAPERED",4024345920:"IFCEVENTTYPE",2629017746:"IFCCURVEBOUNDEDSURFACE",1815067380:"IFCCREWRESOURCETYPE",3419103109:"IFCCONTEXT",2574617495:"IFCCONSTRUCTIONRESOURCETYPE",2059837836:"IFCCARTESIANPOINTLIST3D",1675464909:"IFCCARTESIANPOINTLIST2D",574549367:"IFCCARTESIANPOINTLIST",3406155212:"IFCADVANCEDFACE",3698973494:"IFCTYPERESOURCE",3736923433:"IFCTYPEPROCESS",901063453:"IFCTESSELLATEDITEM",1096409881:"IFCSWEPTDISKSOLIDPOLYGONAL",1042787934:"IFCRESOURCETIME",1608871552:"IFCRESOURCECONSTRAINTRELATIONSHIP",2943643501:"IFCRESOURCEAPPROVALRELATIONSHIP",2090586900:"IFCQUANTITYSET",1482703590:"IFCPROPERTYTEMPLATEDEFINITION",3778827333:"IFCPREDEFINEDPROPERTIES",2998442950:"IFCMIRROREDPROFILEDEF",853536259:"IFCMATERIALRELATIONSHIP",3404854881:"IFCMATERIALPROFILESETUSAGETAPERING",3079605661:"IFCMATERIALPROFILESETUSAGE",2852063980:"IFCMATERIALCONSTITUENTSET",3708119e3:"IFCMATERIALCONSTITUENT",1585845231:"IFCLAGTIME",2133299955:"IFCINDEXEDTRIANGLETEXTUREMAP",1437953363:"IFCINDEXEDTEXTUREMAP",3570813810:"IFCINDEXEDCOLOURMAP",1437805879:"IFCEXTERNALREFERENCERELATIONSHIP",297599258:"IFCEXTENDEDPROPERTIES",211053100:"IFCEVENTTIME",2713554722:"IFCCONVERSIONBASEDUNITWITHOFFSET",3285139300:"IFCCOLOURRGBLIST",1236880293:"IFCWORKTIME",1199560280:"IFCTIMEPERIOD",3611470254:"IFCTEXTUREVERTEXLIST",2771591690:"IFCTASKTIMERECURRING",1549132990:"IFCTASKTIME",2043862942:"IFCTABLECOLUMN",2934153892:"IFCSURFACEREINFORCEMENTAREA",609421318:"IFCSTRUCTURALLOADORRESULT",3478079324:"IFCSTRUCTURALLOADCONFIGURATION",1054537805:"IFCSCHEDULINGTIME",2439245199:"IFCRESOURCELEVELRELATIONSHIP",2433181523:"IFCREFERENCE",3915482550:"IFCRECURRENCEPATTERN",986844984:"IFCPROPERTYABSTRACTION",3843373140:"IFCPROJECTEDCRS",677532197:"IFCPRESENTATIONITEM",1507914824:"IFCMATERIALUSAGEDEFINITION",552965576:"IFCMATERIALPROFILEWITHOFFSETS",164193824:"IFCMATERIALPROFILESET",2235152071:"IFCMATERIALPROFILE",1847252529:"IFCMATERIALLAYERWITHOFFSETS",760658860:"IFCMATERIALDEFINITION",3057273783:"IFCMAPCONVERSION",4294318154:"IFCEXTERNALINFORMATION",1466758467:"IFCCOORDINATEREFERENCESYSTEM",1785450214:"IFCCOORDINATEOPERATION",775493141:"IFCCONNECTIONVOLUMEGEOMETRY",979691226:"IFCREINFORCINGBAR",3700593921:"IFCELECTRICDISTRIBUTIONPOINT",1062813311:"IFCDISTRIBUTIONCONTROLELEMENT",1052013943:"IFCDISTRIBUTIONCHAMBERELEMENT",578613899:"IFCCONTROLLERTYPE",2454782716:"IFCCHAMFEREDGEFEATURE",753842376:"IFCBEAM",3001207471:"IFCALARMTYPE",2874132201:"IFCACTUATORTYPE",3304561284:"IFCWINDOW",3512223829:"IFCWALLSTANDARDCASE",2391406946:"IFCWALL",3313531582:"IFCVIBRATIONISOLATORTYPE",2347447852:"IFCTENDONANCHOR",3824725483:"IFCTENDON",2515109513:"IFCSTRUCTURALANALYSISMODEL",4252922144:"IFCSTAIRFLIGHT",331165859:"IFCSTAIR",1529196076:"IFCSLAB",1783015770:"IFCSENSORTYPE",1376911519:"IFCROUNDEDEDGEFEATURE",2016517767:"IFCROOF",2320036040:"IFCREINFORCINGMESH",3027567501:"IFCREINFORCINGELEMENT",3055160366:"IFCRATIONALBEZIERCURVE",3283111854:"IFCRAMPFLIGHT",3024970846:"IFCRAMP",2262370178:"IFCRAILING",3171933400:"IFCPLATE",1687234759:"IFCPILE",1073191201:"IFCMEMBER",900683007:"IFCFOOTING",3508470533:"IFCFLOWTREATMENTDEVICE",2223149337:"IFCFLOWTERMINAL",707683696:"IFCFLOWSTORAGEDEVICE",987401354:"IFCFLOWSEGMENT",3132237377:"IFCFLOWMOVINGDEVICE",4037862832:"IFCFLOWINSTRUMENTTYPE",4278956645:"IFCFLOWFITTING",2058353004:"IFCFLOWCONTROLLER",4222183408:"IFCFIRESUPPRESSIONTERMINALTYPE",1810631287:"IFCFILTERTYPE",346874300:"IFCFANTYPE",1658829314:"IFCENERGYCONVERSIONDEVICE",857184966:"IFCELECTRICALELEMENT",1634875225:"IFCELECTRICALCIRCUIT",712377611:"IFCELECTRICTIMECONTROLTYPE",1217240411:"IFCELECTRICMOTORTYPE",1365060375:"IFCELECTRICHEATERTYPE",1534661035:"IFCELECTRICGENERATORTYPE",3277789161:"IFCELECTRICFLOWSTORAGEDEVICETYPE",663422040:"IFCELECTRICAPPLIANCETYPE",855621170:"IFCEDGEFEATURE",2030761528:"IFCDUCTSILENCERTYPE",3760055223:"IFCDUCTSEGMENTTYPE",869906466:"IFCDUCTFITTINGTYPE",395920057:"IFCDOOR",3041715199:"IFCDISTRIBUTIONPORT",3040386961:"IFCDISTRIBUTIONFLOWELEMENT",1945004755:"IFCDISTRIBUTIONELEMENT",2063403501:"IFCDISTRIBUTIONCONTROLELEMENTTYPE",1599208980:"IFCDISTRIBUTIONCHAMBERELEMENTTYPE",2635815018:"IFCDISCRETEACCESSORYTYPE",1335981549:"IFCDISCRETEACCESSORY",4147604152:"IFCDIAMETERDIMENSION",3961806047:"IFCDAMPERTYPE",3495092785:"IFCCURTAINWALL",1973544240:"IFCCOVERING",2954562838:"IFCCOOLINGTOWERTYPE",335055490:"IFCCOOLEDBEAMTYPE",488727124:"IFCCONSTRUCTIONPRODUCTRESOURCE",1060000209:"IFCCONSTRUCTIONMATERIALRESOURCE",3898045240:"IFCCONSTRUCTIONEQUIPMENTRESOURCE",1163958913:"IFCCONDITIONCRITERION",2188551683:"IFCCONDITION",2816379211:"IFCCONDENSERTYPE",3850581409:"IFCCOMPRESSORTYPE",843113511:"IFCCOLUMN",2301859152:"IFCCOILTYPE",2611217952:"IFCCIRCLE",2951183804:"IFCCHILLERTYPE",1285652485:"IFCCABLESEGMENTTYPE",3293546465:"IFCCABLECARRIERSEGMENTTYPE",395041908:"IFCCABLECARRIERFITTINGTYPE",1909888760:"IFCBUILDINGELEMENTPROXYTYPE",1095909175:"IFCBUILDINGELEMENTPROXY",2979338954:"IFCBUILDINGELEMENTPART",52481810:"IFCBUILDINGELEMENTCOMPONENT",3299480353:"IFCBUILDINGELEMENT",231477066:"IFCBOILERTYPE",1916977116:"IFCBEZIERCURVE",819618141:"IFCBEAMTYPE",1967976161:"IFCBSPLINECURVE",3460190687:"IFCASSET",2470393545:"IFCANGULARDIMENSION",1871374353:"IFCAIRTOAIRHEATRECOVERYTYPE",3352864051:"IFCAIRTERMINALTYPE",1411407467:"IFCAIRTERMINALBOXTYPE",3821786052:"IFCACTIONREQUEST",1213861670:"IFC2DCOMPOSITECURVE",1033361043:"IFCZONE",3342526732:"IFCWORKSCHEDULE",4218914973:"IFCWORKPLAN",1028945134:"IFCWORKCONTROL",1133259667:"IFCWASTETERMINALTYPE",1898987631:"IFCWALLTYPE",2769231204:"IFCVIRTUALELEMENT",728799441:"IFCVALVETYPE",1911125066:"IFCUNITARYEQUIPMENTTYPE",1600972822:"IFCTUBEBUNDLETYPE",3593883385:"IFCTRIMMEDCURVE",1620046519:"IFCTRANSPORTELEMENT",1692211062:"IFCTRANSFORMERTYPE",1637806684:"IFCTIMESERIESSCHEDULE",5716631:"IFCTANKTYPE",2254336722:"IFCSYSTEM",2315554128:"IFCSWITCHINGDEVICETYPE",148013059:"IFCSUBCONTRACTRESOURCE",1975003073:"IFCSTRUCTURALSURFACECONNECTION",2986769608:"IFCSTRUCTURALRESULTGROUP",1235345126:"IFCSTRUCTURALPOINTREACTION",734778138:"IFCSTRUCTURALPOINTCONNECTION",2082059205:"IFCSTRUCTURALPOINTACTION",3987759626:"IFCSTRUCTURALPLANARACTIONVARYING",1621171031:"IFCSTRUCTURALPLANARACTION",1252848954:"IFCSTRUCTURALLOADGROUP",1721250024:"IFCSTRUCTURALLINEARACTIONVARYING",1807405624:"IFCSTRUCTURALLINEARACTION",2445595289:"IFCSTRUCTURALCURVEMEMBERVARYING",214636428:"IFCSTRUCTURALCURVEMEMBER",4243806635:"IFCSTRUCTURALCURVECONNECTION",1179482911:"IFCSTRUCTURALCONNECTION",682877961:"IFCSTRUCTURALACTION",1039846685:"IFCSTAIRFLIGHTTYPE",3112655638:"IFCSTACKTERMINALTYPE",3812236995:"IFCSPACETYPE",652456506:"IFCSPACEPROGRAM",1305183839:"IFCSPACEHEATERTYPE",3856911033:"IFCSPACE",2533589738:"IFCSLABTYPE",4097777520:"IFCSITE",4105383287:"IFCSERVICELIFE",3517283431:"IFCSCHEDULETIMECONTROL",1768891740:"IFCSANITARYTERMINALTYPE",2863920197:"IFCRELASSIGNSTASKS",160246688:"IFCRELAGGREGATES",2324767716:"IFCRAMPFLIGHTTYPE",2893384427:"IFCRAILINGTYPE",3248260540:"IFCRADIUSDIMENSION",2250791053:"IFCPUMPTYPE",1842657554:"IFCPROTECTIVEDEVICETYPE",3651124850:"IFCPROJECTIONELEMENT",3642467123:"IFCPROJECTORDERRECORD",2904328755:"IFCPROJECTORDER",2744685151:"IFCPROCEDURE",3740093272:"IFCPORT",3724593414:"IFCPOLYLINE",4017108033:"IFCPLATETYPE",4231323485:"IFCPIPESEGMENTTYPE",804291784:"IFCPIPEFITTINGTYPE",3327091369:"IFCPERMIT",2382730787:"IFCPERFORMANCEHISTORY",2837617999:"IFCOUTLETTYPE",3425660407:"IFCORDERACTION",3588315303:"IFCOPENINGELEMENT",4143007308:"IFCOCCUPANT",1916936684:"IFCMOVE",977012517:"IFCMOTORCONNECTIONTYPE",3181161470:"IFCMEMBERTYPE",2108223431:"IFCMECHANICALFASTENERTYPE",377706215:"IFCMECHANICALFASTENER",2506943328:"IFCLINEARDIMENSION",1161773419:"IFCLIGHTFIXTURETYPE",1051575348:"IFCLAMPTYPE",3827777499:"IFCLABORRESOURCE",4288270099:"IFCJUNCTIONBOXTYPE",2391368822:"IFCINVENTORY",1806887404:"IFCHUMIDIFIERTYPE",1251058090:"IFCHEATEXCHANGERTYPE",2706460486:"IFCGROUP",3009204131:"IFCGRID",200128114:"IFCGASTERMINALTYPE",814719939:"IFCFURNITURESTANDARD",263784265:"IFCFURNISHINGELEMENT",3009222698:"IFCFLOWTREATMENTDEVICETYPE",2297155007:"IFCFLOWTERMINALTYPE",1339347760:"IFCFLOWSTORAGEDEVICETYPE",1834744321:"IFCFLOWSEGMENTTYPE",1482959167:"IFCFLOWMOVINGDEVICETYPE",3815607619:"IFCFLOWMETERTYPE",3198132628:"IFCFLOWFITTINGTYPE",3907093117:"IFCFLOWCONTROLLERTYPE",1287392070:"IFCFEATUREELEMENTSUBTRACTION",2143335405:"IFCFEATUREELEMENTADDITION",2827207264:"IFCFEATUREELEMENT",2489546625:"IFCFASTENERTYPE",647756555:"IFCFASTENER",3737207727:"IFCFACETEDBREPWITHVOIDS",807026263:"IFCFACETEDBREP",3390157468:"IFCEVAPORATORTYPE",3174744832:"IFCEVAPORATIVECOOLERTYPE",3272907226:"IFCEQUIPMENTSTANDARD",1962604670:"IFCEQUIPMENTELEMENT",2107101300:"IFCENERGYCONVERSIONDEVICETYPE",1704287377:"IFCELLIPSE",2590856083:"IFCELEMENTCOMPONENTTYPE",1623761950:"IFCELEMENTCOMPONENT",4123344466:"IFCELEMENTASSEMBLY",1758889154:"IFCELEMENT",360485395:"IFCELECTRICALBASEPROPERTIES",3849074793:"IFCDISTRIBUTIONFLOWELEMENTTYPE",3256556792:"IFCDISTRIBUTIONELEMENTTYPE",681481545:"IFCDIMENSIONCURVEDIRECTEDCALLOUT",1457835157:"IFCCURTAINWALLTYPE",3295246426:"IFCCREWRESOURCE",1916426348:"IFCCOVERINGTYPE",1419761937:"IFCCOSTSCHEDULE",3895139033:"IFCCOSTITEM",3293443760:"IFCCONTROL",2559216714:"IFCCONSTRUCTIONRESOURCE",2510884976:"IFCCONIC",3732776249:"IFCCOMPOSITECURVE",300633059:"IFCCOLUMNTYPE",2937912522:"IFCCIRCLEHOLLOWPROFILEDEF",3124254112:"IFCBUILDINGSTOREY",1950629157:"IFCBUILDINGELEMENTTYPE",4031249490:"IFCBUILDING",1260505505:"IFCBOUNDEDCURVE",3649129432:"IFCBOOLEANCLIPPINGRESULT",1334484129:"IFCBLOCK",3207858831:"IFCASYMMETRICISHAPEPROFILEDEF",1674181508:"IFCANNOTATION",2296667514:"IFCACTOR",2097647324:"IFCTRANSPORTELEMENTTYPE",3473067441:"IFCTASK",1580310250:"IFCSYSTEMFURNITUREELEMENTTYPE",4124788165:"IFCSURFACEOFREVOLUTION",2809605785:"IFCSURFACEOFLINEAREXTRUSION",2028607225:"IFCSURFACECURVESWEPTAREASOLID",4070609034:"IFCSTRUCTUREDDIMENSIONCALLOUT",2218152070:"IFCSTRUCTURALSURFACEMEMBERVARYING",3979015343:"IFCSTRUCTURALSURFACEMEMBER",3689010777:"IFCSTRUCTURALREACTION",530289379:"IFCSTRUCTURALMEMBER",3136571912:"IFCSTRUCTURALITEM",3544373492:"IFCSTRUCTURALACTIVITY",451544542:"IFCSPHERE",3893378262:"IFCSPATIALSTRUCTUREELEMENTTYPE",2706606064:"IFCSPATIALSTRUCTUREELEMENT",3626867408:"IFCRIGHTCIRCULARCYLINDER",4158566097:"IFCRIGHTCIRCULARCONE",1856042241:"IFCREVOLVEDAREASOLID",2914609552:"IFCRESOURCE",1401173127:"IFCRELVOIDSELEMENT",3451746338:"IFCRELSPACEBOUNDARY",366585022:"IFCRELSERVICESBUILDINGS",4122056220:"IFCRELSEQUENCE",1058617721:"IFCRELSCHEDULESCOSTITEMS",1245217292:"IFCRELREFERENCEDINSPATIALSTRUCTURE",750771296:"IFCRELPROJECTSELEMENT",202636808:"IFCRELOVERRIDESPROPERTIES",2051452291:"IFCRELOCCUPIESSPACES",3268803585:"IFCRELNESTS",4189434867:"IFCRELINTERACTIONREQUIREMENTS",279856033:"IFCRELFLOWCONTROLELEMENTS",3940055652:"IFCRELFILLSELEMENT",781010003:"IFCRELDEFINESBYTYPE",4186316022:"IFCRELDEFINESBYPROPERTIES",693640335:"IFCRELDEFINES",2551354335:"IFCRELDECOMPOSES",2802773753:"IFCRELCOVERSSPACES",886880790:"IFCRELCOVERSBLDGELEMENTS",3242617779:"IFCRELCONTAINEDINSPATIALSTRUCTURE",3678494232:"IFCRELCONNECTSWITHREALIZINGELEMENTS",504942748:"IFCRELCONNECTSWITHECCENTRICITY",1638771189:"IFCRELCONNECTSSTRUCTURALMEMBER",3912681535:"IFCRELCONNECTSSTRUCTURALELEMENT",2127690289:"IFCRELCONNECTSSTRUCTURALACTIVITY",3190031847:"IFCRELCONNECTSPORTS",4201705270:"IFCRELCONNECTSPORTTOELEMENT",3945020480:"IFCRELCONNECTSPATHELEMENTS",1204542856:"IFCRELCONNECTSELEMENTS",826625072:"IFCRELCONNECTS",2851387026:"IFCRELASSOCIATESPROFILEPROPERTIES",2655215786:"IFCRELASSOCIATESMATERIAL",3840914261:"IFCRELASSOCIATESLIBRARY",982818633:"IFCRELASSOCIATESDOCUMENT",2728634034:"IFCRELASSOCIATESCONSTRAINT",919958153:"IFCRELASSOCIATESCLASSIFICATION",4095574036:"IFCRELASSOCIATESAPPROVAL",1327628568:"IFCRELASSOCIATESAPPLIEDVALUE",1865459582:"IFCRELASSOCIATES",205026976:"IFCRELASSIGNSTORESOURCE",3372526763:"IFCRELASSIGNSTOPROJECTORDER",2857406711:"IFCRELASSIGNSTOPRODUCT",4278684876:"IFCRELASSIGNSTOPROCESS",1307041759:"IFCRELASSIGNSTOGROUP",2495723537:"IFCRELASSIGNSTOCONTROL",1683148259:"IFCRELASSIGNSTOACTOR",3939117080:"IFCRELASSIGNS",3454111270:"IFCRECTANGULARTRIMMEDSURFACE",2798486643:"IFCRECTANGULARPYRAMID",2770003689:"IFCRECTANGLEHOLLOWPROFILEDEF",3219374653:"IFCPROXY",1451395588:"IFCPROPERTYSET",4194566429:"IFCPROJECTIONCURVE",103090709:"IFCPROJECT",4208778838:"IFCPRODUCT",2945172077:"IFCPROCESS",220341763:"IFCPLANE",603570806:"IFCPLANARBOX",3566463478:"IFCPERMEABLECOVERINGPROPERTIES",3505215534:"IFCOFFSETCURVE3D",3388369263:"IFCOFFSETCURVE2D",3888040117:"IFCOBJECT",1425443689:"IFCMANIFOLDSOLIDBREP",1281925730:"IFCLINE",572779678:"IFCLSHAPEPROFILEDEF",1484403080:"IFCISHAPEPROFILEDEF",987898635:"IFCGEOMETRICCURVESET",1268542332:"IFCFURNITURETYPE",4238390223:"IFCFURNISHINGELEMENTTYPE",3455213021:"IFCFLUIDFLOWPROPERTIES",315944413:"IFCFILLAREASTYLETILES",4203026998:"IFCFILLAREASTYLETILESYMBOLWITHSTYLE",374418227:"IFCFILLAREASTYLEHATCHING",2047409740:"IFCFACEBASEDSURFACEMODEL",477187591:"IFCEXTRUDEDAREASOLID",80994333:"IFCENERGYPROPERTIES",2835456948:"IFCELLIPSEPROFILEDEF",2777663545:"IFCELEMENTARYSURFACE",339256511:"IFCELEMENTTYPE",1883228015:"IFCELEMENTQUANTITY",1472233963:"IFCEDGELOOP",4006246654:"IFCDRAUGHTINGPREDEFINEDCURVEFONT",445594917:"IFCDRAUGHTINGPREDEFINEDCOLOUR",3073041342:"IFCDRAUGHTINGCALLOUT",526551008:"IFCDOORSTYLE",1714330368:"IFCDOORPANELPROPERTIES",2963535650:"IFCDOORLININGPROPERTIES",32440307:"IFCDIRECTION",4054601972:"IFCDIMENSIONCURVETERMINATOR",606661476:"IFCDIMENSIONCURVE",693772133:"IFCDEFINEDSYMBOL",2827736869:"IFCCURVEBOUNDEDPLANE",2601014836:"IFCCURVE",2147822146:"IFCCSGSOLID",2506170314:"IFCCSGPRIMITIVE3D",194851669:"IFCCRANERAILFSHAPEPROFILEDEF",4133800736:"IFCCRANERAILASHAPEPROFILEDEF",2485617015:"IFCCOMPOSITECURVESEGMENT",2205249479:"IFCCLOSEDSHELL",1383045692:"IFCCIRCLEPROFILEDEF",1416205885:"IFCCARTESIANTRANSFORMATIONOPERATOR3DNONUNIFORM",3331915920:"IFCCARTESIANTRANSFORMATIONOPERATOR3D",3486308946:"IFCCARTESIANTRANSFORMATIONOPERATOR2DNONUNIFORM",3749851601:"IFCCARTESIANTRANSFORMATIONOPERATOR2D",59481748:"IFCCARTESIANTRANSFORMATIONOPERATOR",1123145078:"IFCCARTESIANPOINT",2898889636:"IFCCSHAPEPROFILEDEF",2713105998:"IFCBOXEDHALFSPACE",2581212453:"IFCBOUNDINGBOX",4182860854:"IFCBOUNDEDSURFACE",2736907675:"IFCBOOLEANRESULT",2740243338:"IFCAXIS2PLACEMENT3D",3125803723:"IFCAXIS2PLACEMENT2D",4261334040:"IFCAXIS1PLACEMENT",1302238472:"IFCANNOTATIONSURFACE",2265737646:"IFCANNOTATIONFILLAREAOCCURRENCE",669184980:"IFCANNOTATIONFILLAREA",3288037868:"IFCANNOTATIONCURVEOCCURRENCE",2543172580:"IFCZSHAPEPROFILEDEF",1299126871:"IFCWINDOWSTYLE",512836454:"IFCWINDOWPANELPROPERTIES",336235671:"IFCWINDOWLININGPROPERTIES",2759199220:"IFCVERTEXLOOP",1417489154:"IFCVECTOR",427810014:"IFCUSHAPEPROFILEDEF",2347495698:"IFCTYPEPRODUCT",1628702193:"IFCTYPEOBJECT",1345879162:"IFCTWODIRECTIONREPEATFACTOR",2715220739:"IFCTRAPEZIUMPROFILEDEF",3124975700:"IFCTEXTLITERALWITHEXTENT",4282788508:"IFCTEXTLITERAL",3028897424:"IFCTERMINATORSYMBOL",3071757647:"IFCTSHAPEPROFILEDEF",230924584:"IFCSWEPTSURFACE",1260650574:"IFCSWEPTDISKSOLID",2247615214:"IFCSWEPTAREASOLID",1878645084:"IFCSURFACESTYLERENDERING",2513912981:"IFCSURFACE",2233826070:"IFCSUBEDGE",3653947884:"IFCSTRUCTURALSTEELPROFILEPROPERTIES",3843319758:"IFCSTRUCTURALPROFILEPROPERTIES",1190533807:"IFCSTRUCTURALLOADSINGLEFORCEWARPING",1597423693:"IFCSTRUCTURALLOADSINGLEFORCE",1973038258:"IFCSTRUCTURALLOADSINGLEDISPLACEMENTDISTORTION",2473145415:"IFCSTRUCTURALLOADSINGLEDISPLACEMENT",2668620305:"IFCSTRUCTURALLOADPLANARFORCE",1595516126:"IFCSTRUCTURALLOADLINEARFORCE",390701378:"IFCSPACETHERMALLOADPROPERTIES",1202362311:"IFCSOUNDVALUE",2485662743:"IFCSOUNDPROPERTIES",723233188:"IFCSOLIDMODEL",2609359061:"IFCSLIPPAGECONNECTIONCONDITION",4124623270:"IFCSHELLBASEDSURFACEMODEL",2411513650:"IFCSERVICELIFEFACTOR",1509187699:"IFCSECTIONEDSPINE",2778083089:"IFCROUNDEDRECTANGLEPROFILEDEF",478536968:"IFCRELATIONSHIP",3765753017:"IFCREINFORCEMENTDEFINITIONPROPERTIES",3413951693:"IFCREGULARTIMESERIES",3615266464:"IFCRECTANGLEPROFILEDEF",110355661:"IFCPROPERTYTABLEVALUE",3650150729:"IFCPROPERTYSINGLEVALUE",3357820518:"IFCPROPERTYSETDEFINITION",941946838:"IFCPROPERTYREFERENCEVALUE",2752243245:"IFCPROPERTYLISTVALUE",4166981789:"IFCPROPERTYENUMERATEDVALUE",1680319473:"IFCPROPERTYDEFINITION",871118103:"IFCPROPERTYBOUNDEDVALUE",673634403:"IFCPRODUCTDEFINITIONSHAPE",179317114:"IFCPREDEFINEDPOINTMARKERSYMBOL",433424934:"IFCPREDEFINEDDIMENSIONSYMBOL",2559016684:"IFCPREDEFINEDCURVEFONT",759155922:"IFCPREDEFINEDCOLOUR",2775532180:"IFCPOLYGONALBOUNDEDHALFSPACE",2924175390:"IFCPOLYLOOP",1423911732:"IFCPOINTONSURFACE",4022376103:"IFCPOINTONCURVE",2067069095:"IFCPOINT",1663979128:"IFCPLANAREXTENT",2004835150:"IFCPLACEMENT",597895409:"IFCPIXELTEXTURE",3021840470:"IFCPHYSICALCOMPLEXQUANTITY",2519244187:"IFCPATH",2529465313:"IFCPARAMETERIZEDPROFILEDEF",1029017970:"IFCORIENTEDEDGE",2665983363:"IFCOPENSHELL",2833995503:"IFCONEDIRECTIONREPEATFACTOR",219451334:"IFCOBJECTDEFINITION",1430189142:"IFCMECHANICALCONCRETEMATERIALPROPERTIES",2022407955:"IFCMATERIALDEFINITIONREPRESENTATION",2347385850:"IFCMAPPEDITEM",1008929658:"IFCLOOP",2624227202:"IFCLOCALPLACEMENT",3422422726:"IFCLIGHTSOURCESPOT",1520743889:"IFCLIGHTSOURCEPOSITIONAL",4266656042:"IFCLIGHTSOURCEGONIOMETRIC",2604431987:"IFCLIGHTSOURCEDIRECTIONAL",125510826:"IFCLIGHTSOURCEAMBIENT",1402838566:"IFCLIGHTSOURCE",3741457305:"IFCIRREGULARTIMESERIES",3905492369:"IFCIMAGETEXTURE",2445078500:"IFCHYGROSCOPICMATERIALPROPERTIES",812098782:"IFCHALFSPACESOLID",178086475:"IFCGRIDPLACEMENT",3590301190:"IFCGEOMETRICSET",4142052618:"IFCGEOMETRICREPRESENTATIONSUBCONTEXT",2453401579:"IFCGEOMETRICREPRESENTATIONITEM",3448662350:"IFCGEOMETRICREPRESENTATIONCONTEXT",1446786286:"IFCGENERALPROFILEPROPERTIES",803998398:"IFCGENERALMATERIALPROPERTIES",3857492461:"IFCFUELPROPERTIES",738692330:"IFCFILLAREASTYLE",4219587988:"IFCFAILURECONNECTIONCONDITION",3008276851:"IFCFACESURFACE",803316827:"IFCFACEOUTERBOUND",1809719519:"IFCFACEBOUND",2556980723:"IFCFACE",1860660968:"IFCEXTENDEDMATERIALPROPERTIES",476780140:"IFCEDGECURVE",3900360178:"IFCEDGE",4170525392:"IFCDRAUGHTINGPREDEFINEDTEXTFONT",3732053477:"IFCDOCUMENTREFERENCE",1694125774:"IFCDIMENSIONPAIR",2273265877:"IFCDIMENSIONCALLOUTRELATIONSHIP",3632507154:"IFCDERIVEDPROFILEDEF",3800577675:"IFCCURVESTYLE",2889183280:"IFCCONVERSIONBASEDUNIT",3050246964:"IFCCONTEXTDEPENDENTUNIT",45288368:"IFCCONNECTIONPOINTECCENTRICITY",1981873012:"IFCCONNECTIONCURVEGEOMETRY",370225590:"IFCCONNECTEDFACESET",1485152156:"IFCCOMPOSITEPROFILEDEF",2542286263:"IFCCOMPLEXPROPERTY",776857604:"IFCCOLOURRGB",647927063:"IFCCLASSIFICATIONREFERENCE",3150382593:"IFCCENTERLINEPROFILEDEF",616511568:"IFCBLOBTEXTURE",2705031697:"IFCARBITRARYPROFILEDEFWITHVOIDS",1310608509:"IFCARBITRARYOPENPROFILEDEF",3798115385:"IFCARBITRARYCLOSEDPROFILEDEF",2297822566:"IFCANNOTATIONTEXTOCCURRENCE",3612888222:"IFCANNOTATIONSYMBOLOCCURRENCE",962685235:"IFCANNOTATIONSURFACEOCCURRENCE",2442683028:"IFCANNOTATIONOCCURRENCE",1065908215:"IFCWATERPROPERTIES",891718957:"IFCVIRTUALGRIDINTERSECTION",1907098498:"IFCVERTEXPOINT",3304826586:"IFCVERTEXBASEDTEXTUREMAP",2799835756:"IFCVERTEX",180925521:"IFCUNITASSIGNMENT",1735638870:"IFCTOPOLOGYREPRESENTATION",1377556343:"IFCTOPOLOGICALREPRESENTATIONITEM",581633288:"IFCTIMESERIESVALUE",1718945513:"IFCTIMESERIESREFERENCERELATIONSHIP",3101149627:"IFCTIMESERIES",3317419933:"IFCTHERMALMATERIALPROPERTIES",1210645708:"IFCTEXTUREVERTEX",2552916305:"IFCTEXTUREMAP",1742049831:"IFCTEXTURECOORDINATEGENERATOR",280115917:"IFCTEXTURECOORDINATE",1484833681:"IFCTEXTSTYLEWITHBOXCHARACTERISTICS",1640371178:"IFCTEXTSTYLETEXTMODEL",2636378356:"IFCTEXTSTYLEFORDEFINEDFONT",1983826977:"IFCTEXTSTYLEFONTMODEL",1447204868:"IFCTEXTSTYLE",912023232:"IFCTELECOMADDRESS",531007025:"IFCTABLEROW",985171141:"IFCTABLE",1290481447:"IFCSYMBOLSTYLE",626085974:"IFCSURFACETEXTURE",1351298697:"IFCSURFACESTYLEWITHTEXTURES",846575682:"IFCSURFACESTYLESHADING",1607154358:"IFCSURFACESTYLEREFRACTION",3303107099:"IFCSURFACESTYLELIGHTING",1300840506:"IFCSURFACESTYLE",3049322572:"IFCSTYLEDREPRESENTATION",3958052878:"IFCSTYLEDITEM",2830218821:"IFCSTYLEMODEL",3408363356:"IFCSTRUCTURALLOADTEMPERATURE",2525727697:"IFCSTRUCTURALLOADSTATIC",2162789131:"IFCSTRUCTURALLOAD",2273995522:"IFCSTRUCTURALCONNECTIONCONDITION",3692461612:"IFCSIMPLEPROPERTY",4240577450:"IFCSHAPEREPRESENTATION",3982875396:"IFCSHAPEMODEL",867548509:"IFCSHAPEASPECT",4165799628:"IFCSECTIONREINFORCEMENTPROPERTIES",2042790032:"IFCSECTIONPROPERTIES",448429030:"IFCSIUNIT",2341007311:"IFCROOT",3679540991:"IFCRIBPLATEPROFILEPROPERTIES",1660063152:"IFCREPRESENTATIONMAP",3008791417:"IFCREPRESENTATIONITEM",3377609919:"IFCREPRESENTATIONCONTEXT",1076942058:"IFCREPRESENTATION",1222501353:"IFCRELAXATION",1580146022:"IFCREINFORCEMENTBARPROPERTIES",2692823254:"IFCREFERENCESVALUEDOCUMENT",825690147:"IFCQUANTITYWEIGHT",2405470396:"IFCQUANTITYVOLUME",3252649465:"IFCQUANTITYTIME",931644368:"IFCQUANTITYLENGTH",2093928680:"IFCQUANTITYCOUNT",2044713172:"IFCQUANTITYAREA",3710013099:"IFCPROPERTYENUMERATION",148025276:"IFCPROPERTYDEPENDENCYRELATIONSHIP",3896028662:"IFCPROPERTYCONSTRAINTRELATIONSHIP",2598011224:"IFCPROPERTY",2802850158:"IFCPROFILEPROPERTIES",3958567839:"IFCPROFILEDEF",2267347899:"IFCPRODUCTSOFCOMBUSTIONPROPERTIES",2095639259:"IFCPRODUCTREPRESENTATION",2417041796:"IFCPRESENTATIONSTYLEASSIGNMENT",3119450353:"IFCPRESENTATIONSTYLE",1304840413:"IFCPRESENTATIONLAYERWITHSTYLE",2022622350:"IFCPRESENTATIONLAYERASSIGNMENT",1775413392:"IFCPREDEFINEDTEXTFONT",3213052703:"IFCPREDEFINEDTERMINATORSYMBOL",990879717:"IFCPREDEFINEDSYMBOL",3727388367:"IFCPREDEFINEDITEM",3355820592:"IFCPOSTALADDRESS",2226359599:"IFCPHYSICALSIMPLEQUANTITY",2483315170:"IFCPHYSICALQUANTITY",101040310:"IFCPERSONANDORGANIZATION",2077209135:"IFCPERSON",1207048766:"IFCOWNERHISTORY",1411181986:"IFCORGANIZATIONRELATIONSHIP",4251960020:"IFCORGANIZATION",1227763645:"IFCOPTICALMATERIALPROPERTIES",2251480897:"IFCOBJECTIVE",3701648758:"IFCOBJECTPLACEMENT",1918398963:"IFCNAMEDUNIT",2706619895:"IFCMONETARYUNIT",3368373690:"IFCMETRIC",677618848:"IFCMECHANICALSTEELMATERIALPROPERTIES",4256014907:"IFCMECHANICALMATERIALPROPERTIES",2597039031:"IFCMEASUREWITHUNIT",3265635763:"IFCMATERIALPROPERTIES",2199411900:"IFCMATERIALLIST",1303795690:"IFCMATERIALLAYERSETUSAGE",3303938423:"IFCMATERIALLAYERSET",248100487:"IFCMATERIALLAYER",1847130766:"IFCMATERIALCLASSIFICATIONRELATIONSHIP",1838606355:"IFCMATERIAL",30780891:"IFCLOCALTIME",1566485204:"IFCLIGHTINTENSITYDISTRIBUTION",4162380809:"IFCLIGHTDISTRIBUTIONDATA",3452421091:"IFCLIBRARYREFERENCE",2655187982:"IFCLIBRARYINFORMATION",3020489413:"IFCIRREGULARTIMESERIESVALUE",852622518:"IFCGRIDAXIS",3548104201:"IFCEXTERNALLYDEFINEDTEXTFONT",3207319532:"IFCEXTERNALLYDEFINEDSYMBOL",1040185647:"IFCEXTERNALLYDEFINEDSURFACESTYLE",2242383968:"IFCEXTERNALLYDEFINEDHATCHSTYLE",3200245327:"IFCEXTERNALREFERENCE",1648886627:"IFCENVIRONMENTALIMPACTVALUE",3796139169:"IFCDRAUGHTINGCALLOUTRELATIONSHIP",770865208:"IFCDOCUMENTINFORMATIONRELATIONSHIP",1154170062:"IFCDOCUMENTINFORMATION",1376555844:"IFCDOCUMENTELECTRONICFORMAT",2949456006:"IFCDIMENSIONALEXPONENTS",1045800335:"IFCDERIVEDUNITELEMENT",1765591967:"IFCDERIVEDUNIT",1072939445:"IFCDATEANDTIME",3510044353:"IFCCURVESTYLEFONTPATTERN",2367409068:"IFCCURVESTYLEFONTANDSCALING",1105321065:"IFCCURVESTYLEFONT",539742890:"IFCCURRENCYRELATIONSHIP",602808272:"IFCCOSTVALUE",1065062679:"IFCCOORDINATEDUNIVERSALTIMEOFFSET",347226245:"IFCCONSTRAINTRELATIONSHIP",613356794:"IFCCONSTRAINTCLASSIFICATIONRELATIONSHIP",1658513725:"IFCCONSTRAINTAGGREGATIONRELATIONSHIP",1959218052:"IFCCONSTRAINT",2732653382:"IFCCONNECTIONSURFACEGEOMETRY",4257277454:"IFCCONNECTIONPORTGEOMETRY",2614616156:"IFCCONNECTIONPOINTGEOMETRY",2859738748:"IFCCONNECTIONGEOMETRY",3264961684:"IFCCOLOURSPECIFICATION",3639012971:"IFCCLASSIFICATIONNOTATIONFACET",938368621:"IFCCLASSIFICATIONNOTATION",1098599126:"IFCCLASSIFICATIONITEMRELATIONSHIP",1767535486:"IFCCLASSIFICATIONITEM",747523909:"IFCCLASSIFICATION",622194075:"IFCCALENDARDATE",2069777674:"IFCBOUNDARYNODECONDITIONWARPING",1387855156:"IFCBOUNDARYNODECONDITION",3367102660:"IFCBOUNDARYFACECONDITION",1560379544:"IFCBOUNDARYEDGECONDITION",4037036970:"IFCBOUNDARYCONDITION",3869604511:"IFCAPPROVALRELATIONSHIP",390851274:"IFCAPPROVALPROPERTYRELATIONSHIP",2080292479:"IFCAPPROVALACTORRELATIONSHIP",130549933:"IFCAPPROVAL",1110488051:"IFCAPPLIEDVALUERELATIONSHIP",411424972:"IFCAPPLIEDVALUE",639542469:"IFCAPPLICATION",618182010:"IFCADDRESS",3630933823:"IFCACTORROLE",599546466:"FILE_DESCRIPTION",1390159747:"FILE_NAME",1109904537:"FILE_SCHEMA"};let xa=class qb{static async getUnits(e){var t,s,n;const{IFCUNITASSIGNMENT:r}=Pi,o=await e.getAllPropertiesOfType(r);if(!o)return 1;const a=Object.keys(o),l=o[parseInt(a[0],10)];for(const h of l.Units){if(h.value===void 0||h.value===null)continue;const u=await e.getProperties(h.value);if(!u||!u.UnitType||!u.UnitType.value||u.UnitType.value!=="LENGTHUNIT")continue;let c=1,d=1;return u.Name.value==="METRE"&&(d=1),u.Name.value==="FOOT"&&(d=.3048),((t=u.Prefix)==null?void 0:t.value)==="MILLI"?c=.001:((s=u.Prefix)==null?void 0:s.value)==="CENTI"?c=.01:((n=u.Prefix)==null?void 0:n.value)==="DECI"&&(c=.1),d*c}return 1}static async findItemByGuid(e,t){var s;const n=e.getAllPropertiesIDs();for(const r of n){const o=await e.getProperties(r);if(o&&((s=o.GlobalId)==null?void 0:s.value)===t)return o}return null}static async getRelationMap(e,t,s){var n;const r=s??(async()=>{}),o={},a=e.getAllPropertiesIDs();for(const l of a){const h=await e.getProperties(l);if(!h)continue;const u=h.type===t,c=Object.keys(h).find(g=>g.startsWith("Relating")),d=Object.keys(h).find(g=>g.startsWith("Related"));if(!(u&&c&&d))continue;const f=await e.getProperties((n=h[c])==null?void 0:n.value),p=h[d];if(!f||!p||!(p&&Array.isArray(p)))continue;const m=p.map(g=>g.value);await r(f.expressID,m),o[f.expressID]=m}return o}static async getQsetQuantities(e,t,s){const n=s??(()=>{}),r=await e.getProperties(t);return!r||r.type!==Dr?null:(r.Quantities??[{}]).map(o=>(o.value&&n(o.value),o.value)).filter(o=>o!==null)}static async getPsetProps(e,t,s){const n=s??(()=>{}),r=await e.getProperties(t);return!r||r.type!==ks?null:(r.HasProperties??[{}]).map(o=>(o.value&&n(o.value),o.value)).filter(o=>o!==null)}static async getPsetRel(e,t){var s;if(!await e.getProperties(t))return null;const n=await e.getAllPropertiesOfType(El);if(!n)return null;const r=Object.values(n);let o=null;for(const a of r)((s=a.RelatingPropertyDefinition)==null?void 0:s.value)===t&&(o=a.expressID);return o}static async getQsetRel(e,t){return qb.getPsetRel(e,t)}static async getEntityName(e,t){var s;const n=await e.getProperties(t);if(!n)return{key:null,name:null};const r=Object.keys(n).find(a=>a.endsWith("Name"))??null,o=r?(s=n[r])==null?void 0:s.value:null;return{key:r,name:o}}static async getQuantityValue(e,t){const s=await e.getProperties(t);if(!s)return{key:null,value:null};const n=Object.keys(s).find(o=>o.endsWith("Value"))??null;let r;return n===null||s[n]===void 0||s[n]===null?r=null:r=s[n].value,{key:n,value:r}}static isRel(e){return bc[e].startsWith("IFCREL")}static async attributeExists(e,t,s){const n=await e.getProperties(t);return n?Object.keys(n).includes(s):!1}static async groupEntitiesByType(e,t){var s;const n=new Map;for(const r of t){const o=await e.getProperties(r);if(!o)continue;const a=o.type;n.get(a)||n.set(a,new Set),(s=n.get(a))==null||s.add(r)}return n}};const n_={IFCURIREFERENCE:"IfcUriReference",IFCTIME:"IfcTime",IFCTEMPERATURERATEOFCHANGEMEASURE:"IfcTemperatureRateOfChangeMeasure",IFCSOUNDPRESSURELEVELMEASURE:"IfcSoundPressureLevelMeasure",IFCSOUNDPOWERLEVELMEASURE:"IfcSoundPowerLevelMeasure",IFCPROPERTYSETDEFINITIONSET:"IfcPropertySetDefinitionSet",IFCPOSITIVEINTEGER:"IfcPositiveInteger",IFCNONNEGATIVELENGTHMEASURE:"IfcNonNegativeLengthMeasure",IFCLINEINDEX:"IfcLineIndex",IFCLANGUAGEID:"IfcLanguageId",IFCDURATION:"IfcDuration",IFCDAYINWEEKNUMBER:"IfcDayInWeekNumber",IFCDATETIME:"IfcDateTime",IFCDATE:"IfcDate",IFCCARDINALPOINTREFERENCE:"IfcCardinalPointReference",IFCBINARY:"IfcBinary",IFCAREADENSITYMEASURE:"IfcAreaDensityMeasure",IFCARCINDEX:"IfcArcIndex",IFCYEARNUMBER:"IfcYearNumber",IFCWARPINGMOMENTMEASURE:"IfcWarpingMomentMeasure",IFCWARPINGCONSTANTMEASURE:"IfcWarpingConstantMeasure",IFCVOLUMETRICFLOWRATEMEASURE:"IfcVolumetricFlowRateMeasure",IFCVOLUMEMEASURE:"IfcVolumeMeasure",IFCVAPORPERMEABILITYMEASURE:"IfcVaporPermeabilityMeasure",IFCTORQUEMEASURE:"IfcTorqueMeasure",IFCTIMESTAMP:"IfcTimestamp",IFCTIMEMEASURE:"IfcTimeMeasure",IFCTHERMODYNAMICTEMPERATUREMEASURE:"IfcThermodynamicTemperatureMeasure",IFCTHERMALTRANSMITTANCEMEASURE:"IfcThermalTransmittanceMeasure",IFCTHERMALRESISTANCEMEASURE:"IfcThermalResistanceMeasure",IFCTHERMALEXPANSIONCOEFFICIENTMEASURE:"IfcThermalExpansionCoefficientMeasure",IFCTHERMALCONDUCTIVITYMEASURE:"IfcThermalConductivityMeasure",IFCTHERMALADMITTANCEMEASURE:"IfcThermalAdmittanceMeasure",IFCTEXTTRANSFORMATION:"IfcTextTransformation",IFCTEXTFONTNAME:"IfcTextFontName",IFCTEXTDECORATION:"IfcTextDecoration",IFCTEXTALIGNMENT:"IfcTextAlignment",IFCTEXT:"IfcText",IFCTEMPERATUREGRADIENTMEASURE:"IfcTemperatureGradientMeasure",IFCSPECULARROUGHNESS:"IfcSpecularRoughness",IFCSPECULAREXPONENT:"IfcSpecularExponent",IFCSPECIFICHEATCAPACITYMEASURE:"IfcSpecificHeatCapacityMeasure",IFCSOUNDPRESSUREMEASURE:"IfcSoundPressureMeasure",IFCSOUNDPOWERMEASURE:"IfcSoundPowerMeasure",IFCSOLIDANGLEMEASURE:"IfcSolidAngleMeasure",IFCSHEARMODULUSMEASURE:"IfcShearModulusMeasure",IFCSECTIONALAREAINTEGRALMEASURE:"IfcSectionalAreaIntegralMeasure",IFCSECTIONMODULUSMEASURE:"IfcSectionModulusMeasure",IFCSECONDINMINUTE:"IfcSecondInMinute",IFCROTATIONALSTIFFNESSMEASURE:"IfcRotationalStiffnessMeasure",IFCROTATIONALMASSMEASURE:"IfcRotationalMassMeasure",IFCROTATIONALFREQUENCYMEASURE:"IfcRotationalFrequencyMeasure",IFCREAL:"IfcReal",IFCRATIOMEASURE:"IfcRatioMeasure",IFCRADIOACTIVITYMEASURE:"IfcRadioactivityMeasure",IFCPRESSUREMEASURE:"IfcPressureMeasure",IFCPRESENTABLETEXT:"IfcPresentableText",IFCPOWERMEASURE:"IfcPowerMeasure",IFCPOSITIVERATIOMEASURE:"IfcPositiveRatioMeasure",IFCPOSITIVEPLANEANGLEMEASURE:"IfcPositivePlaneAngleMeasure",IFCPOSITIVELENGTHMEASURE:"IfcPositiveLengthMeasure",IFCPLANEANGLEMEASURE:"IfcPlaneAngleMeasure",IFCPLANARFORCEMEASURE:"IfcPlanarForceMeasure",IFCPARAMETERVALUE:"IfcParameterValue",IFCPHMEASURE:"IfcPhMeasure",IFCNUMERICMEASURE:"IfcNumericMeasure",IFCNORMALISEDRATIOMEASURE:"IfcNormalisedRatioMeasure",IFCMONTHINYEARNUMBER:"IfcMonthInYearNumber",IFCMONETARYMEASURE:"IfcMonetaryMeasure",IFCMOMENTOFINERTIAMEASURE:"IfcMomentOfInertiaMeasure",IFCMOLECULARWEIGHTMEASURE:"IfcMolecularWeightMeasure",IFCMOISTUREDIFFUSIVITYMEASURE:"IfcMoistureDiffusivityMeasure",IFCMODULUSOFSUBGRADEREACTIONMEASURE:"IfcModulusOfSubgradeReactionMeasure",IFCMODULUSOFROTATIONALSUBGRADEREACTIONMEASURE:"IfcModulusOfRotationalSubgradeReactionMeasure",IFCMODULUSOFLINEARSUBGRADEREACTIONMEASURE:"IfcModulusOfLinearSubgradeReactionMeasure",IFCMODULUSOFELASTICITYMEASURE:"IfcModulusOfElasticityMeasure",IFCMINUTEINHOUR:"IfcMinuteInHour",IFCMASSPERLENGTHMEASURE:"IfcMassPerLengthMeasure",IFCMASSMEASURE:"IfcMassMeasure",IFCMASSFLOWRATEMEASURE:"IfcMassFlowRateMeasure",IFCMASSDENSITYMEASURE:"IfcMassDensityMeasure",IFCMAGNETICFLUXMEASURE:"IfcMagneticFluxMeasure",IFCMAGNETICFLUXDENSITYMEASURE:"IfcMagneticFluxDensityMeasure",IFCLUMINOUSINTENSITYMEASURE:"IfcLuminousIntensityMeasure",IFCLUMINOUSINTENSITYDISTRIBUTIONMEASURE:"IfcLuminousIntensityDistributionMeasure",IFCLUMINOUSFLUXMEASURE:"IfcLuminousFluxMeasure",IFCLOGICAL:"IfcLogical",IFCLINEARVELOCITYMEASURE:"IfcLinearVelocityMeasure",IFCLINEARSTIFFNESSMEASURE:"IfcLinearStiffnessMeasure",IFCLINEARMOMENTMEASURE:"IfcLinearMomentMeasure",IFCLINEARFORCEMEASURE:"IfcLinearForceMeasure",IFCLENGTHMEASURE:"IfcLengthMeasure",IFCLABEL:"IfcLabel",IFCKINEMATICVISCOSITYMEASURE:"IfcKinematicViscosityMeasure",IFCISOTHERMALMOISTURECAPACITYMEASURE:"IfcIsothermalMoistureCapacityMeasure",IFCIONCONCENTRATIONMEASURE:"IfcIonConcentrationMeasure",IFCINTEGERCOUNTRATEMEASURE:"IfcIntegerCountRateMeasure",IFCINTEGER:"IfcInteger",IFCINDUCTANCEMEASURE:"IfcInductanceMeasure",IFCILLUMINANCEMEASURE:"IfcIlluminanceMeasure",IFCIDENTIFIER:"IfcIdentifier",IFCHOURINDAY:"IfcHourInDay",IFCHEATINGVALUEMEASURE:"IfcHeatingValueMeasure",IFCHEATFLUXDENSITYMEASURE:"IfcHeatFluxDensityMeasure",IFCGLOBALLYUNIQUEID:"IfcGloballyUniqueId",IFCFREQUENCYMEASURE:"IfcFrequencyMeasure",IFCFORCEMEASURE:"IfcForceMeasure",IFCFONTWEIGHT:"IfcFontWeight",IFCFONTVARIANT:"IfcFontVariant",IFCFONTSTYLE:"IfcFontStyle",IFCENERGYMEASURE:"IfcEnergyMeasure",IFCELECTRICVOLTAGEMEASURE:"IfcElectricVoltageMeasure",IFCELECTRICRESISTANCEMEASURE:"IfcElectricResistanceMeasure",IFCELECTRICCURRENTMEASURE:"IfcElectricCurrentMeasure",IFCELECTRICCONDUCTANCEMEASURE:"IfcElectricConductanceMeasure",IFCELECTRICCHARGEMEASURE:"IfcElectricChargeMeasure",IFCELECTRICCAPACITANCEMEASURE:"IfcElectricCapacitanceMeasure",IFCDYNAMICVISCOSITYMEASURE:"IfcDynamicViscosityMeasure",IFCDOSEEQUIVALENTMEASURE:"IfcDoseEquivalentMeasure",IFCDIMENSIONCOUNT:"IfcDimensionCount",IFCDESCRIPTIVEMEASURE:"IfcDescriptiveMeasure",IFCDAYLIGHTSAVINGHOUR:"IfcDaylightSavingHour",IFCDAYINMONTHNUMBER:"IfcDayInMonthNumber",IFCCURVATUREMEASURE:"IfcCurvatureMeasure",IFCCOUNTMEASURE:"IfcCountMeasure",IFCCONTEXTDEPENDENTMEASURE:"IfcContextDependentMeasure",IFCCOMPOUNDPLANEANGLEMEASURE:"IfcCompoundPlaneAngleMeasure",IFCCOMPLEXNUMBER:"IfcComplexNumber",IFCBOXALIGNMENT:"IfcBoxAlignment",IFCBOOLEAN:"IfcBoolean",IFCAREAMEASURE:"IfcAreaMeasure",IFCANGULARVELOCITYMEASURE:"IfcAngularVelocityMeasure",IFCAMOUNTOFSUBSTANCEMEASURE:"IfcAmountOfSubstanceMeasure",IFCACCELERATIONMEASURE:"IfcAccelerationMeasure",IFCABSORBEDDOSEMEASURE:"IfcAbsorbedDoseMeasure",IFCGEOSLICE:"IfcGeoSlice",IFCGEOMODEL:"IfcGeoModel",IFCELECTRICFLOWTREATMENTDEVICE:"IfcElectricFlowTreatmentDevice",IFCDISTRIBUTIONBOARD:"IfcDistributionBoard",IFCCONVEYORSEGMENT:"IfcConveyorSegment",IFCCAISSONFOUNDATION:"IfcCaissonFoundation",IFCBOREHOLE:"IfcBorehole",IFCBEARING:"IfcBearing",IFCALIGNMENT:"IfcAlignment",IFCTRACKELEMENT:"IfcTrackElement",IFCSIGNAL:"IfcSignal",IFCREINFORCEDSOIL:"IfcReinforcedSoil",IFCRAIL:"IfcRail",IFCPAVEMENT:"IfcPavement",IFCNAVIGATIONELEMENT:"IfcNavigationElement",IFCMOORINGDEVICE:"IfcMooringDevice",IFCMOBILETELECOMMUNICATIONSAPPLIANCE:"IfcMobileTelecommunicationsAppliance",IFCLIQUIDTERMINAL:"IfcLiquidTerminal",IFCLINEARPOSITIONINGELEMENT:"IfcLinearPositioningElement",IFCKERB:"IfcKerb",IFCGEOTECHNICALASSEMBLY:"IfcGeotechnicalAssembly",IFCELECTRICFLOWTREATMENTDEVICETYPE:"IfcElectricFlowTreatmentDeviceType",IFCEARTHWORKSFILL:"IfcEarthworksFill",IFCEARTHWORKSELEMENT:"IfcEarthworksElement",IFCEARTHWORKSCUT:"IfcEarthworksCut",IFCDISTRIBUTIONBOARDTYPE:"IfcDistributionBoardType",IFCDEEPFOUNDATION:"IfcDeepFoundation",IFCCOURSE:"IfcCourse",IFCCONVEYORSEGMENTTYPE:"IfcConveyorSegmentType",IFCCAISSONFOUNDATIONTYPE:"IfcCaissonFoundationType",IFCBUILTSYSTEM:"IfcBuiltSystem",IFCBUILTELEMENT:"IfcBuiltElement",IFCBRIDGEPART:"IfcBridgePart",IFCBRIDGE:"IfcBridge",IFCBEARINGTYPE:"IfcBearingType",IFCALIGNMENTVERTICAL:"IfcAlignmentVertical",IFCALIGNMENTSEGMENT:"IfcAlignmentSegment",IFCALIGNMENTHORIZONTAL:"IfcAlignmentHorizontal",IFCALIGNMENTCANT:"IfcAlignmentCant",IFCVIBRATIONDAMPERTYPE:"IfcVibrationDamperType",IFCVIBRATIONDAMPER:"IfcVibrationDamper",IFCVEHICLE:"IfcVehicle",IFCTRANSPORTATIONDEVICE:"IfcTransportationDevice",IFCTRACKELEMENTTYPE:"IfcTrackElementType",IFCTENDONCONDUITTYPE:"IfcTendonConduitType",IFCTENDONCONDUIT:"IfcTendonConduit",IFCSINESPIRAL:"IfcSineSpiral",IFCSIGNALTYPE:"IfcSignalType",IFCSIGNTYPE:"IfcSignType",IFCSIGN:"IfcSign",IFCSEVENTHORDERPOLYNOMIALSPIRAL:"IfcSeventhOrderPolynomialSpiral",IFCSEGMENTEDREFERENCECURVE:"IfcSegmentedReferenceCurve",IFCSECONDORDERPOLYNOMIALSPIRAL:"IfcSecondOrderPolynomialSpiral",IFCROADPART:"IfcRoadPart",IFCROAD:"IfcRoad",IFCRELADHERESTOELEMENT:"IfcRelAdheresToElement",IFCREFERENT:"IfcReferent",IFCRAILWAYPART:"IfcRailwayPart",IFCRAILWAY:"IfcRailway",IFCRAILTYPE:"IfcRailType",IFCPOSITIONINGELEMENT:"IfcPositioningElement",IFCPAVEMENTTYPE:"IfcPavementType",IFCNAVIGATIONELEMENTTYPE:"IfcNavigationElementType",IFCMOORINGDEVICETYPE:"IfcMooringDeviceType",IFCMOBILETELECOMMUNICATIONSAPPLIANCETYPE:"IfcMobileTelecommunicationsApplianceType",IFCMARINEPART:"IfcMarinePart",IFCMARINEFACILITY:"IfcMarineFacility",IFCLIQUIDTERMINALTYPE:"IfcLiquidTerminalType",IFCLINEARELEMENT:"IfcLinearElement",IFCKERBTYPE:"IfcKerbType",IFCIMPACTPROTECTIONDEVICETYPE:"IfcImpactProtectionDeviceType",IFCIMPACTPROTECTIONDEVICE:"IfcImpactProtectionDevice",IFCGRADIENTCURVE:"IfcGradientCurve",IFCGEOTECHNICALSTRATUM:"IfcGeotechnicalStratum",IFCGEOTECHNICALELEMENT:"IfcGeotechnicalElement",IFCFACILITYPARTCOMMON:"IfcFacilityPartCommon",IFCFACILITYPART:"IfcFacilityPart",IFCFACILITY:"IfcFacility",IFCDIRECTRIXDERIVEDREFERENCESWEPTAREASOLID:"IfcDirectrixDerivedReferenceSweptAreaSolid",IFCDEEPFOUNDATIONTYPE:"IfcDeepFoundationType",IFCCOURSETYPE:"IfcCourseType",IFCCOSINESPIRAL:"IfcCosineSpiral",IFCCLOTHOID:"IfcClothoid",IFCBUILTELEMENTTYPE:"IfcBuiltElementType",IFCVEHICLETYPE:"IfcVehicleType",IFCTRIANGULATEDIRREGULARNETWORK:"IfcTriangulatedIrregularNetwork",IFCTRANSPORTATIONDEVICETYPE:"IfcTransportationDeviceType",IFCTHIRDORDERPOLYNOMIALSPIRAL:"IfcThirdOrderPolynomialSpiral",IFCSPIRAL:"IfcSpiral",IFCSECTIONEDSURFACE:"IfcSectionedSurface",IFCSECTIONEDSOLIDHORIZONTAL:"IfcSectionedSolidHorizontal",IFCSECTIONEDSOLID:"IfcSectionedSolid",IFCRELPOSITIONS:"IfcRelPositions",IFCRELASSOCIATESPROFILEDEF:"IfcRelAssociatesProfileDef",IFCPOLYNOMIALCURVE:"IfcPolynomialCurve",IFCOFFSETCURVEBYDISTANCES:"IfcOffsetCurveByDistances",IFCOFFSETCURVE:"IfcOffsetCurve",IFCINDEXEDPOLYGONALTEXTUREMAP:"IfcIndexedPolygonalTextureMap",IFCDIRECTRIXCURVESWEPTAREASOLID:"IfcDirectrixCurveSweptAreaSolid",IFCCURVESEGMENT:"IfcCurveSegment",IFCAXIS2PLACEMENTLINEAR:"IfcAxis2PlacementLinear",IFCSEGMENT:"IfcSegment",IFCPOINTBYDISTANCEEXPRESSION:"IfcPointByDistanceExpression",IFCOPENCROSSPROFILEDEF:"IfcOpenCrossProfileDef",IFCLINEARPLACEMENT:"IfcLinearPlacement",IFCALIGNMENTHORIZONTALSEGMENT:"IfcAlignmentHorizontalSegment",IFCALIGNMENTCANTSEGMENT:"IfcAlignmentCantSegment",IFCTEXTURECOORDINATEINDICESWITHVOIDS:"IfcTextureCoordinateIndicesWithVoids",IFCTEXTURECOORDINATEINDICES:"IfcTextureCoordinateIndices",IFCQUANTITYNUMBER:"IfcQuantityNumber",IFCALIGNMENTVERTICALSEGMENT:"IfcAlignmentVerticalSegment",IFCALIGNMENTPARAMETERSEGMENT:"IfcAlignmentParameterSegment",IFCCONTROLLER:"IfcController",IFCALARM:"IfcAlarm",IFCACTUATOR:"IfcActuator",IFCUNITARYCONTROLELEMENT:"IfcUnitaryControlElement",IFCSENSOR:"IfcSensor",IFCPROTECTIVEDEVICETRIPPINGUNIT:"IfcProtectiveDeviceTrippingUnit",IFCFLOWINSTRUMENT:"IfcFlowInstrument",IFCFIRESUPPRESSIONTERMINAL:"IfcFireSuppressionTerminal",IFCFILTER:"IfcFilter",IFCFAN:"IfcFan",IFCELECTRICTIMECONTROL:"IfcElectricTimeControl",IFCELECTRICMOTOR:"IfcElectricMotor",IFCELECTRICGENERATOR:"IfcElectricGenerator",IFCELECTRICFLOWSTORAGEDEVICE:"IfcElectricFlowStorageDevice",IFCELECTRICDISTRIBUTIONBOARD:"IfcElectricDistributionBoard",IFCELECTRICAPPLIANCE:"IfcElectricAppliance",IFCDUCTSILENCER:"IfcDuctSilencer",IFCDUCTSEGMENT:"IfcDuctSegment",IFCDUCTFITTING:"IfcDuctFitting",IFCDISTRIBUTIONCIRCUIT:"IfcDistributionCircuit",IFCDAMPER:"IfcDamper",IFCCOOLINGTOWER:"IfcCoolingTower",IFCCOOLEDBEAM:"IfcCooledBeam",IFCCONDENSER:"IfcCondenser",IFCCOMPRESSOR:"IfcCompressor",IFCCOMMUNICATIONSAPPLIANCE:"IfcCommunicationsAppliance",IFCCOIL:"IfcCoil",IFCCHILLER:"IfcChiller",IFCCABLESEGMENT:"IfcCableSegment",IFCCABLEFITTING:"IfcCableFitting",IFCCABLECARRIERSEGMENT:"IfcCableCarrierSegment",IFCCABLECARRIERFITTING:"IfcCableCarrierFitting",IFCBURNER:"IfcBurner",IFCBOILER:"IfcBoiler",IFCBEAMSTANDARDCASE:"IfcBeamStandardCase",IFCAUDIOVISUALAPPLIANCE:"IfcAudioVisualAppliance",IFCAIRTOAIRHEATRECOVERY:"IfcAirToAirHeatRecovery",IFCAIRTERMINALBOX:"IfcAirTerminalBox",IFCAIRTERMINAL:"IfcAirTerminal",IFCWINDOWSTANDARDCASE:"IfcWindowStandardCase",IFCWASTETERMINAL:"IfcWasteTerminal",IFCWALLELEMENTEDCASE:"IfcWallElementedCase",IFCVALVE:"IfcValve",IFCUNITARYEQUIPMENT:"IfcUnitaryEquipment",IFCUNITARYCONTROLELEMENTTYPE:"IfcUnitaryControlElementType",IFCTUBEBUNDLE:"IfcTubeBundle",IFCTRANSFORMER:"IfcTransformer",IFCTANK:"IfcTank",IFCSWITCHINGDEVICE:"IfcSwitchingDevice",IFCSTRUCTURALLOADCASE:"IfcStructuralLoadCase",IFCSTACKTERMINAL:"IfcStackTerminal",IFCSPACEHEATER:"IfcSpaceHeater",IFCSOLARDEVICE:"IfcSolarDevice",IFCSLABSTANDARDCASE:"IfcSlabStandardCase",IFCSLABELEMENTEDCASE:"IfcSlabElementedCase",IFCSHADINGDEVICE:"IfcShadingDevice",IFCSANITARYTERMINAL:"IfcSanitaryTerminal",IFCREINFORCINGBARTYPE:"IfcReinforcingBarType",IFCRATIONALBSPLINECURVEWITHKNOTS:"IfcRationalBSplineCurveWithKnots",IFCPUMP:"IfcPump",IFCPROTECTIVEDEVICETRIPPINGUNITTYPE:"IfcProtectiveDeviceTrippingUnitType",IFCPROTECTIVEDEVICE:"IfcProtectiveDevice",IFCPLATESTANDARDCASE:"IfcPlateStandardCase",IFCPIPESEGMENT:"IfcPipeSegment",IFCPIPEFITTING:"IfcPipeFitting",IFCOUTLET:"IfcOutlet",IFCOUTERBOUNDARYCURVE:"IfcOuterBoundaryCurve",IFCMOTORCONNECTION:"IfcMotorConnection",IFCMEMBERSTANDARDCASE:"IfcMemberStandardCase",IFCMEDICALDEVICE:"IfcMedicalDevice",IFCLIGHTFIXTURE:"IfcLightFixture",IFCLAMP:"IfcLamp",IFCJUNCTIONBOX:"IfcJunctionBox",IFCINTERCEPTOR:"IfcInterceptor",IFCHUMIDIFIER:"IfcHumidifier",IFCHEATEXCHANGER:"IfcHeatExchanger",IFCFLOWMETER:"IfcFlowMeter",IFCEXTERNALSPATIALELEMENT:"IfcExternalSpatialElement",IFCEVAPORATOR:"IfcEvaporator",IFCEVAPORATIVECOOLER:"IfcEvaporativeCooler",IFCENGINE:"IfcEngine",IFCELECTRICDISTRIBUTIONBOARDTYPE:"IfcElectricDistributionBoardType",IFCDOORSTANDARDCASE:"IfcDoorStandardCase",IFCDISTRIBUTIONSYSTEM:"IfcDistributionSystem",IFCCOMMUNICATIONSAPPLIANCETYPE:"IfcCommunicationsApplianceType",IFCCOLUMNSTANDARDCASE:"IfcColumnStandardCase",IFCCIVILELEMENT:"IfcCivilElement",IFCCHIMNEY:"IfcChimney",IFCCABLEFITTINGTYPE:"IfcCableFittingType",IFCBURNERTYPE:"IfcBurnerType",IFCBUILDINGSYSTEM:"IfcBuildingSystem",IFCBUILDINGELEMENTPARTTYPE:"IfcBuildingElementPartType",IFCBOUNDARYCURVE:"IfcBoundaryCurve",IFCBSPLINECURVEWITHKNOTS:"IfcBSplineCurveWithKnots",IFCAUDIOVISUALAPPLIANCETYPE:"IfcAudioVisualApplianceType",IFCWORKCALENDAR:"IfcWorkCalendar",IFCWINDOWTYPE:"IfcWindowType",IFCVOIDINGFEATURE:"IfcVoidingFeature",IFCVIBRATIONISOLATOR:"IfcVibrationIsolator",IFCTENDONTYPE:"IfcTendonType",IFCTENDONANCHORTYPE:"IfcTendonAnchorType",IFCSYSTEMFURNITUREELEMENT:"IfcSystemFurnitureElement",IFCSURFACEFEATURE:"IfcSurfaceFeature",IFCSTRUCTURALSURFACEACTION:"IfcStructuralSurfaceAction",IFCSTRUCTURALCURVEREACTION:"IfcStructuralCurveReaction",IFCSTRUCTURALCURVEACTION:"IfcStructuralCurveAction",IFCSTAIRTYPE:"IfcStairType",IFCSOLARDEVICETYPE:"IfcSolarDeviceType",IFCSHADINGDEVICETYPE:"IfcShadingDeviceType",IFCSEAMCURVE:"IfcSeamCurve",IFCROOFTYPE:"IfcRoofType",IFCREINFORCINGMESHTYPE:"IfcReinforcingMeshType",IFCREINFORCINGELEMENTTYPE:"IfcReinforcingElementType",IFCRATIONALBSPLINESURFACEWITHKNOTS:"IfcRationalBSplineSurfaceWithKnots",IFCRAMPTYPE:"IfcRampType",IFCPOLYGONALFACESET:"IfcPolygonalFaceSet",IFCPILETYPE:"IfcPileType",IFCOPENINGSTANDARDCASE:"IfcOpeningStandardCase",IFCMEDICALDEVICETYPE:"IfcMedicalDeviceType",IFCINTERSECTIONCURVE:"IfcIntersectionCurve",IFCINTERCEPTORTYPE:"IfcInterceptorType",IFCINDEXEDPOLYCURVE:"IfcIndexedPolyCurve",IFCGEOGRAPHICELEMENT:"IfcGeographicElement",IFCFURNITURE:"IfcFurniture",IFCFOOTINGTYPE:"IfcFootingType",IFCEXTERNALSPATIALSTRUCTUREELEMENT:"IfcExternalSpatialStructureElement",IFCEVENT:"IfcEvent",IFCENGINETYPE:"IfcEngineType",IFCELEMENTASSEMBLYTYPE:"IfcElementAssemblyType",IFCDOORTYPE:"IfcDoorType",IFCCYLINDRICALSURFACE:"IfcCylindricalSurface",IFCCONSTRUCTIONPRODUCTRESOURCETYPE:"IfcConstructionProductResourceType",IFCCONSTRUCTIONMATERIALRESOURCETYPE:"IfcConstructionMaterialResourceType",IFCCONSTRUCTIONEQUIPMENTRESOURCETYPE:"IfcConstructionEquipmentResourceType",IFCCOMPOSITECURVEONSURFACE:"IfcCompositeCurveOnSurface",IFCCOMPLEXPROPERTYTEMPLATE:"IfcComplexPropertyTemplate",IFCCIVILELEMENTTYPE:"IfcCivilElementType",IFCCHIMNEYTYPE:"IfcChimneyType",IFCBSPLINESURFACEWITHKNOTS:"IfcBSplineSurfaceWithKnots",IFCBSPLINESURFACE:"IfcBSplineSurface",IFCADVANCEDBREPWITHVOIDS:"IfcAdvancedBrepWithVoids",IFCADVANCEDBREP:"IfcAdvancedBrep",IFCTRIANGULATEDFACESET:"IfcTriangulatedFaceSet",IFCTOROIDALSURFACE:"IfcToroidalSurface",IFCTESSELLATEDFACESET:"IfcTessellatedFaceSet",IFCTASKTYPE:"IfcTaskType",IFCSURFACECURVE:"IfcSurfaceCurve",IFCSUBCONTRACTRESOURCETYPE:"IfcSubContractResourceType",IFCSTRUCTURALSURFACEREACTION:"IfcStructuralSurfaceReaction",IFCSPHERICALSURFACE:"IfcSphericalSurface",IFCSPATIALZONETYPE:"IfcSpatialZoneType",IFCSPATIALZONE:"IfcSpatialZone",IFCSPATIALELEMENTTYPE:"IfcSpatialElementType",IFCSPATIALELEMENT:"IfcSpatialElement",IFCSIMPLEPROPERTYTEMPLATE:"IfcSimplePropertyTemplate",IFCREVOLVEDAREASOLIDTAPERED:"IfcRevolvedAreaSolidTapered",IFCREPARAMETRISEDCOMPOSITECURVESEGMENT:"IfcReparametrisedCompositeCurveSegment",IFCRELSPACEBOUNDARY2NDLEVEL:"IfcRelSpaceBoundary2ndLevel",IFCRELSPACEBOUNDARY1STLEVEL:"IfcRelSpaceBoundary1stLevel",IFCRELINTERFERESELEMENTS:"IfcRelInterferesElements",IFCRELDEFINESBYTEMPLATE:"IfcRelDefinesByTemplate",IFCRELDEFINESBYOBJECT:"IfcRelDefinesByObject",IFCRELDECLARES:"IfcRelDeclares",IFCRELASSIGNSTOGROUPBYFACTOR:"IfcRelAssignsToGroupByFactor",IFCPROPERTYTEMPLATE:"IfcPropertyTemplate",IFCPROPERTYSETTEMPLATE:"IfcPropertySetTemplate",IFCPROJECTLIBRARY:"IfcProjectLibrary",IFCPROCEDURETYPE:"IfcProcedureType",IFCPREDEFINEDPROPERTYSET:"IfcPredefinedPropertySet",IFCPCURVE:"IfcPCurve",IFCLABORRESOURCETYPE:"IfcLaborResourceType",IFCINDEXEDPOLYGONALFACEWITHVOIDS:"IfcIndexedPolygonalFaceWithVoids",IFCINDEXEDPOLYGONALFACE:"IfcIndexedPolygonalFace",IFCGEOGRAPHICELEMENTTYPE:"IfcGeographicElementType",IFCFIXEDREFERENCESWEPTAREASOLID:"IfcFixedReferenceSweptAreaSolid",IFCEXTRUDEDAREASOLIDTAPERED:"IfcExtrudedAreaSolidTapered",IFCEVENTTYPE:"IfcEventType",IFCCURVEBOUNDEDSURFACE:"IfcCurveBoundedSurface",IFCCREWRESOURCETYPE:"IfcCrewResourceType",IFCCONTEXT:"IfcContext",IFCCONSTRUCTIONRESOURCETYPE:"IfcConstructionResourceType",IFCCARTESIANPOINTLIST3D:"IfcCartesianPointList3D",IFCCARTESIANPOINTLIST2D:"IfcCartesianPointList2D",IFCCARTESIANPOINTLIST:"IfcCartesianPointList",IFCADVANCEDFACE:"IfcAdvancedFace",IFCTYPERESOURCE:"IfcTypeResource",IFCTYPEPROCESS:"IfcTypeProcess",IFCTESSELLATEDITEM:"IfcTessellatedItem",IFCSWEPTDISKSOLIDPOLYGONAL:"IfcSweptDiskSolidPolygonal",IFCRESOURCETIME:"IfcResourceTime",IFCRESOURCECONSTRAINTRELATIONSHIP:"IfcResourceConstraintRelationship",IFCRESOURCEAPPROVALRELATIONSHIP:"IfcResourceApprovalRelationship",IFCQUANTITYSET:"IfcQuantitySet",IFCPROPERTYTEMPLATEDEFINITION:"IfcPropertyTemplateDefinition",IFCPREDEFINEDPROPERTIES:"IfcPredefinedProperties",IFCMIRROREDPROFILEDEF:"IfcMirroredProfileDef",IFCMATERIALRELATIONSHIP:"IfcMaterialRelationship",IFCMATERIALPROFILESETUSAGETAPERING:"IfcMaterialProfileSetUsageTapering",IFCMATERIALPROFILESETUSAGE:"IfcMaterialProfileSetUsage",IFCMATERIALCONSTITUENTSET:"IfcMaterialConstituentSet",IFCMATERIALCONSTITUENT:"IfcMaterialConstituent",IFCLAGTIME:"IfcLagTime",IFCINDEXEDTRIANGLETEXTUREMAP:"IfcIndexedTriangleTextureMap",IFCINDEXEDTEXTUREMAP:"IfcIndexedTextureMap",IFCINDEXEDCOLOURMAP:"IfcIndexedColourMap",IFCEXTERNALREFERENCERELATIONSHIP:"IfcExternalReferenceRelationship",IFCEXTENDEDPROPERTIES:"IfcExtendedProperties",IFCEVENTTIME:"IfcEventTime",IFCCONVERSIONBASEDUNITWITHOFFSET:"IfcConversionBasedUnitWithOffset",IFCCOLOURRGBLIST:"IfcColourRgbList",IFCWORKTIME:"IfcWorkTime",IFCTIMEPERIOD:"IfcTimePeriod",IFCTEXTUREVERTEXLIST:"IfcTextureVertexList",IFCTASKTIMERECURRING:"IfcTaskTimeRecurring",IFCTASKTIME:"IfcTaskTime",IFCTABLECOLUMN:"IfcTableColumn",IFCSURFACEREINFORCEMENTAREA:"IfcSurfaceReinforcementArea",IFCSTRUCTURALLOADORRESULT:"IfcStructuralLoadOrResult",IFCSTRUCTURALLOADCONFIGURATION:"IfcStructuralLoadConfiguration",IFCSCHEDULINGTIME:"IfcSchedulingTime",IFCRESOURCELEVELRELATIONSHIP:"IfcResourceLevelRelationship",IFCREFERENCE:"IfcReference",IFCRECURRENCEPATTERN:"IfcRecurrencePattern",IFCPROPERTYABSTRACTION:"IfcPropertyAbstraction",IFCPROJECTEDCRS:"IfcProjectedCrs",IFCPRESENTATIONITEM:"IfcPresentationItem",IFCMATERIALUSAGEDEFINITION:"IfcMaterialUsageDefinition",IFCMATERIALPROFILEWITHOFFSETS:"IfcMaterialProfileWithOffsets",IFCMATERIALPROFILESET:"IfcMaterialProfileSet",IFCMATERIALPROFILE:"IfcMaterialProfile",IFCMATERIALLAYERWITHOFFSETS:"IfcMaterialLayerWithOffsets",IFCMATERIALDEFINITION:"IfcMaterialDefinition",IFCMAPCONVERSION:"IfcMapConversion",IFCEXTERNALINFORMATION:"IfcExternalInformation",IFCCOORDINATEREFERENCESYSTEM:"IfcCoordinateReferenceSystem",IFCCOORDINATEOPERATION:"IfcCoordinateOperation",IFCCONNECTIONVOLUMEGEOMETRY:"IfcConnectionVolumeGeometry",IFCREINFORCINGBAR:"IfcReinforcingBar",IFCELECTRICDISTRIBUTIONPOINT:"IfcElectricDistributionPoint",IFCDISTRIBUTIONCONTROLELEMENT:"IfcDistributionControlElement",IFCDISTRIBUTIONCHAMBERELEMENT:"IfcDistributionChamberElement",IFCCONTROLLERTYPE:"IfcControllerType",IFCCHAMFEREDGEFEATURE:"IfcChamferEdgeFeature",IFCBEAM:"IfcBeam",IFCALARMTYPE:"IfcAlarmType",IFCACTUATORTYPE:"IfcActuatorType",IFCWINDOW:"IfcWindow",IFCWALLSTANDARDCASE:"IfcWallStandardCase",IFCWALL:"IfcWall",IFCVIBRATIONISOLATORTYPE:"IfcVibrationIsolatorType",IFCTENDONANCHOR:"IfcTendonAnchor",IFCTENDON:"IfcTendon",IFCSTRUCTURALANALYSISMODEL:"IfcStructuralAnalysisModel",IFCSTAIRFLIGHT:"IfcStairFlight",IFCSTAIR:"IfcStair",IFCSLAB:"IfcSlab",IFCSENSORTYPE:"IfcSensorType",IFCROUNDEDEDGEFEATURE:"IfcRoundedEdgeFeature",IFCROOF:"IfcRoof",IFCREINFORCINGMESH:"IfcReinforcingMesh",IFCREINFORCINGELEMENT:"IfcReinforcingElement",IFCRATIONALBEZIERCURVE:"IfcRationalBezierCurve",IFCRAMPFLIGHT:"IfcRampFlight",IFCRAMP:"IfcRamp",IFCRAILING:"IfcRailing",IFCPLATE:"IfcPlate",IFCPILE:"IfcPile",IFCMEMBER:"IfcMember",IFCFOOTING:"IfcFooting",IFCFLOWTREATMENTDEVICE:"IfcFlowTreatmentDevice",IFCFLOWTERMINAL:"IfcFlowTerminal",IFCFLOWSTORAGEDEVICE:"IfcFlowStorageDevice",IFCFLOWSEGMENT:"IfcFlowSegment",IFCFLOWMOVINGDEVICE:"IfcFlowMovingDevice",IFCFLOWINSTRUMENTTYPE:"IfcFlowInstrumentType",IFCFLOWFITTING:"IfcFlowFitting",IFCFLOWCONTROLLER:"IfcFlowController",IFCFIRESUPPRESSIONTERMINALTYPE:"IfcFireSuppressionTerminalType",IFCFILTERTYPE:"IfcFilterType",IFCFANTYPE:"IfcFanType",IFCENERGYCONVERSIONDEVICE:"IfcEnergyConversionDevice",IFCELECTRICALELEMENT:"IfcElectricalElement",IFCELECTRICALCIRCUIT:"IfcElectricalCircuit",IFCELECTRICTIMECONTROLTYPE:"IfcElectricTimeControlType",IFCELECTRICMOTORTYPE:"IfcElectricMotorType",IFCELECTRICHEATERTYPE:"IfcElectricHeaterType",IFCELECTRICGENERATORTYPE:"IfcElectricGeneratorType",IFCELECTRICFLOWSTORAGEDEVICETYPE:"IfcElectricFlowStorageDeviceType",IFCELECTRICAPPLIANCETYPE:"IfcElectricApplianceType",IFCEDGEFEATURE:"IfcEdgeFeature",IFCDUCTSILENCERTYPE:"IfcDuctSilencerType",IFCDUCTSEGMENTTYPE:"IfcDuctSegmentType",IFCDUCTFITTINGTYPE:"IfcDuctFittingType",IFCDOOR:"IfcDoor",IFCDISTRIBUTIONPORT:"IfcDistributionPort",IFCDISTRIBUTIONFLOWELEMENT:"IfcDistributionFlowElement",IFCDISTRIBUTIONELEMENT:"IfcDistributionElement",IFCDISTRIBUTIONCONTROLELEMENTTYPE:"IfcDistributionControlElementType",IFCDISTRIBUTIONCHAMBERELEMENTTYPE:"IfcDistributionChamberElementType",IFCDISCRETEACCESSORYTYPE:"IfcDiscreteAccessoryType",IFCDISCRETEACCESSORY:"IfcDiscreteAccessory",IFCDIAMETERDIMENSION:"IfcDiameterDimension",IFCDAMPERTYPE:"IfcDamperType",IFCCURTAINWALL:"IfcCurtainWall",IFCCOVERING:"IfcCovering",IFCCOOLINGTOWERTYPE:"IfcCoolingTowerType",IFCCOOLEDBEAMTYPE:"IfcCooledBeamType",IFCCONSTRUCTIONPRODUCTRESOURCE:"IfcConstructionProductResource",IFCCONSTRUCTIONMATERIALRESOURCE:"IfcConstructionMaterialResource",IFCCONSTRUCTIONEQUIPMENTRESOURCE:"IfcConstructionEquipmentResource",IFCCONDITIONCRITERION:"IfcConditionCriterion",IFCCONDITION:"IfcCondition",IFCCONDENSERTYPE:"IfcCondenserType",IFCCOMPRESSORTYPE:"IfcCompressorType",IFCCOLUMN:"IfcColumn",IFCCOILTYPE:"IfcCoilType",IFCCIRCLE:"IfcCircle",IFCCHILLERTYPE:"IfcChillerType",IFCCABLESEGMENTTYPE:"IfcCableSegmentType",IFCCABLECARRIERSEGMENTTYPE:"IfcCableCarrierSegmentType",IFCCABLECARRIERFITTINGTYPE:"IfcCableCarrierFittingType",IFCBUILDINGELEMENTPROXYTYPE:"IfcBuildingElementProxyType",IFCBUILDINGELEMENTPROXY:"IfcBuildingElementProxy",IFCBUILDINGELEMENTPART:"IfcBuildingElementPart",IFCBUILDINGELEMENTCOMPONENT:"IfcBuildingElementComponent",IFCBUILDINGELEMENT:"IfcBuildingElement",IFCBOILERTYPE:"IfcBoilerType",IFCBEZIERCURVE:"IfcBezierCurve",IFCBEAMTYPE:"IfcBeamType",IFCBSPLINECURVE:"IfcBSplineCurve",IFCASSET:"IfcAsset",IFCANGULARDIMENSION:"IfcAngularDimension",IFCAIRTOAIRHEATRECOVERYTYPE:"IfcAirToAirHeatRecoveryType",IFCAIRTERMINALTYPE:"IfcAirTerminalType",IFCAIRTERMINALBOXTYPE:"IfcAirTerminalBoxType",IFCACTIONREQUEST:"IfcActionRequest",IFC2DCOMPOSITECURVE:"Ifc2DCompositeCurve",IFCZONE:"IfcZone",IFCWORKSCHEDULE:"IfcWorkSchedule",IFCWORKPLAN:"IfcWorkPlan",IFCWORKCONTROL:"IfcWorkControl",IFCWASTETERMINALTYPE:"IfcWasteTerminalType",IFCWALLTYPE:"IfcWallType",IFCVIRTUALELEMENT:"IfcVirtualElement",IFCVALVETYPE:"IfcValveType",IFCUNITARYEQUIPMENTTYPE:"IfcUnitaryEquipmentType",IFCTUBEBUNDLETYPE:"IfcTubeBundleType",IFCTRIMMEDCURVE:"IfcTrimmedCurve",IFCTRANSPORTELEMENT:"IfcTransportElement",IFCTRANSFORMERTYPE:"IfcTransformerType",IFCTIMESERIESSCHEDULE:"IfcTimeSeriesSchedule",IFCTANKTYPE:"IfcTankType",IFCSYSTEM:"IfcSystem",IFCSWITCHINGDEVICETYPE:"IfcSwitchingDeviceType",IFCSUBCONTRACTRESOURCE:"IfcSubContractResource",IFCSTRUCTURALSURFACECONNECTION:"IfcStructuralSurfaceConnection",IFCSTRUCTURALRESULTGROUP:"IfcStructuralResultGroup",IFCSTRUCTURALPOINTREACTION:"IfcStructuralPointReaction",IFCSTRUCTURALPOINTCONNECTION:"IfcStructuralPointConnection",IFCSTRUCTURALPOINTACTION:"IfcStructuralPointAction",IFCSTRUCTURALPLANARACTIONVARYING:"IfcStructuralPlanarActionVarying",IFCSTRUCTURALPLANARACTION:"IfcStructuralPlanarAction",IFCSTRUCTURALLOADGROUP:"IfcStructuralLoadGroup",IFCSTRUCTURALLINEARACTIONVARYING:"IfcStructuralLinearActionVarying",IFCSTRUCTURALLINEARACTION:"IfcStructuralLinearAction",IFCSTRUCTURALCURVEMEMBERVARYING:"IfcStructuralCurveMemberVarying",IFCSTRUCTURALCURVEMEMBER:"IfcStructuralCurveMember",IFCSTRUCTURALCURVECONNECTION:"IfcStructuralCurveConnection",IFCSTRUCTURALCONNECTION:"IfcStructuralConnection",IFCSTRUCTURALACTION:"IfcStructuralAction",IFCSTAIRFLIGHTTYPE:"IfcStairFlightType",IFCSTACKTERMINALTYPE:"IfcStackTerminalType",IFCSPACETYPE:"IfcSpaceType",IFCSPACEPROGRAM:"IfcSpaceProgram",IFCSPACEHEATERTYPE:"IfcSpaceHeaterType",IFCSPACE:"IfcSpace",IFCSLABTYPE:"IfcSlabType",IFCSITE:"IfcSite",IFCSERVICELIFE:"IfcServiceLife",IFCSCHEDULETIMECONTROL:"IfcScheduleTimeControl",IFCSANITARYTERMINALTYPE:"IfcSanitaryTerminalType",IFCRELASSIGNSTASKS:"IfcRelAssignsTasks",IFCRELAGGREGATES:"IfcRelAggregates",IFCRAMPFLIGHTTYPE:"IfcRampFlightType",IFCRAILINGTYPE:"IfcRailingType",IFCRADIUSDIMENSION:"IfcRadiusDimension",IFCPUMPTYPE:"IfcPumpType",IFCPROTECTIVEDEVICETYPE:"IfcProtectiveDeviceType",IFCPROJECTIONELEMENT:"IfcProjectionElement",IFCPROJECTORDERRECORD:"IfcProjectOrderRecord",IFCPROJECTORDER:"IfcProjectOrder",IFCPROCEDURE:"IfcProcedure",IFCPORT:"IfcPort",IFCPOLYLINE:"IfcPolyline",IFCPLATETYPE:"IfcPlateType",IFCPIPESEGMENTTYPE:"IfcPipeSegmentType",IFCPIPEFITTINGTYPE:"IfcPipeFittingType",IFCPERMIT:"IfcPermit",IFCPERFORMANCEHISTORY:"IfcPerformanceHistory",IFCOUTLETTYPE:"IfcOutletType",IFCORDERACTION:"IfcOrderAction",IFCOPENINGELEMENT:"IfcOpeningElement",IFCOCCUPANT:"IfcOccupant",IFCMOVE:"IfcMove",IFCMOTORCONNECTIONTYPE:"IfcMotorConnectionType",IFCMEMBERTYPE:"IfcMemberType",IFCMECHANICALFASTENERTYPE:"IfcMechanicalFastenerType",IFCMECHANICALFASTENER:"IfcMechanicalFastener",IFCLINEARDIMENSION:"IfcLinearDimension",IFCLIGHTFIXTURETYPE:"IfcLightFixtureType",IFCLAMPTYPE:"IfcLampType",IFCLABORRESOURCE:"IfcLaborResource",IFCJUNCTIONBOXTYPE:"IfcJunctionBoxType",IFCINVENTORY:"IfcInventory",IFCHUMIDIFIERTYPE:"IfcHumidifierType",IFCHEATEXCHANGERTYPE:"IfcHeatExchangerType",IFCGROUP:"IfcGroup",IFCGRID:"IfcGrid",IFCGASTERMINALTYPE:"IfcGasTerminalType",IFCFURNITURESTANDARD:"IfcFurnitureStandard",IFCFURNISHINGELEMENT:"IfcFurnishingElement",IFCFLOWTREATMENTDEVICETYPE:"IfcFlowTreatmentDeviceType",IFCFLOWTERMINALTYPE:"IfcFlowTerminalType",IFCFLOWSTORAGEDEVICETYPE:"IfcFlowStorageDeviceType",IFCFLOWSEGMENTTYPE:"IfcFlowSegmentType",IFCFLOWMOVINGDEVICETYPE:"IfcFlowMovingDeviceType",IFCFLOWMETERTYPE:"IfcFlowMeterType",IFCFLOWFITTINGTYPE:"IfcFlowFittingType",IFCFLOWCONTROLLERTYPE:"IfcFlowControllerType",IFCFEATUREELEMENTSUBTRACTION:"IfcFeatureElementSubtraction",IFCFEATUREELEMENTADDITION:"IfcFeatureElementAddition",IFCFEATUREELEMENT:"IfcFeatureElement",IFCFASTENERTYPE:"IfcFastenerType",IFCFASTENER:"IfcFastener",IFCFACETEDBREPWITHVOIDS:"IfcFacetedBrepWithVoids",IFCFACETEDBREP:"IfcFacetedBrep",IFCEVAPORATORTYPE:"IfcEvaporatorType",IFCEVAPORATIVECOOLERTYPE:"IfcEvaporativeCoolerType",IFCEQUIPMENTSTANDARD:"IfcEquipmentStandard",IFCEQUIPMENTELEMENT:"IfcEquipmentElement",IFCENERGYCONVERSIONDEVICETYPE:"IfcEnergyConversionDeviceType",IFCELLIPSE:"IfcEllipse",IFCELEMENTCOMPONENTTYPE:"IfcElementComponentType",IFCELEMENTCOMPONENT:"IfcElementComponent",IFCELEMENTASSEMBLY:"IfcElementAssembly",IFCELEMENT:"IfcElement",IFCELECTRICALBASEPROPERTIES:"IfcElectricalBaseProperties",IFCDISTRIBUTIONFLOWELEMENTTYPE:"IfcDistributionFlowElementType",IFCDISTRIBUTIONELEMENTTYPE:"IfcDistributionElementType",IFCDIMENSIONCURVEDIRECTEDCALLOUT:"IfcDimensionCurveDirectedCallout",IFCCURTAINWALLTYPE:"IfcCurtainWallType",IFCCREWRESOURCE:"IfcCrewResource",IFCCOVERINGTYPE:"IfcCoveringType",IFCCOSTSCHEDULE:"IfcCostSchedule",IFCCOSTITEM:"IfcCostItem",IFCCONTROL:"IfcControl",IFCCONSTRUCTIONRESOURCE:"IfcConstructionResource",IFCCONIC:"IfcConic",IFCCOMPOSITECURVE:"IfcCompositeCurve",IFCCOLUMNTYPE:"IfcColumnType",IFCCIRCLEHOLLOWPROFILEDEF:"IfcCircleHollowProfileDef",IFCBUILDINGSTOREY:"IfcBuildingStorey",IFCBUILDINGELEMENTTYPE:"IfcBuildingElementType",IFCBUILDING:"IfcBuilding",IFCBOUNDEDCURVE:"IfcBoundedCurve",IFCBOOLEANCLIPPINGRESULT:"IfcBooleanClippingResult",IFCBLOCK:"IfcBlock",IFCASYMMETRICISHAPEPROFILEDEF:"IfcAsymmetricIShapeProfileDef",IFCANNOTATION:"IfcAnnotation",IFCACTOR:"IfcActor",IFCTRANSPORTELEMENTTYPE:"IfcTransportElementType",IFCTASK:"IfcTask",IFCSYSTEMFURNITUREELEMENTTYPE:"IfcSystemFurnitureElementType",IFCSURFACEOFREVOLUTION:"IfcSurfaceOfRevolution",IFCSURFACEOFLINEAREXTRUSION:"IfcSurfaceOfLinearExtrusion",IFCSURFACECURVESWEPTAREASOLID:"IfcSurfaceCurveSweptAreaSolid",IFCSTRUCTUREDDIMENSIONCALLOUT:"IfcStructuredDimensionCallout",IFCSTRUCTURALSURFACEMEMBERVARYING:"IfcStructuralSurfaceMemberVarying",IFCSTRUCTURALSURFACEMEMBER:"IfcStructuralSurfaceMember",IFCSTRUCTURALREACTION:"IfcStructuralReaction",IFCSTRUCTURALMEMBER:"IfcStructuralMember",IFCSTRUCTURALITEM:"IfcStructuralItem",IFCSTRUCTURALACTIVITY:"IfcStructuralActivity",IFCSPHERE:"IfcSphere",IFCSPATIALSTRUCTUREELEMENTTYPE:"IfcSpatialStructureElementType",IFCSPATIALSTRUCTUREELEMENT:"IfcSpatialStructureElement",IFCRIGHTCIRCULARCYLINDER:"IfcRightCircularCylinder",IFCRIGHTCIRCULARCONE:"IfcRightCircularCone",IFCREVOLVEDAREASOLID:"IfcRevolvedAreaSolid",IFCRESOURCE:"IfcResource",IFCRELVOIDSELEMENT:"IfcRelVoidsElement",IFCRELSPACEBOUNDARY:"IfcRelSpaceBoundary",IFCRELSERVICESBUILDINGS:"IfcRelServicesBuildings",IFCRELSEQUENCE:"IfcRelSequence",IFCRELSCHEDULESCOSTITEMS:"IfcRelSchedulesCostItems",IFCRELREFERENCEDINSPATIALSTRUCTURE:"IfcRelReferencedInSpatialStructure",IFCRELPROJECTSELEMENT:"IfcRelProjectsElement",IFCRELOVERRIDESPROPERTIES:"IfcRelOverridesProperties",IFCRELOCCUPIESSPACES:"IfcRelOccupiesSpaces",IFCRELNESTS:"IfcRelNests",IFCRELINTERACTIONREQUIREMENTS:"IfcRelInteractionRequirements",IFCRELFLOWCONTROLELEMENTS:"IfcRelFlowControlElements",IFCRELFILLSELEMENT:"IfcRelFillsElement",IFCRELDEFINESBYTYPE:"IfcRelDefinesByType",IFCRELDEFINESBYPROPERTIES:"IfcRelDefinesByProperties",IFCRELDEFINES:"IfcRelDefines",IFCRELDECOMPOSES:"IfcRelDecomposes",IFCRELCOVERSSPACES:"IfcRelCoversSpaces",IFCRELCOVERSBLDGELEMENTS:"IfcRelCoversBldgElements",IFCRELCONTAINEDINSPATIALSTRUCTURE:"IfcRelContainedInSpatialStructure",IFCRELCONNECTSWITHREALIZINGELEMENTS:"IfcRelConnectsWithRealizingElements",IFCRELCONNECTSWITHECCENTRICITY:"IfcRelConnectsWithEccentricity",IFCRELCONNECTSSTRUCTURALMEMBER:"IfcRelConnectsStructuralMember",IFCRELCONNECTSSTRUCTURALELEMENT:"IfcRelConnectsStructuralElement",IFCRELCONNECTSSTRUCTURALACTIVITY:"IfcRelConnectsStructuralActivity",IFCRELCONNECTSPORTS:"IfcRelConnectsPorts",IFCRELCONNECTSPORTTOELEMENT:"IfcRelConnectsPortToElement",IFCRELCONNECTSPATHELEMENTS:"IfcRelConnectsPathElements",IFCRELCONNECTSELEMENTS:"IfcRelConnectsElements",IFCRELCONNECTS:"IfcRelConnects",IFCRELASSOCIATESPROFILEPROPERTIES:"IfcRelAssociatesProfileProperties",IFCRELASSOCIATESMATERIAL:"IfcRelAssociatesMaterial",IFCRELASSOCIATESLIBRARY:"IfcRelAssociatesLibrary",IFCRELASSOCIATESDOCUMENT:"IfcRelAssociatesDocument",IFCRELASSOCIATESCONSTRAINT:"IfcRelAssociatesConstraint",IFCRELASSOCIATESCLASSIFICATION:"IfcRelAssociatesClassification",IFCRELASSOCIATESAPPROVAL:"IfcRelAssociatesApproval",IFCRELASSOCIATESAPPLIEDVALUE:"IfcRelAssociatesAppliedValue",IFCRELASSOCIATES:"IfcRelAssociates",IFCRELASSIGNSTORESOURCE:"IfcRelAssignsToResource",IFCRELASSIGNSTOPROJECTORDER:"IfcRelAssignsToProjectOrder",IFCRELASSIGNSTOPRODUCT:"IfcRelAssignsToProduct",IFCRELASSIGNSTOPROCESS:"IfcRelAssignsToProcess",IFCRELASSIGNSTOGROUP:"IfcRelAssignsToGroup",IFCRELASSIGNSTOCONTROL:"IfcRelAssignsToControl",IFCRELASSIGNSTOACTOR:"IfcRelAssignsToActor",IFCRELASSIGNS:"IfcRelAssigns",IFCRECTANGULARTRIMMEDSURFACE:"IfcRectangularTrimmedSurface",IFCRECTANGULARPYRAMID:"IfcRectangularPyramid",IFCRECTANGLEHOLLOWPROFILEDEF:"IfcRectangleHollowProfileDef",IFCPROXY:"IfcProxy",IFCPROPERTYSET:"IfcPropertySet",IFCPROJECTIONCURVE:"IfcProjectionCurve",IFCPROJECT:"IfcProject",IFCPRODUCT:"IfcProduct",IFCPROCESS:"IfcProcess",IFCPLANE:"IfcPlane",IFCPLANARBOX:"IfcPlanarBox",IFCPERMEABLECOVERINGPROPERTIES:"IfcPermeableCoveringProperties",IFCOFFSETCURVE3D:"IfcOffsetCurve3D",IFCOFFSETCURVE2D:"IfcOffsetCurve2D",IFCOBJECT:"IfcObject",IFCMANIFOLDSOLIDBREP:"IfcManifoldSolidBrep",IFCLINE:"IfcLine",IFCLSHAPEPROFILEDEF:"IfcLShapeProfileDef",IFCISHAPEPROFILEDEF:"IfcIShapeProfileDef",IFCGEOMETRICCURVESET:"IfcGeometricCurveSet",IFCFURNITURETYPE:"IfcFurnitureType",IFCFURNISHINGELEMENTTYPE:"IfcFurnishingElementType",IFCFLUIDFLOWPROPERTIES:"IfcFluidFlowProperties",IFCFILLAREASTYLETILES:"IfcFillAreaStyleTiles",IFCFILLAREASTYLETILESYMBOLWITHSTYLE:"IfcFillAreaStyleTileSymbolWithStyle",IFCFILLAREASTYLEHATCHING:"IfcFillAreaStyleHatching",IFCFACEBASEDSURFACEMODEL:"IfcFaceBasedSurfaceModel",IFCEXTRUDEDAREASOLID:"IfcExtrudedAreaSolid",IFCENERGYPROPERTIES:"IfcEnergyProperties",IFCELLIPSEPROFILEDEF:"IfcEllipseProfileDef",IFCELEMENTARYSURFACE:"IfcElementarySurface",IFCELEMENTTYPE:"IfcElementType",IFCELEMENTQUANTITY:"IfcElementQuantity",IFCEDGELOOP:"IfcEdgeLoop",IFCDRAUGHTINGPREDEFINEDCURVEFONT:"IfcDraughtingPredefinedCurveFont",IFCDRAUGHTINGPREDEFINEDCOLOUR:"IfcDraughtingPredefinedColour",IFCDRAUGHTINGCALLOUT:"IfcDraughtingCallout",IFCDOORSTYLE:"IfcDoorStyle",IFCDOORPANELPROPERTIES:"IfcDoorPanelProperties",IFCDOORLININGPROPERTIES:"IfcDoorLiningProperties",IFCDIRECTION:"IfcDirection",IFCDIMENSIONCURVETERMINATOR:"IfcDimensionCurveTerminator",IFCDIMENSIONCURVE:"IfcDimensionCurve",IFCDEFINEDSYMBOL:"IfcDefinedSymbol",IFCCURVEBOUNDEDPLANE:"IfcCurveBoundedPlane",IFCCURVE:"IfcCurve",IFCCSGSOLID:"IfcCsgSolid",IFCCSGPRIMITIVE3D:"IfcCsgPrimitive3D",IFCCRANERAILFSHAPEPROFILEDEF:"IfcCraneRailFShapeProfileDef",IFCCRANERAILASHAPEPROFILEDEF:"IfcCraneRailAShapeProfileDef",IFCCOMPOSITECURVESEGMENT:"IfcCompositeCurveSegment",IFCCLOSEDSHELL:"IfcClosedShell",IFCCIRCLEPROFILEDEF:"IfcCircleProfileDef",IFCCARTESIANTRANSFORMATIONOPERATOR3DNONUNIFORM:"IfcCartesianTransformationOperator3DNonUniform",IFCCARTESIANTRANSFORMATIONOPERATOR3D:"IfcCartesianTransformationOperator3D",IFCCARTESIANTRANSFORMATIONOPERATOR2DNONUNIFORM:"IfcCartesianTransformationOperator2DNonUniform",IFCCARTESIANTRANSFORMATIONOPERATOR2D:"IfcCartesianTransformationOperator2D",IFCCARTESIANTRANSFORMATIONOPERATOR:"IfcCartesianTransformationOperator",IFCCARTESIANPOINT:"IfcCartesianPoint",IFCCSHAPEPROFILEDEF:"IfcCShapeProfileDef",IFCBOXEDHALFSPACE:"IfcBoxedHalfSpace",IFCBOUNDINGBOX:"IfcBoundingBox",IFCBOUNDEDSURFACE:"IfcBoundedSurface",IFCBOOLEANRESULT:"IfcBooleanResult",IFCAXIS2PLACEMENT3D:"IfcAxis2Placement3D",IFCAXIS2PLACEMENT2D:"IfcAxis2Placement2D",IFCAXIS1PLACEMENT:"IfcAxis1Placement",IFCANNOTATIONSURFACE:"IfcAnnotationSurface",IFCANNOTATIONFILLAREAOCCURRENCE:"IfcAnnotationFillAreaOccurrence",IFCANNOTATIONFILLAREA:"IfcAnnotationFillArea",IFCANNOTATIONCURVEOCCURRENCE:"IfcAnnotationCurveOccurrence",IFCZSHAPEPROFILEDEF:"IfcZShapeProfileDef",IFCWINDOWSTYLE:"IfcWindowStyle",IFCWINDOWPANELPROPERTIES:"IfcWindowPanelProperties",IFCWINDOWLININGPROPERTIES:"IfcWindowLiningProperties",IFCVERTEXLOOP:"IfcVertexLoop",IFCVECTOR:"IfcVector",IFCUSHAPEPROFILEDEF:"IfcUShapeProfileDef",IFCTYPEPRODUCT:"IfcTypeProduct",IFCTYPEOBJECT:"IfcTypeObject",IFCTWODIRECTIONREPEATFACTOR:"IfcTwoDirectionRepeatFactor",IFCTRAPEZIUMPROFILEDEF:"IfcTrapeziumProfileDef",IFCTEXTLITERALWITHEXTENT:"IfcTextLiteralWithExtent",IFCTEXTLITERAL:"IfcTextLiteral",IFCTERMINATORSYMBOL:"IfcTerminatorSymbol",IFCTSHAPEPROFILEDEF:"IfcTShapeProfileDef",IFCSWEPTSURFACE:"IfcSweptSurface",IFCSWEPTDISKSOLID:"IfcSweptDiskSolid",IFCSWEPTAREASOLID:"IfcSweptAreaSolid",IFCSURFACESTYLERENDERING:"IfcSurfaceStyleRendering",IFCSURFACE:"IfcSurface",IFCSUBEDGE:"IfcSubedge",IFCSTRUCTURALSTEELPROFILEPROPERTIES:"IfcStructuralSteelProfileProperties",IFCSTRUCTURALPROFILEPROPERTIES:"IfcStructuralProfileProperties",IFCSTRUCTURALLOADSINGLEFORCEWARPING:"IfcStructuralLoadSingleForceWarping",IFCSTRUCTURALLOADSINGLEFORCE:"IfcStructuralLoadSingleForce",IFCSTRUCTURALLOADSINGLEDISPLACEMENTDISTORTION:"IfcStructuralLoadSingleDisplacementDistortion",IFCSTRUCTURALLOADSINGLEDISPLACEMENT:"IfcStructuralLoadSingleDisplacement",IFCSTRUCTURALLOADPLANARFORCE:"IfcStructuralLoadPlanarForce",IFCSTRUCTURALLOADLINEARFORCE:"IfcStructuralLoadLinearForce",IFCSPACETHERMALLOADPROPERTIES:"IfcSpaceThermalLoadProperties",IFCSOUNDVALUE:"IfcSoundValue",IFCSOUNDPROPERTIES:"IfcSoundProperties",IFCSOLIDMODEL:"IfcSolidModel",IFCSLIPPAGECONNECTIONCONDITION:"IfcSlippageConnectionCondition",IFCSHELLBASEDSURFACEMODEL:"IfcShellBasedSurfaceModel",IFCSERVICELIFEFACTOR:"IfcServiceLifeFactor",IFCSECTIONEDSPINE:"IfcSectionedSpine",IFCROUNDEDRECTANGLEPROFILEDEF:"IfcRoundedRectangleProfileDef",IFCRELATIONSHIP:"IfcRelationship",IFCREINFORCEMENTDEFINITIONPROPERTIES:"IfcReinforcementDefinitionProperties",IFCREGULARTIMESERIES:"IfcRegularTimeSeries",IFCRECTANGLEPROFILEDEF:"IfcRectangleProfileDef",IFCPROPERTYTABLEVALUE:"IfcPropertyTableValue",IFCPROPERTYSINGLEVALUE:"IfcPropertySingleValue",IFCPROPERTYSETDEFINITION:"IfcPropertySetDefinition",IFCPROPERTYREFERENCEVALUE:"IfcPropertyReferenceValue",IFCPROPERTYLISTVALUE:"IfcPropertyListValue",IFCPROPERTYENUMERATEDVALUE:"IfcPropertyEnumeratedValue",IFCPROPERTYDEFINITION:"IfcPropertyDefinition",IFCPROPERTYBOUNDEDVALUE:"IfcPropertyBoundedValue",IFCPRODUCTDEFINITIONSHAPE:"IfcProductDefinitionShape",IFCPREDEFINEDPOINTMARKERSYMBOL:"IfcPredefinedPointMarkerSymbol",IFCPREDEFINEDDIMENSIONSYMBOL:"IfcPredefinedDimensionSymbol",IFCPREDEFINEDCURVEFONT:"IfcPredefinedCurveFont",IFCPREDEFINEDCOLOUR:"IfcPredefinedColour",IFCPOLYGONALBOUNDEDHALFSPACE:"IfcPolygonalBoundedHalfSpace",IFCPOLYLOOP:"IfcPolyLoop",IFCPOINTONSURFACE:"IfcPointOnSurface",IFCPOINTONCURVE:"IfcPointOnCurve",IFCPOINT:"IfcPoint",IFCPLANAREXTENT:"IfcPlanarExtent",IFCPLACEMENT:"IfcPlacement",IFCPIXELTEXTURE:"IfcPixelTexture",IFCPHYSICALCOMPLEXQUANTITY:"IfcPhysicalComplexQuantity",IFCPATH:"IfcPath",IFCPARAMETERIZEDPROFILEDEF:"IfcParameterizedProfileDef",IFCORIENTEDEDGE:"IfcOrientedEdge",IFCOPENSHELL:"IfcOpenShell",IFCONEDIRECTIONREPEATFACTOR:"IfcOneDirectionRepeatFactor",IFCOBJECTDEFINITION:"IfcObjectDefinition",IFCMECHANICALCONCRETEMATERIALPROPERTIES:"IfcMechanicalConcreteMaterialProperties",IFCMATERIALDEFINITIONREPRESENTATION:"IfcMaterialDefinitionRepresentation",IFCMAPPEDITEM:"IfcMappedItem",IFCLOOP:"IfcLoop",IFCLOCALPLACEMENT:"IfcLocalPlacement",IFCLIGHTSOURCESPOT:"IfcLightSourceSpot",IFCLIGHTSOURCEPOSITIONAL:"IfcLightSourcePositional",IFCLIGHTSOURCEGONIOMETRIC:"IfcLightSourceGoniometric",IFCLIGHTSOURCEDIRECTIONAL:"IfcLightSourceDirectional",IFCLIGHTSOURCEAMBIENT:"IfcLightSourceAmbient",IFCLIGHTSOURCE:"IfcLightSource",IFCIRREGULARTIMESERIES:"IfcIrregularTimeSeries",IFCIMAGETEXTURE:"IfcImageTexture",IFCHYGROSCOPICMATERIALPROPERTIES:"IfcHygroscopicMaterialProperties",IFCHALFSPACESOLID:"IfcHalfSpaceSolid",IFCGRIDPLACEMENT:"IfcGridPlacement",IFCGEOMETRICSET:"IfcGeometricSet",IFCGEOMETRICREPRESENTATIONSUBCONTEXT:"IfcGeometricRepresentationSubContext",IFCGEOMETRICREPRESENTATIONITEM:"IfcGeometricRepresentationItem",IFCGEOMETRICREPRESENTATIONCONTEXT:"IfcGeometricRepresentationContext",IFCGENERALPROFILEPROPERTIES:"IfcGeneralProfileProperties",IFCGENERALMATERIALPROPERTIES:"IfcGeneralMaterialProperties",IFCFUELPROPERTIES:"IfcFuelProperties",IFCFILLAREASTYLE:"IfcFillAreaStyle",IFCFAILURECONNECTIONCONDITION:"IfcFailureConnectionCondition",IFCFACESURFACE:"IfcFaceSurface",IFCFACEOUTERBOUND:"IfcFaceOuterBound",IFCFACEBOUND:"IfcFaceBound",IFCFACE:"IfcFace",IFCEXTENDEDMATERIALPROPERTIES:"IfcExtendedMaterialProperties",IFCEDGECURVE:"IfcEdgeCurve",IFCEDGE:"IfcEdge",IFCDRAUGHTINGPREDEFINEDTEXTFONT:"IfcDraughtingPredefinedTextFont",IFCDOCUMENTREFERENCE:"IfcDocumentReference",IFCDIMENSIONPAIR:"IfcDimensionPair",IFCDIMENSIONCALLOUTRELATIONSHIP:"IfcDimensionCalloutRelationship",IFCDERIVEDPROFILEDEF:"IfcDerivedProfileDef",IFCCURVESTYLE:"IfcCurveStyle",IFCCONVERSIONBASEDUNIT:"IfcConversionBasedUnit",IFCCONTEXTDEPENDENTUNIT:"IfcContextDependentUnit",IFCCONNECTIONPOINTECCENTRICITY:"IfcConnectionPointEccentricity",IFCCONNECTIONCURVEGEOMETRY:"IfcConnectionCurveGeometry",IFCCONNECTEDFACESET:"IfcConnectedFaceSet",IFCCOMPOSITEPROFILEDEF:"IfcCompositeProfileDef",IFCCOMPLEXPROPERTY:"IfcComplexProperty",IFCCOLOURRGB:"IfcColourRgb",IFCCLASSIFICATIONREFERENCE:"IfcClassificationReference",IFCCENTERLINEPROFILEDEF:"IfcCenterLineProfileDef",IFCBLOBTEXTURE:"IfcBlobTexture",IFCARBITRARYPROFILEDEFWITHVOIDS:"IfcArbitraryProfileDefWithVoids",IFCARBITRARYOPENPROFILEDEF:"IfcArbitraryOpenProfileDef",IFCARBITRARYCLOSEDPROFILEDEF:"IfcArbitraryClosedProfileDef",IFCANNOTATIONTEXTOCCURRENCE:"IfcAnnotationTextOccurrence",IFCANNOTATIONSYMBOLOCCURRENCE:"IfcAnnotationSymbolOccurrence",IFCANNOTATIONSURFACEOCCURRENCE:"IfcAnnotationSurfaceOccurrence",IFCANNOTATIONOCCURRENCE:"IfcAnnotationOccurrence",IFCWATERPROPERTIES:"IfcWaterProperties",IFCVIRTUALGRIDINTERSECTION:"IfcVirtualGridIntersection",IFCVERTEXPOINT:"IfcVertexPoint",IFCVERTEXBASEDTEXTUREMAP:"IfcVertexBasedTextureMap",IFCVERTEX:"IfcVertex",IFCUNITASSIGNMENT:"IfcUnitAssignment",IFCTOPOLOGYREPRESENTATION:"IfcTopologyRepresentation",IFCTOPOLOGICALREPRESENTATIONITEM:"IfcTopologicalRepresentationItem",IFCTIMESERIESVALUE:"IfcTimeSeriesValue",IFCTIMESERIESREFERENCERELATIONSHIP:"IfcTimeSeriesReferenceRelationship",IFCTIMESERIES:"IfcTimeSeries",IFCTHERMALMATERIALPROPERTIES:"IfcThermalMaterialProperties",IFCTEXTUREVERTEX:"IfcTextureVertex",IFCTEXTUREMAP:"IfcTextureMap",IFCTEXTURECOORDINATEGENERATOR:"IfcTextureCoordinateGenerator",IFCTEXTURECOORDINATE:"IfcTextureCoordinate",IFCTEXTSTYLEWITHBOXCHARACTERISTICS:"IfcTextStyleWithBoxCharacteristics",IFCTEXTSTYLETEXTMODEL:"IfcTextStyleTextModel",IFCTEXTSTYLEFORDEFINEDFONT:"IfcTextStyleForDefinedFont",IFCTEXTSTYLEFONTMODEL:"IfcTextStyleFontModel",IFCTEXTSTYLE:"IfcTextStyle",IFCTELECOMADDRESS:"IfcTelecomAddress",IFCTABLEROW:"IfcTableRow",IFCTABLE:"IfcTable",IFCSYMBOLSTYLE:"IfcSymbolStyle",IFCSURFACETEXTURE:"IfcSurfaceTexture",IFCSURFACESTYLEWITHTEXTURES:"IfcSurfaceStyleWithTextures",IFCSURFACESTYLESHADING:"IfcSurfaceStyleShading",IFCSURFACESTYLEREFRACTION:"IfcSurfaceStyleRefraction",IFCSURFACESTYLELIGHTING:"IfcSurfaceStyleLighting",IFCSURFACESTYLE:"IfcSurfaceStyle",IFCSTYLEDREPRESENTATION:"IfcStyledRepresentation",IFCSTYLEDITEM:"IfcStyledItem",IFCSTYLEMODEL:"IfcStyleModel",IFCSTRUCTURALLOADTEMPERATURE:"IfcStructuralLoadTemperature",IFCSTRUCTURALLOADSTATIC:"IfcStructuralLoadStatic",IFCSTRUCTURALLOAD:"IfcStructuralLoad",IFCSTRUCTURALCONNECTIONCONDITION:"IfcStructuralConnectionCondition",IFCSIMPLEPROPERTY:"IfcSimpleProperty",IFCSHAPEREPRESENTATION:"IfcShapeRepresentation",IFCSHAPEMODEL:"IfcShapeModel",IFCSHAPEASPECT:"IfcShapeAspect",IFCSECTIONREINFORCEMENTPROPERTIES:"IfcSectionReinforcementProperties",IFCSECTIONPROPERTIES:"IfcSectionProperties",IFCSIUNIT:"IfcSIUnit",IFCROOT:"IfcRoot",IFCRIBPLATEPROFILEPROPERTIES:"IfcRibPlateProfileProperties",IFCREPRESENTATIONMAP:"IfcRepresentationMap",IFCREPRESENTATIONITEM:"IfcRepresentationItem",IFCREPRESENTATIONCONTEXT:"IfcRepresentationContext",IFCREPRESENTATION:"IfcRepresentation",IFCRELAXATION:"IfcRelaxation",IFCREINFORCEMENTBARPROPERTIES:"IfcReinforcementBarProperties",IFCREFERENCESVALUEDOCUMENT:"IfcReferencesValueDocument",IFCQUANTITYWEIGHT:"IfcQuantityWeight",IFCQUANTITYVOLUME:"IfcQuantityVolume",IFCQUANTITYTIME:"IfcQuantityTime",IFCQUANTITYLENGTH:"IfcQuantityLength",IFCQUANTITYCOUNT:"IfcQuantityCount",IFCQUANTITYAREA:"IfcQuantityArea",IFCPROPERTYENUMERATION:"IfcPropertyEnumeration",IFCPROPERTYDEPENDENCYRELATIONSHIP:"IfcPropertyDependencyRelationship",IFCPROPERTYCONSTRAINTRELATIONSHIP:"IfcPropertyConstraintRelationship",IFCPROPERTY:"IfcProperty",IFCPROFILEPROPERTIES:"IfcProfileProperties",IFCPROFILEDEF:"IfcProfileDef",IFCPRODUCTSOFCOMBUSTIONPROPERTIES:"IfcProductsOfCombustionProperties",IFCPRODUCTREPRESENTATION:"IfcProductRepresentation",IFCPRESENTATIONSTYLEASSIGNMENT:"IfcPresentationStyleAssignment",IFCPRESENTATIONSTYLE:"IfcPresentationStyle",IFCPRESENTATIONLAYERWITHSTYLE:"IfcPresentationLayerWithStyle",IFCPRESENTATIONLAYERASSIGNMENT:"IfcPresentationLayerAssignment",IFCPREDEFINEDTEXTFONT:"IfcPredefinedTextFont",IFCPREDEFINEDTERMINATORSYMBOL:"IfcPredefinedTerminatorSymbol",IFCPREDEFINEDSYMBOL:"IfcPredefinedSymbol",IFCPREDEFINEDITEM:"IfcPredefinedItem",IFCPOSTALADDRESS:"IfcPostalAddress",IFCPHYSICALSIMPLEQUANTITY:"IfcPhysicalSimpleQuantity",IFCPHYSICALQUANTITY:"IfcPhysicalQuantity",IFCPERSONANDORGANIZATION:"IfcPersonAndOrganization",IFCPERSON:"IfcPerson",IFCOWNERHISTORY:"IfcOwnerHistory",IFCORGANIZATIONRELATIONSHIP:"IfcOrganizationRelationship",IFCORGANIZATION:"IfcOrganization",IFCOPTICALMATERIALPROPERTIES:"IfcOpticalMaterialProperties",IFCOBJECTIVE:"IfcObjective",IFCOBJECTPLACEMENT:"IfcObjectPlacement",IFCNAMEDUNIT:"IfcNamedUnit",IFCMONETARYUNIT:"IfcMonetaryUnit",IFCMETRIC:"IfcMetric",IFCMECHANICALSTEELMATERIALPROPERTIES:"IfcMechanicalSteelMaterialProperties",IFCMECHANICALMATERIALPROPERTIES:"IfcMechanicalMaterialProperties",IFCMEASUREWITHUNIT:"IfcMeasureWithUnit",IFCMATERIALPROPERTIES:"IfcMaterialProperties",IFCMATERIALLIST:"IfcMaterialList",IFCMATERIALLAYERSETUSAGE:"IfcMaterialLayerSetUsage",IFCMATERIALLAYERSET:"IfcMaterialLayerSet",IFCMATERIALLAYER:"IfcMaterialLayer",IFCMATERIALCLASSIFICATIONRELATIONSHIP:"IfcMaterialClassificationRelationship",IFCMATERIAL:"IfcMaterial",IFCLOCALTIME:"IfcLocalTime",IFCLIGHTINTENSITYDISTRIBUTION:"IfcLightIntensityDistribution",IFCLIGHTDISTRIBUTIONDATA:"IfcLightDistributionData",IFCLIBRARYREFERENCE:"IfcLibraryReference",IFCLIBRARYINFORMATION:"IfcLibraryInformation",IFCIRREGULARTIMESERIESVALUE:"IfcIrregularTimeSeriesValue",IFCGRIDAXIS:"IfcGridAxis",IFCEXTERNALLYDEFINEDTEXTFONT:"IfcExternallyDefinedTextFont",IFCEXTERNALLYDEFINEDSYMBOL:"IfcExternallyDefinedSymbol",IFCEXTERNALLYDEFINEDSURFACESTYLE:"IfcExternallyDefinedSurfaceStyle",IFCEXTERNALLYDEFINEDHATCHSTYLE:"IfcExternallyDefinedHatchStyle",IFCEXTERNALREFERENCE:"IfcExternalReference",IFCENVIRONMENTALIMPACTVALUE:"IfcEnvironmentalImpactValue",IFCDRAUGHTINGCALLOUTRELATIONSHIP:"IfcDraughtingCalloutRelationship",IFCDOCUMENTINFORMATIONRELATIONSHIP:"IfcDocumentInformationRelationship",IFCDOCUMENTINFORMATION:"IfcDocumentInformation",IFCDOCUMENTELECTRONICFORMAT:"IfcDocumentElectronicFormat",IFCDIMENSIONALEXPONENTS:"IfcDimensionalExponents",IFCDERIVEDUNITELEMENT:"IfcDerivedUnitElement",IFCDERIVEDUNIT:"IfcDerivedUnit",IFCDATEANDTIME:"IfcDateAndTime",IFCCURVESTYLEFONTPATTERN:"IfcCurveStyleFontPattern",IFCCURVESTYLEFONTANDSCALING:"IfcCurveStyleFontAndScaling",IFCCURVESTYLEFONT:"IfcCurveStyleFont",IFCCURRENCYRELATIONSHIP:"IfcCurrencyRelationship",IFCCOSTVALUE:"IfcCostValue",IFCCOORDINATEDUNIVERSALTIMEOFFSET:"IfcCoordinatedUniversalTimeOffset",IFCCONSTRAINTRELATIONSHIP:"IfcConstraintRelationship",IFCCONSTRAINTCLASSIFICATIONRELATIONSHIP:"IfcConstraintClassificationRelationship",IFCCONSTRAINTAGGREGATIONRELATIONSHIP:"IfcConstraintAggregationRelationship",IFCCONSTRAINT:"IfcConstraint",IFCCONNECTIONSURFACEGEOMETRY:"IfcConnectionSurfaceGeometry",IFCCONNECTIONPORTGEOMETRY:"IfcConnectionPortGeometry",IFCCONNECTIONPOINTGEOMETRY:"IfcConnectionPointGeometry",IFCCONNECTIONGEOMETRY:"IfcConnectionGeometry",IFCCOLOURSPECIFICATION:"IfcColourSpecification",IFCCLASSIFICATIONNOTATIONFACET:"IfcClassificationNotationFacet",IFCCLASSIFICATIONNOTATION:"IfcClassificationNotation",IFCCLASSIFICATIONITEMRELATIONSHIP:"IfcClassificationItemRelationship",IFCCLASSIFICATIONITEM:"IfcClassificationItem",IFCCLASSIFICATION:"IfcClassification",IFCCALENDARDATE:"IfcCalendarDate",IFCBOUNDARYNODECONDITIONWARPING:"IfcBoundaryNodeConditionWarping",IFCBOUNDARYNODECONDITION:"IfcBoundaryNodeCondition",IFCBOUNDARYFACECONDITION:"IfcBoundaryFaceCondition",IFCBOUNDARYEDGECONDITION:"IfcBoundaryEdgeCondition",IFCBOUNDARYCONDITION:"IfcBoundaryCondition",IFCAPPROVALRELATIONSHIP:"IfcApprovalRelationship",IFCAPPROVALPROPERTYRELATIONSHIP:"IfcApprovalPropertyRelationship",IFCAPPROVALACTORRELATIONSHIP:"IfcApprovalActorRelationship",IFCAPPROVAL:"IfcApproval",IFCAPPLIEDVALUERELATIONSHIP:"IfcAppliedValueRelationship",IFCAPPLIEDVALUE:"IfcAppliedValue",IFCAPPLICATION:"IfcApplication",IFCADDRESS:"IfcAddress",IFCACTORROLE:"IfcActorRole"};class r_{constructor(){T(this,"factor",1),T(this,"complement",1)}apply(e){const t=this.getScaleMatrix().multiply(e);e.copy(t)}setUp(e){var t,s,n;this.factor=1;const r=this.getLengthUnits(e);if(!r)return;const o=r==null,a=r.Name===void 0||r.Name===null;o||a||(r.Name.value==="FOOT"&&(this.factor=.3048),((t=r.Prefix)==null?void 0:t.value)==="MILLI"?this.complement=.001:((s=r.Prefix)==null?void 0:s.value)==="CENTI"?this.complement=.01:((n=r.Prefix)==null?void 0:n.value)==="DECI"&&(this.complement=.01))}getLengthUnits(e){try{const t=e.GetLineIDsWithType(0,OE).get(0),s=e.GetLine(0,t);for(const n of s.Units){if(!n||n.value===null||n.value===void 0)continue;const r=e.GetLine(0,n.value);if(r.UnitType&&r.UnitType.value==="LENGTHUNIT")return r}return null}catch{return console.log("Could not get units"),null}}getScaleMatrix(){const e=this.factor;return new ce().fromArray([e,0,0,0,0,e,0,0,0,0,e,0,0,0,0,1])}}let Zb=class{constructor(){T(this,"itemsByFloor",{}),T(this,"_units",new r_)}setUp(e){this._units.setUp(e),this.cleanUp();try{const t=e.GetLineIDsWithType(0,Gc),s=new Set,n=e.GetLineIDsWithType(0,Zn);for(let h=0;h<n.size();h++)s.add(n.get(h));const r=e.GetLineIDsWithType(0,Hc),o=r.size();for(let h=0;h<o;h++){const u=r.get(h),c=e.GetLine(0,u);if(!c||!c.RelatingObject||!c.RelatedObjects)continue;const d=c.RelatingObject.value,f=c.RelatedObjects;for(const p of f){const m=p.value;s.has(m)&&(this.itemsByFloor[m]=d)}}const a={},l=t.size();for(let h=0;h<l;h++){const u=t.get(h),c=e.GetLine(0,u);if(!c||!c.RelatingStructure||!c.RelatedElements)continue;const d=c.RelatingStructure.value,f=c.RelatedElements;if(s.has(d))for(const p of f){a[d]||(a[d]=[]);const m=p.value;a[d].push(m)}else for(const p of f){const m=p.value;this.itemsByFloor[m]=d}}for(const h in a){const u=this.itemsByFloor[h];if(u!==void 0){const c=a[h];for(const d of c)this.itemsByFloor[d]=u}}for(let h=0;h<o;h++){const u=r.get(h),c=e.GetLine(0,u);if(!c||!c.RelatingObject||!c.RelatedObjects)continue;const d=c.RelatingObject.value,f=c.RelatedObjects;for(const p of f){const m=p.value,g=this.itemsByFloor[d];g!==void 0&&(this.itemsByFloor[m]=g)}}}catch{console.log("Could not get floors.")}}cleanUp(){this.itemsByFloor={}}},Tp=class{constructor(){T(this,"includeProperties",!0),T(this,"optionalCategories",[Zn]),T(this,"wasm",{path:"",absolute:!1,logLevel:Y1.LOG_LEVEL_OFF}),T(this,"excludedCategories",new Set),T(this,"includedCategories",new Set),T(this,"saveLocations",!1),T(this,"webIfc",{COORDINATE_TO_ORIGIN:!0}),T(this,"autoSetWasm",!0),T(this,"customLocateFileHandler",null)}},Qb=class{constructor(){T(this,"defLineMat",new Is({color:16777215}))}read(e){const t=e.GetAllAlignments(0),s=e.GetAllCrossSections2D(0),n=e.GetAllCrossSections3D(0),r={IfcAlignment:t,IfcCrossSection2D:s,IfcCrossSection3D:n};return this.get(r)}get(e){if(e.IfcAlignment){const t=new Map;for(const s of e.IfcAlignment){const n=new j1;n.absolute=this.getCurves(s.curve3D,n),n.horizontal=this.getCurves(s.horizontal,n),n.vertical=this.getCurves(s.vertical,n),t.set(t.size,n)}return{alignments:t,coordinationMatrix:new ce}}}getCurves(e,t){const s=[];let n=0;for(const r of e){const o={};if(r.data)for(const d of r.data){const[f,p]=d.split(": "),m=parseFloat(p);o[f]=m||p}const{points:a}=r,l=new Float32Array(a.length*3);for(let d=0;d<a.length;d++){const{x:f,y:p,z:m}=a[d];l[d*3]=f,l[d*3+1]=p,l[d*3+2]=m||0}const h=new Ct(l,3),u=new W1;u.setAttribute("position",h);const c=new X1(n,o,t,u,this.defLineMat);s.push(c.curve),n++}return s}},Kb=class{getNameInfo(e){var t;const s={},{arguments:n}=e.GetHeaderLine(0,q1)||{};if(!n)return s;const[r,o,a,l,h,u,c]=n;if(r!=null&&r.value&&(s.name=r.value),o!=null&&o.value&&(s.creationDate=new Date(o.value)),a){s.author={};const[d,f]=a;d!=null&&d.value&&(s.author.name=d.value),f!=null&&f.value&&(s.author.email=f.value)}return l&&(t=l[0])!=null&&t.value&&(s.organization=l[0].value),h!=null&&h.value&&(s.preprocessorVersion=h==null?void 0:h.value),u!=null&&u.value&&(s.originatingSystem=u==null?void 0:u.value),c!=null&&c.value&&(s.authorization=c==null?void 0:c.value),s}getDescriptionInfo(e){var t;const s={},{arguments:n}=e.GetHeaderLine(0,Z1)||{};if(!n)return s;const[r,o]=n;if(Array.isArray(r)&&(t=r[0])!=null&&t.value){const a=r[0].value.match(/\[([^\]]+)\]/);a&&a[1]&&(s.viewDefinition=a[1])}return o!=null&&o.value&&(s.implementationLevel=o.value),s}},Jb=class{static get(e,t){const s=[Wc,Qf,Kf,jc,Zn,nT,rT,oT,aT],n=e.data;for(const r of s){const o=t.GetLineIDsWithType(0,r),a=o.size();for(let l=0;l<a;l++){const h=o.get(l);n.has(h)||n.set(h,[[],[0,r]])}}}};const ev=new Set([1123145078,574549367,1675464909,2059837836,3798115385,32440307,3125803723,3207858831,2740243338,2624227202,4240577450,3615266464,3724593414,220341763,477187591,1878645084,1300840506,3303107099,1607154358,1878645084,846575682,1351298697,2417041796,3049322572,3331915920,1416205885,776857604,3285139300,3958052878,2827736869,2732653382,673634403,3448662350,4142052618,2924175390,803316827,2556980723,1809719519,2205249479,807026263,3737207727,1660063152,2347385850,2705031697,3732776249,2485617015,2611217952,1704287377,2937912522,2770003689,1281925730,1484403080,3448662350,4142052618,3800577675,4006246654,3590301190,1383045692,2775532180,2047409740,370225590,3593883385,2665983363,4124623270,812098782,3649129432,987898635,1105321065,3510044353,1635779807,2603310189,3406155212,1310608509,4261334040,2736907675,3649129432,1136057603,1260505505,4182860854,2713105998,2898889636,59481748,3749851601,3486308946,3150382593,1062206242,3264961684,15328376,1485152156,370225590,1981873012,2859738748,45288368,2614616156,2732653382,775493141,2147822146,2601014836,2629017746,1186437898,2367409068,1213902940,3632507154,3900360178,476780140,1472233963,2804161546,3008276851,738692330,374418227,315944413,3905492369,3570813810,2571569899,178912537,2294589976,1437953363,2133299955,572779678,3092502836,388784114,2624227202,1425443689,3057273783,2347385850,1682466193,2519244187,2839578677,3958567839,2513912981,2830218821,427810014,2916149573]),tv=class iv extends be{constructor(e){super(e),T(this,"enabled",!0),e.add(iv.uuid,this)}async export(e,t,s=!1,n=!0){const r={},o=new Set(e.GetIfcEntityList(t)),a=new Set([Wc,Qf,Kf,jc,Zn]);for(const l of a)o.add(l);for(const l of o){if(ev.has(l))continue;const h=a.has(l)&&n,u=e.GetLineIDsWithType(t,l);for(const c of u)try{const d=e.GetLine(0,c,h,s);r[d.expressID]=d}catch{console.log(`Could not get property ${c}, with recursive ${h} and indirect ${s}.`)}}return r}};T(tv,"uuid","b32c4332-cd67-436e-ba7f-196646c7a635");let o_=tv;const sv=class tf extends be{constructor(e){super(e),T(this,"onDisposed",new Y),T(this,"onIfcStartedLoading",new Y),T(this,"onSetup",new Y),T(this,"settings",new Tp),T(this,"webIfc",new Gr),T(this,"enabled",!0),T(this,"_material",new nc),T(this,"_spatialTree",new Zb),T(this,"_metaData",new Kb),T(this,"_fragmentInstances",new Map),T(this,"_civil",new Qb),T(this,"_visitedFragments",new Map),T(this,"_materialT",new nc({transparent:!0,opacity:.5})),this.components.add(tf.uuid,this),this.settings.excludedCategories.add(xE)}dispose(){this.webIfc=null,this.onDisposed.trigger(tf.uuid),this.onDisposed.reset()}async setup(e){this.settings={...this.settings,...e},this.settings.autoSetWasm&&await this.autoSetWasm(),this.onSetup.trigger()}async load(e,t=!0,s=""){const n=performance.now();this.onIfcStartedLoading.trigger(),await this.readIfcFile(e);const r=await this.getAllGeometries();r.name=s;const o=await this.components.get(o_).export(this.webIfc,0);r.setLocalProperties(o);const a=this.components.get(ve);a.groups.set(r.uuid,r);for(const l of r.items)a.list.set(l.id,l),l.mesh.uuid=l.id,l.group=r;a.onFragmentsLoaded.trigger(r),t&&a.coordinate([r]);for(const[l]of r.data){const h=o[l];if(!h||!h.GlobalId)continue;const u=h.GlobalId.value||h.GlobalId;r.globalToExpressIDs.set(u,l)}return Jb.get(r,this.webIfc),this.cleanUp(),console.log(`Streaming the IFC took ${performance.now()-n} ms!`),r}async readIfcFile(e){const{path:t,absolute:s,logLevel:n}=this.settings.wasm;return this.webIfc.SetWasmPath(t,s),await this.webIfc.Init(this.settings.customLocateFileHandler||void 0),n&&this.webIfc.SetLogLevel(n),this.webIfc.OpenModel(e,this.settings.webIfc)}cleanUp(){try{this.webIfc.Dispose()}catch{console.log("Web-ifc wasn't disposed.")}this.webIfc=null,this.webIfc=new Gr,this._visitedFragments.clear(),this._fragmentInstances.clear()}async getAllGeometries(){this._spatialTree.setUp(this.webIfc);const e=this.webIfc.GetIfcEntityList(0),t=new as;t.ifcMetadata={name:"",description:"",...this._metaData.getNameInfo(this.webIfc),...this._metaData.getDescriptionInfo(this.webIfc),schema:this.webIfc.GetModelSchema(0)||"IFC2X3",maxExpressID:this.webIfc.GetMaxExpressID(0)};const s=[];for(const r of e){if(!this.webIfc.IsIfcElement(r)&&r!==Zn)continue;const o=this.settings.includedCategories;if(o.size>0&&!o.has(r)||this.settings.excludedCategories.has(r))continue;const a=this.webIfc.GetLineIDsWithType(0,r),l=a.size();for(let h=0;h<l;h++){const u=a.get(h);s.push(u);const c=this._spatialTree.itemsByFloor[u]||0;t.data.set(u,[[],[c,r]])}}this._spatialTree.cleanUp(),this.webIfc.StreamMeshes(0,s,r=>{this.getMesh(r,t)});for(const r of this._visitedFragments){const{index:o,fragment:a}=r[1];t.keyFragments.set(o,a.id)}for(const r of t.items){const o=this._fragmentInstances.get(r.id);if(!o)throw new Error("Fragment not found!");const a=[];for(const[l,h]of o)a.push(h);r.add(a)}const n=this.webIfc.GetCoordinationMatrix(0);return t.coordinationMatrix.fromArray(n),t.civilData=this._civil.read(this.webIfc),t}getMesh(e,t){const s=e.geometries.size(),n=e.expressID;for(let r=0;r<s;r++){const o=e.geometries.get(r),{x:a,y:l,z:h,w:u}=o.color,c=u!==1,{geometryExpressID:d}=o,f=`${d}-${c}`;if(!this._visitedFragments.has(f)){const b=this.getGeometry(this.webIfc,d),C=c?this._materialT:this._material,S=new rc(b,C,1);t.add(S.mesh),t.items.push(S);const _=this._visitedFragments.size;this._visitedFragments.set(f,{index:_,fragment:S})}const p=new He().setRGB(a,l,h,"srgb"),m=new ce;m.fromArray(o.flatTransformation);const g=this._visitedFragments.get(f);if(g===void 0)throw new Error("Error getting geometry data for streaming!");const E=t.data.get(n);if(!E)throw new Error("Data not found!");E[0].push(g.index);const{fragment:I}=g;this._fragmentInstances.has(I.id)||this._fragmentInstances.set(I.id,new Map);const v=this._fragmentInstances.get(I.id);if(!v)throw new Error("Instances not found!");if(v.has(n)){const b=v.get(n);if(!b)throw new Error("Instance not found!");b.transforms.push(m),b.colors&&b.colors.push(p)}else v.set(n,{id:n,transforms:[m],colors:[p]})}}getGeometry(e,t){const s=e.GetGeometry(0,t),n=e.GetIndexArray(s.GetIndexData(),s.GetIndexDataSize()),r=e.GetVertexArray(s.GetVertexData(),s.GetVertexDataSize()),o=new Float32Array(r.length/2),a=new Float32Array(r.length/2);for(let c=0;c<r.length;c+=6)o[c/2]=r[c],o[c/2+1]=r[c+1],o[c/2+2]=r[c+2],a[c/2]=r[c+3],a[c/2+1]=r[c+4],a[c/2+2]=r[c+5];const l=new Ne,h=new Ct(o,3),u=new Ct(a,3);return l.setAttribute("position",h),l.setAttribute("normal",u),l.setIndex(Array.from(n)),s.delete(),l}async autoSetWasm(){const e=await fetch(`https://unpkg.com/@thatopen/components@${Ob.release}/package.json`);if(!e.ok){console.warn("Couldn't get openbim-components package.json. Set wasm settings manually.");return}const t=await e.json();if(!("web-ifc"in t.peerDependencies))console.warn("Couldn't get web-ifc from peer dependencies in openbim-components. Set wasm settings manually.");else{const s=t.peerDependencies["web-ifc"];this.settings.wasm.path=`https://unpkg.com/web-ifc@${s}/`,this.settings.wasm.absolute=!0}}};T(sv,"uuid","a659add7-1418-4771-a0d6-7d4d438e4624");let a_=sv;const l_={IfcRelAssignsToControl:{related:5,relating:7},IfcRelAssignsToGroup:{related:5,relating:7},IfcRelAssignsToProduct:{related:5,relating:7},IfcRelAssociatesClassification:{related:5,relating:6},IfcRelAssociatesMaterial:{related:5,relating:6},IfcRelAssociatesDocument:{related:5,relating:6},IfcRelContainedInSpatialStructure:{related:5,relating:6},IfcRelFlowControlElements:{related:5,relating:6},IfcRelConnectsElements:{related:7,relating:6},IfcRelDeclares:{related:6,relating:5},IfcRelAggregates:{related:6,relating:5},IfcRelNests:{related:6,relating:5},IfcRelDefinesByProperties:{related:5,relating:6},IfcRelDefinesByType:{related:5,relating:6},IfcRelDefinesByTemplate:{related:5,relating:6}},h_={[Xf]:"IfcRelAssignsToControl",[Vf]:"IfcRelAssignsToGroup",[jf]:"IfcRelAssignsToProduct",[zf]:"IfcRelAssociatesClassification",[Bf]:"IfcRelAssociatesMaterial",[Zf]:"IfcRelAssociatesDocument",[Gc]:"IfcRelContainedInSpatialStructure",[Yf]:"IfcRelConnectsElements",[Gf]:"IfcRelFlowControlElements",[Wf]:"IfcRelDeclares",[Hc]:"IfcRelAggregates",[qf]:"IfcRelNests",[El]:"IfcRelDefinesByProperties",[$f]:"IfcRelDefinesByType",[Hf]:"IfcRelDefinesByTemplate"},nv=class Tn extends be{constructor(e){super(e),T(this,"onDisposed",new Y),T(this,"onRequestFile",new Y),T(this,"ifcToExport",null),T(this,"onElementToPset",new Y),T(this,"onPropToPset",new Y),T(this,"onPsetRemoved",new Y),T(this,"onDataChanged",new Y),T(this,"wasm",{path:"/",absolute:!1}),T(this,"enabled",!0),T(this,"attributeListeners",{}),T(this,"selectedModel"),T(this,"changeMap",{}),this.components.add(Tn.uuid,this)}dispose(){this.selectedModel=void 0,this.attributeListeners={},this.changeMap={},this.onElementToPset.reset(),this.onPropToPset.reset(),this.onPsetRemoved.reset(),this.onDataChanged.reset(),this.onDisposed.trigger(Tn.uuid),this.onDisposed.reset()}static getIFCSchema(e){const t=e.ifcMetadata.schema;if(!t)throw new Error("IFC Schema not found");return t.startsWith("IFC2X3")?"IFC2X3":t.startsWith("IFC4")&&t.replace("IFC4","")===""?"IFC4":t.startsWith("IFC4X3")?"IFC4X3":t}async setData(e,...t){for(const s of t){const{expressID:n}=s;(!n||n===-1)&&(s.expressID=this.getNewExpressID(e)),await e.setProperties(s.expressID,s),this.registerChange(e,s.expressID)}}async newPset(e,t,s){const n=Tn.getIFCSchema(e),{handle:r}=await this.getOwnerHistory(e),o=this.newGUID(e),a=new Pi[n].IfcLabel(t),l=s?new Pi[n].IfcText(s):null,h=new Pi[n].IfcPropertySet(o,r,a,l,[]);return h.expressID=this.getNewExpressID(e),await this.setData(e,h),{pset:h}}async removePset(e,...t){for(const s of t){const n=await e.getProperties(s);if((n==null?void 0:n.type)!==ks)continue;const r=await xa.getPsetRel(e,s);if(r&&(await e.setProperties(r,null),this.registerChange(e,r)),n){for(const o of n.HasProperties)await e.setProperties(o.value,null);await e.setProperties(s,null),this.onPsetRemoved.trigger({model:e,psetID:s}),this.registerChange(e,s)}}}newSingleStringProperty(e,t,s,n){return this.newSingleProperty(e,t,s,n)}newSingleNumericProperty(e,t,s,n){return this.newSingleProperty(e,t,s,n)}newSingleBooleanProperty(e,t,s,n){return this.newSingleProperty(e,t,s,n)}async removePsetProp(e,t,s){const n=await e.getProperties(t),r=await e.getProperties(s);!n||!r||n.type===ks&&r&&(n.HasProperties=n.HasProperties.filter(o=>o.value!==s),await e.setProperties(s,null),this.registerChange(e,t,s))}addElementToPset(e,t,...s){this.components.get(Ht).addEntitiesRelation(e,t,{type:El,inv:"DefinesOcurrence"},...s)}async addPropToPset(e,t,...s){const n=await e.getProperties(t);if(n){for(const r of s){if(n.HasProperties.includes(r))continue;const o=new Os(r);n.HasProperties.push(o),this.onPropToPset.trigger({model:e,psetID:t,propID:r})}this.registerChange(e,t)}}async createIfcRel(e,t,s,n){const r=h_[t];if(!r)throw new Error(`IfcPropertiesManager: ${r} is unsoported.`);const o=Tn.getIFCSchema(e),a=l_[r],l=Pi[o][r];if(!(a&&l))throw new Error(`IfcPropertiesManager: ${r} is unsoported.`);const h=[new Pi[o].IfcGloballyUniqueId(ms.create())],{related:u,relating:c}=a,d=[...new Set(n)].map(m=>new Os(m)),f=(m,g)=>{for(let E=m;E<g-1;E++)h.push(null)};u<c?(f(1,u),h.push(d),f(u,c),h.push(new Os(s))):(f(1,c),f(c,u),h.push(new Os(s)),h.push(d));const p=new l(...h);return await this.setData(e,p),p}async saveToIfc(e,t){const s=this.components.get(a_),n=s.webIfc,r=await s.readIfcFile(t);await this.components.get(Ht).applyRelationChanges();const o=this.changeMap[e.uuid]??[];for(const l of o){const h=await e.getProperties(l);h?n.WriteLine(r,h):n.GetLine(r,l)&&n.DeleteLine(r,l)}const a=n.SaveModel(r);return s.webIfc.CloseModel(r),s.cleanUp(),a}async getEntityRef(e,t){const s=await e.getAllPropertiesOfType(t);if(!s)return null;const n=[];for(const r in s){const o=new Os(Number(r));n.push(o)}return n}async setAttributeListener(e,t,s){this.attributeListeners[e.uuid]||(this.attributeListeners[e.uuid]={});const n=this.attributeListeners[e.uuid][t]?this.attributeListeners[e.uuid][t][s]:null;if(n)return n;const r=await e.getProperties(t);if(!r)throw new Error(`Entity with expressID ${t} doesn't exists.`);const o=r[s];if(Array.isArray(o)||!o)throw new Error(`Attribute ${s} is array or null, and it can't have a listener.`);const a=o.value;if(a===void 0||a==null)throw new Error(`Attribute ${s} has a badly defined handle.`);const l=new Y;return Object.defineProperty(r[s],"value",{get(){return this._value},async set(h){this._value=h,l.trigger(h)}}),r[s].value=a,this.attributeListeners[e.uuid][t]||(this.attributeListeners[e.uuid][t]={}),this.attributeListeners[e.uuid][t][s]=l,l}getNewExpressID(e){return e.ifcMetadata.maxExpressID++,e.ifcMetadata.maxExpressID}newGUID(e){const t=Tn.getIFCSchema(e);return new Pi[t].IfcGloballyUniqueId(ms.create())}async getOwnerHistory(e){const t=await e.getAllPropertiesOfType(U1);if(!t)throw new Error("No OwnerHistory was found.");const s=Object.keys(t).map(o=>parseInt(o,10)),n=t[s[0]],r=new Os(n.expressID);return{entity:n,handle:r}}registerChange(e,...t){this.changeMap[e.uuid]||(this.changeMap[e.uuid]=new Set);for(const s of t)this.changeMap[e.uuid].add(s),this.onDataChanged.trigger({model:e,expressID:s})}async newSingleProperty(e,t,s,n){const r=Tn.getIFCSchema(e),o=new Pi[r].IfcIdentifier(s),a=new Pi[r][t](n),l=new Pi[r].IfcPropertySingleValue(o,null,a,null);return l.expressID=this.getNewExpressID(e),await this.setData(e,l),l}};T(nv,"uuid","58c2d9f0-183c-48d6-a402-dfcf5b9a34df");let c_=nv;const rv=class sf extends be{constructor(e){super(e),T(this,"onDisposed",new Y),T(this,"onRelationsIndexed",new Y),T(this,"relationMaps",{}),T(this,"enabled",!0),T(this,"_relToAttributesMap",Dg),T(this,"_inverseAttributes",["IsDecomposedBy","Decomposes","AssociatedTo","HasAssociations","ClassificationForObjects","IsGroupedBy","HasAssignments","IsDefinedBy","DefinesOcurrence","IsTypedBy","Types","Defines","ContainedInStructure","ContainsElements","HasControlElements","AssignedToFlowElement","ConnectedTo","ConnectedFrom","ReferencedBy","Declares","HasContext","Controls","IsNestedBy","Nests","DocumentRefForObjects"]),T(this,"_ifcRels",[Hc,Bf,zf,Vf,El,$f,Hf,Gc,Gf,Yf,jf,Wf,Xf,qf,Zf]),T(this,"onFragmentsDisposed",t=>{delete this.relationMaps[t.groupID]}),T(this,"_changeMap",{}),T(this,"onEntitiesRelated",new Y),this.components.add(sf.uuid,this),e.get(ve).onFragmentsDisposed.add(this.onFragmentsDisposed)}indexRelations(e,t,s,n){const r=Object.keys(t).find(u=>u.startsWith("Relating")),o=Object.keys(t).find(u=>u.startsWith("Related"));if(!(r&&o))return;const a=t[r].value,l=t[o].map(u=>u.value),h=this.getEntityRelations(e,a,n);for(const u of l)h.push(u);for(const u of l)this.getEntityRelations(e,u,s).push(a)}getAttributeIndex(e){const t=this._inverseAttributes.indexOf(e);if(t===-1)throw new Error(`IfcRelationsIndexer: ${e} is not a valid IFC Inverse Attribute name or its not supported yet by this component.`);return t}setRelationMap(e,t){this.relationMaps[e.uuid]=t,this.onRelationsIndexed.trigger({modelID:e.uuid,relationsMap:t})}async process(e,t){if(!e.hasProperties)throw new Error("FragmentsGroup properties not found");let s=this.relationMaps[e.uuid];s||(s=new Map,this.relationMaps[e.uuid]=s);const n=e.getLocalProperties();if(!n)return s;const r=(t==null?void 0:t.relationsToProcess)??this._ifcRels;for(const[o,a]of Object.entries(n)){if(!r.includes(a.type))continue;const l=this._relToAttributesMap.get(a.type);if(!l)continue;const{forRelated:h,forRelating:u}=l;this.indexRelations(s,a,h,u)}return this.setRelationMap(e,s),s}async processFromWebIfc(e,t){const s=new Map;for(const n of this._ifcRels){const r=this._relToAttributesMap.get(n);if(!r)continue;const{forRelated:o,forRelating:a}=r,l=e.GetLineIDsWithType(t,n);for(let h=0;h<l.size();h++){const u=await e.properties.getItemProperties(t,l.get(h));this.indexRelations(s,u,o,a)}}return this.onRelationsIndexed.trigger({modelID:t.toString(),relationsMap:s}),s}getEntityRelations(e,t,s){const n=this.getAttributeIndex(s);let r;if(e instanceof as?r=this.relationMaps[e.uuid]:typeof e=="string"?r=this.relationMaps[e]:r=e,!r&&(e instanceof as||typeof e=="string")){r=new Map;const l=e instanceof as?e.uuid:e;this.relationMaps[l]=r}let o=r.get(t);o||(o=new Map,r.set(t,o));let a=o.get(n);return a||(a=[],o.set(n,a)),a}serializeRelations(e){const t={};for(const[s,n]of e.entries()){t[s]||(t[s]={});for(const[r,o]of n.entries())t[s][r]=o}return JSON.stringify(t)}serializeModelRelations(e){const t=this.relationMaps[e.uuid];return t?this.serializeRelations(t):null}serializeAllRelations(){const e={};for(const t in this.relationMaps){const s=this.relationMaps[t],n={};for(const[r,o]of s.entries()){n[r]||(n[r]={});for(const[a,l]of o.entries())n[r][a]=l}e[t]=n}return JSON.stringify(e)}getRelationsMapFromJSON(e){const t=JSON.parse(e),s=new Map;for(const n in t){const r=t[n],o=new Map;for(const a in r)o.set(Number(a),r[a]);s.set(Number(n),o)}return s}dispose(){this.relationMaps={},this.components.get(ve).onFragmentsDisposed.remove(this.onFragmentsDisposed),this.onDisposed.trigger(sf.uuid),this.onDisposed.reset()}getEntitiesWithRelation(e,t,s){const n=this.relationMaps[e.uuid];if(!n)throw new Error("IfcRelationsIndexer: the model relations are not indexed!");const r=new Set;for(const[o,a]of n){const l=this.getAttributeIndex(t),h=a.get(l);h&&h.includes(s)&&r.add(o)}return r}addEntityRelations(e,t,s,...n){const r=this.getEntityRelations(e,t,s);if(r)r.push(...n);else{const o=this.getAttributeIndex(s),a=this.relationMaps[e.uuid].get(t);a==null||a.set(o,n)}}async applyRelationChanges(){const e=this.components.get(ve),t=this.components.get(c_);for(const s in this._changeMap){const n=e.groups.get(s);if(!n)continue;const r=this._changeMap[s];for(const[o,a]of r)for(const[l,h]of a){const{related:u,relID:c}=h;if(c){const d=await n.getProperties(c);if(!d)continue;const f=Object.keys(d),p=f.find(g=>g.startsWith("Related")),m=f.find(g=>g.startsWith("Relating"));if(!(p&&m))continue;d[p]=[...u].map(g=>new Os(g)),d[m]=new Os(l),await t.setData(n,d)}else{const d=await t.createIfcRel(n,o,l,[...u]);if(!d)continue;h.relID=d.expressID}}}}addEntitiesRelation(e,t,s,...n){const{type:r,inv:o}=s;let a=this.relationMaps[e.uuid];if(a||(a=new Map,this.relationMaps[e.uuid]=a),!this._ifcRels.includes(r))return;const l=Dg.get(r);if(!l)return;const{forRelated:h,forRelating:u}=l;if(!(h===o||u===o))return;let c=this._changeMap[e.uuid];c||(c=new Ci,this._changeMap[e.uuid]=c);const d=u===o?[t]:n,f=h===o?[t]:n;let p=c.get(r);p||(p=new Ci,p.onItemSet.add(()=>this.onEntitiesRelated.trigger({invAttribute:o,relType:r,relatingIDs:d,relatedIDs:f})),p.onItemUpdated.add(()=>this.onEntitiesRelated.trigger({invAttribute:o,relType:r,relatingIDs:d,relatedIDs:f})),c.set(r,p));for(const m of d){let g=p.get(m);g||(g={related:new Bs},p.set(m,g)),g.related.add(...f)}for(const m of d)this.getEntityRelations(e,m,u).push(...f);for(const m of f)this.getEntityRelations(e,m,h).push(...d)}getEntityChildren(e,t,s=new Set){if(s.add(t),this.relationMaps[e.uuid]===void 0)throw new Error("The provided model has no indices. You have to generate them first.");const n=this.getEntityRelations(e,t,"IsDecomposedBy");if(n)for(const o of n)this.getEntityChildren(e,o,s);const r=this.getEntityRelations(e,t,"ContainsElements");if(r)for(const o of r)this.getEntityChildren(e,o,s);return s}};T(rv,"uuid","23a889ab-83b3-44a4-8bee-ead83438370b");let Ht=rv;const ov=class av extends be{constructor(e){super(e),T(this,"onDisposed",new Y),T(this,"onFragmentsLoaded",new Y),T(this,"onFragmentsDisposed",new Y),T(this,"list",new Ci),T(this,"groups",new Ci),T(this,"baseCoordinationModel",""),T(this,"baseCoordinationMatrix",new ce),T(this,"enabled",!0),T(this,"_loader",new RE),this.components.add(av.uuid,this)}get meshes(){const e=[];for(const[t,s]of this.list)e.push(s.mesh);return e}dispose(){for(const[e,t]of this.groups)t.dispose(!0);this.baseCoordinationModel="",this.groups.clear(),this.list.clear(),this.onFragmentsLoaded.reset(),this.onFragmentsDisposed.reset(),this.onDisposed.trigger(),this.onDisposed.reset()}disposeGroup(e){const{uuid:t}=e,s=[];for(const n of e.items)s.push(n.id),this.list.delete(n.id);e.dispose(!0),this.groups.delete(e.uuid),this.groups.size===0&&(this.baseCoordinationModel="",this.baseCoordinationMatrix=new ce),this.onFragmentsDisposed.trigger({groupID:t,fragmentIDs:s})}load(e,t){const s={coordinate:!0,...t},{coordinate:n,name:r,properties:o,relationsMap:a}=s,l=this._loader.import(e);t&&(l.isStreamed=t.isStreamed||!1),r&&(l.name=r);for(const h of l.items)h.group=l,this.list.set(h.id,h);return n&&this.coordinate([l]),this.groups.set(l.uuid,l),o&&l.setLocalProperties(o),a&&this.components.get(Ht).setRelationMap(l,a),this.onFragmentsLoaded.trigger(l),l}export(e){return this._loader.export(e)}getModelIdMap(e){const t={};for(const s in e){const n=this.list.get(s);if(!(n&&n.group))continue;const r=n.group;r.uuid in t||(t[r.uuid]=new Set);const o=e[s];for(const a of o)t[r.uuid].add(a)}return t}modelIdToFragmentIdMap(e){let t={};for(const s in e){const n=this.groups.get(s);if(!n)continue;const r=e[s],o=n.getFragmentMap(r);t={...t,...o}}return t}guidToFragmentIdMap(e){const t={};for(const[s,n]of this.groups){s in t||(t[s]=new Set);for(const r of e){const o=n.globalToExpressIDs.get(r);o&&t[s].add(o)}}return this.modelIdToFragmentIdMap(t)}fragmentIdMapToGuids(e){const t=[],s=this.getModelIdMap(e);for(const n in s){const r=this.groups.get(n);if(!r)continue;const o=s[n];for(const a of o)for(const[l,h]of r.globalToExpressIDs.entries())if(h===a){t.push(l);break}}return t}coordinate(e=Array.from(this.groups.values())){if(this.baseCoordinationModel.length===0){const t=e.pop();if(!t)return;this.baseCoordinationModel=t.uuid,this.baseCoordinationMatrix=t.coordinationMatrix.clone()}if(e.length)for(const t of e)t.coordinationMatrix.equals(this.baseCoordinationMatrix)||(t.position.set(0,0,0),t.rotation.set(0,0,0),t.scale.set(1,1,1),t.updateMatrix(),this.applyBaseCoordinateSystem(t,t.coordinationMatrix))}applyBaseCoordinateSystem(e,t){t&&e.applyMatrix4(t.clone().invert()),e.applyMatrix4(this.baseCoordinationMatrix)}clone(e,t){const s=e.cloneGroup(t);this.groups.set(s.uuid,s);for(const n of s.items)this.list.set(n.id,n);return s}};T(ov,"uuid","fef46874-46a3-461b-8c44-2922ab77c806");let ve=ov;function xh(i){throw new Error('Could not dynamically require "'+i+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var lv={exports:{}};/*!

JSZip v3.10.1 - A JavaScript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/main/LICENSE
*/(function(i,e){(function(t){i.exports=t()})(function(){return function t(s,n,r){function o(h,u){if(!n[h]){if(!s[h]){var c=typeof xh=="function"&&xh;if(!u&&c)return c(h,!0);if(a)return a(h,!0);var d=new Error("Cannot find module '"+h+"'");throw d.code="MODULE_NOT_FOUND",d}var f=n[h]={exports:{}};s[h][0].call(f.exports,function(p){var m=s[h][1][p];return o(m||p)},f,f.exports,t,s,n,r)}return n[h].exports}for(var a=typeof xh=="function"&&xh,l=0;l<r.length;l++)o(r[l]);return o}({1:[function(t,s,n){var r=t("./utils"),o=t("./support"),a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";n.encode=function(l){for(var h,u,c,d,f,p,m,g=[],E=0,I=l.length,v=I,b=r.getTypeOf(l)!=="string";E<l.length;)v=I-E,c=b?(h=l[E++],u=E<I?l[E++]:0,E<I?l[E++]:0):(h=l.charCodeAt(E++),u=E<I?l.charCodeAt(E++):0,E<I?l.charCodeAt(E++):0),d=h>>2,f=(3&h)<<4|u>>4,p=1<v?(15&u)<<2|c>>6:64,m=2<v?63&c:64,g.push(a.charAt(d)+a.charAt(f)+a.charAt(p)+a.charAt(m));return g.join("")},n.decode=function(l){var h,u,c,d,f,p,m=0,g=0,E="data:";if(l.substr(0,E.length)===E)throw new Error("Invalid base64 input, it looks like a data url.");var I,v=3*(l=l.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(l.charAt(l.length-1)===a.charAt(64)&&v--,l.charAt(l.length-2)===a.charAt(64)&&v--,v%1!=0)throw new Error("Invalid base64 input, bad content length.");for(I=o.uint8array?new Uint8Array(0|v):new Array(0|v);m<l.length;)h=a.indexOf(l.charAt(m++))<<2|(d=a.indexOf(l.charAt(m++)))>>4,u=(15&d)<<4|(f=a.indexOf(l.charAt(m++)))>>2,c=(3&f)<<6|(p=a.indexOf(l.charAt(m++))),I[g++]=h,f!==64&&(I[g++]=u),p!==64&&(I[g++]=c);return I}},{"./support":30,"./utils":32}],2:[function(t,s,n){var r=t("./external"),o=t("./stream/DataWorker"),a=t("./stream/Crc32Probe"),l=t("./stream/DataLengthProbe");function h(u,c,d,f,p){this.compressedSize=u,this.uncompressedSize=c,this.crc32=d,this.compression=f,this.compressedContent=p}h.prototype={getContentWorker:function(){var u=new o(r.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new l("data_length")),c=this;return u.on("end",function(){if(this.streamInfo.data_length!==c.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),u},getCompressedWorker:function(){return new o(r.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},h.createWorkerFrom=function(u,c,d){return u.pipe(new a).pipe(new l("uncompressedSize")).pipe(c.compressWorker(d)).pipe(new l("compressedSize")).withStreamInfo("compression",c)},s.exports=h},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(t,s,n){var r=t("./stream/GenericWorker");n.STORE={magic:"\0\0",compressWorker:function(){return new r("STORE compression")},uncompressWorker:function(){return new r("STORE decompression")}},n.DEFLATE=t("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(t,s,n){var r=t("./utils"),o=function(){for(var a,l=[],h=0;h<256;h++){a=h;for(var u=0;u<8;u++)a=1&a?3988292384^a>>>1:a>>>1;l[h]=a}return l}();s.exports=function(a,l){return a!==void 0&&a.length?r.getTypeOf(a)!=="string"?function(h,u,c,d){var f=o,p=d+c;h^=-1;for(var m=d;m<p;m++)h=h>>>8^f[255&(h^u[m])];return-1^h}(0|l,a,a.length,0):function(h,u,c,d){var f=o,p=d+c;h^=-1;for(var m=d;m<p;m++)h=h>>>8^f[255&(h^u.charCodeAt(m))];return-1^h}(0|l,a,a.length,0):0}},{"./utils":32}],5:[function(t,s,n){n.base64=!1,n.binary=!1,n.dir=!1,n.createFolders=!0,n.date=null,n.compression=null,n.compressionOptions=null,n.comment=null,n.unixPermissions=null,n.dosPermissions=null},{}],6:[function(t,s,n){var r=null;r=typeof Promise<"u"?Promise:t("lie"),s.exports={Promise:r}},{lie:37}],7:[function(t,s,n){var r=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",o=t("pako"),a=t("./utils"),l=t("./stream/GenericWorker"),h=r?"uint8array":"array";function u(c,d){l.call(this,"FlateWorker/"+c),this._pako=null,this._pakoAction=c,this._pakoOptions=d,this.meta={}}n.magic="\b\0",a.inherits(u,l),u.prototype.processChunk=function(c){this.meta=c.meta,this._pako===null&&this._createPako(),this._pako.push(a.transformTo(h,c.data),!1)},u.prototype.flush=function(){l.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},u.prototype.cleanUp=function(){l.prototype.cleanUp.call(this),this._pako=null},u.prototype._createPako=function(){this._pako=new o[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var c=this;this._pako.onData=function(d){c.push({data:d,meta:c.meta})}},n.compressWorker=function(c){return new u("Deflate",c)},n.uncompressWorker=function(){return new u("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(t,s,n){function r(f,p){var m,g="";for(m=0;m<p;m++)g+=String.fromCharCode(255&f),f>>>=8;return g}function o(f,p,m,g,E,I){var v,b,C=f.file,S=f.compression,_=I!==h.utf8encode,M=a.transformTo("string",I(C.name)),A=a.transformTo("string",h.utf8encode(C.name)),F=C.comment,D=a.transformTo("string",I(F)),x=a.transformTo("string",h.utf8encode(F)),N=A.length!==C.name.length,y=x.length!==F.length,U="",B="",k="",W=C.dir,z=C.date,he={crc32:0,compressedSize:0,uncompressedSize:0};p&&!m||(he.crc32=f.crc32,he.compressedSize=f.compressedSize,he.uncompressedSize=f.uncompressedSize);var G=0;p&&(G|=8),_||!N&&!y||(G|=2048);var H=0,pe=0;W&&(H|=16),E==="UNIX"?(pe=798,H|=function(re,Te){var we=re;return re||(we=Te?16893:33204),(65535&we)<<16}(C.unixPermissions,W)):(pe=20,H|=function(re){return 63&(re||0)}(C.dosPermissions)),v=z.getUTCHours(),v<<=6,v|=z.getUTCMinutes(),v<<=5,v|=z.getUTCSeconds()/2,b=z.getUTCFullYear()-1980,b<<=4,b|=z.getUTCMonth()+1,b<<=5,b|=z.getUTCDate(),N&&(B=r(1,1)+r(u(M),4)+A,U+="up"+r(B.length,2)+B),y&&(k=r(1,1)+r(u(D),4)+x,U+="uc"+r(k.length,2)+k);var le="";return le+=`
\0`,le+=r(G,2),le+=S.magic,le+=r(v,2),le+=r(b,2),le+=r(he.crc32,4),le+=r(he.compressedSize,4),le+=r(he.uncompressedSize,4),le+=r(M.length,2),le+=r(U.length,2),{fileRecord:c.LOCAL_FILE_HEADER+le+M+U,dirRecord:c.CENTRAL_FILE_HEADER+r(pe,2)+le+r(D.length,2)+"\0\0\0\0"+r(H,4)+r(g,4)+M+U+D}}var a=t("../utils"),l=t("../stream/GenericWorker"),h=t("../utf8"),u=t("../crc32"),c=t("../signature");function d(f,p,m,g){l.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=p,this.zipPlatform=m,this.encodeFileName=g,this.streamFiles=f,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}a.inherits(d,l),d.prototype.push=function(f){var p=f.meta.percent||0,m=this.entriesCount,g=this._sources.length;this.accumulate?this.contentBuffer.push(f):(this.bytesWritten+=f.data.length,l.prototype.push.call(this,{data:f.data,meta:{currentFile:this.currentFile,percent:m?(p+100*(m-g-1))/m:100}}))},d.prototype.openedSource=function(f){this.currentSourceOffset=this.bytesWritten,this.currentFile=f.file.name;var p=this.streamFiles&&!f.file.dir;if(p){var m=o(f,p,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:m.fileRecord,meta:{percent:0}})}else this.accumulate=!0},d.prototype.closedSource=function(f){this.accumulate=!1;var p=this.streamFiles&&!f.file.dir,m=o(f,p,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(m.dirRecord),p)this.push({data:function(g){return c.DATA_DESCRIPTOR+r(g.crc32,4)+r(g.compressedSize,4)+r(g.uncompressedSize,4)}(f),meta:{percent:100}});else for(this.push({data:m.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},d.prototype.flush=function(){for(var f=this.bytesWritten,p=0;p<this.dirRecords.length;p++)this.push({data:this.dirRecords[p],meta:{percent:100}});var m=this.bytesWritten-f,g=function(E,I,v,b,C){var S=a.transformTo("string",C(b));return c.CENTRAL_DIRECTORY_END+"\0\0\0\0"+r(E,2)+r(E,2)+r(I,4)+r(v,4)+r(S.length,2)+S}(this.dirRecords.length,m,f,this.zipComment,this.encodeFileName);this.push({data:g,meta:{percent:100}})},d.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},d.prototype.registerPrevious=function(f){this._sources.push(f);var p=this;return f.on("data",function(m){p.processChunk(m)}),f.on("end",function(){p.closedSource(p.previous.streamInfo),p._sources.length?p.prepareNextSource():p.end()}),f.on("error",function(m){p.error(m)}),this},d.prototype.resume=function(){return!!l.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},d.prototype.error=function(f){var p=this._sources;if(!l.prototype.error.call(this,f))return!1;for(var m=0;m<p.length;m++)try{p[m].error(f)}catch{}return!0},d.prototype.lock=function(){l.prototype.lock.call(this);for(var f=this._sources,p=0;p<f.length;p++)f[p].lock()},s.exports=d},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(t,s,n){var r=t("../compressions"),o=t("./ZipFileWorker");n.generateWorker=function(a,l,h){var u=new o(l.streamFiles,h,l.platform,l.encodeFileName),c=0;try{a.forEach(function(d,f){c++;var p=function(I,v){var b=I||v,C=r[b];if(!C)throw new Error(b+" is not a valid compression method !");return C}(f.options.compression,l.compression),m=f.options.compressionOptions||l.compressionOptions||{},g=f.dir,E=f.date;f._compressWorker(p,m).withStreamInfo("file",{name:d,dir:g,date:E,comment:f.comment||"",unixPermissions:f.unixPermissions,dosPermissions:f.dosPermissions}).pipe(u)}),u.entriesCount=c}catch(d){u.error(d)}return u}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(t,s,n){function r(){if(!(this instanceof r))return new r;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var o=new r;for(var a in this)typeof this[a]!="function"&&(o[a]=this[a]);return o}}(r.prototype=t("./object")).loadAsync=t("./load"),r.support=t("./support"),r.defaults=t("./defaults"),r.version="3.10.1",r.loadAsync=function(o,a){return new r().loadAsync(o,a)},r.external=t("./external"),s.exports=r},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(t,s,n){var r=t("./utils"),o=t("./external"),a=t("./utf8"),l=t("./zipEntries"),h=t("./stream/Crc32Probe"),u=t("./nodejsUtils");function c(d){return new o.Promise(function(f,p){var m=d.decompressed.getContentWorker().pipe(new h);m.on("error",function(g){p(g)}).on("end",function(){m.streamInfo.crc32!==d.decompressed.crc32?p(new Error("Corrupted zip : CRC32 mismatch")):f()}).resume()})}s.exports=function(d,f){var p=this;return f=r.extend(f||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:a.utf8decode}),u.isNode&&u.isStream(d)?o.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):r.prepareContent("the loaded zip file",d,!0,f.optimizedBinaryString,f.base64).then(function(m){var g=new l(f);return g.load(m),g}).then(function(m){var g=[o.Promise.resolve(m)],E=m.files;if(f.checkCRC32)for(var I=0;I<E.length;I++)g.push(c(E[I]));return o.Promise.all(g)}).then(function(m){for(var g=m.shift(),E=g.files,I=0;I<E.length;I++){var v=E[I],b=v.fileNameStr,C=r.resolve(v.fileNameStr);p.file(C,v.decompressed,{binary:!0,optimizedBinaryString:!0,date:v.date,dir:v.dir,comment:v.fileCommentStr.length?v.fileCommentStr:null,unixPermissions:v.unixPermissions,dosPermissions:v.dosPermissions,createFolders:f.createFolders}),v.dir||(p.file(C).unsafeOriginalName=b)}return g.zipComment.length&&(p.comment=g.zipComment),p})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(t,s,n){var r=t("../utils"),o=t("../stream/GenericWorker");function a(l,h){o.call(this,"Nodejs stream input adapter for "+l),this._upstreamEnded=!1,this._bindStream(h)}r.inherits(a,o),a.prototype._bindStream=function(l){var h=this;(this._stream=l).pause(),l.on("data",function(u){h.push({data:u,meta:{percent:0}})}).on("error",function(u){h.isPaused?this.generatedError=u:h.error(u)}).on("end",function(){h.isPaused?h._upstreamEnded=!0:h.end()})},a.prototype.pause=function(){return!!o.prototype.pause.call(this)&&(this._stream.pause(),!0)},a.prototype.resume=function(){return!!o.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},s.exports=a},{"../stream/GenericWorker":28,"../utils":32}],13:[function(t,s,n){var r=t("readable-stream").Readable;function o(a,l,h){r.call(this,l),this._helper=a;var u=this;a.on("data",function(c,d){u.push(c)||u._helper.pause(),h&&h(d)}).on("error",function(c){u.emit("error",c)}).on("end",function(){u.push(null)})}t("../utils").inherits(o,r),o.prototype._read=function(){this._helper.resume()},s.exports=o},{"../utils":32,"readable-stream":16}],14:[function(t,s,n){s.exports={isNode:typeof Buffer<"u",newBufferFrom:function(r,o){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(r,o);if(typeof r=="number")throw new Error('The "data" argument must not be a number');return new Buffer(r,o)},allocBuffer:function(r){if(Buffer.alloc)return Buffer.alloc(r);var o=new Buffer(r);return o.fill(0),o},isBuffer:function(r){return Buffer.isBuffer(r)},isStream:function(r){return r&&typeof r.on=="function"&&typeof r.pause=="function"&&typeof r.resume=="function"}}},{}],15:[function(t,s,n){function r(C,S,_){var M,A=a.getTypeOf(S),F=a.extend(_||{},u);F.date=F.date||new Date,F.compression!==null&&(F.compression=F.compression.toUpperCase()),typeof F.unixPermissions=="string"&&(F.unixPermissions=parseInt(F.unixPermissions,8)),F.unixPermissions&&16384&F.unixPermissions&&(F.dir=!0),F.dosPermissions&&16&F.dosPermissions&&(F.dir=!0),F.dir&&(C=E(C)),F.createFolders&&(M=g(C))&&I.call(this,M,!0);var D=A==="string"&&F.binary===!1&&F.base64===!1;_&&_.binary!==void 0||(F.binary=!D),(S instanceof c&&S.uncompressedSize===0||F.dir||!S||S.length===0)&&(F.base64=!1,F.binary=!0,S="",F.compression="STORE",A="string");var x=null;x=S instanceof c||S instanceof l?S:p.isNode&&p.isStream(S)?new m(C,S):a.prepareContent(C,S,F.binary,F.optimizedBinaryString,F.base64);var N=new d(C,x,F);this.files[C]=N}var o=t("./utf8"),a=t("./utils"),l=t("./stream/GenericWorker"),h=t("./stream/StreamHelper"),u=t("./defaults"),c=t("./compressedObject"),d=t("./zipObject"),f=t("./generate"),p=t("./nodejsUtils"),m=t("./nodejs/NodejsStreamInputAdapter"),g=function(C){C.slice(-1)==="/"&&(C=C.substring(0,C.length-1));var S=C.lastIndexOf("/");return 0<S?C.substring(0,S):""},E=function(C){return C.slice(-1)!=="/"&&(C+="/"),C},I=function(C,S){return S=S!==void 0?S:u.createFolders,C=E(C),this.files[C]||r.call(this,C,null,{dir:!0,createFolders:S}),this.files[C]};function v(C){return Object.prototype.toString.call(C)==="[object RegExp]"}var b={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(C){var S,_,M;for(S in this.files)M=this.files[S],(_=S.slice(this.root.length,S.length))&&S.slice(0,this.root.length)===this.root&&C(_,M)},filter:function(C){var S=[];return this.forEach(function(_,M){C(_,M)&&S.push(M)}),S},file:function(C,S,_){if(arguments.length!==1)return C=this.root+C,r.call(this,C,S,_),this;if(v(C)){var M=C;return this.filter(function(F,D){return!D.dir&&M.test(F)})}var A=this.files[this.root+C];return A&&!A.dir?A:null},folder:function(C){if(!C)return this;if(v(C))return this.filter(function(A,F){return F.dir&&C.test(A)});var S=this.root+C,_=I.call(this,S),M=this.clone();return M.root=_.name,M},remove:function(C){C=this.root+C;var S=this.files[C];if(S||(C.slice(-1)!=="/"&&(C+="/"),S=this.files[C]),S&&!S.dir)delete this.files[C];else for(var _=this.filter(function(A,F){return F.name.slice(0,C.length)===C}),M=0;M<_.length;M++)delete this.files[_[M].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(C){var S,_={};try{if((_=a.extend(C||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:o.utf8encode})).type=_.type.toLowerCase(),_.compression=_.compression.toUpperCase(),_.type==="binarystring"&&(_.type="string"),!_.type)throw new Error("No output type specified.");a.checkSupport(_.type),_.platform!=="darwin"&&_.platform!=="freebsd"&&_.platform!=="linux"&&_.platform!=="sunos"||(_.platform="UNIX"),_.platform==="win32"&&(_.platform="DOS");var M=_.comment||this.comment||"";S=f.generateWorker(this,_,M)}catch(A){(S=new l("error")).error(A)}return new h(S,_.type||"string",_.mimeType)},generateAsync:function(C,S){return this.generateInternalStream(C).accumulate(S)},generateNodeStream:function(C,S){return(C=C||{}).type||(C.type="nodebuffer"),this.generateInternalStream(C).toNodejsStream(S)}};s.exports=b},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(t,s,n){s.exports=t("stream")},{stream:void 0}],17:[function(t,s,n){var r=t("./DataReader");function o(a){r.call(this,a);for(var l=0;l<this.data.length;l++)a[l]=255&a[l]}t("../utils").inherits(o,r),o.prototype.byteAt=function(a){return this.data[this.zero+a]},o.prototype.lastIndexOfSignature=function(a){for(var l=a.charCodeAt(0),h=a.charCodeAt(1),u=a.charCodeAt(2),c=a.charCodeAt(3),d=this.length-4;0<=d;--d)if(this.data[d]===l&&this.data[d+1]===h&&this.data[d+2]===u&&this.data[d+3]===c)return d-this.zero;return-1},o.prototype.readAndCheckSignature=function(a){var l=a.charCodeAt(0),h=a.charCodeAt(1),u=a.charCodeAt(2),c=a.charCodeAt(3),d=this.readData(4);return l===d[0]&&h===d[1]&&u===d[2]&&c===d[3]},o.prototype.readData=function(a){if(this.checkOffset(a),a===0)return[];var l=this.data.slice(this.zero+this.index,this.zero+this.index+a);return this.index+=a,l},s.exports=o},{"../utils":32,"./DataReader":18}],18:[function(t,s,n){var r=t("../utils");function o(a){this.data=a,this.length=a.length,this.index=0,this.zero=0}o.prototype={checkOffset:function(a){this.checkIndex(this.index+a)},checkIndex:function(a){if(this.length<this.zero+a||a<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+a+"). Corrupted zip ?")},setIndex:function(a){this.checkIndex(a),this.index=a},skip:function(a){this.setIndex(this.index+a)},byteAt:function(){},readInt:function(a){var l,h=0;for(this.checkOffset(a),l=this.index+a-1;l>=this.index;l--)h=(h<<8)+this.byteAt(l);return this.index+=a,h},readString:function(a){return r.transformTo("string",this.readData(a))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var a=this.readInt(4);return new Date(Date.UTC(1980+(a>>25&127),(a>>21&15)-1,a>>16&31,a>>11&31,a>>5&63,(31&a)<<1))}},s.exports=o},{"../utils":32}],19:[function(t,s,n){var r=t("./Uint8ArrayReader");function o(a){r.call(this,a)}t("../utils").inherits(o,r),o.prototype.readData=function(a){this.checkOffset(a);var l=this.data.slice(this.zero+this.index,this.zero+this.index+a);return this.index+=a,l},s.exports=o},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(t,s,n){var r=t("./DataReader");function o(a){r.call(this,a)}t("../utils").inherits(o,r),o.prototype.byteAt=function(a){return this.data.charCodeAt(this.zero+a)},o.prototype.lastIndexOfSignature=function(a){return this.data.lastIndexOf(a)-this.zero},o.prototype.readAndCheckSignature=function(a){return a===this.readData(4)},o.prototype.readData=function(a){this.checkOffset(a);var l=this.data.slice(this.zero+this.index,this.zero+this.index+a);return this.index+=a,l},s.exports=o},{"../utils":32,"./DataReader":18}],21:[function(t,s,n){var r=t("./ArrayReader");function o(a){r.call(this,a)}t("../utils").inherits(o,r),o.prototype.readData=function(a){if(this.checkOffset(a),a===0)return new Uint8Array(0);var l=this.data.subarray(this.zero+this.index,this.zero+this.index+a);return this.index+=a,l},s.exports=o},{"../utils":32,"./ArrayReader":17}],22:[function(t,s,n){var r=t("../utils"),o=t("../support"),a=t("./ArrayReader"),l=t("./StringReader"),h=t("./NodeBufferReader"),u=t("./Uint8ArrayReader");s.exports=function(c){var d=r.getTypeOf(c);return r.checkSupport(d),d!=="string"||o.uint8array?d==="nodebuffer"?new h(c):o.uint8array?new u(r.transformTo("uint8array",c)):new a(r.transformTo("array",c)):new l(c)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(t,s,n){n.LOCAL_FILE_HEADER="PK",n.CENTRAL_FILE_HEADER="PK",n.CENTRAL_DIRECTORY_END="PK",n.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",n.ZIP64_CENTRAL_DIRECTORY_END="PK",n.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(t,s,n){var r=t("./GenericWorker"),o=t("../utils");function a(l){r.call(this,"ConvertWorker to "+l),this.destType=l}o.inherits(a,r),a.prototype.processChunk=function(l){this.push({data:o.transformTo(this.destType,l.data),meta:l.meta})},s.exports=a},{"../utils":32,"./GenericWorker":28}],25:[function(t,s,n){var r=t("./GenericWorker"),o=t("../crc32");function a(){r.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}t("../utils").inherits(a,r),a.prototype.processChunk=function(l){this.streamInfo.crc32=o(l.data,this.streamInfo.crc32||0),this.push(l)},s.exports=a},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(t,s,n){var r=t("../utils"),o=t("./GenericWorker");function a(l){o.call(this,"DataLengthProbe for "+l),this.propName=l,this.withStreamInfo(l,0)}r.inherits(a,o),a.prototype.processChunk=function(l){if(l){var h=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=h+l.data.length}o.prototype.processChunk.call(this,l)},s.exports=a},{"../utils":32,"./GenericWorker":28}],27:[function(t,s,n){var r=t("../utils"),o=t("./GenericWorker");function a(l){o.call(this,"DataWorker");var h=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,l.then(function(u){h.dataIsReady=!0,h.data=u,h.max=u&&u.length||0,h.type=r.getTypeOf(u),h.isPaused||h._tickAndRepeat()},function(u){h.error(u)})}r.inherits(a,o),a.prototype.cleanUp=function(){o.prototype.cleanUp.call(this),this.data=null},a.prototype.resume=function(){return!!o.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,r.delay(this._tickAndRepeat,[],this)),!0)},a.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(r.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},a.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var l=null,h=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":l=this.data.substring(this.index,h);break;case"uint8array":l=this.data.subarray(this.index,h);break;case"array":case"nodebuffer":l=this.data.slice(this.index,h)}return this.index=h,this.push({data:l,meta:{percent:this.max?this.index/this.max*100:0}})},s.exports=a},{"../utils":32,"./GenericWorker":28}],28:[function(t,s,n){function r(o){this.name=o||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}r.prototype={push:function(o){this.emit("data",o)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(o){this.emit("error",o)}return!0},error:function(o){return!this.isFinished&&(this.isPaused?this.generatedError=o:(this.isFinished=!0,this.emit("error",o),this.previous&&this.previous.error(o),this.cleanUp()),!0)},on:function(o,a){return this._listeners[o].push(a),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(o,a){if(this._listeners[o])for(var l=0;l<this._listeners[o].length;l++)this._listeners[o][l].call(this,a)},pipe:function(o){return o.registerPrevious(this)},registerPrevious:function(o){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=o.streamInfo,this.mergeStreamInfo(),this.previous=o;var a=this;return o.on("data",function(l){a.processChunk(l)}),o.on("end",function(){a.end()}),o.on("error",function(l){a.error(l)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var o=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),o=!0),this.previous&&this.previous.resume(),!o},flush:function(){},processChunk:function(o){this.push(o)},withStreamInfo:function(o,a){return this.extraStreamInfo[o]=a,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var o in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,o)&&(this.streamInfo[o]=this.extraStreamInfo[o])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var o="Worker "+this.name;return this.previous?this.previous+" -> "+o:o}},s.exports=r},{}],29:[function(t,s,n){var r=t("../utils"),o=t("./ConvertWorker"),a=t("./GenericWorker"),l=t("../base64"),h=t("../support"),u=t("../external"),c=null;if(h.nodestream)try{c=t("../nodejs/NodejsStreamOutputAdapter")}catch{}function d(p,m){return new u.Promise(function(g,E){var I=[],v=p._internalType,b=p._outputType,C=p._mimeType;p.on("data",function(S,_){I.push(S),m&&m(_)}).on("error",function(S){I=[],E(S)}).on("end",function(){try{var S=function(_,M,A){switch(_){case"blob":return r.newBlob(r.transformTo("arraybuffer",M),A);case"base64":return l.encode(M);default:return r.transformTo(_,M)}}(b,function(_,M){var A,F=0,D=null,x=0;for(A=0;A<M.length;A++)x+=M[A].length;switch(_){case"string":return M.join("");case"array":return Array.prototype.concat.apply([],M);case"uint8array":for(D=new Uint8Array(x),A=0;A<M.length;A++)D.set(M[A],F),F+=M[A].length;return D;case"nodebuffer":return Buffer.concat(M);default:throw new Error("concat : unsupported type '"+_+"'")}}(v,I),C);g(S)}catch(_){E(_)}I=[]}).resume()})}function f(p,m,g){var E=m;switch(m){case"blob":case"arraybuffer":E="uint8array";break;case"base64":E="string"}try{this._internalType=E,this._outputType=m,this._mimeType=g,r.checkSupport(E),this._worker=p.pipe(new o(E)),p.lock()}catch(I){this._worker=new a("error"),this._worker.error(I)}}f.prototype={accumulate:function(p){return d(this,p)},on:function(p,m){var g=this;return p==="data"?this._worker.on(p,function(E){m.call(g,E.data,E.meta)}):this._worker.on(p,function(){r.delay(m,arguments,g)}),this},resume:function(){return r.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(p){if(r.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new c(this,{objectMode:this._outputType!=="nodebuffer"},p)}},s.exports=f},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(t,s,n){if(n.base64=!0,n.array=!0,n.string=!0,n.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",n.nodebuffer=typeof Buffer<"u",n.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")n.blob=!1;else{var r=new ArrayBuffer(0);try{n.blob=new Blob([r],{type:"application/zip"}).size===0}catch{try{var o=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);o.append(r),n.blob=o.getBlob("application/zip").size===0}catch{n.blob=!1}}}try{n.nodestream=!!t("readable-stream").Readable}catch{n.nodestream=!1}},{"readable-stream":16}],31:[function(t,s,n){for(var r=t("./utils"),o=t("./support"),a=t("./nodejsUtils"),l=t("./stream/GenericWorker"),h=new Array(256),u=0;u<256;u++)h[u]=252<=u?6:248<=u?5:240<=u?4:224<=u?3:192<=u?2:1;h[254]=h[254]=1;function c(){l.call(this,"utf-8 decode"),this.leftOver=null}function d(){l.call(this,"utf-8 encode")}n.utf8encode=function(f){return o.nodebuffer?a.newBufferFrom(f,"utf-8"):function(p){var m,g,E,I,v,b=p.length,C=0;for(I=0;I<b;I++)(64512&(g=p.charCodeAt(I)))==55296&&I+1<b&&(64512&(E=p.charCodeAt(I+1)))==56320&&(g=65536+(g-55296<<10)+(E-56320),I++),C+=g<128?1:g<2048?2:g<65536?3:4;for(m=o.uint8array?new Uint8Array(C):new Array(C),I=v=0;v<C;I++)(64512&(g=p.charCodeAt(I)))==55296&&I+1<b&&(64512&(E=p.charCodeAt(I+1)))==56320&&(g=65536+(g-55296<<10)+(E-56320),I++),g<128?m[v++]=g:(g<2048?m[v++]=192|g>>>6:(g<65536?m[v++]=224|g>>>12:(m[v++]=240|g>>>18,m[v++]=128|g>>>12&63),m[v++]=128|g>>>6&63),m[v++]=128|63&g);return m}(f)},n.utf8decode=function(f){return o.nodebuffer?r.transformTo("nodebuffer",f).toString("utf-8"):function(p){var m,g,E,I,v=p.length,b=new Array(2*v);for(m=g=0;m<v;)if((E=p[m++])<128)b[g++]=E;else if(4<(I=h[E]))b[g++]=65533,m+=I-1;else{for(E&=I===2?31:I===3?15:7;1<I&&m<v;)E=E<<6|63&p[m++],I--;1<I?b[g++]=65533:E<65536?b[g++]=E:(E-=65536,b[g++]=55296|E>>10&1023,b[g++]=56320|1023&E)}return b.length!==g&&(b.subarray?b=b.subarray(0,g):b.length=g),r.applyFromCharCode(b)}(f=r.transformTo(o.uint8array?"uint8array":"array",f))},r.inherits(c,l),c.prototype.processChunk=function(f){var p=r.transformTo(o.uint8array?"uint8array":"array",f.data);if(this.leftOver&&this.leftOver.length){if(o.uint8array){var m=p;(p=new Uint8Array(m.length+this.leftOver.length)).set(this.leftOver,0),p.set(m,this.leftOver.length)}else p=this.leftOver.concat(p);this.leftOver=null}var g=function(I,v){var b;for((v=v||I.length)>I.length&&(v=I.length),b=v-1;0<=b&&(192&I[b])==128;)b--;return b<0||b===0?v:b+h[I[b]]>v?b:v}(p),E=p;g!==p.length&&(o.uint8array?(E=p.subarray(0,g),this.leftOver=p.subarray(g,p.length)):(E=p.slice(0,g),this.leftOver=p.slice(g,p.length))),this.push({data:n.utf8decode(E),meta:f.meta})},c.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:n.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},n.Utf8DecodeWorker=c,r.inherits(d,l),d.prototype.processChunk=function(f){this.push({data:n.utf8encode(f.data),meta:f.meta})},n.Utf8EncodeWorker=d},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(t,s,n){var r=t("./support"),o=t("./base64"),a=t("./nodejsUtils"),l=t("./external");function h(m){return m}function u(m,g){for(var E=0;E<m.length;++E)g[E]=255&m.charCodeAt(E);return g}t("setimmediate"),n.newBlob=function(m,g){n.checkSupport("blob");try{return new Blob([m],{type:g})}catch{try{var E=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return E.append(m),E.getBlob(g)}catch{throw new Error("Bug : can't construct the Blob.")}}};var c={stringifyByChunk:function(m,g,E){var I=[],v=0,b=m.length;if(b<=E)return String.fromCharCode.apply(null,m);for(;v<b;)g==="array"||g==="nodebuffer"?I.push(String.fromCharCode.apply(null,m.slice(v,Math.min(v+E,b)))):I.push(String.fromCharCode.apply(null,m.subarray(v,Math.min(v+E,b)))),v+=E;return I.join("")},stringifyByChar:function(m){for(var g="",E=0;E<m.length;E++)g+=String.fromCharCode(m[E]);return g},applyCanBeUsed:{uint8array:function(){try{return r.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return r.nodebuffer&&String.fromCharCode.apply(null,a.allocBuffer(1)).length===1}catch{return!1}}()}};function d(m){var g=65536,E=n.getTypeOf(m),I=!0;if(E==="uint8array"?I=c.applyCanBeUsed.uint8array:E==="nodebuffer"&&(I=c.applyCanBeUsed.nodebuffer),I)for(;1<g;)try{return c.stringifyByChunk(m,E,g)}catch{g=Math.floor(g/2)}return c.stringifyByChar(m)}function f(m,g){for(var E=0;E<m.length;E++)g[E]=m[E];return g}n.applyFromCharCode=d;var p={};p.string={string:h,array:function(m){return u(m,new Array(m.length))},arraybuffer:function(m){return p.string.uint8array(m).buffer},uint8array:function(m){return u(m,new Uint8Array(m.length))},nodebuffer:function(m){return u(m,a.allocBuffer(m.length))}},p.array={string:d,array:h,arraybuffer:function(m){return new Uint8Array(m).buffer},uint8array:function(m){return new Uint8Array(m)},nodebuffer:function(m){return a.newBufferFrom(m)}},p.arraybuffer={string:function(m){return d(new Uint8Array(m))},array:function(m){return f(new Uint8Array(m),new Array(m.byteLength))},arraybuffer:h,uint8array:function(m){return new Uint8Array(m)},nodebuffer:function(m){return a.newBufferFrom(new Uint8Array(m))}},p.uint8array={string:d,array:function(m){return f(m,new Array(m.length))},arraybuffer:function(m){return m.buffer},uint8array:h,nodebuffer:function(m){return a.newBufferFrom(m)}},p.nodebuffer={string:d,array:function(m){return f(m,new Array(m.length))},arraybuffer:function(m){return p.nodebuffer.uint8array(m).buffer},uint8array:function(m){return f(m,new Uint8Array(m.length))},nodebuffer:h},n.transformTo=function(m,g){if(g=g||"",!m)return g;n.checkSupport(m);var E=n.getTypeOf(g);return p[E][m](g)},n.resolve=function(m){for(var g=m.split("/"),E=[],I=0;I<g.length;I++){var v=g[I];v==="."||v===""&&I!==0&&I!==g.length-1||(v===".."?E.pop():E.push(v))}return E.join("/")},n.getTypeOf=function(m){return typeof m=="string"?"string":Object.prototype.toString.call(m)==="[object Array]"?"array":r.nodebuffer&&a.isBuffer(m)?"nodebuffer":r.uint8array&&m instanceof Uint8Array?"uint8array":r.arraybuffer&&m instanceof ArrayBuffer?"arraybuffer":void 0},n.checkSupport=function(m){if(!r[m.toLowerCase()])throw new Error(m+" is not supported by this platform")},n.MAX_VALUE_16BITS=65535,n.MAX_VALUE_32BITS=-1,n.pretty=function(m){var g,E,I="";for(E=0;E<(m||"").length;E++)I+="\\x"+((g=m.charCodeAt(E))<16?"0":"")+g.toString(16).toUpperCase();return I},n.delay=function(m,g,E){setImmediate(function(){m.apply(E||null,g||[])})},n.inherits=function(m,g){function E(){}E.prototype=g.prototype,m.prototype=new E},n.extend=function(){var m,g,E={};for(m=0;m<arguments.length;m++)for(g in arguments[m])Object.prototype.hasOwnProperty.call(arguments[m],g)&&E[g]===void 0&&(E[g]=arguments[m][g]);return E},n.prepareContent=function(m,g,E,I,v){return l.Promise.resolve(g).then(function(b){return r.blob&&(b instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(b))!==-1)&&typeof FileReader<"u"?new l.Promise(function(C,S){var _=new FileReader;_.onload=function(M){C(M.target.result)},_.onerror=function(M){S(M.target.error)},_.readAsArrayBuffer(b)}):b}).then(function(b){var C=n.getTypeOf(b);return C?(C==="arraybuffer"?b=n.transformTo("uint8array",b):C==="string"&&(v?b=o.decode(b):E&&I!==!0&&(b=function(S){return u(S,r.uint8array?new Uint8Array(S.length):new Array(S.length))}(b))),b):l.Promise.reject(new Error("Can't read the data of '"+m+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(t,s,n){var r=t("./reader/readerFor"),o=t("./utils"),a=t("./signature"),l=t("./zipEntry"),h=t("./support");function u(c){this.files=[],this.loadOptions=c}u.prototype={checkSignature:function(c){if(!this.reader.readAndCheckSignature(c)){this.reader.index-=4;var d=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+o.pretty(d)+", expected "+o.pretty(c)+")")}},isSignature:function(c,d){var f=this.reader.index;this.reader.setIndex(c);var p=this.reader.readString(4)===d;return this.reader.setIndex(f),p},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var c=this.reader.readData(this.zipCommentLength),d=h.uint8array?"uint8array":"array",f=o.transformTo(d,c);this.zipComment=this.loadOptions.decodeFileName(f)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var c,d,f,p=this.zip64EndOfCentralSize-44;0<p;)c=this.reader.readInt(2),d=this.reader.readInt(4),f=this.reader.readData(d),this.zip64ExtensibleData[c]={id:c,length:d,value:f}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var c,d;for(c=0;c<this.files.length;c++)d=this.files[c],this.reader.setIndex(d.localHeaderOffset),this.checkSignature(a.LOCAL_FILE_HEADER),d.readLocalPart(this.reader),d.handleUTF8(),d.processAttributes()},readCentralDir:function(){var c;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(a.CENTRAL_FILE_HEADER);)(c=new l({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(c);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var c=this.reader.lastIndexOfSignature(a.CENTRAL_DIRECTORY_END);if(c<0)throw this.isSignature(0,a.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(c);var d=c;if(this.checkSignature(a.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===o.MAX_VALUE_16BITS||this.diskWithCentralDirStart===o.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===o.MAX_VALUE_16BITS||this.centralDirRecords===o.MAX_VALUE_16BITS||this.centralDirSize===o.MAX_VALUE_32BITS||this.centralDirOffset===o.MAX_VALUE_32BITS){if(this.zip64=!0,(c=this.reader.lastIndexOfSignature(a.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(c),this.checkSignature(a.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,a.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(a.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(a.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var f=this.centralDirOffset+this.centralDirSize;this.zip64&&(f+=20,f+=12+this.zip64EndOfCentralSize);var p=d-f;if(0<p)this.isSignature(d,a.CENTRAL_FILE_HEADER)||(this.reader.zero=p);else if(p<0)throw new Error("Corrupted zip: missing "+Math.abs(p)+" bytes.")},prepareReader:function(c){this.reader=r(c)},load:function(c){this.prepareReader(c),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},s.exports=u},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(t,s,n){var r=t("./reader/readerFor"),o=t("./utils"),a=t("./compressedObject"),l=t("./crc32"),h=t("./utf8"),u=t("./compressions"),c=t("./support");function d(f,p){this.options=f,this.loadOptions=p}d.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(f){var p,m;if(f.skip(22),this.fileNameLength=f.readInt(2),m=f.readInt(2),this.fileName=f.readData(this.fileNameLength),f.skip(m),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((p=function(g){for(var E in u)if(Object.prototype.hasOwnProperty.call(u,E)&&u[E].magic===g)return u[E];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+o.pretty(this.compressionMethod)+" unknown (inner file : "+o.transformTo("string",this.fileName)+")");this.decompressed=new a(this.compressedSize,this.uncompressedSize,this.crc32,p,f.readData(this.compressedSize))},readCentralPart:function(f){this.versionMadeBy=f.readInt(2),f.skip(2),this.bitFlag=f.readInt(2),this.compressionMethod=f.readString(2),this.date=f.readDate(),this.crc32=f.readInt(4),this.compressedSize=f.readInt(4),this.uncompressedSize=f.readInt(4);var p=f.readInt(2);if(this.extraFieldsLength=f.readInt(2),this.fileCommentLength=f.readInt(2),this.diskNumberStart=f.readInt(2),this.internalFileAttributes=f.readInt(2),this.externalFileAttributes=f.readInt(4),this.localHeaderOffset=f.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");f.skip(p),this.readExtraFields(f),this.parseZIP64ExtraField(f),this.fileComment=f.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var f=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),f==0&&(this.dosPermissions=63&this.externalFileAttributes),f==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var f=r(this.extraFields[1].value);this.uncompressedSize===o.MAX_VALUE_32BITS&&(this.uncompressedSize=f.readInt(8)),this.compressedSize===o.MAX_VALUE_32BITS&&(this.compressedSize=f.readInt(8)),this.localHeaderOffset===o.MAX_VALUE_32BITS&&(this.localHeaderOffset=f.readInt(8)),this.diskNumberStart===o.MAX_VALUE_32BITS&&(this.diskNumberStart=f.readInt(4))}},readExtraFields:function(f){var p,m,g,E=f.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});f.index+4<E;)p=f.readInt(2),m=f.readInt(2),g=f.readData(m),this.extraFields[p]={id:p,length:m,value:g};f.setIndex(E)},handleUTF8:function(){var f=c.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=h.utf8decode(this.fileName),this.fileCommentStr=h.utf8decode(this.fileComment);else{var p=this.findExtraFieldUnicodePath();if(p!==null)this.fileNameStr=p;else{var m=o.transformTo(f,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(m)}var g=this.findExtraFieldUnicodeComment();if(g!==null)this.fileCommentStr=g;else{var E=o.transformTo(f,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(E)}}},findExtraFieldUnicodePath:function(){var f=this.extraFields[28789];if(f){var p=r(f.value);return p.readInt(1)!==1||l(this.fileName)!==p.readInt(4)?null:h.utf8decode(p.readData(f.length-5))}return null},findExtraFieldUnicodeComment:function(){var f=this.extraFields[25461];if(f){var p=r(f.value);return p.readInt(1)!==1||l(this.fileComment)!==p.readInt(4)?null:h.utf8decode(p.readData(f.length-5))}return null}},s.exports=d},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(t,s,n){function r(p,m,g){this.name=p,this.dir=g.dir,this.date=g.date,this.comment=g.comment,this.unixPermissions=g.unixPermissions,this.dosPermissions=g.dosPermissions,this._data=m,this._dataBinary=g.binary,this.options={compression:g.compression,compressionOptions:g.compressionOptions}}var o=t("./stream/StreamHelper"),a=t("./stream/DataWorker"),l=t("./utf8"),h=t("./compressedObject"),u=t("./stream/GenericWorker");r.prototype={internalStream:function(p){var m=null,g="string";try{if(!p)throw new Error("No output type specified.");var E=(g=p.toLowerCase())==="string"||g==="text";g!=="binarystring"&&g!=="text"||(g="string"),m=this._decompressWorker();var I=!this._dataBinary;I&&!E&&(m=m.pipe(new l.Utf8EncodeWorker)),!I&&E&&(m=m.pipe(new l.Utf8DecodeWorker))}catch(v){(m=new u("error")).error(v)}return new o(m,g,"")},async:function(p,m){return this.internalStream(p).accumulate(m)},nodeStream:function(p,m){return this.internalStream(p||"nodebuffer").toNodejsStream(m)},_compressWorker:function(p,m){if(this._data instanceof h&&this._data.compression.magic===p.magic)return this._data.getCompressedWorker();var g=this._decompressWorker();return this._dataBinary||(g=g.pipe(new l.Utf8EncodeWorker)),h.createWorkerFrom(g,p,m)},_decompressWorker:function(){return this._data instanceof h?this._data.getContentWorker():this._data instanceof u?this._data:new a(this._data)}};for(var c=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],d=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},f=0;f<c.length;f++)r.prototype[c[f]]=d;s.exports=r},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(t,s,n){(function(r){var o,a,l=r.MutationObserver||r.WebKitMutationObserver;if(l){var h=0,u=new l(p),c=r.document.createTextNode("");u.observe(c,{characterData:!0}),o=function(){c.data=h=++h%2}}else if(r.setImmediate||r.MessageChannel===void 0)o="document"in r&&"onreadystatechange"in r.document.createElement("script")?function(){var m=r.document.createElement("script");m.onreadystatechange=function(){p(),m.onreadystatechange=null,m.parentNode.removeChild(m),m=null},r.document.documentElement.appendChild(m)}:function(){setTimeout(p,0)};else{var d=new r.MessageChannel;d.port1.onmessage=p,o=function(){d.port2.postMessage(0)}}var f=[];function p(){var m,g;a=!0;for(var E=f.length;E;){for(g=f,f=[],m=-1;++m<E;)g[m]();E=f.length}a=!1}s.exports=function(m){f.push(m)!==1||a||o()}}).call(this,typeof gh<"u"?gh:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(t,s,n){var r=t("immediate");function o(){}var a={},l=["REJECTED"],h=["FULFILLED"],u=["PENDING"];function c(E){if(typeof E!="function")throw new TypeError("resolver must be a function");this.state=u,this.queue=[],this.outcome=void 0,E!==o&&m(this,E)}function d(E,I,v){this.promise=E,typeof I=="function"&&(this.onFulfilled=I,this.callFulfilled=this.otherCallFulfilled),typeof v=="function"&&(this.onRejected=v,this.callRejected=this.otherCallRejected)}function f(E,I,v){r(function(){var b;try{b=I(v)}catch(C){return a.reject(E,C)}b===E?a.reject(E,new TypeError("Cannot resolve promise with itself")):a.resolve(E,b)})}function p(E){var I=E&&E.then;if(E&&(typeof E=="object"||typeof E=="function")&&typeof I=="function")return function(){I.apply(E,arguments)}}function m(E,I){var v=!1;function b(_){v||(v=!0,a.reject(E,_))}function C(_){v||(v=!0,a.resolve(E,_))}var S=g(function(){I(C,b)});S.status==="error"&&b(S.value)}function g(E,I){var v={};try{v.value=E(I),v.status="success"}catch(b){v.status="error",v.value=b}return v}(s.exports=c).prototype.finally=function(E){if(typeof E!="function")return this;var I=this.constructor;return this.then(function(v){return I.resolve(E()).then(function(){return v})},function(v){return I.resolve(E()).then(function(){throw v})})},c.prototype.catch=function(E){return this.then(null,E)},c.prototype.then=function(E,I){if(typeof E!="function"&&this.state===h||typeof I!="function"&&this.state===l)return this;var v=new this.constructor(o);return this.state!==u?f(v,this.state===h?E:I,this.outcome):this.queue.push(new d(v,E,I)),v},d.prototype.callFulfilled=function(E){a.resolve(this.promise,E)},d.prototype.otherCallFulfilled=function(E){f(this.promise,this.onFulfilled,E)},d.prototype.callRejected=function(E){a.reject(this.promise,E)},d.prototype.otherCallRejected=function(E){f(this.promise,this.onRejected,E)},a.resolve=function(E,I){var v=g(p,I);if(v.status==="error")return a.reject(E,v.value);var b=v.value;if(b)m(E,b);else{E.state=h,E.outcome=I;for(var C=-1,S=E.queue.length;++C<S;)E.queue[C].callFulfilled(I)}return E},a.reject=function(E,I){E.state=l,E.outcome=I;for(var v=-1,b=E.queue.length;++v<b;)E.queue[v].callRejected(I);return E},c.resolve=function(E){return E instanceof this?E:a.resolve(new this(o),E)},c.reject=function(E){var I=new this(o);return a.reject(I,E)},c.all=function(E){var I=this;if(Object.prototype.toString.call(E)!=="[object Array]")return this.reject(new TypeError("must be an array"));var v=E.length,b=!1;if(!v)return this.resolve([]);for(var C=new Array(v),S=0,_=-1,M=new this(o);++_<v;)A(E[_],_);return M;function A(F,D){I.resolve(F).then(function(x){C[D]=x,++S!==v||b||(b=!0,a.resolve(M,C))},function(x){b||(b=!0,a.reject(M,x))})}},c.race=function(E){var I=this;if(Object.prototype.toString.call(E)!=="[object Array]")return this.reject(new TypeError("must be an array"));var v=E.length,b=!1;if(!v)return this.resolve([]);for(var C=-1,S=new this(o);++C<v;)_=E[C],I.resolve(_).then(function(M){b||(b=!0,a.resolve(S,M))},function(M){b||(b=!0,a.reject(S,M))});var _;return S}},{immediate:36}],38:[function(t,s,n){var r={};(0,t("./lib/utils/common").assign)(r,t("./lib/deflate"),t("./lib/inflate"),t("./lib/zlib/constants")),s.exports=r},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(t,s,n){var r=t("./zlib/deflate"),o=t("./utils/common"),a=t("./utils/strings"),l=t("./zlib/messages"),h=t("./zlib/zstream"),u=Object.prototype.toString,c=0,d=-1,f=0,p=8;function m(E){if(!(this instanceof m))return new m(E);this.options=o.assign({level:d,method:p,chunkSize:16384,windowBits:15,memLevel:8,strategy:f,to:""},E||{});var I=this.options;I.raw&&0<I.windowBits?I.windowBits=-I.windowBits:I.gzip&&0<I.windowBits&&I.windowBits<16&&(I.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new h,this.strm.avail_out=0;var v=r.deflateInit2(this.strm,I.level,I.method,I.windowBits,I.memLevel,I.strategy);if(v!==c)throw new Error(l[v]);if(I.header&&r.deflateSetHeader(this.strm,I.header),I.dictionary){var b;if(b=typeof I.dictionary=="string"?a.string2buf(I.dictionary):u.call(I.dictionary)==="[object ArrayBuffer]"?new Uint8Array(I.dictionary):I.dictionary,(v=r.deflateSetDictionary(this.strm,b))!==c)throw new Error(l[v]);this._dict_set=!0}}function g(E,I){var v=new m(I);if(v.push(E,!0),v.err)throw v.msg||l[v.err];return v.result}m.prototype.push=function(E,I){var v,b,C=this.strm,S=this.options.chunkSize;if(this.ended)return!1;b=I===~~I?I:I===!0?4:0,typeof E=="string"?C.input=a.string2buf(E):u.call(E)==="[object ArrayBuffer]"?C.input=new Uint8Array(E):C.input=E,C.next_in=0,C.avail_in=C.input.length;do{if(C.avail_out===0&&(C.output=new o.Buf8(S),C.next_out=0,C.avail_out=S),(v=r.deflate(C,b))!==1&&v!==c)return this.onEnd(v),!(this.ended=!0);C.avail_out!==0&&(C.avail_in!==0||b!==4&&b!==2)||(this.options.to==="string"?this.onData(a.buf2binstring(o.shrinkBuf(C.output,C.next_out))):this.onData(o.shrinkBuf(C.output,C.next_out)))}while((0<C.avail_in||C.avail_out===0)&&v!==1);return b===4?(v=r.deflateEnd(this.strm),this.onEnd(v),this.ended=!0,v===c):b!==2||(this.onEnd(c),!(C.avail_out=0))},m.prototype.onData=function(E){this.chunks.push(E)},m.prototype.onEnd=function(E){E===c&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=E,this.msg=this.strm.msg},n.Deflate=m,n.deflate=g,n.deflateRaw=function(E,I){return(I=I||{}).raw=!0,g(E,I)},n.gzip=function(E,I){return(I=I||{}).gzip=!0,g(E,I)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(t,s,n){var r=t("./zlib/inflate"),o=t("./utils/common"),a=t("./utils/strings"),l=t("./zlib/constants"),h=t("./zlib/messages"),u=t("./zlib/zstream"),c=t("./zlib/gzheader"),d=Object.prototype.toString;function f(m){if(!(this instanceof f))return new f(m);this.options=o.assign({chunkSize:16384,windowBits:0,to:""},m||{});var g=this.options;g.raw&&0<=g.windowBits&&g.windowBits<16&&(g.windowBits=-g.windowBits,g.windowBits===0&&(g.windowBits=-15)),!(0<=g.windowBits&&g.windowBits<16)||m&&m.windowBits||(g.windowBits+=32),15<g.windowBits&&g.windowBits<48&&!(15&g.windowBits)&&(g.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new u,this.strm.avail_out=0;var E=r.inflateInit2(this.strm,g.windowBits);if(E!==l.Z_OK)throw new Error(h[E]);this.header=new c,r.inflateGetHeader(this.strm,this.header)}function p(m,g){var E=new f(g);if(E.push(m,!0),E.err)throw E.msg||h[E.err];return E.result}f.prototype.push=function(m,g){var E,I,v,b,C,S,_=this.strm,M=this.options.chunkSize,A=this.options.dictionary,F=!1;if(this.ended)return!1;I=g===~~g?g:g===!0?l.Z_FINISH:l.Z_NO_FLUSH,typeof m=="string"?_.input=a.binstring2buf(m):d.call(m)==="[object ArrayBuffer]"?_.input=new Uint8Array(m):_.input=m,_.next_in=0,_.avail_in=_.input.length;do{if(_.avail_out===0&&(_.output=new o.Buf8(M),_.next_out=0,_.avail_out=M),(E=r.inflate(_,l.Z_NO_FLUSH))===l.Z_NEED_DICT&&A&&(S=typeof A=="string"?a.string2buf(A):d.call(A)==="[object ArrayBuffer]"?new Uint8Array(A):A,E=r.inflateSetDictionary(this.strm,S)),E===l.Z_BUF_ERROR&&F===!0&&(E=l.Z_OK,F=!1),E!==l.Z_STREAM_END&&E!==l.Z_OK)return this.onEnd(E),!(this.ended=!0);_.next_out&&(_.avail_out!==0&&E!==l.Z_STREAM_END&&(_.avail_in!==0||I!==l.Z_FINISH&&I!==l.Z_SYNC_FLUSH)||(this.options.to==="string"?(v=a.utf8border(_.output,_.next_out),b=_.next_out-v,C=a.buf2string(_.output,v),_.next_out=b,_.avail_out=M-b,b&&o.arraySet(_.output,_.output,v,b,0),this.onData(C)):this.onData(o.shrinkBuf(_.output,_.next_out)))),_.avail_in===0&&_.avail_out===0&&(F=!0)}while((0<_.avail_in||_.avail_out===0)&&E!==l.Z_STREAM_END);return E===l.Z_STREAM_END&&(I=l.Z_FINISH),I===l.Z_FINISH?(E=r.inflateEnd(this.strm),this.onEnd(E),this.ended=!0,E===l.Z_OK):I!==l.Z_SYNC_FLUSH||(this.onEnd(l.Z_OK),!(_.avail_out=0))},f.prototype.onData=function(m){this.chunks.push(m)},f.prototype.onEnd=function(m){m===l.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=m,this.msg=this.strm.msg},n.Inflate=f,n.inflate=p,n.inflateRaw=function(m,g){return(g=g||{}).raw=!0,p(m,g)},n.ungzip=p},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(t,s,n){var r=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";n.assign=function(l){for(var h=Array.prototype.slice.call(arguments,1);h.length;){var u=h.shift();if(u){if(typeof u!="object")throw new TypeError(u+"must be non-object");for(var c in u)u.hasOwnProperty(c)&&(l[c]=u[c])}}return l},n.shrinkBuf=function(l,h){return l.length===h?l:l.subarray?l.subarray(0,h):(l.length=h,l)};var o={arraySet:function(l,h,u,c,d){if(h.subarray&&l.subarray)l.set(h.subarray(u,u+c),d);else for(var f=0;f<c;f++)l[d+f]=h[u+f]},flattenChunks:function(l){var h,u,c,d,f,p;for(h=c=0,u=l.length;h<u;h++)c+=l[h].length;for(p=new Uint8Array(c),h=d=0,u=l.length;h<u;h++)f=l[h],p.set(f,d),d+=f.length;return p}},a={arraySet:function(l,h,u,c,d){for(var f=0;f<c;f++)l[d+f]=h[u+f]},flattenChunks:function(l){return[].concat.apply([],l)}};n.setTyped=function(l){l?(n.Buf8=Uint8Array,n.Buf16=Uint16Array,n.Buf32=Int32Array,n.assign(n,o)):(n.Buf8=Array,n.Buf16=Array,n.Buf32=Array,n.assign(n,a))},n.setTyped(r)},{}],42:[function(t,s,n){var r=t("./common"),o=!0,a=!0;try{String.fromCharCode.apply(null,[0])}catch{o=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{a=!1}for(var l=new r.Buf8(256),h=0;h<256;h++)l[h]=252<=h?6:248<=h?5:240<=h?4:224<=h?3:192<=h?2:1;function u(c,d){if(d<65537&&(c.subarray&&a||!c.subarray&&o))return String.fromCharCode.apply(null,r.shrinkBuf(c,d));for(var f="",p=0;p<d;p++)f+=String.fromCharCode(c[p]);return f}l[254]=l[254]=1,n.string2buf=function(c){var d,f,p,m,g,E=c.length,I=0;for(m=0;m<E;m++)(64512&(f=c.charCodeAt(m)))==55296&&m+1<E&&(64512&(p=c.charCodeAt(m+1)))==56320&&(f=65536+(f-55296<<10)+(p-56320),m++),I+=f<128?1:f<2048?2:f<65536?3:4;for(d=new r.Buf8(I),m=g=0;g<I;m++)(64512&(f=c.charCodeAt(m)))==55296&&m+1<E&&(64512&(p=c.charCodeAt(m+1)))==56320&&(f=65536+(f-55296<<10)+(p-56320),m++),f<128?d[g++]=f:(f<2048?d[g++]=192|f>>>6:(f<65536?d[g++]=224|f>>>12:(d[g++]=240|f>>>18,d[g++]=128|f>>>12&63),d[g++]=128|f>>>6&63),d[g++]=128|63&f);return d},n.buf2binstring=function(c){return u(c,c.length)},n.binstring2buf=function(c){for(var d=new r.Buf8(c.length),f=0,p=d.length;f<p;f++)d[f]=c.charCodeAt(f);return d},n.buf2string=function(c,d){var f,p,m,g,E=d||c.length,I=new Array(2*E);for(f=p=0;f<E;)if((m=c[f++])<128)I[p++]=m;else if(4<(g=l[m]))I[p++]=65533,f+=g-1;else{for(m&=g===2?31:g===3?15:7;1<g&&f<E;)m=m<<6|63&c[f++],g--;1<g?I[p++]=65533:m<65536?I[p++]=m:(m-=65536,I[p++]=55296|m>>10&1023,I[p++]=56320|1023&m)}return u(I,p)},n.utf8border=function(c,d){var f;for((d=d||c.length)>c.length&&(d=c.length),f=d-1;0<=f&&(192&c[f])==128;)f--;return f<0||f===0?d:f+l[c[f]]>d?f:d}},{"./common":41}],43:[function(t,s,n){s.exports=function(r,o,a,l){for(var h=65535&r|0,u=r>>>16&65535|0,c=0;a!==0;){for(a-=c=2e3<a?2e3:a;u=u+(h=h+o[l++]|0)|0,--c;);h%=65521,u%=65521}return h|u<<16|0}},{}],44:[function(t,s,n){s.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(t,s,n){var r=function(){for(var o,a=[],l=0;l<256;l++){o=l;for(var h=0;h<8;h++)o=1&o?3988292384^o>>>1:o>>>1;a[l]=o}return a}();s.exports=function(o,a,l,h){var u=r,c=h+l;o^=-1;for(var d=h;d<c;d++)o=o>>>8^u[255&(o^a[d])];return-1^o}},{}],46:[function(t,s,n){var r,o=t("../utils/common"),a=t("./trees"),l=t("./adler32"),h=t("./crc32"),u=t("./messages"),c=0,d=4,f=0,p=-2,m=-1,g=4,E=2,I=8,v=9,b=286,C=30,S=19,_=2*b+1,M=15,A=3,F=258,D=F+A+1,x=42,N=113,y=1,U=2,B=3,k=4;function W(w,K){return w.msg=u[K],K}function z(w){return(w<<1)-(4<w?9:0)}function he(w){for(var K=w.length;0<=--K;)w[K]=0}function G(w){var K=w.state,X=K.pending;X>w.avail_out&&(X=w.avail_out),X!==0&&(o.arraySet(w.output,K.pending_buf,K.pending_out,X,w.next_out),w.next_out+=X,K.pending_out+=X,w.total_out+=X,w.avail_out-=X,K.pending-=X,K.pending===0&&(K.pending_out=0))}function H(w,K){a._tr_flush_block(w,0<=w.block_start?w.block_start:-1,w.strstart-w.block_start,K),w.block_start=w.strstart,G(w.strm)}function pe(w,K){w.pending_buf[w.pending++]=K}function le(w,K){w.pending_buf[w.pending++]=K>>>8&255,w.pending_buf[w.pending++]=255&K}function re(w,K){var X,L,O=w.max_chain_length,V=w.strstart,J=w.prev_length,ee=w.nice_match,$=w.strstart>w.w_size-D?w.strstart-(w.w_size-D):0,ie=w.window,ue=w.w_mask,se=w.prev,me=w.strstart+F,Ve=ie[V+J-1],xe=ie[V+J];w.prev_length>=w.good_match&&(O>>=2),ee>w.lookahead&&(ee=w.lookahead);do if(ie[(X=K)+J]===xe&&ie[X+J-1]===Ve&&ie[X]===ie[V]&&ie[++X]===ie[V+1]){V+=2,X++;do;while(ie[++V]===ie[++X]&&ie[++V]===ie[++X]&&ie[++V]===ie[++X]&&ie[++V]===ie[++X]&&ie[++V]===ie[++X]&&ie[++V]===ie[++X]&&ie[++V]===ie[++X]&&ie[++V]===ie[++X]&&V<me);if(L=F-(me-V),V=me-F,J<L){if(w.match_start=K,ee<=(J=L))break;Ve=ie[V+J-1],xe=ie[V+J]}}while((K=se[K&ue])>$&&--O!=0);return J<=w.lookahead?J:w.lookahead}function Te(w){var K,X,L,O,V,J,ee,$,ie,ue,se=w.w_size;do{if(O=w.window_size-w.lookahead-w.strstart,w.strstart>=se+(se-D)){for(o.arraySet(w.window,w.window,se,se,0),w.match_start-=se,w.strstart-=se,w.block_start-=se,K=X=w.hash_size;L=w.head[--K],w.head[K]=se<=L?L-se:0,--X;);for(K=X=se;L=w.prev[--K],w.prev[K]=se<=L?L-se:0,--X;);O+=se}if(w.strm.avail_in===0)break;if(J=w.strm,ee=w.window,$=w.strstart+w.lookahead,ie=O,ue=void 0,ue=J.avail_in,ie<ue&&(ue=ie),X=ue===0?0:(J.avail_in-=ue,o.arraySet(ee,J.input,J.next_in,ue,$),J.state.wrap===1?J.adler=l(J.adler,ee,ue,$):J.state.wrap===2&&(J.adler=h(J.adler,ee,ue,$)),J.next_in+=ue,J.total_in+=ue,ue),w.lookahead+=X,w.lookahead+w.insert>=A)for(V=w.strstart-w.insert,w.ins_h=w.window[V],w.ins_h=(w.ins_h<<w.hash_shift^w.window[V+1])&w.hash_mask;w.insert&&(w.ins_h=(w.ins_h<<w.hash_shift^w.window[V+A-1])&w.hash_mask,w.prev[V&w.w_mask]=w.head[w.ins_h],w.head[w.ins_h]=V,V++,w.insert--,!(w.lookahead+w.insert<A)););}while(w.lookahead<D&&w.strm.avail_in!==0)}function we(w,K){for(var X,L;;){if(w.lookahead<D){if(Te(w),w.lookahead<D&&K===c)return y;if(w.lookahead===0)break}if(X=0,w.lookahead>=A&&(w.ins_h=(w.ins_h<<w.hash_shift^w.window[w.strstart+A-1])&w.hash_mask,X=w.prev[w.strstart&w.w_mask]=w.head[w.ins_h],w.head[w.ins_h]=w.strstart),X!==0&&w.strstart-X<=w.w_size-D&&(w.match_length=re(w,X)),w.match_length>=A)if(L=a._tr_tally(w,w.strstart-w.match_start,w.match_length-A),w.lookahead-=w.match_length,w.match_length<=w.max_lazy_match&&w.lookahead>=A){for(w.match_length--;w.strstart++,w.ins_h=(w.ins_h<<w.hash_shift^w.window[w.strstart+A-1])&w.hash_mask,X=w.prev[w.strstart&w.w_mask]=w.head[w.ins_h],w.head[w.ins_h]=w.strstart,--w.match_length!=0;);w.strstart++}else w.strstart+=w.match_length,w.match_length=0,w.ins_h=w.window[w.strstart],w.ins_h=(w.ins_h<<w.hash_shift^w.window[w.strstart+1])&w.hash_mask;else L=a._tr_tally(w,0,w.window[w.strstart]),w.lookahead--,w.strstart++;if(L&&(H(w,!1),w.strm.avail_out===0))return y}return w.insert=w.strstart<A-1?w.strstart:A-1,K===d?(H(w,!0),w.strm.avail_out===0?B:k):w.last_lit&&(H(w,!1),w.strm.avail_out===0)?y:U}function fe(w,K){for(var X,L,O;;){if(w.lookahead<D){if(Te(w),w.lookahead<D&&K===c)return y;if(w.lookahead===0)break}if(X=0,w.lookahead>=A&&(w.ins_h=(w.ins_h<<w.hash_shift^w.window[w.strstart+A-1])&w.hash_mask,X=w.prev[w.strstart&w.w_mask]=w.head[w.ins_h],w.head[w.ins_h]=w.strstart),w.prev_length=w.match_length,w.prev_match=w.match_start,w.match_length=A-1,X!==0&&w.prev_length<w.max_lazy_match&&w.strstart-X<=w.w_size-D&&(w.match_length=re(w,X),w.match_length<=5&&(w.strategy===1||w.match_length===A&&4096<w.strstart-w.match_start)&&(w.match_length=A-1)),w.prev_length>=A&&w.match_length<=w.prev_length){for(O=w.strstart+w.lookahead-A,L=a._tr_tally(w,w.strstart-1-w.prev_match,w.prev_length-A),w.lookahead-=w.prev_length-1,w.prev_length-=2;++w.strstart<=O&&(w.ins_h=(w.ins_h<<w.hash_shift^w.window[w.strstart+A-1])&w.hash_mask,X=w.prev[w.strstart&w.w_mask]=w.head[w.ins_h],w.head[w.ins_h]=w.strstart),--w.prev_length!=0;);if(w.match_available=0,w.match_length=A-1,w.strstart++,L&&(H(w,!1),w.strm.avail_out===0))return y}else if(w.match_available){if((L=a._tr_tally(w,0,w.window[w.strstart-1]))&&H(w,!1),w.strstart++,w.lookahead--,w.strm.avail_out===0)return y}else w.match_available=1,w.strstart++,w.lookahead--}return w.match_available&&(L=a._tr_tally(w,0,w.window[w.strstart-1]),w.match_available=0),w.insert=w.strstart<A-1?w.strstart:A-1,K===d?(H(w,!0),w.strm.avail_out===0?B:k):w.last_lit&&(H(w,!1),w.strm.avail_out===0)?y:U}function ye(w,K,X,L,O){this.good_length=w,this.max_lazy=K,this.nice_length=X,this.max_chain=L,this.func=O}function Ce(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=I,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new o.Buf16(2*_),this.dyn_dtree=new o.Buf16(2*(2*C+1)),this.bl_tree=new o.Buf16(2*(2*S+1)),he(this.dyn_ltree),he(this.dyn_dtree),he(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new o.Buf16(M+1),this.heap=new o.Buf16(2*b+1),he(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new o.Buf16(2*b+1),he(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function De(w){var K;return w&&w.state?(w.total_in=w.total_out=0,w.data_type=E,(K=w.state).pending=0,K.pending_out=0,K.wrap<0&&(K.wrap=-K.wrap),K.status=K.wrap?x:N,w.adler=K.wrap===2?0:1,K.last_flush=c,a._tr_init(K),f):W(w,p)}function qt(w){var K=De(w);return K===f&&function(X){X.window_size=2*X.w_size,he(X.head),X.max_lazy_match=r[X.level].max_lazy,X.good_match=r[X.level].good_length,X.nice_match=r[X.level].nice_length,X.max_chain_length=r[X.level].max_chain,X.strstart=0,X.block_start=0,X.lookahead=0,X.insert=0,X.match_length=X.prev_length=A-1,X.match_available=0,X.ins_h=0}(w.state),K}function It(w,K,X,L,O,V){if(!w)return p;var J=1;if(K===m&&(K=6),L<0?(J=0,L=-L):15<L&&(J=2,L-=16),O<1||v<O||X!==I||L<8||15<L||K<0||9<K||V<0||g<V)return W(w,p);L===8&&(L=9);var ee=new Ce;return(w.state=ee).strm=w,ee.wrap=J,ee.gzhead=null,ee.w_bits=L,ee.w_size=1<<ee.w_bits,ee.w_mask=ee.w_size-1,ee.hash_bits=O+7,ee.hash_size=1<<ee.hash_bits,ee.hash_mask=ee.hash_size-1,ee.hash_shift=~~((ee.hash_bits+A-1)/A),ee.window=new o.Buf8(2*ee.w_size),ee.head=new o.Buf16(ee.hash_size),ee.prev=new o.Buf16(ee.w_size),ee.lit_bufsize=1<<O+6,ee.pending_buf_size=4*ee.lit_bufsize,ee.pending_buf=new o.Buf8(ee.pending_buf_size),ee.d_buf=1*ee.lit_bufsize,ee.l_buf=3*ee.lit_bufsize,ee.level=K,ee.strategy=V,ee.method=X,qt(w)}r=[new ye(0,0,0,0,function(w,K){var X=65535;for(X>w.pending_buf_size-5&&(X=w.pending_buf_size-5);;){if(w.lookahead<=1){if(Te(w),w.lookahead===0&&K===c)return y;if(w.lookahead===0)break}w.strstart+=w.lookahead,w.lookahead=0;var L=w.block_start+X;if((w.strstart===0||w.strstart>=L)&&(w.lookahead=w.strstart-L,w.strstart=L,H(w,!1),w.strm.avail_out===0)||w.strstart-w.block_start>=w.w_size-D&&(H(w,!1),w.strm.avail_out===0))return y}return w.insert=0,K===d?(H(w,!0),w.strm.avail_out===0?B:k):(w.strstart>w.block_start&&(H(w,!1),w.strm.avail_out),y)}),new ye(4,4,8,4,we),new ye(4,5,16,8,we),new ye(4,6,32,32,we),new ye(4,4,16,16,fe),new ye(8,16,32,32,fe),new ye(8,16,128,128,fe),new ye(8,32,128,256,fe),new ye(32,128,258,1024,fe),new ye(32,258,258,4096,fe)],n.deflateInit=function(w,K){return It(w,K,I,15,8,0)},n.deflateInit2=It,n.deflateReset=qt,n.deflateResetKeep=De,n.deflateSetHeader=function(w,K){return w&&w.state?w.state.wrap!==2?p:(w.state.gzhead=K,f):p},n.deflate=function(w,K){var X,L,O,V;if(!w||!w.state||5<K||K<0)return w?W(w,p):p;if(L=w.state,!w.output||!w.input&&w.avail_in!==0||L.status===666&&K!==d)return W(w,w.avail_out===0?-5:p);if(L.strm=w,X=L.last_flush,L.last_flush=K,L.status===x)if(L.wrap===2)w.adler=0,pe(L,31),pe(L,139),pe(L,8),L.gzhead?(pe(L,(L.gzhead.text?1:0)+(L.gzhead.hcrc?2:0)+(L.gzhead.extra?4:0)+(L.gzhead.name?8:0)+(L.gzhead.comment?16:0)),pe(L,255&L.gzhead.time),pe(L,L.gzhead.time>>8&255),pe(L,L.gzhead.time>>16&255),pe(L,L.gzhead.time>>24&255),pe(L,L.level===9?2:2<=L.strategy||L.level<2?4:0),pe(L,255&L.gzhead.os),L.gzhead.extra&&L.gzhead.extra.length&&(pe(L,255&L.gzhead.extra.length),pe(L,L.gzhead.extra.length>>8&255)),L.gzhead.hcrc&&(w.adler=h(w.adler,L.pending_buf,L.pending,0)),L.gzindex=0,L.status=69):(pe(L,0),pe(L,0),pe(L,0),pe(L,0),pe(L,0),pe(L,L.level===9?2:2<=L.strategy||L.level<2?4:0),pe(L,3),L.status=N);else{var J=I+(L.w_bits-8<<4)<<8;J|=(2<=L.strategy||L.level<2?0:L.level<6?1:L.level===6?2:3)<<6,L.strstart!==0&&(J|=32),J+=31-J%31,L.status=N,le(L,J),L.strstart!==0&&(le(L,w.adler>>>16),le(L,65535&w.adler)),w.adler=1}if(L.status===69)if(L.gzhead.extra){for(O=L.pending;L.gzindex<(65535&L.gzhead.extra.length)&&(L.pending!==L.pending_buf_size||(L.gzhead.hcrc&&L.pending>O&&(w.adler=h(w.adler,L.pending_buf,L.pending-O,O)),G(w),O=L.pending,L.pending!==L.pending_buf_size));)pe(L,255&L.gzhead.extra[L.gzindex]),L.gzindex++;L.gzhead.hcrc&&L.pending>O&&(w.adler=h(w.adler,L.pending_buf,L.pending-O,O)),L.gzindex===L.gzhead.extra.length&&(L.gzindex=0,L.status=73)}else L.status=73;if(L.status===73)if(L.gzhead.name){O=L.pending;do{if(L.pending===L.pending_buf_size&&(L.gzhead.hcrc&&L.pending>O&&(w.adler=h(w.adler,L.pending_buf,L.pending-O,O)),G(w),O=L.pending,L.pending===L.pending_buf_size)){V=1;break}V=L.gzindex<L.gzhead.name.length?255&L.gzhead.name.charCodeAt(L.gzindex++):0,pe(L,V)}while(V!==0);L.gzhead.hcrc&&L.pending>O&&(w.adler=h(w.adler,L.pending_buf,L.pending-O,O)),V===0&&(L.gzindex=0,L.status=91)}else L.status=91;if(L.status===91)if(L.gzhead.comment){O=L.pending;do{if(L.pending===L.pending_buf_size&&(L.gzhead.hcrc&&L.pending>O&&(w.adler=h(w.adler,L.pending_buf,L.pending-O,O)),G(w),O=L.pending,L.pending===L.pending_buf_size)){V=1;break}V=L.gzindex<L.gzhead.comment.length?255&L.gzhead.comment.charCodeAt(L.gzindex++):0,pe(L,V)}while(V!==0);L.gzhead.hcrc&&L.pending>O&&(w.adler=h(w.adler,L.pending_buf,L.pending-O,O)),V===0&&(L.status=103)}else L.status=103;if(L.status===103&&(L.gzhead.hcrc?(L.pending+2>L.pending_buf_size&&G(w),L.pending+2<=L.pending_buf_size&&(pe(L,255&w.adler),pe(L,w.adler>>8&255),w.adler=0,L.status=N)):L.status=N),L.pending!==0){if(G(w),w.avail_out===0)return L.last_flush=-1,f}else if(w.avail_in===0&&z(K)<=z(X)&&K!==d)return W(w,-5);if(L.status===666&&w.avail_in!==0)return W(w,-5);if(w.avail_in!==0||L.lookahead!==0||K!==c&&L.status!==666){var ee=L.strategy===2?function($,ie){for(var ue;;){if($.lookahead===0&&(Te($),$.lookahead===0)){if(ie===c)return y;break}if($.match_length=0,ue=a._tr_tally($,0,$.window[$.strstart]),$.lookahead--,$.strstart++,ue&&(H($,!1),$.strm.avail_out===0))return y}return $.insert=0,ie===d?(H($,!0),$.strm.avail_out===0?B:k):$.last_lit&&(H($,!1),$.strm.avail_out===0)?y:U}(L,K):L.strategy===3?function($,ie){for(var ue,se,me,Ve,xe=$.window;;){if($.lookahead<=F){if(Te($),$.lookahead<=F&&ie===c)return y;if($.lookahead===0)break}if($.match_length=0,$.lookahead>=A&&0<$.strstart&&(se=xe[me=$.strstart-1])===xe[++me]&&se===xe[++me]&&se===xe[++me]){Ve=$.strstart+F;do;while(se===xe[++me]&&se===xe[++me]&&se===xe[++me]&&se===xe[++me]&&se===xe[++me]&&se===xe[++me]&&se===xe[++me]&&se===xe[++me]&&me<Ve);$.match_length=F-(Ve-me),$.match_length>$.lookahead&&($.match_length=$.lookahead)}if($.match_length>=A?(ue=a._tr_tally($,1,$.match_length-A),$.lookahead-=$.match_length,$.strstart+=$.match_length,$.match_length=0):(ue=a._tr_tally($,0,$.window[$.strstart]),$.lookahead--,$.strstart++),ue&&(H($,!1),$.strm.avail_out===0))return y}return $.insert=0,ie===d?(H($,!0),$.strm.avail_out===0?B:k):$.last_lit&&(H($,!1),$.strm.avail_out===0)?y:U}(L,K):r[L.level].func(L,K);if(ee!==B&&ee!==k||(L.status=666),ee===y||ee===B)return w.avail_out===0&&(L.last_flush=-1),f;if(ee===U&&(K===1?a._tr_align(L):K!==5&&(a._tr_stored_block(L,0,0,!1),K===3&&(he(L.head),L.lookahead===0&&(L.strstart=0,L.block_start=0,L.insert=0))),G(w),w.avail_out===0))return L.last_flush=-1,f}return K!==d?f:L.wrap<=0?1:(L.wrap===2?(pe(L,255&w.adler),pe(L,w.adler>>8&255),pe(L,w.adler>>16&255),pe(L,w.adler>>24&255),pe(L,255&w.total_in),pe(L,w.total_in>>8&255),pe(L,w.total_in>>16&255),pe(L,w.total_in>>24&255)):(le(L,w.adler>>>16),le(L,65535&w.adler)),G(w),0<L.wrap&&(L.wrap=-L.wrap),L.pending!==0?f:1)},n.deflateEnd=function(w){var K;return w&&w.state?(K=w.state.status)!==x&&K!==69&&K!==73&&K!==91&&K!==103&&K!==N&&K!==666?W(w,p):(w.state=null,K===N?W(w,-3):f):p},n.deflateSetDictionary=function(w,K){var X,L,O,V,J,ee,$,ie,ue=K.length;if(!w||!w.state||(V=(X=w.state).wrap)===2||V===1&&X.status!==x||X.lookahead)return p;for(V===1&&(w.adler=l(w.adler,K,ue,0)),X.wrap=0,ue>=X.w_size&&(V===0&&(he(X.head),X.strstart=0,X.block_start=0,X.insert=0),ie=new o.Buf8(X.w_size),o.arraySet(ie,K,ue-X.w_size,X.w_size,0),K=ie,ue=X.w_size),J=w.avail_in,ee=w.next_in,$=w.input,w.avail_in=ue,w.next_in=0,w.input=K,Te(X);X.lookahead>=A;){for(L=X.strstart,O=X.lookahead-(A-1);X.ins_h=(X.ins_h<<X.hash_shift^X.window[L+A-1])&X.hash_mask,X.prev[L&X.w_mask]=X.head[X.ins_h],X.head[X.ins_h]=L,L++,--O;);X.strstart=L,X.lookahead=A-1,Te(X)}return X.strstart+=X.lookahead,X.block_start=X.strstart,X.insert=X.lookahead,X.lookahead=0,X.match_length=X.prev_length=A-1,X.match_available=0,w.next_in=ee,w.input=$,w.avail_in=J,X.wrap=V,f},n.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(t,s,n){s.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(t,s,n){s.exports=function(r,o){var a,l,h,u,c,d,f,p,m,g,E,I,v,b,C,S,_,M,A,F,D,x,N,y,U;a=r.state,l=r.next_in,y=r.input,h=l+(r.avail_in-5),u=r.next_out,U=r.output,c=u-(o-r.avail_out),d=u+(r.avail_out-257),f=a.dmax,p=a.wsize,m=a.whave,g=a.wnext,E=a.window,I=a.hold,v=a.bits,b=a.lencode,C=a.distcode,S=(1<<a.lenbits)-1,_=(1<<a.distbits)-1;e:do{v<15&&(I+=y[l++]<<v,v+=8,I+=y[l++]<<v,v+=8),M=b[I&S];t:for(;;){if(I>>>=A=M>>>24,v-=A,(A=M>>>16&255)===0)U[u++]=65535&M;else{if(!(16&A)){if(!(64&A)){M=b[(65535&M)+(I&(1<<A)-1)];continue t}if(32&A){a.mode=12;break e}r.msg="invalid literal/length code",a.mode=30;break e}F=65535&M,(A&=15)&&(v<A&&(I+=y[l++]<<v,v+=8),F+=I&(1<<A)-1,I>>>=A,v-=A),v<15&&(I+=y[l++]<<v,v+=8,I+=y[l++]<<v,v+=8),M=C[I&_];i:for(;;){if(I>>>=A=M>>>24,v-=A,!(16&(A=M>>>16&255))){if(!(64&A)){M=C[(65535&M)+(I&(1<<A)-1)];continue i}r.msg="invalid distance code",a.mode=30;break e}if(D=65535&M,v<(A&=15)&&(I+=y[l++]<<v,(v+=8)<A&&(I+=y[l++]<<v,v+=8)),f<(D+=I&(1<<A)-1)){r.msg="invalid distance too far back",a.mode=30;break e}if(I>>>=A,v-=A,(A=u-c)<D){if(m<(A=D-A)&&a.sane){r.msg="invalid distance too far back",a.mode=30;break e}if(N=E,(x=0)===g){if(x+=p-A,A<F){for(F-=A;U[u++]=E[x++],--A;);x=u-D,N=U}}else if(g<A){if(x+=p+g-A,(A-=g)<F){for(F-=A;U[u++]=E[x++],--A;);if(x=0,g<F){for(F-=A=g;U[u++]=E[x++],--A;);x=u-D,N=U}}}else if(x+=g-A,A<F){for(F-=A;U[u++]=E[x++],--A;);x=u-D,N=U}for(;2<F;)U[u++]=N[x++],U[u++]=N[x++],U[u++]=N[x++],F-=3;F&&(U[u++]=N[x++],1<F&&(U[u++]=N[x++]))}else{for(x=u-D;U[u++]=U[x++],U[u++]=U[x++],U[u++]=U[x++],2<(F-=3););F&&(U[u++]=U[x++],1<F&&(U[u++]=U[x++]))}break}}break}}while(l<h&&u<d);l-=F=v>>3,I&=(1<<(v-=F<<3))-1,r.next_in=l,r.next_out=u,r.avail_in=l<h?h-l+5:5-(l-h),r.avail_out=u<d?d-u+257:257-(u-d),a.hold=I,a.bits=v}},{}],49:[function(t,s,n){var r=t("../utils/common"),o=t("./adler32"),a=t("./crc32"),l=t("./inffast"),h=t("./inftrees"),u=1,c=2,d=0,f=-2,p=1,m=852,g=592;function E(x){return(x>>>24&255)+(x>>>8&65280)+((65280&x)<<8)+((255&x)<<24)}function I(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new r.Buf16(320),this.work=new r.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function v(x){var N;return x&&x.state?(N=x.state,x.total_in=x.total_out=N.total=0,x.msg="",N.wrap&&(x.adler=1&N.wrap),N.mode=p,N.last=0,N.havedict=0,N.dmax=32768,N.head=null,N.hold=0,N.bits=0,N.lencode=N.lendyn=new r.Buf32(m),N.distcode=N.distdyn=new r.Buf32(g),N.sane=1,N.back=-1,d):f}function b(x){var N;return x&&x.state?((N=x.state).wsize=0,N.whave=0,N.wnext=0,v(x)):f}function C(x,N){var y,U;return x&&x.state?(U=x.state,N<0?(y=0,N=-N):(y=1+(N>>4),N<48&&(N&=15)),N&&(N<8||15<N)?f:(U.window!==null&&U.wbits!==N&&(U.window=null),U.wrap=y,U.wbits=N,b(x))):f}function S(x,N){var y,U;return x?(U=new I,(x.state=U).window=null,(y=C(x,N))!==d&&(x.state=null),y):f}var _,M,A=!0;function F(x){if(A){var N;for(_=new r.Buf32(512),M=new r.Buf32(32),N=0;N<144;)x.lens[N++]=8;for(;N<256;)x.lens[N++]=9;for(;N<280;)x.lens[N++]=7;for(;N<288;)x.lens[N++]=8;for(h(u,x.lens,0,288,_,0,x.work,{bits:9}),N=0;N<32;)x.lens[N++]=5;h(c,x.lens,0,32,M,0,x.work,{bits:5}),A=!1}x.lencode=_,x.lenbits=9,x.distcode=M,x.distbits=5}function D(x,N,y,U){var B,k=x.state;return k.window===null&&(k.wsize=1<<k.wbits,k.wnext=0,k.whave=0,k.window=new r.Buf8(k.wsize)),U>=k.wsize?(r.arraySet(k.window,N,y-k.wsize,k.wsize,0),k.wnext=0,k.whave=k.wsize):(U<(B=k.wsize-k.wnext)&&(B=U),r.arraySet(k.window,N,y-U,B,k.wnext),(U-=B)?(r.arraySet(k.window,N,y-U,U,0),k.wnext=U,k.whave=k.wsize):(k.wnext+=B,k.wnext===k.wsize&&(k.wnext=0),k.whave<k.wsize&&(k.whave+=B))),0}n.inflateReset=b,n.inflateReset2=C,n.inflateResetKeep=v,n.inflateInit=function(x){return S(x,15)},n.inflateInit2=S,n.inflate=function(x,N){var y,U,B,k,W,z,he,G,H,pe,le,re,Te,we,fe,ye,Ce,De,qt,It,w,K,X,L,O=0,V=new r.Buf8(4),J=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!x||!x.state||!x.output||!x.input&&x.avail_in!==0)return f;(y=x.state).mode===12&&(y.mode=13),W=x.next_out,B=x.output,he=x.avail_out,k=x.next_in,U=x.input,z=x.avail_in,G=y.hold,H=y.bits,pe=z,le=he,K=d;e:for(;;)switch(y.mode){case p:if(y.wrap===0){y.mode=13;break}for(;H<16;){if(z===0)break e;z--,G+=U[k++]<<H,H+=8}if(2&y.wrap&&G===35615){V[y.check=0]=255&G,V[1]=G>>>8&255,y.check=a(y.check,V,2,0),H=G=0,y.mode=2;break}if(y.flags=0,y.head&&(y.head.done=!1),!(1&y.wrap)||(((255&G)<<8)+(G>>8))%31){x.msg="incorrect header check",y.mode=30;break}if((15&G)!=8){x.msg="unknown compression method",y.mode=30;break}if(H-=4,w=8+(15&(G>>>=4)),y.wbits===0)y.wbits=w;else if(w>y.wbits){x.msg="invalid window size",y.mode=30;break}y.dmax=1<<w,x.adler=y.check=1,y.mode=512&G?10:12,H=G=0;break;case 2:for(;H<16;){if(z===0)break e;z--,G+=U[k++]<<H,H+=8}if(y.flags=G,(255&y.flags)!=8){x.msg="unknown compression method",y.mode=30;break}if(57344&y.flags){x.msg="unknown header flags set",y.mode=30;break}y.head&&(y.head.text=G>>8&1),512&y.flags&&(V[0]=255&G,V[1]=G>>>8&255,y.check=a(y.check,V,2,0)),H=G=0,y.mode=3;case 3:for(;H<32;){if(z===0)break e;z--,G+=U[k++]<<H,H+=8}y.head&&(y.head.time=G),512&y.flags&&(V[0]=255&G,V[1]=G>>>8&255,V[2]=G>>>16&255,V[3]=G>>>24&255,y.check=a(y.check,V,4,0)),H=G=0,y.mode=4;case 4:for(;H<16;){if(z===0)break e;z--,G+=U[k++]<<H,H+=8}y.head&&(y.head.xflags=255&G,y.head.os=G>>8),512&y.flags&&(V[0]=255&G,V[1]=G>>>8&255,y.check=a(y.check,V,2,0)),H=G=0,y.mode=5;case 5:if(1024&y.flags){for(;H<16;){if(z===0)break e;z--,G+=U[k++]<<H,H+=8}y.length=G,y.head&&(y.head.extra_len=G),512&y.flags&&(V[0]=255&G,V[1]=G>>>8&255,y.check=a(y.check,V,2,0)),H=G=0}else y.head&&(y.head.extra=null);y.mode=6;case 6:if(1024&y.flags&&(z<(re=y.length)&&(re=z),re&&(y.head&&(w=y.head.extra_len-y.length,y.head.extra||(y.head.extra=new Array(y.head.extra_len)),r.arraySet(y.head.extra,U,k,re,w)),512&y.flags&&(y.check=a(y.check,U,re,k)),z-=re,k+=re,y.length-=re),y.length))break e;y.length=0,y.mode=7;case 7:if(2048&y.flags){if(z===0)break e;for(re=0;w=U[k+re++],y.head&&w&&y.length<65536&&(y.head.name+=String.fromCharCode(w)),w&&re<z;);if(512&y.flags&&(y.check=a(y.check,U,re,k)),z-=re,k+=re,w)break e}else y.head&&(y.head.name=null);y.length=0,y.mode=8;case 8:if(4096&y.flags){if(z===0)break e;for(re=0;w=U[k+re++],y.head&&w&&y.length<65536&&(y.head.comment+=String.fromCharCode(w)),w&&re<z;);if(512&y.flags&&(y.check=a(y.check,U,re,k)),z-=re,k+=re,w)break e}else y.head&&(y.head.comment=null);y.mode=9;case 9:if(512&y.flags){for(;H<16;){if(z===0)break e;z--,G+=U[k++]<<H,H+=8}if(G!==(65535&y.check)){x.msg="header crc mismatch",y.mode=30;break}H=G=0}y.head&&(y.head.hcrc=y.flags>>9&1,y.head.done=!0),x.adler=y.check=0,y.mode=12;break;case 10:for(;H<32;){if(z===0)break e;z--,G+=U[k++]<<H,H+=8}x.adler=y.check=E(G),H=G=0,y.mode=11;case 11:if(y.havedict===0)return x.next_out=W,x.avail_out=he,x.next_in=k,x.avail_in=z,y.hold=G,y.bits=H,2;x.adler=y.check=1,y.mode=12;case 12:if(N===5||N===6)break e;case 13:if(y.last){G>>>=7&H,H-=7&H,y.mode=27;break}for(;H<3;){if(z===0)break e;z--,G+=U[k++]<<H,H+=8}switch(y.last=1&G,H-=1,3&(G>>>=1)){case 0:y.mode=14;break;case 1:if(F(y),y.mode=20,N!==6)break;G>>>=2,H-=2;break e;case 2:y.mode=17;break;case 3:x.msg="invalid block type",y.mode=30}G>>>=2,H-=2;break;case 14:for(G>>>=7&H,H-=7&H;H<32;){if(z===0)break e;z--,G+=U[k++]<<H,H+=8}if((65535&G)!=(G>>>16^65535)){x.msg="invalid stored block lengths",y.mode=30;break}if(y.length=65535&G,H=G=0,y.mode=15,N===6)break e;case 15:y.mode=16;case 16:if(re=y.length){if(z<re&&(re=z),he<re&&(re=he),re===0)break e;r.arraySet(B,U,k,re,W),z-=re,k+=re,he-=re,W+=re,y.length-=re;break}y.mode=12;break;case 17:for(;H<14;){if(z===0)break e;z--,G+=U[k++]<<H,H+=8}if(y.nlen=257+(31&G),G>>>=5,H-=5,y.ndist=1+(31&G),G>>>=5,H-=5,y.ncode=4+(15&G),G>>>=4,H-=4,286<y.nlen||30<y.ndist){x.msg="too many length or distance symbols",y.mode=30;break}y.have=0,y.mode=18;case 18:for(;y.have<y.ncode;){for(;H<3;){if(z===0)break e;z--,G+=U[k++]<<H,H+=8}y.lens[J[y.have++]]=7&G,G>>>=3,H-=3}for(;y.have<19;)y.lens[J[y.have++]]=0;if(y.lencode=y.lendyn,y.lenbits=7,X={bits:y.lenbits},K=h(0,y.lens,0,19,y.lencode,0,y.work,X),y.lenbits=X.bits,K){x.msg="invalid code lengths set",y.mode=30;break}y.have=0,y.mode=19;case 19:for(;y.have<y.nlen+y.ndist;){for(;ye=(O=y.lencode[G&(1<<y.lenbits)-1])>>>16&255,Ce=65535&O,!((fe=O>>>24)<=H);){if(z===0)break e;z--,G+=U[k++]<<H,H+=8}if(Ce<16)G>>>=fe,H-=fe,y.lens[y.have++]=Ce;else{if(Ce===16){for(L=fe+2;H<L;){if(z===0)break e;z--,G+=U[k++]<<H,H+=8}if(G>>>=fe,H-=fe,y.have===0){x.msg="invalid bit length repeat",y.mode=30;break}w=y.lens[y.have-1],re=3+(3&G),G>>>=2,H-=2}else if(Ce===17){for(L=fe+3;H<L;){if(z===0)break e;z--,G+=U[k++]<<H,H+=8}H-=fe,w=0,re=3+(7&(G>>>=fe)),G>>>=3,H-=3}else{for(L=fe+7;H<L;){if(z===0)break e;z--,G+=U[k++]<<H,H+=8}H-=fe,w=0,re=11+(127&(G>>>=fe)),G>>>=7,H-=7}if(y.have+re>y.nlen+y.ndist){x.msg="invalid bit length repeat",y.mode=30;break}for(;re--;)y.lens[y.have++]=w}}if(y.mode===30)break;if(y.lens[256]===0){x.msg="invalid code -- missing end-of-block",y.mode=30;break}if(y.lenbits=9,X={bits:y.lenbits},K=h(u,y.lens,0,y.nlen,y.lencode,0,y.work,X),y.lenbits=X.bits,K){x.msg="invalid literal/lengths set",y.mode=30;break}if(y.distbits=6,y.distcode=y.distdyn,X={bits:y.distbits},K=h(c,y.lens,y.nlen,y.ndist,y.distcode,0,y.work,X),y.distbits=X.bits,K){x.msg="invalid distances set",y.mode=30;break}if(y.mode=20,N===6)break e;case 20:y.mode=21;case 21:if(6<=z&&258<=he){x.next_out=W,x.avail_out=he,x.next_in=k,x.avail_in=z,y.hold=G,y.bits=H,l(x,le),W=x.next_out,B=x.output,he=x.avail_out,k=x.next_in,U=x.input,z=x.avail_in,G=y.hold,H=y.bits,y.mode===12&&(y.back=-1);break}for(y.back=0;ye=(O=y.lencode[G&(1<<y.lenbits)-1])>>>16&255,Ce=65535&O,!((fe=O>>>24)<=H);){if(z===0)break e;z--,G+=U[k++]<<H,H+=8}if(ye&&!(240&ye)){for(De=fe,qt=ye,It=Ce;ye=(O=y.lencode[It+((G&(1<<De+qt)-1)>>De)])>>>16&255,Ce=65535&O,!(De+(fe=O>>>24)<=H);){if(z===0)break e;z--,G+=U[k++]<<H,H+=8}G>>>=De,H-=De,y.back+=De}if(G>>>=fe,H-=fe,y.back+=fe,y.length=Ce,ye===0){y.mode=26;break}if(32&ye){y.back=-1,y.mode=12;break}if(64&ye){x.msg="invalid literal/length code",y.mode=30;break}y.extra=15&ye,y.mode=22;case 22:if(y.extra){for(L=y.extra;H<L;){if(z===0)break e;z--,G+=U[k++]<<H,H+=8}y.length+=G&(1<<y.extra)-1,G>>>=y.extra,H-=y.extra,y.back+=y.extra}y.was=y.length,y.mode=23;case 23:for(;ye=(O=y.distcode[G&(1<<y.distbits)-1])>>>16&255,Ce=65535&O,!((fe=O>>>24)<=H);){if(z===0)break e;z--,G+=U[k++]<<H,H+=8}if(!(240&ye)){for(De=fe,qt=ye,It=Ce;ye=(O=y.distcode[It+((G&(1<<De+qt)-1)>>De)])>>>16&255,Ce=65535&O,!(De+(fe=O>>>24)<=H);){if(z===0)break e;z--,G+=U[k++]<<H,H+=8}G>>>=De,H-=De,y.back+=De}if(G>>>=fe,H-=fe,y.back+=fe,64&ye){x.msg="invalid distance code",y.mode=30;break}y.offset=Ce,y.extra=15&ye,y.mode=24;case 24:if(y.extra){for(L=y.extra;H<L;){if(z===0)break e;z--,G+=U[k++]<<H,H+=8}y.offset+=G&(1<<y.extra)-1,G>>>=y.extra,H-=y.extra,y.back+=y.extra}if(y.offset>y.dmax){x.msg="invalid distance too far back",y.mode=30;break}y.mode=25;case 25:if(he===0)break e;if(re=le-he,y.offset>re){if((re=y.offset-re)>y.whave&&y.sane){x.msg="invalid distance too far back",y.mode=30;break}Te=re>y.wnext?(re-=y.wnext,y.wsize-re):y.wnext-re,re>y.length&&(re=y.length),we=y.window}else we=B,Te=W-y.offset,re=y.length;for(he<re&&(re=he),he-=re,y.length-=re;B[W++]=we[Te++],--re;);y.length===0&&(y.mode=21);break;case 26:if(he===0)break e;B[W++]=y.length,he--,y.mode=21;break;case 27:if(y.wrap){for(;H<32;){if(z===0)break e;z--,G|=U[k++]<<H,H+=8}if(le-=he,x.total_out+=le,y.total+=le,le&&(x.adler=y.check=y.flags?a(y.check,B,le,W-le):o(y.check,B,le,W-le)),le=he,(y.flags?G:E(G))!==y.check){x.msg="incorrect data check",y.mode=30;break}H=G=0}y.mode=28;case 28:if(y.wrap&&y.flags){for(;H<32;){if(z===0)break e;z--,G+=U[k++]<<H,H+=8}if(G!==(4294967295&y.total)){x.msg="incorrect length check",y.mode=30;break}H=G=0}y.mode=29;case 29:K=1;break e;case 30:K=-3;break e;case 31:return-4;case 32:default:return f}return x.next_out=W,x.avail_out=he,x.next_in=k,x.avail_in=z,y.hold=G,y.bits=H,(y.wsize||le!==x.avail_out&&y.mode<30&&(y.mode<27||N!==4))&&D(x,x.output,x.next_out,le-x.avail_out)?(y.mode=31,-4):(pe-=x.avail_in,le-=x.avail_out,x.total_in+=pe,x.total_out+=le,y.total+=le,y.wrap&&le&&(x.adler=y.check=y.flags?a(y.check,B,le,x.next_out-le):o(y.check,B,le,x.next_out-le)),x.data_type=y.bits+(y.last?64:0)+(y.mode===12?128:0)+(y.mode===20||y.mode===15?256:0),(pe==0&&le===0||N===4)&&K===d&&(K=-5),K)},n.inflateEnd=function(x){if(!x||!x.state)return f;var N=x.state;return N.window&&(N.window=null),x.state=null,d},n.inflateGetHeader=function(x,N){var y;return x&&x.state&&2&(y=x.state).wrap?((y.head=N).done=!1,d):f},n.inflateSetDictionary=function(x,N){var y,U=N.length;return x&&x.state?(y=x.state).wrap!==0&&y.mode!==11?f:y.mode===11&&o(1,N,U,0)!==y.check?-3:D(x,N,U,U)?(y.mode=31,-4):(y.havedict=1,d):f},n.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(t,s,n){var r=t("../utils/common"),o=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],a=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],l=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],h=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];s.exports=function(u,c,d,f,p,m,g,E){var I,v,b,C,S,_,M,A,F,D=E.bits,x=0,N=0,y=0,U=0,B=0,k=0,W=0,z=0,he=0,G=0,H=null,pe=0,le=new r.Buf16(16),re=new r.Buf16(16),Te=null,we=0;for(x=0;x<=15;x++)le[x]=0;for(N=0;N<f;N++)le[c[d+N]]++;for(B=D,U=15;1<=U&&le[U]===0;U--);if(U<B&&(B=U),U===0)return p[m++]=20971520,p[m++]=20971520,E.bits=1,0;for(y=1;y<U&&le[y]===0;y++);for(B<y&&(B=y),x=z=1;x<=15;x++)if(z<<=1,(z-=le[x])<0)return-1;if(0<z&&(u===0||U!==1))return-1;for(re[1]=0,x=1;x<15;x++)re[x+1]=re[x]+le[x];for(N=0;N<f;N++)c[d+N]!==0&&(g[re[c[d+N]]++]=N);if(_=u===0?(H=Te=g,19):u===1?(H=o,pe-=257,Te=a,we-=257,256):(H=l,Te=h,-1),x=y,S=m,W=N=G=0,b=-1,C=(he=1<<(k=B))-1,u===1&&852<he||u===2&&592<he)return 1;for(;;){for(M=x-W,F=g[N]<_?(A=0,g[N]):g[N]>_?(A=Te[we+g[N]],H[pe+g[N]]):(A=96,0),I=1<<x-W,y=v=1<<k;p[S+(G>>W)+(v-=I)]=M<<24|A<<16|F|0,v!==0;);for(I=1<<x-1;G&I;)I>>=1;if(I!==0?(G&=I-1,G+=I):G=0,N++,--le[x]==0){if(x===U)break;x=c[d+g[N]]}if(B<x&&(G&C)!==b){for(W===0&&(W=B),S+=y,z=1<<(k=x-W);k+W<U&&!((z-=le[k+W])<=0);)k++,z<<=1;if(he+=1<<k,u===1&&852<he||u===2&&592<he)return 1;p[b=G&C]=B<<24|k<<16|S-m|0}}return G!==0&&(p[S+G]=x-W<<24|64<<16|0),E.bits=B,0}},{"../utils/common":41}],51:[function(t,s,n){s.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(t,s,n){var r=t("../utils/common"),o=0,a=1;function l(O){for(var V=O.length;0<=--V;)O[V]=0}var h=0,u=29,c=256,d=c+1+u,f=30,p=19,m=2*d+1,g=15,E=16,I=7,v=256,b=16,C=17,S=18,_=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],M=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],A=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],F=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],D=new Array(2*(d+2));l(D);var x=new Array(2*f);l(x);var N=new Array(512);l(N);var y=new Array(256);l(y);var U=new Array(u);l(U);var B,k,W,z=new Array(f);function he(O,V,J,ee,$){this.static_tree=O,this.extra_bits=V,this.extra_base=J,this.elems=ee,this.max_length=$,this.has_stree=O&&O.length}function G(O,V){this.dyn_tree=O,this.max_code=0,this.stat_desc=V}function H(O){return O<256?N[O]:N[256+(O>>>7)]}function pe(O,V){O.pending_buf[O.pending++]=255&V,O.pending_buf[O.pending++]=V>>>8&255}function le(O,V,J){O.bi_valid>E-J?(O.bi_buf|=V<<O.bi_valid&65535,pe(O,O.bi_buf),O.bi_buf=V>>E-O.bi_valid,O.bi_valid+=J-E):(O.bi_buf|=V<<O.bi_valid&65535,O.bi_valid+=J)}function re(O,V,J){le(O,J[2*V],J[2*V+1])}function Te(O,V){for(var J=0;J|=1&O,O>>>=1,J<<=1,0<--V;);return J>>>1}function we(O,V,J){var ee,$,ie=new Array(g+1),ue=0;for(ee=1;ee<=g;ee++)ie[ee]=ue=ue+J[ee-1]<<1;for($=0;$<=V;$++){var se=O[2*$+1];se!==0&&(O[2*$]=Te(ie[se]++,se))}}function fe(O){var V;for(V=0;V<d;V++)O.dyn_ltree[2*V]=0;for(V=0;V<f;V++)O.dyn_dtree[2*V]=0;for(V=0;V<p;V++)O.bl_tree[2*V]=0;O.dyn_ltree[2*v]=1,O.opt_len=O.static_len=0,O.last_lit=O.matches=0}function ye(O){8<O.bi_valid?pe(O,O.bi_buf):0<O.bi_valid&&(O.pending_buf[O.pending++]=O.bi_buf),O.bi_buf=0,O.bi_valid=0}function Ce(O,V,J,ee){var $=2*V,ie=2*J;return O[$]<O[ie]||O[$]===O[ie]&&ee[V]<=ee[J]}function De(O,V,J){for(var ee=O.heap[J],$=J<<1;$<=O.heap_len&&($<O.heap_len&&Ce(V,O.heap[$+1],O.heap[$],O.depth)&&$++,!Ce(V,ee,O.heap[$],O.depth));)O.heap[J]=O.heap[$],J=$,$<<=1;O.heap[J]=ee}function qt(O,V,J){var ee,$,ie,ue,se=0;if(O.last_lit!==0)for(;ee=O.pending_buf[O.d_buf+2*se]<<8|O.pending_buf[O.d_buf+2*se+1],$=O.pending_buf[O.l_buf+se],se++,ee===0?re(O,$,V):(re(O,(ie=y[$])+c+1,V),(ue=_[ie])!==0&&le(O,$-=U[ie],ue),re(O,ie=H(--ee),J),(ue=M[ie])!==0&&le(O,ee-=z[ie],ue)),se<O.last_lit;);re(O,v,V)}function It(O,V){var J,ee,$,ie=V.dyn_tree,ue=V.stat_desc.static_tree,se=V.stat_desc.has_stree,me=V.stat_desc.elems,Ve=-1;for(O.heap_len=0,O.heap_max=m,J=0;J<me;J++)ie[2*J]!==0?(O.heap[++O.heap_len]=Ve=J,O.depth[J]=0):ie[2*J+1]=0;for(;O.heap_len<2;)ie[2*($=O.heap[++O.heap_len]=Ve<2?++Ve:0)]=1,O.depth[$]=0,O.opt_len--,se&&(O.static_len-=ue[2*$+1]);for(V.max_code=Ve,J=O.heap_len>>1;1<=J;J--)De(O,ie,J);for($=me;J=O.heap[1],O.heap[1]=O.heap[O.heap_len--],De(O,ie,1),ee=O.heap[1],O.heap[--O.heap_max]=J,O.heap[--O.heap_max]=ee,ie[2*$]=ie[2*J]+ie[2*ee],O.depth[$]=(O.depth[J]>=O.depth[ee]?O.depth[J]:O.depth[ee])+1,ie[2*J+1]=ie[2*ee+1]=$,O.heap[1]=$++,De(O,ie,1),2<=O.heap_len;);O.heap[--O.heap_max]=O.heap[1],function(xe,Zt){var zo,Ri,Vo,Je,ql,Nu,Zi=Zt.dyn_tree,om=Zt.max_code,N1=Zt.stat_desc.static_tree,P1=Zt.stat_desc.has_stree,L1=Zt.stat_desc.extra_bits,am=Zt.stat_desc.extra_base,$o=Zt.stat_desc.max_length,Zl=0;for(Je=0;Je<=g;Je++)xe.bl_count[Je]=0;for(Zi[2*xe.heap[xe.heap_max]+1]=0,zo=xe.heap_max+1;zo<m;zo++)$o<(Je=Zi[2*Zi[2*(Ri=xe.heap[zo])+1]+1]+1)&&(Je=$o,Zl++),Zi[2*Ri+1]=Je,om<Ri||(xe.bl_count[Je]++,ql=0,am<=Ri&&(ql=L1[Ri-am]),Nu=Zi[2*Ri],xe.opt_len+=Nu*(Je+ql),P1&&(xe.static_len+=Nu*(N1[2*Ri+1]+ql)));if(Zl!==0){do{for(Je=$o-1;xe.bl_count[Je]===0;)Je--;xe.bl_count[Je]--,xe.bl_count[Je+1]+=2,xe.bl_count[$o]--,Zl-=2}while(0<Zl);for(Je=$o;Je!==0;Je--)for(Ri=xe.bl_count[Je];Ri!==0;)om<(Vo=xe.heap[--zo])||(Zi[2*Vo+1]!==Je&&(xe.opt_len+=(Je-Zi[2*Vo+1])*Zi[2*Vo],Zi[2*Vo+1]=Je),Ri--)}}(O,V),we(ie,Ve,O.bl_count)}function w(O,V,J){var ee,$,ie=-1,ue=V[1],se=0,me=7,Ve=4;for(ue===0&&(me=138,Ve=3),V[2*(J+1)+1]=65535,ee=0;ee<=J;ee++)$=ue,ue=V[2*(ee+1)+1],++se<me&&$===ue||(se<Ve?O.bl_tree[2*$]+=se:$!==0?($!==ie&&O.bl_tree[2*$]++,O.bl_tree[2*b]++):se<=10?O.bl_tree[2*C]++:O.bl_tree[2*S]++,ie=$,Ve=(se=0)===ue?(me=138,3):$===ue?(me=6,3):(me=7,4))}function K(O,V,J){var ee,$,ie=-1,ue=V[1],se=0,me=7,Ve=4;for(ue===0&&(me=138,Ve=3),ee=0;ee<=J;ee++)if($=ue,ue=V[2*(ee+1)+1],!(++se<me&&$===ue)){if(se<Ve)for(;re(O,$,O.bl_tree),--se!=0;);else $!==0?($!==ie&&(re(O,$,O.bl_tree),se--),re(O,b,O.bl_tree),le(O,se-3,2)):se<=10?(re(O,C,O.bl_tree),le(O,se-3,3)):(re(O,S,O.bl_tree),le(O,se-11,7));ie=$,Ve=(se=0)===ue?(me=138,3):$===ue?(me=6,3):(me=7,4)}}l(z);var X=!1;function L(O,V,J,ee){le(O,(h<<1)+(ee?1:0),3),function($,ie,ue,se){ye($),pe($,ue),pe($,~ue),r.arraySet($.pending_buf,$.window,ie,ue,$.pending),$.pending+=ue}(O,V,J)}n._tr_init=function(O){X||(function(){var V,J,ee,$,ie,ue=new Array(g+1);for($=ee=0;$<u-1;$++)for(U[$]=ee,V=0;V<1<<_[$];V++)y[ee++]=$;for(y[ee-1]=$,$=ie=0;$<16;$++)for(z[$]=ie,V=0;V<1<<M[$];V++)N[ie++]=$;for(ie>>=7;$<f;$++)for(z[$]=ie<<7,V=0;V<1<<M[$]-7;V++)N[256+ie++]=$;for(J=0;J<=g;J++)ue[J]=0;for(V=0;V<=143;)D[2*V+1]=8,V++,ue[8]++;for(;V<=255;)D[2*V+1]=9,V++,ue[9]++;for(;V<=279;)D[2*V+1]=7,V++,ue[7]++;for(;V<=287;)D[2*V+1]=8,V++,ue[8]++;for(we(D,d+1,ue),V=0;V<f;V++)x[2*V+1]=5,x[2*V]=Te(V,5);B=new he(D,_,c+1,d,g),k=new he(x,M,0,f,g),W=new he(new Array(0),A,0,p,I)}(),X=!0),O.l_desc=new G(O.dyn_ltree,B),O.d_desc=new G(O.dyn_dtree,k),O.bl_desc=new G(O.bl_tree,W),O.bi_buf=0,O.bi_valid=0,fe(O)},n._tr_stored_block=L,n._tr_flush_block=function(O,V,J,ee){var $,ie,ue=0;0<O.level?(O.strm.data_type===2&&(O.strm.data_type=function(se){var me,Ve=4093624447;for(me=0;me<=31;me++,Ve>>>=1)if(1&Ve&&se.dyn_ltree[2*me]!==0)return o;if(se.dyn_ltree[18]!==0||se.dyn_ltree[20]!==0||se.dyn_ltree[26]!==0)return a;for(me=32;me<c;me++)if(se.dyn_ltree[2*me]!==0)return a;return o}(O)),It(O,O.l_desc),It(O,O.d_desc),ue=function(se){var me;for(w(se,se.dyn_ltree,se.l_desc.max_code),w(se,se.dyn_dtree,se.d_desc.max_code),It(se,se.bl_desc),me=p-1;3<=me&&se.bl_tree[2*F[me]+1]===0;me--);return se.opt_len+=3*(me+1)+5+5+4,me}(O),$=O.opt_len+3+7>>>3,(ie=O.static_len+3+7>>>3)<=$&&($=ie)):$=ie=J+5,J+4<=$&&V!==-1?L(O,V,J,ee):O.strategy===4||ie===$?(le(O,2+(ee?1:0),3),qt(O,D,x)):(le(O,4+(ee?1:0),3),function(se,me,Ve,xe){var Zt;for(le(se,me-257,5),le(se,Ve-1,5),le(se,xe-4,4),Zt=0;Zt<xe;Zt++)le(se,se.bl_tree[2*F[Zt]+1],3);K(se,se.dyn_ltree,me-1),K(se,se.dyn_dtree,Ve-1)}(O,O.l_desc.max_code+1,O.d_desc.max_code+1,ue+1),qt(O,O.dyn_ltree,O.dyn_dtree)),fe(O),ee&&ye(O)},n._tr_tally=function(O,V,J){return O.pending_buf[O.d_buf+2*O.last_lit]=V>>>8&255,O.pending_buf[O.d_buf+2*O.last_lit+1]=255&V,O.pending_buf[O.l_buf+O.last_lit]=255&J,O.last_lit++,V===0?O.dyn_ltree[2*J]++:(O.matches++,V--,O.dyn_ltree[2*(y[J]+c+1)]++,O.dyn_dtree[2*H(V)]++),O.last_lit===O.lit_bufsize-1},n._tr_align=function(O){le(O,2,3),re(O,v,D),function(V){V.bi_valid===16?(pe(V,V.bi_buf),V.bi_buf=0,V.bi_valid=0):8<=V.bi_valid&&(V.pending_buf[V.pending++]=255&V.bi_buf,V.bi_buf>>=8,V.bi_valid-=8)}(O)}},{"../utils/common":41}],53:[function(t,s,n){s.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(t,s,n){(function(r){(function(o,a){if(!o.setImmediate){var l,h,u,c,d=1,f={},p=!1,m=o.document,g=Object.getPrototypeOf&&Object.getPrototypeOf(o);g=g&&g.setTimeout?g:o,l={}.toString.call(o.process)==="[object process]"?function(b){process.nextTick(function(){I(b)})}:function(){if(o.postMessage&&!o.importScripts){var b=!0,C=o.onmessage;return o.onmessage=function(){b=!1},o.postMessage("","*"),o.onmessage=C,b}}()?(c="setImmediate$"+Math.random()+"$",o.addEventListener?o.addEventListener("message",v,!1):o.attachEvent("onmessage",v),function(b){o.postMessage(c+b,"*")}):o.MessageChannel?((u=new MessageChannel).port1.onmessage=function(b){I(b.data)},function(b){u.port2.postMessage(b)}):m&&"onreadystatechange"in m.createElement("script")?(h=m.documentElement,function(b){var C=m.createElement("script");C.onreadystatechange=function(){I(b),C.onreadystatechange=null,h.removeChild(C),C=null},h.appendChild(C)}):function(b){setTimeout(I,0,b)},g.setImmediate=function(b){typeof b!="function"&&(b=new Function(""+b));for(var C=new Array(arguments.length-1),S=0;S<C.length;S++)C[S]=arguments[S+1];var _={callback:b,args:C};return f[d]=_,l(d),d++},g.clearImmediate=E}function E(b){delete f[b]}function I(b){if(p)setTimeout(I,0,b);else{var C=f[b];if(C){p=!0;try{(function(S){var _=S.callback,M=S.args;switch(M.length){case 0:_();break;case 1:_(M[0]);break;case 2:_(M[0],M[1]);break;case 3:_(M[0],M[1],M[2]);break;default:_.apply(a,M)}})(C)}finally{E(b),p=!1}}}}function v(b){b.source===o&&typeof b.data=="string"&&b.data.indexOf(c)===0&&I(+b.data.slice(c.length))}})(typeof self>"u"?r===void 0?this:r:self)}).call(this,typeof gh<"u"?gh:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})})(lv);var u_=lv.exports;const Ug=xb(u_);var wp={},pu={};(function(i){const e=":A-Za-z_\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",t=e+"\\-.\\d\\u00B7\\u0300-\\u036F\\u203F-\\u2040",s="["+e+"]["+t+"]*",n=new RegExp("^"+s+"$"),r=function(a,l){const h=[];let u=l.exec(a);for(;u;){const c=[];c.startIndex=l.lastIndex-u[0].length;const d=u.length;for(let f=0;f<d;f++)c.push(u[f]);h.push(c),u=l.exec(a)}return h},o=function(a){const l=n.exec(a);return!(l===null||typeof l>"u")};i.isExist=function(a){return typeof a<"u"},i.isEmptyObject=function(a){return Object.keys(a).length===0},i.merge=function(a,l,h){if(l){const u=Object.keys(l),c=u.length;for(let d=0;d<c;d++)h==="strict"?a[u[d]]=[l[u[d]]]:a[u[d]]=l[u[d]]}},i.getValue=function(a){return i.isExist(a)?a:""},i.isName=o,i.getAllMatches=r,i.nameRegexp=s})(pu);const Sp=pu,d_={allowBooleanAttributes:!1,unpairedTags:[]};wp.validate=function(i,e){e=Object.assign({},d_,e);const t=[];let s=!1,n=!1;i[0]==="\uFEFF"&&(i=i.substr(1));for(let r=0;r<i.length;r++)if(i[r]==="<"&&i[r+1]==="?"){if(r+=2,r=Bg(i,r),r.err)return r}else if(i[r]==="<"){let o=r;if(r++,i[r]==="!"){r=zg(i,r);continue}else{let a=!1;i[r]==="/"&&(a=!0,r++);let l="";for(;r<i.length&&i[r]!==">"&&i[r]!==" "&&i[r]!=="	"&&i[r]!==`
`&&i[r]!=="\r";r++)l+=i[r];if(l=l.trim(),l[l.length-1]==="/"&&(l=l.substring(0,l.length-1),r--),!v_(l)){let c;return l.trim().length===0?c="Invalid space after '<'.":c="Tag '"+l+"' is an invalid name.",et("InvalidTag",c,wt(i,r))}const h=m_(i,r);if(h===!1)return et("InvalidAttr","Attributes for '"+l+"' have open quote.",wt(i,r));let u=h.value;if(r=h.index,u[u.length-1]==="/"){const c=r-u.length;u=u.substring(0,u.length-1);const d=Vg(u,e);if(d===!0)s=!0;else return et(d.err.code,d.err.msg,wt(i,c+d.err.line))}else if(a)if(h.tagClosed){if(u.trim().length>0)return et("InvalidTag","Closing tag '"+l+"' can't have attributes or invalid starting.",wt(i,o));if(t.length===0)return et("InvalidTag","Closing tag '"+l+"' has not been opened.",wt(i,o));{const c=t.pop();if(l!==c.tagName){let d=wt(i,c.tagStartPos);return et("InvalidTag","Expected closing tag '"+c.tagName+"' (opened in line "+d.line+", col "+d.col+") instead of closing tag '"+l+"'.",wt(i,o))}t.length==0&&(n=!0)}}else return et("InvalidTag","Closing tag '"+l+"' doesn't have proper closing.",wt(i,r));else{const c=Vg(u,e);if(c!==!0)return et(c.err.code,c.err.msg,wt(i,r-u.length+c.err.line));if(n===!0)return et("InvalidXml","Multiple possible root nodes found.",wt(i,r));e.unpairedTags.indexOf(l)!==-1||t.push({tagName:l,tagStartPos:o}),s=!0}for(r++;r<i.length;r++)if(i[r]==="<")if(i[r+1]==="!"){r++,r=zg(i,r);continue}else if(i[r+1]==="?"){if(r=Bg(i,++r),r.err)return r}else break;else if(i[r]==="&"){const c=I_(i,r);if(c==-1)return et("InvalidChar","char '&' is not expected.",wt(i,r));r=c}else if(n===!0&&!kg(i[r]))return et("InvalidXml","Extra text at the end",wt(i,r));i[r]==="<"&&r--}}else{if(kg(i[r]))continue;return et("InvalidChar","char '"+i[r]+"' is not expected.",wt(i,r))}if(s){if(t.length==1)return et("InvalidTag","Unclosed tag '"+t[0].tagName+"'.",wt(i,t[0].tagStartPos));if(t.length>0)return et("InvalidXml","Invalid '"+JSON.stringify(t.map(r=>r.tagName),null,4).replace(/\r?\n/g,"")+"' found.",{line:1,col:1})}else return et("InvalidXml","Start tag expected.",1);return!0};function kg(i){return i===" "||i==="	"||i===`
`||i==="\r"}function Bg(i,e){const t=e;for(;e<i.length;e++)if(i[e]=="?"||i[e]==" "){const s=i.substr(t,e-t);if(e>5&&s==="xml")return et("InvalidXml","XML declaration allowed only at the start of the document.",wt(i,e));if(i[e]=="?"&&i[e+1]==">"){e++;break}else continue}return e}function zg(i,e){if(i.length>e+5&&i[e+1]==="-"&&i[e+2]==="-"){for(e+=3;e<i.length;e++)if(i[e]==="-"&&i[e+1]==="-"&&i[e+2]===">"){e+=2;break}}else if(i.length>e+8&&i[e+1]==="D"&&i[e+2]==="O"&&i[e+3]==="C"&&i[e+4]==="T"&&i[e+5]==="Y"&&i[e+6]==="P"&&i[e+7]==="E"){let t=1;for(e+=8;e<i.length;e++)if(i[e]==="<")t++;else if(i[e]===">"&&(t--,t===0))break}else if(i.length>e+9&&i[e+1]==="["&&i[e+2]==="C"&&i[e+3]==="D"&&i[e+4]==="A"&&i[e+5]==="T"&&i[e+6]==="A"&&i[e+7]==="["){for(e+=8;e<i.length;e++)if(i[e]==="]"&&i[e+1]==="]"&&i[e+2]===">"){e+=2;break}}return e}const f_='"',p_="'";function m_(i,e){let t="",s="",n=!1;for(;e<i.length;e++){if(i[e]===f_||i[e]===p_)s===""?s=i[e]:s!==i[e]||(s="");else if(i[e]===">"&&s===""){n=!0;break}t+=i[e]}return s!==""?!1:{value:t,index:e,tagClosed:n}}const g_=new RegExp(`(\\s*)([^\\s=]+)(\\s*=)?(\\s*(['"])(([\\s\\S])*?)\\5)?`,"g");function Vg(i,e){const t=Sp.getAllMatches(i,g_),s={};for(let n=0;n<t.length;n++){if(t[n][1].length===0)return et("InvalidAttr","Attribute '"+t[n][2]+"' has no space in starting.",aa(t[n]));if(t[n][3]!==void 0&&t[n][4]===void 0)return et("InvalidAttr","Attribute '"+t[n][2]+"' is without value.",aa(t[n]));if(t[n][3]===void 0&&!e.allowBooleanAttributes)return et("InvalidAttr","boolean attribute '"+t[n][2]+"' is not allowed.",aa(t[n]));const r=t[n][2];if(!b_(r))return et("InvalidAttr","Attribute '"+r+"' is an invalid name.",aa(t[n]));if(!s.hasOwnProperty(r))s[r]=1;else return et("InvalidAttr","Attribute '"+r+"' is repeated.",aa(t[n]))}return!0}function E_(i,e){let t=/\d/;for(i[e]==="x"&&(e++,t=/[\da-fA-F]/);e<i.length;e++){if(i[e]===";")return e;if(!i[e].match(t))break}return-1}function I_(i,e){if(e++,i[e]===";")return-1;if(i[e]==="#")return e++,E_(i,e);let t=0;for(;e<i.length;e++,t++)if(!(i[e].match(/\w/)&&t<20)){if(i[e]===";")break;return-1}return e}function et(i,e,t){return{err:{code:i,msg:e,line:t.line||t,col:t.col}}}function b_(i){return Sp.isName(i)}function v_(i){return Sp.isName(i)}function wt(i,e){const t=i.substring(0,e).split(/\r?\n/);return{line:t.length,col:t[t.length-1].length+1}}function aa(i){return i.startIndex+i[1].length}var xp={};const hv={preserveOrder:!1,attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,removeNSPrefix:!1,allowBooleanAttributes:!1,parseTagValue:!0,parseAttributeValue:!1,trimValues:!0,cdataPropName:!1,numberParseOptions:{hex:!0,leadingZeros:!0,eNotation:!0},tagValueProcessor:function(i,e){return e},attributeValueProcessor:function(i,e){return e},stopNodes:[],alwaysCreateTextNode:!1,isArray:()=>!1,commentPropName:!1,unpairedTags:[],processEntities:!0,htmlEntities:!1,ignoreDeclaration:!1,ignorePiTags:!1,transformTagName:!1,transformAttributeName:!1,updateTag:function(i,e,t){return i}},y_=function(i){return Object.assign({},hv,i)};xp.buildOptions=y_;xp.defaultOptions=hv;class C_{constructor(e){this.tagname=e,this.child=[],this[":@"]={}}add(e,t){e==="__proto__"&&(e="#__proto__"),this.child.push({[e]:t})}addChild(e){e.tagname==="__proto__"&&(e.tagname="#__proto__"),e[":@"]&&Object.keys(e[":@"]).length>0?this.child.push({[e.tagname]:e.child,":@":e[":@"]}):this.child.push({[e.tagname]:e.child})}}var T_=C_;const w_=pu;function S_(i,e){const t={};if(i[e+3]==="O"&&i[e+4]==="C"&&i[e+5]==="T"&&i[e+6]==="Y"&&i[e+7]==="P"&&i[e+8]==="E"){e=e+9;let s=1,n=!1,r=!1,o="";for(;e<i.length;e++)if(i[e]==="<"&&!r)n&&R_(i,e)?(e+=7,[entityName,val,e]=x_(i,e+1),val.indexOf("&")===-1&&(t[F_(entityName)]={regx:RegExp(`&${entityName};`,"g"),val})):n&&__(i,e)||n&&A_(i,e)?e+=8:n&&M_(i,e)?e+=9:r=!0,s++,o="";else if(i[e]===">"){if(r?i[e-1]==="-"&&i[e-2]==="-"&&(r=!1,s--):s--,s===0)break}else i[e]==="["?n=!0:o+=i[e];if(s!==0)throw new Error("Unclosed DOCTYPE")}else throw new Error("Invalid Tag instead of DOCTYPE");return{entities:t,i:e}}function x_(i,e){let t="";for(;e<i.length&&i[e]!=="'"&&i[e]!=='"';e++)t+=i[e];if(t=t.trim(),t.indexOf(" ")!==-1)throw new Error("External entites are not supported");const s=i[e++];let n="";for(;e<i.length&&i[e]!==s;e++)n+=i[e];return[t,n,e]}function R_(i,e){return i[e+1]==="!"&&i[e+2]==="E"&&i[e+3]==="N"&&i[e+4]==="T"&&i[e+5]==="I"&&i[e+6]==="T"&&i[e+7]==="Y"}function __(i,e){return i[e+1]==="!"&&i[e+2]==="E"&&i[e+3]==="L"&&i[e+4]==="E"&&i[e+5]==="M"&&i[e+6]==="E"&&i[e+7]==="N"&&i[e+8]==="T"}function A_(i,e){return i[e+1]==="!"&&i[e+2]==="A"&&i[e+3]==="T"&&i[e+4]==="T"&&i[e+5]==="L"&&i[e+6]==="I"&&i[e+7]==="S"&&i[e+8]==="T"}function M_(i,e){return i[e+1]==="!"&&i[e+2]==="N"&&i[e+3]==="O"&&i[e+4]==="T"&&i[e+5]==="A"&&i[e+6]==="T"&&i[e+7]==="I"&&i[e+8]==="O"&&i[e+9]==="N"}function F_(i){if(w_.isName(i))return i;throw new Error(`Invalid entity name ${i}`)}var O_=S_;const N_=/^[-+]?0x[a-fA-F0-9]+$/,P_=/^([\-\+])?(0*)(\.[0-9]+([eE]\-?[0-9]+)?|[0-9]+(\.[0-9]+([eE]\-?[0-9]+)?)?)$/;!Number.parseInt&&window.parseInt&&(Number.parseInt=window.parseInt);!Number.parseFloat&&window.parseFloat&&(Number.parseFloat=window.parseFloat);const L_={hex:!0,leadingZeros:!0,decimalPoint:".",eNotation:!0};function D_(i,e={}){if(e=Object.assign({},L_,e),!i||typeof i!="string")return i;let t=i.trim();if(e.skipLike!==void 0&&e.skipLike.test(t))return i;if(e.hex&&N_.test(t))return Number.parseInt(t,16);{const s=P_.exec(t);if(s){const n=s[1],r=s[2];let o=U_(s[3]);const a=s[4]||s[6];if(!e.leadingZeros&&r.length>0&&n&&t[2]!=="."||!e.leadingZeros&&r.length>0&&!n&&t[1]!==".")return i;{const l=Number(t),h=""+l;return h.search(/[eE]/)!==-1||a?e.eNotation?l:i:t.indexOf(".")!==-1?h==="0"&&o===""||h===o||n&&h==="-"+o?l:i:r?o===h||n+o===h?l:i:t===h||t===n+h?l:i}}else return i}}function U_(i){return i&&i.indexOf(".")!==-1&&(i=i.replace(/0+$/,""),i==="."?i="0":i[0]==="."?i="0"+i:i[i.length-1]==="."&&(i=i.substr(0,i.length-1))),i}var k_=D_;const cv=pu,la=T_,B_=O_,z_=k_;let V_=class{constructor(i){this.options=i,this.currentNode=null,this.tagsNodeStack=[],this.docTypeEntities={},this.lastEntities={apos:{regex:/&(apos|#39|#x27);/g,val:"'"},gt:{regex:/&(gt|#62|#x3E);/g,val:">"},lt:{regex:/&(lt|#60|#x3C);/g,val:"<"},quot:{regex:/&(quot|#34|#x22);/g,val:'"'}},this.ampEntity={regex:/&(amp|#38|#x26);/g,val:"&"},this.htmlEntities={space:{regex:/&(nbsp|#160);/g,val:" "},cent:{regex:/&(cent|#162);/g,val:"¢"},pound:{regex:/&(pound|#163);/g,val:"£"},yen:{regex:/&(yen|#165);/g,val:"¥"},euro:{regex:/&(euro|#8364);/g,val:"€"},copyright:{regex:/&(copy|#169);/g,val:"©"},reg:{regex:/&(reg|#174);/g,val:"®"},inr:{regex:/&(inr|#8377);/g,val:"₹"},num_dec:{regex:/&#([0-9]{1,7});/g,val:(e,t)=>String.fromCharCode(Number.parseInt(t,10))},num_hex:{regex:/&#x([0-9a-fA-F]{1,6});/g,val:(e,t)=>String.fromCharCode(Number.parseInt(t,16))}},this.addExternalEntities=$_,this.parseXml=W_,this.parseTextData=H_,this.resolveNameSpace=G_,this.buildAttributesMap=j_,this.isItStopNode=Q_,this.replaceEntitiesValue=q_,this.readStopNodeData=J_,this.saveTextToParentTag=Z_,this.addChild=X_}};function $_(i){const e=Object.keys(i);for(let t=0;t<e.length;t++){const s=e[t];this.lastEntities[s]={regex:new RegExp("&"+s+";","g"),val:i[s]}}}function H_(i,e,t,s,n,r,o){if(i!==void 0&&(this.options.trimValues&&!s&&(i=i.trim()),i.length>0)){o||(i=this.replaceEntitiesValue(i));const a=this.options.tagValueProcessor(e,i,t,n,r);return a==null?i:typeof a!=typeof i||a!==i?a:this.options.trimValues?rf(i,this.options.parseTagValue,this.options.numberParseOptions):i.trim()===i?rf(i,this.options.parseTagValue,this.options.numberParseOptions):i}}function G_(i){if(this.options.removeNSPrefix){const e=i.split(":"),t=i.charAt(0)==="/"?"/":"";if(e[0]==="xmlns")return"";e.length===2&&(i=t+e[1])}return i}const Y_=new RegExp(`([^\\s=]+)\\s*(=\\s*(['"])([\\s\\S]*?)\\3)?`,"gm");function j_(i,e,t){if(!this.options.ignoreAttributes&&typeof i=="string"){const s=cv.getAllMatches(i,Y_),n=s.length,r={};for(let o=0;o<n;o++){const a=this.resolveNameSpace(s[o][1]);let l=s[o][4],h=this.options.attributeNamePrefix+a;if(a.length)if(this.options.transformAttributeName&&(h=this.options.transformAttributeName(h)),h==="__proto__"&&(h="#__proto__"),l!==void 0){this.options.trimValues&&(l=l.trim()),l=this.replaceEntitiesValue(l);const u=this.options.attributeValueProcessor(a,l,e);u==null?r[h]=l:typeof u!=typeof l||u!==l?r[h]=u:r[h]=rf(l,this.options.parseAttributeValue,this.options.numberParseOptions)}else this.options.allowBooleanAttributes&&(r[h]=!0)}if(!Object.keys(r).length)return;if(this.options.attributesGroupName){const o={};return o[this.options.attributesGroupName]=r,o}return r}}const W_=function(i){i=i.replace(/\r\n?/g,`
`);const e=new la("!xml");let t=e,s="",n="";for(let r=0;r<i.length;r++)if(i[r]==="<")if(i[r+1]==="/"){const o=_n(i,">",r,"Closing Tag is not closed.");let a=i.substring(r+2,o).trim();if(this.options.removeNSPrefix){const u=a.indexOf(":");u!==-1&&(a=a.substr(u+1))}this.options.transformTagName&&(a=this.options.transformTagName(a)),t&&(s=this.saveTextToParentTag(s,t,n));const l=n.substring(n.lastIndexOf(".")+1);if(a&&this.options.unpairedTags.indexOf(a)!==-1)throw new Error(`Unpaired tag can not be used as closing tag: </${a}>`);let h=0;l&&this.options.unpairedTags.indexOf(l)!==-1?(h=n.lastIndexOf(".",n.lastIndexOf(".")-1),this.tagsNodeStack.pop()):h=n.lastIndexOf("."),n=n.substring(0,h),t=this.tagsNodeStack.pop(),s="",r=o}else if(i[r+1]==="?"){let o=nf(i,r,!1,"?>");if(!o)throw new Error("Pi Tag is not closed.");if(s=this.saveTextToParentTag(s,t,n),!(this.options.ignoreDeclaration&&o.tagName==="?xml"||this.options.ignorePiTags)){const a=new la(o.tagName);a.add(this.options.textNodeName,""),o.tagName!==o.tagExp&&o.attrExpPresent&&(a[":@"]=this.buildAttributesMap(o.tagExp,n,o.tagName)),this.addChild(t,a,n)}r=o.closeIndex+1}else if(i.substr(r+1,3)==="!--"){const o=_n(i,"-->",r+4,"Comment is not closed.");if(this.options.commentPropName){const a=i.substring(r+4,o-2);s=this.saveTextToParentTag(s,t,n),t.add(this.options.commentPropName,[{[this.options.textNodeName]:a}])}r=o}else if(i.substr(r+1,2)==="!D"){const o=B_(i,r);this.docTypeEntities=o.entities,r=o.i}else if(i.substr(r+1,2)==="!["){const o=_n(i,"]]>",r,"CDATA is not closed.")-2,a=i.substring(r+9,o);s=this.saveTextToParentTag(s,t,n);let l=this.parseTextData(a,t.tagname,n,!0,!1,!0,!0);l==null&&(l=""),this.options.cdataPropName?t.add(this.options.cdataPropName,[{[this.options.textNodeName]:a}]):t.add(this.options.textNodeName,l),r=o+2}else{let o=nf(i,r,this.options.removeNSPrefix),a=o.tagName;const l=o.rawTagName;let h=o.tagExp,u=o.attrExpPresent,c=o.closeIndex;this.options.transformTagName&&(a=this.options.transformTagName(a)),t&&s&&t.tagname!=="!xml"&&(s=this.saveTextToParentTag(s,t,n,!1));const d=t;if(d&&this.options.unpairedTags.indexOf(d.tagname)!==-1&&(t=this.tagsNodeStack.pop(),n=n.substring(0,n.lastIndexOf("."))),a!==e.tagname&&(n+=n?"."+a:a),this.isItStopNode(this.options.stopNodes,n,a)){let f="";if(h.length>0&&h.lastIndexOf("/")===h.length-1)a[a.length-1]==="/"?(a=a.substr(0,a.length-1),n=n.substr(0,n.length-1),h=a):h=h.substr(0,h.length-1),r=o.closeIndex;else if(this.options.unpairedTags.indexOf(a)!==-1)r=o.closeIndex;else{const m=this.readStopNodeData(i,l,c+1);if(!m)throw new Error(`Unexpected end of ${l}`);r=m.i,f=m.tagContent}const p=new la(a);a!==h&&u&&(p[":@"]=this.buildAttributesMap(h,n,a)),f&&(f=this.parseTextData(f,a,n,!0,u,!0,!0)),n=n.substr(0,n.lastIndexOf(".")),p.add(this.options.textNodeName,f),this.addChild(t,p,n)}else{if(h.length>0&&h.lastIndexOf("/")===h.length-1){a[a.length-1]==="/"?(a=a.substr(0,a.length-1),n=n.substr(0,n.length-1),h=a):h=h.substr(0,h.length-1),this.options.transformTagName&&(a=this.options.transformTagName(a));const f=new la(a);a!==h&&u&&(f[":@"]=this.buildAttributesMap(h,n,a)),this.addChild(t,f,n),n=n.substr(0,n.lastIndexOf("."))}else{const f=new la(a);this.tagsNodeStack.push(t),a!==h&&u&&(f[":@"]=this.buildAttributesMap(h,n,a)),this.addChild(t,f,n),t=f}s="",r=c}}else s+=i[r];return e.child};function X_(i,e,t){const s=this.options.updateTag(e.tagname,t,e[":@"]);s===!1||(typeof s=="string"&&(e.tagname=s),i.addChild(e))}const q_=function(i){if(this.options.processEntities){for(let e in this.docTypeEntities){const t=this.docTypeEntities[e];i=i.replace(t.regx,t.val)}for(let e in this.lastEntities){const t=this.lastEntities[e];i=i.replace(t.regex,t.val)}if(this.options.htmlEntities)for(let e in this.htmlEntities){const t=this.htmlEntities[e];i=i.replace(t.regex,t.val)}i=i.replace(this.ampEntity.regex,this.ampEntity.val)}return i};function Z_(i,e,t,s){return i&&(s===void 0&&(s=Object.keys(e.child).length===0),i=this.parseTextData(i,e.tagname,t,!1,e[":@"]?Object.keys(e[":@"]).length!==0:!1,s),i!==void 0&&i!==""&&e.add(this.options.textNodeName,i),i=""),i}function Q_(i,e,t){const s="*."+t;for(const n in i){const r=i[n];if(s===r||e===r)return!0}return!1}function K_(i,e,t=">"){let s,n="";for(let r=e;r<i.length;r++){let o=i[r];if(s)o===s&&(s="");else if(o==='"'||o==="'")s=o;else if(o===t[0])if(t[1]){if(i[r+1]===t[1])return{data:n,index:r}}else return{data:n,index:r};else o==="	"&&(o=" ");n+=o}}function _n(i,e,t,s){const n=i.indexOf(e,t);if(n===-1)throw new Error(s);return n+e.length-1}function nf(i,e,t,s=">"){const n=K_(i,e+1,s);if(!n)return;let r=n.data;const o=n.index,a=r.search(/\s/);let l=r,h=!0;a!==-1&&(l=r.substring(0,a),r=r.substring(a+1).trimStart());const u=l;if(t){const c=l.indexOf(":");c!==-1&&(l=l.substr(c+1),h=l!==n.data.substr(c+1))}return{tagName:l,tagExp:r,closeIndex:o,attrExpPresent:h,rawTagName:u}}function J_(i,e,t){const s=t;let n=1;for(;t<i.length;t++)if(i[t]==="<")if(i[t+1]==="/"){const r=_n(i,">",t,`${e} is not closed`);if(i.substring(t+2,r).trim()===e&&(n--,n===0))return{tagContent:i.substring(s,t),i:r};t=r}else if(i[t+1]==="?")t=_n(i,"?>",t+1,"StopNode is not closed.");else if(i.substr(t+1,3)==="!--")t=_n(i,"-->",t+3,"StopNode is not closed.");else if(i.substr(t+1,2)==="![")t=_n(i,"]]>",t,"StopNode is not closed.")-2;else{const r=nf(i,t,">");r&&((r&&r.tagName)===e&&r.tagExp[r.tagExp.length-1]!=="/"&&n++,t=r.closeIndex)}}function rf(i,e,t){if(e&&typeof i=="string"){const s=i.trim();return s==="true"?!0:s==="false"?!1:z_(i,t)}else return cv.isExist(i)?i:""}var eA=V_,uv={};function tA(i,e){return dv(i,e)}function dv(i,e,t){let s;const n={};for(let r=0;r<i.length;r++){const o=i[r],a=iA(o);let l="";if(t===void 0?l=a:l=t+"."+a,a===e.textNodeName)s===void 0?s=o[a]:s+=""+o[a];else{if(a===void 0)continue;if(o[a]){let h=dv(o[a],e,l);const u=nA(h,e);o[":@"]?sA(h,o[":@"],l,e):Object.keys(h).length===1&&h[e.textNodeName]!==void 0&&!e.alwaysCreateTextNode?h=h[e.textNodeName]:Object.keys(h).length===0&&(e.alwaysCreateTextNode?h[e.textNodeName]="":h=""),n[a]!==void 0&&n.hasOwnProperty(a)?(Array.isArray(n[a])||(n[a]=[n[a]]),n[a].push(h)):e.isArray(a,l,u)?n[a]=[h]:n[a]=h}}}return typeof s=="string"?s.length>0&&(n[e.textNodeName]=s):s!==void 0&&(n[e.textNodeName]=s),n}function iA(i){const e=Object.keys(i);for(let t=0;t<e.length;t++){const s=e[t];if(s!==":@")return s}}function sA(i,e,t,s){if(e){const n=Object.keys(e),r=n.length;for(let o=0;o<r;o++){const a=n[o];s.isArray(a,t+"."+a,!0,!0)?i[a]=[e[a]]:i[a]=e[a]}}}function nA(i,e){const{textNodeName:t}=e,s=Object.keys(i).length;return!!(s===0||s===1&&(i[t]||typeof i[t]=="boolean"||i[t]===0))}uv.prettify=tA;const{buildOptions:rA}=xp,oA=eA,{prettify:aA}=uv,lA=wp;let hA=class{constructor(e){this.externalEntities={},this.options=rA(e)}parse(e,t){if(typeof e!="string")if(e.toString)e=e.toString();else throw new Error("XML data is accepted in String or Bytes[] form.");if(t){t===!0&&(t={});const r=lA.validate(e,t);if(r!==!0)throw Error(`${r.err.msg}:${r.err.line}:${r.err.col}`)}const s=new oA(this.options);s.addExternalEntities(this.externalEntities);const n=s.parseXml(e);return this.options.preserveOrder||n===void 0?n:aA(n,this.options)}addEntity(e,t){if(t.indexOf("&")!==-1)throw new Error("Entity value can't have '&'");if(e.indexOf("&")!==-1||e.indexOf(";")!==-1)throw new Error("An entity must be set without '&' and ';'. Eg. use '#xD' for '&#xD;'");if(t==="&")throw new Error("An entity with value '&' is not permitted");this.externalEntities[e]=t}};var cA=hA;const uA=`
`;function dA(i,e){let t="";return e.format&&e.indentBy.length>0&&(t=uA),fv(i,e,"",t)}function fv(i,e,t,s){let n="",r=!1;for(let o=0;o<i.length;o++){const a=i[o],l=fA(a);if(l===void 0)continue;let h="";if(t.length===0?h=l:h=`${t}.${l}`,l===e.textNodeName){let p=a[l];pA(h,e)||(p=e.tagValueProcessor(l,p),p=pv(p,e)),r&&(n+=s),n+=p,r=!1;continue}else if(l===e.cdataPropName){r&&(n+=s),n+=`<![CDATA[${a[l][0][e.textNodeName]}]]>`,r=!1;continue}else if(l===e.commentPropName){n+=s+`<!--${a[l][0][e.textNodeName]}-->`,r=!0;continue}else if(l[0]==="?"){const p=$g(a[":@"],e),m=l==="?xml"?"":s;let g=a[l][0][e.textNodeName];g=g.length!==0?" "+g:"",n+=m+`<${l}${g}${p}?>`,r=!0;continue}let u=s;u!==""&&(u+=e.indentBy);const c=$g(a[":@"],e),d=s+`<${l}${c}`,f=fv(a[l],e,h,u);e.unpairedTags.indexOf(l)!==-1?e.suppressUnpairedNode?n+=d+">":n+=d+"/>":(!f||f.length===0)&&e.suppressEmptyNode?n+=d+"/>":f&&f.endsWith(">")?n+=d+`>${f}${s}</${l}>`:(n+=d+">",f&&s!==""&&(f.includes("/>")||f.includes("</"))?n+=s+e.indentBy+f+s:n+=f,n+=`</${l}>`),r=!0}return n}function fA(i){const e=Object.keys(i);for(let t=0;t<e.length;t++){const s=e[t];if(i.hasOwnProperty(s)&&s!==":@")return s}}function $g(i,e){let t="";if(i&&!e.ignoreAttributes)for(let s in i){if(!i.hasOwnProperty(s))continue;let n=e.attributeValueProcessor(s,i[s]);n=pv(n,e),n===!0&&e.suppressBooleanAttributes?t+=` ${s.substr(e.attributeNamePrefix.length)}`:t+=` ${s.substr(e.attributeNamePrefix.length)}="${n}"`}return t}function pA(i,e){i=i.substr(0,i.length-e.textNodeName.length-1);let t=i.substr(i.lastIndexOf(".")+1);for(let s in e.stopNodes)if(e.stopNodes[s]===i||e.stopNodes[s]==="*."+t)return!0;return!1}function pv(i,e){if(i&&i.length>0&&e.processEntities)for(let t=0;t<e.entities.length;t++){const s=e.entities[t];i=i.replace(s.regex,s.val)}return i}var mA=dA;const gA=mA,EA={attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,cdataPropName:!1,format:!1,indentBy:"  ",suppressEmptyNode:!1,suppressUnpairedNode:!0,suppressBooleanAttributes:!0,tagValueProcessor:function(i,e){return e},attributeValueProcessor:function(i,e){return e},preserveOrder:!1,commentPropName:!1,unpairedTags:[],entities:[{regex:new RegExp("&","g"),val:"&amp;"},{regex:new RegExp(">","g"),val:"&gt;"},{regex:new RegExp("<","g"),val:"&lt;"},{regex:new RegExp("'","g"),val:"&apos;"},{regex:new RegExp('"',"g"),val:"&quot;"}],processEntities:!0,stopNodes:[],oneListGroup:!1};function nn(i){this.options=Object.assign({},EA,i),this.options.ignoreAttributes||this.options.attributesGroupName?this.isAttribute=function(){return!1}:(this.attrPrefixLen=this.options.attributeNamePrefix.length,this.isAttribute=vA),this.processTextOrObjNode=IA,this.options.format?(this.indentate=bA,this.tagEndChar=`>
`,this.newLine=`
`):(this.indentate=function(){return""},this.tagEndChar=">",this.newLine="")}nn.prototype.build=function(i){return this.options.preserveOrder?gA(i,this.options):(Array.isArray(i)&&this.options.arrayNodeName&&this.options.arrayNodeName.length>1&&(i={[this.options.arrayNodeName]:i}),this.j2x(i,0).val)};nn.prototype.j2x=function(i,e){let t="",s="";for(let n in i)if(Object.prototype.hasOwnProperty.call(i,n))if(typeof i[n]>"u")this.isAttribute(n)&&(s+="");else if(i[n]===null)this.isAttribute(n)?s+="":n[0]==="?"?s+=this.indentate(e)+"<"+n+"?"+this.tagEndChar:s+=this.indentate(e)+"<"+n+"/"+this.tagEndChar;else if(i[n]instanceof Date)s+=this.buildTextValNode(i[n],n,"",e);else if(typeof i[n]!="object"){const r=this.isAttribute(n);if(r)t+=this.buildAttrPairStr(r,""+i[n]);else if(n===this.options.textNodeName){let o=this.options.tagValueProcessor(n,""+i[n]);s+=this.replaceEntitiesValue(o)}else s+=this.buildTextValNode(i[n],n,"",e)}else if(Array.isArray(i[n])){const r=i[n].length;let o="",a="";for(let l=0;l<r;l++){const h=i[n][l];if(!(typeof h>"u"))if(h===null)n[0]==="?"?s+=this.indentate(e)+"<"+n+"?"+this.tagEndChar:s+=this.indentate(e)+"<"+n+"/"+this.tagEndChar;else if(typeof h=="object")if(this.options.oneListGroup){const u=this.j2x(h,e+1);o+=u.val,this.options.attributesGroupName&&h.hasOwnProperty(this.options.attributesGroupName)&&(a+=u.attrStr)}else o+=this.processTextOrObjNode(h,n,e);else if(this.options.oneListGroup){let u=this.options.tagValueProcessor(n,h);u=this.replaceEntitiesValue(u),o+=u}else o+=this.buildTextValNode(h,n,"",e)}this.options.oneListGroup&&(o=this.buildObjectNode(o,n,a,e)),s+=o}else if(this.options.attributesGroupName&&n===this.options.attributesGroupName){const r=Object.keys(i[n]),o=r.length;for(let a=0;a<o;a++)t+=this.buildAttrPairStr(r[a],""+i[n][r[a]])}else s+=this.processTextOrObjNode(i[n],n,e);return{attrStr:t,val:s}};nn.prototype.buildAttrPairStr=function(i,e){return e=this.options.attributeValueProcessor(i,""+e),e=this.replaceEntitiesValue(e),this.options.suppressBooleanAttributes&&e==="true"?" "+i:" "+i+'="'+e+'"'};function IA(i,e,t){const s=this.j2x(i,t+1);return i[this.options.textNodeName]!==void 0&&Object.keys(i).length===1?this.buildTextValNode(i[this.options.textNodeName],e,s.attrStr,t):this.buildObjectNode(s.val,e,s.attrStr,t)}nn.prototype.buildObjectNode=function(i,e,t,s){if(i==="")return e[0]==="?"?this.indentate(s)+"<"+e+t+"?"+this.tagEndChar:this.indentate(s)+"<"+e+t+this.closeTag(e)+this.tagEndChar;{let n="</"+e+this.tagEndChar,r="";return e[0]==="?"&&(r="?",n=""),(t||t==="")&&i.indexOf("<")===-1?this.indentate(s)+"<"+e+t+r+">"+i+n:this.options.commentPropName!==!1&&e===this.options.commentPropName&&r.length===0?this.indentate(s)+`<!--${i}-->`+this.newLine:this.indentate(s)+"<"+e+t+r+this.tagEndChar+i+this.indentate(s)+n}};nn.prototype.closeTag=function(i){let e="";return this.options.unpairedTags.indexOf(i)!==-1?this.options.suppressUnpairedNode||(e="/"):this.options.suppressEmptyNode?e="/":e=`></${i}`,e};nn.prototype.buildTextValNode=function(i,e,t,s){if(this.options.cdataPropName!==!1&&e===this.options.cdataPropName)return this.indentate(s)+`<![CDATA[${i}]]>`+this.newLine;if(this.options.commentPropName!==!1&&e===this.options.commentPropName)return this.indentate(s)+`<!--${i}-->`+this.newLine;if(e[0]==="?")return this.indentate(s)+"<"+e+t+"?"+this.tagEndChar;{let n=this.options.tagValueProcessor(e,i);return n=this.replaceEntitiesValue(n),n===""?this.indentate(s)+"<"+e+t+this.closeTag(e)+this.tagEndChar:this.indentate(s)+"<"+e+t+">"+n+"</"+e+this.tagEndChar}};nn.prototype.replaceEntitiesValue=function(i){if(i&&i.length>0&&this.options.processEntities)for(let e=0;e<this.options.entities.length;e++){const t=this.options.entities[e];i=i.replace(t.regex,t.val)}return i};function bA(i){return this.options.indentBy.repeat(i)}function vA(i){return i.startsWith(this.options.attributeNamePrefix)&&i!==this.options.textNodeName?i.substr(this.attrPrefixLen):!1}var yA=nn;const CA=wp,TA=cA,wA=yA;var mv={XMLParser:TA,XMLValidator:CA,XMLBuilder:wA};let of=class{constructor(e,t){T(this,"date",new Date),T(this,"author"),T(this,"guid",ms.create()),T(this,"viewpoint"),T(this,"modifiedAuthor"),T(this,"modifiedDate"),T(this,"topic"),T(this,"_components"),T(this,"_comment",""),this._components=e,this._comment=t;const s=this._components.get(xt);this.author=s.config.author}set comment(e){var t;const s=this._components.get(xt);this._comment=e,this.modifiedDate=new Date,this.modifiedAuthor=s.config.author,(t=this.topic)==null||t.comments.set(this.guid,this)}get comment(){return this._comment}serialize(){let e=null;this.viewpoint&&(e=`<Viewpoint Guid="${this.viewpoint.guid}"/>`);let t=null;this.modifiedDate&&(t=`<ModifiedDate>${this.modifiedDate.toISOString()}</ModifiedDate>`);let s=null;return this.modifiedAuthor&&(s=`<ModifiedAuthor>${this.modifiedAuthor}</ModifiedAuthor>`),`
      <Comment Guid="${this.guid}">
        <Date>${this.date.toISOString()}</Date>
        <Author>${this.author}</Author>
        <Comment>${this.comment}</Comment>
        ${e??""}
        ${s??""}
        ${t??""}
      </Comment>
    `}};const gv=class Fs{constructor(e){T(this,"guid",ms.create()),T(this,"title",Fs.default.title),T(this,"creationDate",new Date),T(this,"creationAuthor",""),T(this,"viewpoints",new Bs),T(this,"relatedTopics",new Bs),T(this,"comments",new Ci),T(this,"customData",{}),T(this,"description"),T(this,"serverAssignedId"),T(this,"dueDate"),T(this,"modifiedAuthor"),T(this,"modifiedDate"),T(this,"index"),T(this,"_type",Fs.default.type),T(this,"_status",Fs.default.status),T(this,"_priority",Fs.default.priority),T(this,"_stage",Fs.default.stage),T(this,"_assignedTo",Fs.default.assignedTo),T(this,"_labels",Fs.default.labels??new Set),T(this,"_components"),this._components=e;const t=e.get(xt);this.creationAuthor=t.config.author,this.relatedTopics.guard=s=>s!==this.guid}set type(e){const t=this._components.get(xt),{strict:s,types:n}=t.config;(!s||n.has(e))&&(this._type=e)}get type(){return this._type}set status(e){const t=this._components.get(xt),{strict:s,statuses:n}=t.config;(!s||n.has(e))&&(this._status=e)}get status(){return this._status}set priority(e){const t=this._components.get(xt);if(e){const{strict:s,priorities:n}=t.config;if(!(!s||n.has(e)))return;this._priority=e}else this._priority=e}get priority(){return this._priority}set stage(e){const t=this._components.get(xt);if(e){const{strict:s,stages:n}=t.config;if(!(!s||n.has(e)))return;this._stage=e}else this._stage=e}get stage(){return this._stage}set assignedTo(e){const t=this._components.get(xt);if(e){const{strict:s,users:n}=t.config;if(!(!s||n.has(e)))return;this._assignedTo=e}else this._assignedTo=e}get assignedTo(){return this._assignedTo}set labels(e){const t=this._components.get(xt),{strict:s,labels:n}=t.config;if(s){const r=new Set;for(const o of e)(!s||n.has(o))&&r.add(o);this._labels=r}else this._labels=e}get labels(){return this._labels}get _managerVersion(){return this._components.get(xt).config.version}set(e){const t=e,s=this;for(const n in e){if(n==="guid")continue;const r=t[n];n in this&&(s[n]=r)}return this._components.get(xt).list.set(this.guid,this),this}createComment(e,t){const s=new of(this._components,e);return s.viewpoint=t,s.topic=this,this.comments.set(s.guid,s),s}createLabelTags(e=this._managerVersion){let t="Labels";e==="2.1"&&(t="Labels"),e==="3"&&(t="Label");let s=[...this.labels].map(n=>`<${t}>${n}</${t}>`).join(`
`);for(const n in this.customData){const r=this.customData[n];typeof r=="string"&&(s+=`
<${t}>${r}</${t}>`)}return e==="2.1"?s:e==="3"?s.length!==0?`<Labels>
${s}
</Labels>`:"<Labels/>":s}createCommentTags(e=this._managerVersion){const t=[...this.comments.values()].map(s=>s.serialize()).join(`
`);return e==="2.1"?t:e==="3"?t.length!==0?`<Comments>
${t}
</Comments>`:"<Comments/>":t}createViewpointTags(e=this._managerVersion){let t="Viewpoints";e==="2.1"&&(t="Viewpoints"),e==="3"&&(t="ViewPoint");const s=this._components.get(os),n=[...this.viewpoints].map(r=>s.list.get(r)).filter(r=>r).map(r=>`<${t} Guid="${r.guid}">
          <Viewpoint>${r.guid}.bcfv</Viewpoint>
          <Snapshot>${r.guid}.jpeg</Snapshot>
        </${t}>
      `).join(`
`);return e==="2.1"?n:e==="3"?n.length!==0?`<Viewpoints>
${n}
</Viewpoints>`:"<Viewpoints />":n}createRelatedTopicTags(e=this._managerVersion){const t=[...this.relatedTopics].map(s=>`<RelatedTopic Guid="${s}"></RelatedTopic>
      `).join(`
`);return e==="2.1"?t:e==="3"?t.length!==0?`<RelatedTopics>
${t}
</RelatedTopics>`:"<RelatedTopics />":t}serialize(){const e=this._managerVersion;let t=null;this.serverAssignedId&&(t=`ServerAssignedId="${this.serverAssignedId}"`);let s=null;this.priority&&(s=`<Priority>${this.priority}</Priority>`);let n=null;this.index&&e==="2.1"&&(n=`<Index>${this.index}</Index>`);let r=null;this.modifiedDate&&(r=`<ModifiedDate>${this.modifiedDate.toISOString()}</ModifiedDate>`);let o=null;this.modifiedAuthor&&(o=`<ModifiedAuthor>${this.modifiedAuthor}</ModifiedAuthor>`);let a=null;this.dueDate&&(a=`<DueDate>${this.dueDate.toISOString()}</DueDate>`);let l=null;this.assignedTo&&(l=`<AssignedTo>${this.assignedTo}</AssignedTo>`);let h=null;this.description&&(h=`<Description>${this.description}</Description>`);let u=null;this.stage&&(u=`<Stage>${this.stage}</Stage>`);const c=this.createCommentTags(e),d=this.createViewpointTags(e),f=this.createLabelTags(e),p=this.createRelatedTopicTags(e);return`
      <?xml version="1.0" encoding="UTF-8"?>
      <Markup>
        <Topic Guid="${this.guid}" TopicType="${this.type}" TopicStatus="${this.status}" ${t??""}>
          <Title>${this.title}</Title>
          <CreationDate>${this.creationDate.toISOString()}</CreationDate>
          <CreationAuthor>${this.creationAuthor}</CreationAuthor>
          ${s??""}
          ${n??""}
          ${r??""}
          ${o??""}
          ${a??""}
          ${l??""}
          ${h??""}
          ${u??""}
          ${f}
          ${p}
          ${e==="3"?c:""}
          ${e==="3"?d:""}
        </Topic>
        ${e==="2.1"?c:""}
        ${e==="2.1"?d:""}
      </Markup>
    `}};T(gv,"default",{title:"BCF Topic",type:"Issue",status:"Active"});let Hg=gv;const SA=(i,e)=>{if(e.trim()==="")return;const t=xt.xmlParser.parse(e).Extensions;if(!t)return;const{Priorities:s,TopicStatuses:n,TopicTypes:r,Users:o}=t;if(s&&s.Priority){const a=Array.isArray(s.Priority)?s.Priority:[s.Priority];for(const l of a)i.config.priorities.add(l)}if(n&&n.TopicStatus){const a=Array.isArray(n.TopicStatus)?n.TopicStatus:[n.TopicStatus];for(const l of a)i.config.statuses.add(l)}if(r&&r.TopicType){const a=Array.isArray(r.TopicType)?r.TopicType:[r.TopicType];for(const l of a)i.config.types.add(l)}if(o&&o.User){const a=Array.isArray(o.User)?o.User:[o.User];for(const l of a)i.config.users.add(l)}};let xA=class extends _o{constructor(){super(...arguments),T(this,"_config",{version:{type:"Select",options:new Set(["2.1","3"]),multiple:!1,value:""},author:{type:"Text",value:""},types:{type:"TextSet",value:new Set},statuses:{type:"TextSet",value:new Set},priorities:{type:"TextSet",value:new Set},labels:{type:"TextSet",value:new Set},stages:{type:"TextSet",value:new Set},users:{type:"TextSet",value:new Set},includeSelectionTag:{type:"Boolean",value:!1},updateExtensionsOnImport:{type:"Boolean",value:!1},strict:{type:"Boolean",value:!1},includeAllExtensionsOnExport:{type:"Boolean",value:!1},fallbackVersionOnImport:{type:"Select",multiple:!1,options:new Set(["2.1","3"]),value:""},ignoreIncompleteTopicsOnImport:{type:"Boolean",value:!1}})}get version(){return this._config.version.value}set version(e){this._config.version.value=e}get author(){return this._config.author.value}set author(e){this._config.author.value=e}get types(){return this._config.types.value}set types(e){this._config.types.value=e}get statuses(){return this._config.statuses.value}set statuses(e){this._config.statuses.value=e}get priorities(){return this._config.priorities.value}set priorities(e){this._config.priorities.value=e}get labels(){return this._config.labels.value}set labels(e){this._config.labels.value=e}get stages(){return this._config.stages.value}set stages(e){this._config.stages.value=e}get users(){return this._config.users.value}set users(e){this._config.users.value=e}get includeSelectionTag(){return this._config.includeSelectionTag.value}set includeSelectionTag(e){this._config.includeSelectionTag.value=e}get updateExtensionsOnImport(){return this._config.updateExtensionsOnImport.value}set updateExtensionsOnImport(e){this._config.updateExtensionsOnImport.value=e}get strict(){return this._config.strict.value}set strict(e){this._config.strict.value=e}get includeAllExtensionsOnExport(){return this._config.includeAllExtensionsOnExport.value}set includeAllExtensionsOnExport(e){this._config.includeAllExtensionsOnExport.value=e}get fallbackVersionOnImport(){return this._config.fallbackVersionOnImport.value}set fallbackVersionOnImport(e){this._config.fallbackVersionOnImport.value=e}get ignoreIncompleteTopicsOnImport(){return this._config.ignoreIncompleteTopicsOnImport.value}set ignoreIncompleteTopicsOnImport(e){this._config.ignoreIncompleteTopicsOnImport.value=e}};const Rp=class Ea extends be{constructor(){super(...arguments),T(this,"enabled",!1),T(this,"_defaultConfig",{author:"jhon.doe@example.com",version:"2.1",types:new Set(["Clash","Failure","Fault","Inquiry","Issue","Remark","Request"]),statuses:new Set(["Active","In Progress","Done","In Review","Closed"]),priorities:new Set(["On hold","Minor","Normal","Major","Critical"]),labels:new Set,stages:new Set,users:new Set,includeSelectionTag:!1,updateExtensionsOnImport:!0,strict:!1,includeAllExtensionsOnExport:!0,fallbackVersionOnImport:"2.1",ignoreIncompleteTopicsOnImport:!1}),T(this,"config",new xA(this,this.components,"BCF Topics",Ea.uuid)),T(this,"list",new Ci),T(this,"onSetup",new Y),T(this,"isSetup",!1),T(this,"onBCFImported",new Y),T(this,"onDisposed",new Y)}setup(e){if(this.isSetup)return;const t={...this._defaultConfig,...e};this.config.version=t.version,this.config.author=t.author,this.config.types=t.types,this.config.statuses=t.statuses,this.config.priorities=t.priorities,this.config.labels=t.labels,this.config.stages=t.stages,this.config.users=t.users,this.config.includeSelectionTag=t.includeSelectionTag,this.config.updateExtensionsOnImport=t.updateExtensionsOnImport,this.config.strict=t.strict,this.config.includeAllExtensionsOnExport=t.includeAllExtensionsOnExport,this.config.fallbackVersionOnImport=t.fallbackVersionOnImport||"",this.config.ignoreIncompleteTopicsOnImport=t.ignoreIncompleteTopicsOnImport,this.isSetup=!0,this.enabled=!0,this.onSetup.trigger()}create(e){const t=new Hg(this.components);return e?(t.guid=e.guid??t.guid,t.set(e)):this.list.set(t.guid,t),t}dispose(){this.list.dispose(),this.onDisposed.trigger(),this.onDisposed.reset()}get usedTypes(){const e=[...this.list].map(([t,s])=>s.type);return new Set(e)}get usedStatuses(){const e=[...this.list].map(([t,s])=>s.status);return new Set(e)}get usedPriorities(){const e=[...this.list].map(([t,s])=>s.priority).filter(t=>t);return new Set(e)}get usedStages(){const e=[...this.list].map(([t,s])=>s.stage).filter(t=>t);return new Set(e)}get usedUsers(){const e=[];for(const[t,s]of this.list){e.push(s.creationAuthor),s.assignedTo&&e.push(s.assignedTo),s.modifiedAuthor&&e.push(s.modifiedAuthor);for(const[n,r]of s.comments)e.push(r.author),r.modifiedAuthor&&e.push(r.modifiedAuthor)}return new Set(e)}get usedLabels(){const e=[];for(const[t,s]of this.list)e.push(...s.labels);return new Set(e)}updateExtensions(){for(const[e,t]of this.list){for(const s of t.labels)this.config.labels.add(s);this.config.types.add(t.type),t.priority&&this.config.priorities.add(t.priority),t.stage&&this.config.stages.add(t.stage),this.config.statuses.add(t.status),this.config.users.add(t.creationAuthor),t.assignedTo&&this.config.users.add(t.assignedTo),t.modifiedAuthor&&this.config.users.add(t.modifiedAuthor);for(const[s,n]of t.comments)this.config.users.add(n.author),n.modifiedAuthor&&this.config.users.add(n.modifiedAuthor)}}updateViewpointReferences(){const e=this.components.get(os);for(const[t,s]of this.list)for(const n of s.viewpoints)e.list.has(n)||s.viewpoints.delete(n)}async export(e=this.list.values()){const t=new Ug;t.file("bcf.version",`<?xml version="1.0" encoding="UTF-8"?>
    <Version VersionId="${this.config.version}" xsi:noNamespaceSchemaLocation="https://raw.githubusercontent.com/buildingSMART/BCF-XML/release_3_0/Schemas/version.xsd"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
    </Version>`),t.file("bcf.extensions",this.serializeExtensions());const s=await(await fetch("https://thatopen.github.io/engine_components/resources/favicon.ico")).arrayBuffer(),n=this.components.get(os);for(const r of e){const o=t.folder(r.guid);o.file("markup.bcf",r.serialize());for(const a of r.viewpoints){const l=n.list.get(a);l&&(o.file(`${a}.jpeg`,s,{binary:!0}),o.file(`${a}.bcfv`,await l.serialize()))}}return await t.generateAsync({type:"blob"})}serializeExtensions(){const e=[...this.config.types].map(a=>`<TopicType>${a}</TopicType>`).join(`
`),t=[...this.config.statuses].map(a=>`<TopicStatus>${a}</TopicStatus>`).join(`
`),s=[...this.config.priorities].map(a=>`<Priority>${a}</Priority>`).join(`
`),n=[...this.config.labels].map(a=>`<TopicLabel>${a}</TopicLabel>`).join(`
`),r=[...this.config.stages].map(a=>`<Stage>${a}</Stage>`).join(`
`),o=[...this.config.users].map(a=>`<User>${a}</User>`).join(`
`);return`
      <?xml version="1.0" encoding="UTF-8"?>
      <Extensions xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="your-schema-location.xsd">
        ${e.length!==0?`<TopicTypes>
${e}
</TopicTypes>`:""}
        ${t.length!==0?`<TopicStatuses>
${t}
</TopicStatuses>`:""}
        ${s.length!==0?`<Priorities>
${s}
</Priorities>`:""}
        ${n.length!==0?`<TopicLabels>
${n}
</TopicLabels>`:""}
        ${r.length!==0?`<Stages>
${r}
</Stages>`:""}
        ${o.length!==0?`<Users>
${o}
</Users>`:""}
      </Extensions>
    `}processMarkupComment(e){const{Guid:t,Date:s,Author:n,Comment:r,Viewpoint:o}=e;if(!(t&&s&&n&&of))return null;const a=this.components.get(os),l=new of(this.components,r??"");return l.guid=t,l.date=new Date(s),l.author=n,l.viewpoint=o!=null&&o.Guid?a.list.get(o.Guid):void 0,l.modifiedAuthor=e.ModifiedAuthor,l.modifiedDate=e.ModifiedDate?new Date(e.ModifiedDate):void 0,l}getMarkupComments(e,t){var s;let n;if(t==="2.1"&&(n=e.Comment),t==="3"&&(n=(s=e.Topic.Comments)==null?void 0:s.Comment),!n)return[];n=Array.isArray(n)?n:[n];const r=n.map(o=>this.processMarkupComment(o)).filter(o=>o);return Array.isArray(r)?r:[r]}getMarkupLabels(e,t){var s;let n;return t==="2.1"&&(n=e.Topic.Labels),t==="3"&&(n=(s=e.Topic.Labels)==null?void 0:s.Label),n?Array.isArray(n)?n:[n]:[]}getMarkupViewpoints(e,t){var s;let n;return t==="2.1"&&(n=e.Viewpoints),t==="3"&&(n=(s=e.Topic.Viewpoints)==null?void 0:s.ViewPoint),n?(n=Array.isArray(n)?n:[n],n):[]}getMarkupRelatedTopics(e,t){var s;let n;return t==="2.1"&&(n=e.Topic.RelatedTopic),t==="3"&&(n=(s=e.Topic.RelatedTopics)==null?void 0:s.RelatedTopic),n?(Array.isArray(n)?n:[n]).map(r=>r.Guid):[]}async load(e,t){var s;const{fallbackVersionOnImport:n,ignoreIncompleteTopicsOnImport:r,updateExtensionsOnImport:o}=this.config,a=new Ug;await a.loadAsync(e);const l=Object.values(a.files);let h=n;const u=l.find(I=>I.name.endsWith(".version"));if(u){const I=await u.async("string"),v=Ea.xmlParser.parse(I).Version.VersionId;h=String(v)}if(!(h&&(h==="2.1"||h==="3")))throw new Error(`BCFTopics: ${h} is not supported.`);const c=l.find(I=>I.name.endsWith(".extensions"));if(o&&c){const I=await c.async("string");SA(this,I)}const d=[],f=this.components.get(os),p=l.filter(I=>I.name.endsWith(".bcfv"));for(const I of p){const v=await I.async("string"),b=Ea.xmlParser.parse(v).VisualizationInfo;if(!b){console.warn("Missing VisualizationInfo in Viewpoint");continue}const C={},{Guid:S,ClippingPlanes:_,Components:M,OrthogonalCamera:A,PerspectiveCamera:F}=b;if(S&&(C.guid=S),M){const{Selection:x,Visibility:N}=M;if(x&&x.Component){const U=Array.isArray(x.Component)?x.Component:[x.Component];C.selectionComponents=U.map(B=>B.IfcGuid).filter(B=>B)}if(N&&"DefaultVisibility"in N&&(C.defaultVisibility=N.DefaultVisibility),N&&N.Exceptions&&"Component"in N.Exceptions){const{Component:U}=N.Exceptions,B=Array.isArray(U)?U:[U];C.exceptionComponents=B.map(k=>k.IfcGuid).filter(k=>k)}let y;h==="2.1"&&(y=M.ViewSetupHints),h==="3"&&(y=(s=M.Visibility)==null?void 0:s.ViewSetupHints),y&&("OpeningsVisible"in y&&(C.openingsVisible=y.OpeningsVisible),"SpacesVisible"in y&&(C.spacesVisible=y.SpacesVisible),"SpaceBoundariesVisible"in y&&(C.spaceBoundariesVisible=y.SpaceBoundariesVisible))}if(A||F){const x=b.PerspectiveCamera??b.OrthogonalCamera,{CameraViewPoint:N,CameraDirection:y}=x,U=new P(Number(N.X),Number(N.Z),Number(-N.Y)),B=new P(Number(y.X),Number(y.Z),Number(-y.Y)),k={position:{x:U.x,y:U.y,z:U.z},direction:{x:B.x,y:B.y,z:B.z},aspectRatio:"AspectRatio"in x?x.AspectRatio:1};"ViewToWorldScale"in x&&(C.camera={...k,viewToWorldScale:x.ViewToWorldScale}),"FieldOfView"in x&&(C.camera={...k,fov:x.FieldOfView})}const D=new Ov(this.components,t,{data:C,setCamera:!1});if(M){const{Coloring:x}=M;if(x&&x.Color){const N=Array.isArray(x.Color)?x.Color:[x.Color];for(const y of N){const{Color:U,Component:B}=y,k=(Array.isArray(B)?B:[B]).map(W=>W.IfcGuid);D.componentColors.set(U,k)}}}if(d.push(D),_){const x=this.components.get(io),N=Array.isArray(_.ClippingPlane)?_.ClippingPlane:[_.ClippingPlane];for(const y of N){const{Location:U,Direction:B}=y;if(!(U&&B))continue;const k=new P(U.X,U.Z,-U.Y),W=new P(B.X,-B.Z,B.Y),z=x.createFromNormalAndCoplanarPoint(t,W,k);z.visible=!1,z.enabled=!1,D.clippingPlanes.add(z)}}}const m={},g=[],E=l.filter(I=>I.name.endsWith(".bcf"));for(const I of E){const v=await I.async("string"),b=Ea.xmlParser.parse(v).Markup,C=b.Topic,{Guid:S,TopicType:_,TopicStatus:M,Title:A,CreationDate:F,CreationAuthor:D}=C;if(r&&!(S&&_&&M&&A&&F&&D))continue;const x=new Hg(this.components);x.guid=S??x.guid;const N=this.getMarkupRelatedTopics(b,h);m[x.guid]=new Set(N),x.type=_??x.type,x.status=M??x.status,x.title=A??x.title,x.creationDate=F?new Date(F):x.creationDate,x.creationAuthor=D??x.creationAuthor,x.serverAssignedId=C.ServerAssignedId,x.priority=C.Priority,x.index=C.Index,x.modifiedDate=C.ModifiedDate?new Date(C.ModifiedDate):void 0,x.modifiedAuthor=C.ModifiedAuthor,x.dueDate=C.DueDate?new Date(C.DueDate):void 0,x.assignedTo=C.AssignedTo,x.description=C.Description,x.stage=C.Stage;const y=this.getMarkupLabels(b,h);for(const k of y)x.labels.add(k);const U=this.getMarkupComments(b,h);for(const k of U)x.comments.set(k.guid,k);const B=this.getMarkupViewpoints(b,h);for(const k of B){if(!(k&&k.Guid))continue;const W=f.list.get(k.Guid);W&&x.viewpoints.add(W.guid)}this.list.set(x.guid,x),g.push(x)}for(const I in m){const v=this.list.get(I);if(!v)continue;const b=m[I];for(const C of b)v.relatedTopics.add(C)}return this.onBCFImported.trigger(g),{viewpoints:d,topics:g}}};T(Rp,"uuid","de977976-e4f6-4e4f-a01a-204727839802");T(Rp,"xmlParser",new mv.XMLParser({allowBooleanAttributes:!0,attributeNamePrefix:"",ignoreAttributes:!1,ignoreDeclaration:!0,ignorePiTags:!0,numberParseOptions:{leadingZeros:!0,hex:!0},parseAttributeValue:!0,preserveOrder:!1,processEntities:!1,removeNSPrefix:!0,trimValues:!0}));let xt=Rp;const Ev=class ts extends be{constructor(e){super(e),T(this,"enabled",!0),T(this,"onDisposed",new Y),T(this,"_absoluteMin"),T(this,"_absoluteMax"),T(this,"_meshes",[]),this.components.add(ts.uuid,this),this._absoluteMin=ts.newBound(!0),this._absoluteMax=ts.newBound(!1)}static getDimensions(e){const{min:t,max:s}=e,n=Math.abs(s.x-t.x),r=Math.abs(s.y-t.y),o=Math.abs(s.z-t.z),a=new P;return a.subVectors(s,t).divideScalar(2).add(t),{width:n,height:r,depth:o,center:a}}static newBound(e){const t=e?1:-1;return new P(t*Number.MAX_VALUE,t*Number.MAX_VALUE,t*Number.MAX_VALUE)}static getBounds(e,t,s){const n=s||this.newBound(!1),r=t||this.newBound(!0);for(const o of e)o.x<r.x&&(r.x=o.x),o.y<r.y&&(r.y=o.y),o.z<r.z&&(r.z=o.z),o.x>n.x&&(n.x=o.x),o.y>n.y&&(n.y=o.y),o.z>n.z&&(n.z=o.z);return new Ge(t,s)}dispose(){const e=this.components.get(Gi);for(const t of this._meshes)e.destroy(t);this._meshes=[],this.onDisposed.trigger(ts.uuid),this.onDisposed.reset()}get(){const e=this._absoluteMin.clone(),t=this._absoluteMax.clone();return new Ge(e,t)}getSphere(){const e=this._absoluteMin.clone(),t=this._absoluteMax.clone(),s=Math.abs((t.x-e.x)/2),n=Math.abs((t.y-e.y)/2),r=Math.abs((t.z-e.z)/2),o=new P(e.x+s,e.y+n,e.z+r),a=o.distanceTo(e);return new qn(o,a)}getMesh(){const e=new Ge(this._absoluteMin,this._absoluteMax),t=ts.getDimensions(e),{width:s,height:n,depth:r,center:o}=t,a=new ct(s,n,r),l=new ne(a);return this._meshes.push(l),l.position.copy(o),l}reset(){this._absoluteMin=ts.newBound(!0),this._absoluteMax=ts.newBound(!1)}add(e){for(const t of e.items)this.addMesh(t.mesh)}addMesh(e,t){if(!e.geometry.index)return;const s=ts.getFragmentBounds(e);e.updateMatrixWorld();const n=e.matrixWorld,r=new ce,o=e instanceof oi,a=new Set;if(e instanceof _E){t||(t=e.fragment.ids);for(const l of t){const h=e.fragment.getInstancesIDs(l);if(h)for(const u of h)a.add(u)}}else a.add(0);for(const l of a){const h=s.min.clone(),u=s.max.clone();o&&(e.getMatrixAt(l,r),h.applyMatrix4(r),u.applyMatrix4(r)),h.applyMatrix4(n),u.applyMatrix4(n),h.x<this._absoluteMin.x&&(this._absoluteMin.x=h.x),h.y<this._absoluteMin.y&&(this._absoluteMin.y=h.y),h.z<this._absoluteMin.z&&(this._absoluteMin.z=h.z),h.x>this._absoluteMax.x&&(this._absoluteMax.x=h.x),h.y>this._absoluteMax.y&&(this._absoluteMax.y=h.y),h.z>this._absoluteMax.z&&(this._absoluteMax.z=h.z),u.x>this._absoluteMax.x&&(this._absoluteMax.x=u.x),u.y>this._absoluteMax.y&&(this._absoluteMax.y=u.y),u.z>this._absoluteMax.z&&(this._absoluteMax.z=u.z),u.x<this._absoluteMin.x&&(this._absoluteMin.x=u.x),u.y<this._absoluteMin.y&&(this._absoluteMin.y=u.y),u.z<this._absoluteMin.z&&(this._absoluteMin.z=u.z)}}addFragmentIdMap(e){const t=this.components.get(ve);for(const s in e){const n=t.list.get(s);if(!n)continue;const r=e[s];this.addMesh(n.mesh,r)}}static getFragmentBounds(e){const t=e.geometry.attributes.position,s=Number.MAX_VALUE,n=-s,r=new P(s,s,s),o=new P(n,n,n);if(!e.geometry.index)throw new Error("Geometry must be indexed!");const a=Array.from(e.geometry.index.array);for(let l=0;l<a.length;l++){if(l%3===0&&a[l]===0&&a[l+1]===0&&a[l+2]===0){l+=2;continue}const h=a[l],u=t.getX(h),c=t.getY(h),d=t.getZ(h);u<r.x&&(r.x=u),c<r.y&&(r.y=c),d<r.z&&(r.z=d),u>o.x&&(o.x=u),c>o.y&&(o.y=c),d>o.z&&(o.z=d)}return new Ge(r,o)}};T(Ev,"uuid","d1444724-dba6-4cdd-a0c7-68ee1450d166");let vc=Ev;const RA=class Iv extends be{constructor(e){super(e),T(this,"enabled",!0),e.add(Iv.uuid,this)}async getIsolatedElements(e,t,s){const n=new Set;function r(l){if(n.has(l))return;const h=e.GetLine(t,l);if(h){n.add(l);for(const u in h){const c=h[u];c&&c.constructor.name==="Handle"&&c.value>0?r(c.value):Array.isArray(c)&&c.forEach(d=>{d&&d.constructor.name==="Handle"&&d.value>0&&r(d.value)})}}}for(const l of s)r(l);const o=[];for(const l of n)o.push(l);o.sort((l,h)=>l-h);const a=[];return o.forEach(l=>{const h=e.GetLine(t,l);a.push(h)}),a}async export(e,t,s){return s.forEach(n=>{e.WriteLine(t,n)}),e.SaveModel(t)}async splitIfc(e,t,s){const n=new Uint8Array(t),r=e.OpenModel(n),o=await this.getIsolatedElements(e,r,s),a=e.CreateModel({schema:k1.IFC2X3});return await this.export(e,a,o)}};T(RA,"uuid","6eb0ba2f-71c0-464e-bcec-2d7c335186b2");const bv=class vv{constructor(e){T(this,"onProgress",new Y),T(this,"inclusive",!1),T(this,"rules",[]),T(this,"ids",{}),T(this,"needsUpdate",new Map),T(this,"components"),this.components=e}static import(e,t){const s=vv.importers.get(t.type);return s?s(e,t):(console.warn("Invalid query data:.",t),null)}static importRules(e){const t=[];for(const s of e){const n={};for(const r in s){const o=s[r];o.regexp?n[r]=new RegExp(o.value):n[r]=o}t.push(n)}return t}static importIds(e){const t={};for(const s in e.ids)t[s]=new Set(e.ids[s]);return t}clear(e){if(e===void 0){this.ids={},this.needsUpdate.clear();return}delete this.ids[e],this.needsUpdate.delete(e)}addID(e,t){this.ids[e]||(this.ids[e]=new Set),this.ids[e].add(t)}getData(){const e={};for(const s in this.ids)e[s]=Array.from(this.ids[s]);const t=this.exportRules();return{name:this.name,inclusive:this.inclusive,type:"IfcFinderQuery",ids:e,rules:t}}exportRules(){const e=[];for(const t of this.rules){const s={};for(const n in t){const r=t[n];r instanceof RegExp?s[n]={regexp:!0,value:r.source}:s[n]=r}e.push(s)}return e}findInFile(e,t){return new Promise(s=>{const n=new FileReader,r=new TextDecoder("utf-8"),o=1e4*1024,a=1e3;let l=0;const h=/;/,u=()=>{if(l>=t.size){s();return}const c=Math.min(l+o+a,t.size),d=t.slice(l,c);n.readAsArrayBuffer(d)};n.onload=()=>{if(!(n.result instanceof ArrayBuffer))return;const c=new Uint8Array(n.result),d=r.decode(c).split(h);d.shift(),this.findInLines(e,d),this.onProgress.trigger(l/t.size),l+=o,u()},u()})}getIdFromLine(e){const t=e.slice(e.indexOf("#")+1,e.indexOf("="));return parseInt(t,10)}testRules(e){let t=null,s=null,n=null,r=!1;for(const o of this.rules){if(o.type==="category"){if(t===null&&(t=this.getCategoryFromLine(e),t===null)){if(this.inclusive)continue;break}if(!o.value.test(t)){if(this.inclusive)continue;r=!1;break}r=!0;continue}if(s===null&&(s=this.getAttributesFromLine(e),s===null)){if(this.inclusive)continue;r=!1;break}if(t===null&&(t=this.getCategoryFromLine(e),t===null)){if(this.inclusive)continue;r=!1;break}if(n===null&&(n=Object.keys(new B1[t]),n=n.slice(2),n===null)){if(this.inclusive)continue;r=!1;break}if(o.type==="property"){const{name:a,value:l}=o;if(!l.test(e)){if(this.inclusive)continue;r=!1;break}let h=!1;for(let u=0;u<s.length;u++){const c=s[u],d=n[u];if(l.test(c)&&a.test(d)){h=!0;break}}if(h)r=!0;else if(!this.inclusive){r=!1;break}}if(o.type==="operator"){const{name:a,value:l,operator:h}=o;let u=!1;for(let c=0;c<s.length;c++){const d=n[c],f=s[c].replace(/IFCLENGTHMEASURE\(|IFCVOLUMEMEASURE\(|\)/g,"");if(a.test(d)){if(h==="="&&parseFloat(f)===l){u=!0;break}else if(h==="<"&&parseFloat(f)<l){u=!0;break}else if(h===">"&&parseFloat(f)>l){u=!0;break}else if(h===">="&&parseFloat(f)>=l){u=!0;break}else if(h==="<="&&parseFloat(f)<=l){u=!0;break}}}if(u)r=!0;else if(!this.inclusive){r=!1;break}}}return r}getCategoryFromLine(e){const t=e.indexOf("=")+1,s=e.indexOf("("),n=e.slice(t,s).trim();return n_[n]||null}getAttributesFromLine(e){const t=/\((.*)\)/,s=e.match(t);if(!(s&&s[1]))return null;const n=/,(?![^()]*\))/g;return s[1].split(n).map(r=>r.trim())}};T(bv,"importers",new Map);let hs=bv,Gg=class{constructor(e){T(this,"list",new Map),T(this,"id",Un.generateUUID()),T(this,"mode","intersect"),T(this,"_components"),this._components=e}get queries(){return new Set(this.list.values())}get items(){const e=[];for(const t of this.queries)e.push(t.items);return this.mode==="combine"?Yr.combine(e):Yr.intersect(e)}add(e){if(this.list.has(e.name))throw new Error(`This group already has a query with the name ${e.name}.`);this.list.set(e.name,e)}clear(e){for(const t of this.queries)t.clear(e)}import(e){this.mode=e.mode,this.id=e.id;for(const t in e.queries){const s=hs.import(this._components,e.queries[t]);s&&this.list.set(t,s)}}export(){const e={};for(const[t,s]of this.list)e[t]=s.export();return{mode:this.mode,id:this.id,queries:e}}async update(e,t){for(const s of this.queries){const n=s.needsUpdate.get(e);(n===void 0||n)&&await s.update(e,t)}}};const yv=class Cv extends hs{constructor(e,t){super(e),T(this,"name"),this.name=t.name,this.rules=t.rules,this.inclusive=t.inclusive}get items(){const e=this.components.get(ve),t=[];for(const s in this.ids){const n=this.ids[s],r=e.groups.get(s);if(!r){console.warn(`Model ${s} not found!`);continue}const o=r.getFragmentMap(n);t.push(o)}return Yr.combine(t)}export(){const e=this.getData();return e.type=Cv.type,e}async update(e,t){this.ids[e]=new Set,await this.findInFile(e,t),this.needsUpdate.set(e,!1)}findInLines(e,t){for(const s of t)if(this.testRules(s)){const n=this.getIdFromLine(s);this.addID(e,n)}}};T(yv,"type","IfcBasicQuery");let Yg=yv;hs.importers.set(Yg.type,(i,e)=>{const t=new Yg(i,{name:e.name,rules:hs.importRules(e.rules),inclusive:e.inclusive});return t.ids=hs.importIds(e),t});const Tv=class wv extends hs{constructor(e,t){super(e),T(this,"name"),T(this,"psets",[]),this.name=t.name,this.rules=t.rules,this.inclusive=t.inclusive}get items(){const e=this.components.get(Ht),t=this.components.get(ve),s=[];for(const n in this.ids){const r=t.groups.get(n);if(!r){console.log(`Model not found: ${n}.`);continue}const o=this.ids[n];for(const a of o){const l=e.getEntityRelations(n,a,"DefinesOcurrence");if(l){const h=r.getFragmentMap(l);s.push(h)}}}return Yr.combine(s)}export(){const e=this.getData();return e.type=wv.type,e}async update(e,t){await this.findInFile(e,t);const s=new Set;for(const n of this.psets){const r=this.getAttributesFromLine(n);if(r===null)continue;const o=r[4].replace("(","[").replace(")","]").replace(/#/g,""),a=JSON.parse(o);for(const l of a){const h=this.ids[e];if(h&&h.has(l)){const u=this.getIdFromLine(n);s.add(u);break}}}this.ids[e]=s,this.psets=[],this.needsUpdate.set(e,!1)}findInLines(e,t){for(const s of t){const n=this.getCategoryFromLine(s);if(n==="IfcPropertySet"){this.psets.push(s);continue}if(n==="IfcPropertySingleValue"&&this.testRules(s)){const r=this.getIdFromLine(s);this.addID(e,r)}}}};T(Tv,"type","IfcPropertyQuery");let jg=Tv;hs.importers.set(jg.type,(i,e)=>{const t=new jg(i,{name:e.name,inclusive:e.inclusive,rules:hs.importRules(e.rules)});return t.ids=hs.importIds(e),t});const _A=class Sv extends be{constructor(e){super(e),T(this,"enabled",!0),T(this,"list",new Map),e.add(Sv.uuid,this)}get queries(){const e=new Set;for(const[,t]of this.list)for(const s of t.queries)e.add(s);return e}import(e){for(const t in e){const s=new Gg(this.components);s.import(e[t]),this.list.set(t,s)}}export(){const e={};for(const[t,s]of this.list)e[t]=s.export();return e}create(){const e=new Gg(this.components);return this.list.set(e.id,e),e}delete(e){this.list.delete(e)}clear(){this.list.clear()}};T(_A,"uuid","0da7ad77-f734-42ca-942f-a074adfd1e3a");const xv=class Rv extends be{constructor(e){super(e),T(this,"enabled",!0),T(this,"list",{}),T(this,"onDisposed",new Y),T(this,"onFragmentsDisposed",t=>{const{groupID:s,fragmentIDs:n}=t;for(const r in this.list){const o=this.list[r],a=Object.keys(o);if(a.includes(s))delete o[s],Object.values(o).length===0&&delete this.list[r];else for(const l of a){const h=o[l];for(const u of n)delete h.map[u];Object.values(h).length===0&&delete o[l]}}}),e.add(Rv.uuid,this),e.get(ve).onFragmentsDisposed.add(this.onFragmentsDisposed)}dispose(){this.list={},this.components.get(ve).onFragmentsDisposed.remove(this.onFragmentsDisposed),this.onDisposed.trigger(),this.onDisposed.reset()}remove(e){for(const t in this.list){const s=this.list[t];for(const n in s){const r=s[n];delete r.map[e]}}}find(e){const t=this.components.get(ve);if(!e){const o={};for(const[a,l]of t.list)o[a]=new Set(l.ids);return o}const s=Object.keys(e).length,n={};for(const o in e){const a=e[o];if(!this.list[o]){console.warn(`Classification ${o} does not exist.`);continue}for(const l of a){const h=this.list[o][l];if(h)for(const u in h.map){n[u]||(n[u]=new Map);for(const c of h.map[u]){const d=n[u].get(c);d===void 0?n[u].set(c,1):n[u].set(c,d+1)}}}}const r={};for(const o in n){const a=n[o];for(const[l,h]of a){if(h===void 0)throw new Error("Malformed fragments map!");h===s&&(r[o]||(r[o]=new Set),r[o].add(l))}}return r}byModel(e,t){this.list.models||(this.list.models={});const s=this.list.models;s[e]||(s[e]={map:{},id:null,name:e});const n=s[e];for(const[r,o]of t.data){const a=o[0];for(const l of a){const h=t.keyFragments.get(l);h&&(n.map[h]||(n.map[h]=new Set),n.map[h].add(r))}}}async byPredefinedType(e){var t;this.list.predefinedTypes||(this.list.predefinedTypes={});const s=this.list.predefinedTypes,n=e.getAllPropertiesIDs();for(const r of n){const o=await e.getProperties(r);if(!o)continue;const a=String((t=o.PredefinedType)==null?void 0:t.value).toUpperCase();s[a]||(s[a]={map:{},id:null,name:a});const l=s[a];for(const[h,u]of e.data){const c=u[0];for(const d of c){const f=e.keyFragments.get(d);if(!f)throw new Error("Fragment ID not found!");l.map[f]||(l.map[f]=new Set),l.map[f].add(o.expressID)}}}}byEntity(e){this.list.entities||(this.list.entities={});for(const[t,s]of e.data){const n=s[1][1],r=bc[n];this.saveItem(e,"entities",r,t)}}async byIfcRel(e,t,s){xa.isRel(t)&&await xa.getRelationMap(e,t,async(n,r)=>{const{name:o}=await xa.getEntityName(e,n);for(const a of r)this.saveItem(e,s,o??"NO REL NAME",a)})}async bySpatialStructure(e,t={}){var s,n;const r=this.components.get(Ht),o=r.relationMaps[e.uuid];if(!o)throw new Error(`Classifier: model relations of ${e.name||e.uuid} have to exists to group by spatial structure.`);const a=t.systemName??"spatialStructures",l=t.useProperties===void 0||t.useProperties;for(const[h]of o){if(t.isolate){const f=e.data.get(h);if(!f)continue;const p=f[1][1];if(p===void 0||!t.isolate.has(p))continue}const u=r.getEntityRelations(e,h,"Decomposes");if(u)for(const f of u){let p=f.toString();if(l){const m=await e.getProperties(f);if(!m)continue;p=(s=m.Name)==null?void 0:s.value}this.saveItem(e,a,p,h,f)}const c=r.getEntityRelations(e,h,"ContainsElements");if(!c)continue;let d=h.toString();if(l){const f=await e.getProperties(h);if(!f)continue;d=(n=f.Name)==null?void 0:n.value}for(const f of c){this.saveItem(e,a,d,f,h);const p=r.getEntityRelations(e,Number(f),"IsDecomposedBy");if(p)for(const m of p)this.saveItem(e,a,d,m,h)}}}setColor(e,t,s=!1){const n=this.components.get(ve);for(const r in e){const o=n.list.get(r);if(!o)continue;const a=e[r];o.setColor(t,a,s)}}resetColor(e){const t=this.components.get(ve);for(const s in e){const n=t.list.get(s);if(!n)continue;const r=e[s];n.resetColor(r)}}export(){const e={};for(const t in this.list){e[t]={};const s=this.list[t];for(const n in s){const r=s[n];e[t][n]={map:Yr.export(r.map),name:r.name,id:r.id}}}return e}import(e){for(const t in e){this.list[t]||(this.list[t]={});const s=e[t];for(const n in s){const r=s[n];this.list[t][n]={map:Yr.import(r.map),name:r.name,id:r.id}}}}saveItem(e,t,s,n,r=null){this.list[t]||(this.list[t]={});const o=e.data.get(n);if(o)for(const a of o[0]){const l=e.keyFragments.get(a);if(l){const h=this.list[t];h[s]||(h[s]={map:{},id:r,name:s}),h[s].map[l]||(h[s].map[l]=new Set),h[s].map[l].add(n)}}}};T(xv,"uuid","e25a7f3c-46c4-4a14-9d3d-5115f24ebeb7");let af=xv;const AA=class _v extends be{constructor(e){super(e),T(this,"onDisposed",new Y),T(this,"enabled",!0),T(this,"height",10),T(this,"groupName","spatialStructures"),T(this,"list",new Set),e.add(_v.uuid,this)}dispose(){this.list.clear(),this.onDisposed.trigger(),this.onDisposed.reset()}set(e){if(!this.enabled)return;const t=this.components.get(af),s=this.components.get(ve),n=e?1:-1;let r=0;const o=t.list[this.groupName],a=new ce;for(const l in o){a.elements[13]=r*n*this.height;for(const h in o[l].map){const u=s.list.get(h),c=l+h,d=this.list.has(c);if(!u||e&&d||!e&&!d)continue;e?this.list.add(c):this.list.delete(c);const f=o[l].map[h];u.applyTransform(f,a),u.mesh.computeBoundingSphere(),u.mesh.computeBoundingBox()}r++}}};T(AA,"uuid","d260618b-ce88-4c7d-826c-6debb91de3e2");const Av=class Mv extends be{constructor(e){super(e),T(this,"enabled",!0),this.components.add(Mv.uuid,this)}set(e,t){const s=this.components.get(ve);if(!t){for(const[n,r]of s.list)r&&(r.setVisibility(e),this.updateCulledVisibility(r));return}for(const n in t){const r=t[n],o=s.list.get(n);o&&(o.setVisibility(e,r),this.updateCulledVisibility(o))}}isolate(e){this.set(!1),this.set(!0,e)}updateCulledVisibility(e){const t=this.components.get(kR);for(const[s,n]of t.list){const r=n.colorMeshes.get(e.id);r&&(r.count=e.mesh.count)}}};T(Av,"uuid","dd9ccf2d-8a21-4821-b7f6-2949add16a29");let MA=Av,FA=class extends Tp{constructor(){super(...arguments),T(this,"minGeometrySize",10),T(this,"minAssetsSize",1e3),T(this,"maxTriangles",null)}};const OA=class Fv extends be{constructor(e){super(e),T(this,"onGeometryStreamed",new rs),T(this,"onAssetStreamed",new rs),T(this,"onProgress",new rs),T(this,"onIfcLoaded",new rs),T(this,"onDisposed",new Y),T(this,"settings",new FA),T(this,"enabled",!0),T(this,"webIfc",new Gr),T(this,"_nextAvailableID",0),T(this,"_splittedGeometries",new Map),T(this,"_spatialTree",new Zb),T(this,"_metaData",new Kb),T(this,"_visitedGeometries",new Map),T(this,"_streamSerializer",new AE),T(this,"_geometries",new Map),T(this,"_geometryCount",0),T(this,"_civil",new Qb),T(this,"_groupSerializer",new RE),T(this,"_assets",[]),T(this,"_meshesWithHoles",new Set),this.components.add(Fv.uuid,this),this.settings.excludedCategories.add(xE)}dispose(){this.onIfcLoaded.reset(),this.onGeometryStreamed.reset(),this.onAssetStreamed.reset(),this.webIfc=null,this.onDisposed.trigger(),this.onDisposed.reset()}async streamFromBuffer(e){await this.readIfcFile(e),await this.streamAllGeometries(),this.cleanUp()}async streamFromCallBack(e){await this.streamIfcFile(e),await this.streamAllGeometries(),this.cleanUp()}async readIfcFile(e){const{path:t,absolute:s,logLevel:n}=this.settings.wasm;this.webIfc.SetWasmPath(t,s),await this.webIfc.Init(),n&&this.webIfc.SetLogLevel(n),this.webIfc.OpenModel(e,this.settings.webIfc),this._nextAvailableID=this.webIfc.GetMaxExpressID(0)}async streamIfcFile(e){const{path:t,absolute:s,logLevel:n}=this.settings.wasm;this.webIfc.SetWasmPath(t,s),await this.webIfc.Init(),n&&this.webIfc.SetLogLevel(n),this.webIfc.OpenModelFromCallback(e,this.settings.webIfc),this._nextAvailableID=this.webIfc.GetMaxExpressID(0)}async streamAllGeometries(){console.log("Converting geometries to tiles...");const{minGeometrySize:e,minAssetsSize:t}=this.settings;this._spatialTree.setUp(this.webIfc);const s=this.webIfc.GetIfcEntityList(0),n=[[]],r=new as;r.ifcMetadata={name:"",description:"",...this._metaData.getNameInfo(this.webIfc),...this._metaData.getDescriptionInfo(this.webIfc),schema:this.webIfc.GetModelSchema(0)||"IFC2X3",maxExpressID:this.webIfc.GetMaxExpressID(0)};let o=0,a=0;for(const p of s){if(!this.webIfc.IsIfcElement(p)&&p!==Zn||this.settings.excludedCategories.has(p))continue;const m=this.webIfc.GetLineIDsWithType(0,p),g=m.size();for(let E=0;E<g;E++){o>e&&(o=0,a++,n.push([]));const I=m.get(E);n[a].push(I);const v=this.webIfc.GetLine(0,I);if(v.GlobalId){const C=(v==null?void 0:v.GlobalId.value)||(v==null?void 0:v.GlobalId);r.globalToExpressIDs.set(C,I)}const b=this._spatialTree.itemsByFloor[I]||0;r.data.set(I,[[],[b,p]]),o++}}this._spatialTree.cleanUp();let l=.01,h=0;for(const p of n){h++,this.webIfc.StreamMeshes(0,p,g=>{this.getMesh(this.webIfc,g,r)}),this._geometryCount>this.settings.minGeometrySize&&await this.streamGeometries(),this._assets.length>t&&await this.streamAssets();const m=h/n.length;m>l&&(l+=.01,l=Math.max(l,m),await this.onProgress.trigger(Math.round(l*100)/100))}this._geometryCount&&await this.streamGeometries(),this._assets.length&&await this.streamAssets();const{opaque:u,transparent:c}=r.geometryIDs;for(const[p,{index:m,uuid:g}]of this._visitedGeometries)r.keyFragments.set(m,g),(p>1?u:c).set(p,m);Jb.get(r,this.webIfc);const d=this.webIfc.GetCoordinationMatrix(0);r.coordinationMatrix.fromArray(d),r.civilData=this._civil.read(this.webIfc);const f=this._groupSerializer.export(r);await this.onIfcLoaded.trigger(f),r.dispose(!0)}cleanUp(){try{this.webIfc.Dispose()}catch{}this.webIfc=null,this.webIfc=new Gr,this._visitedGeometries.clear(),this._geometries.clear(),this._assets=[],this._meshesWithHoles.clear()}getMesh(e,t,s){const n=t.geometries.size(),r=t.expressID,o={id:r,geometries:[]};for(let a=0;a<n;a++){const l=t.geometries.get(a),h=l.geometryExpressID,u=l.color.w===1,c=h*(u?1:-1);this._visitedGeometries.has(c)||this.getGeometry(e,h,u),this.registerGeometryData(s,r,l,o,h,c);const d=this._splittedGeometries.get(h);if(d)for(const f of d)this.registerGeometryData(s,r,l,o,f,f)}this._assets.push(o)}getGeometry(e,t,s){const n=e.GetGeometry(0,t),r=e.GetIndexArray(n.GetIndexData(),n.GetIndexDataSize()),o=e.GetVertexArray(n.GetVertexData(),n.GetVertexDataSize()),a=new Float32Array(o.length/2),l=new Float32Array(o.length/2);for(let d=0;d<o.length;d+=6)a[d/2]=o[d],a[d/2+1]=o[d+1],a[d/2+2]=o[d+2],l[d/2]=o[d+3],l[d/2+1]=o[d+4],l[d/2+2]=o[d+5];const h=s?1:-1;if(r.length===0){const d=new Float32Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1]);this._geometries.set(t,{position:a,normal:l,index:r,boundingBox:d,hasHoles:!1});const f=this._visitedGeometries.size,p=Un.generateUUID(),m=t*h;this._visitedGeometries.set(m,{uuid:p,index:f}),this._geometryCount++,n.delete();return}const u=(this.settings.maxTriangles||r.length/3)*3;let c=!0;for(let d=0;d<r.length;d+=u){const f=r.length-d,p=Math.min(f,u),m=d+p,g=[],E=[],I=[];let v=0;for(let y=d;y<m;y++){g.push(v++);const U=r[y];E.push(a[U*3]),E.push(a[U*3+1]),E.push(a[U*3+2]),I.push(l[U*3]),I.push(l[U*3+1]),I.push(l[U*3+2])}const b=new Uint32Array(g),C=new Float32Array(E),S=new Float32Array(I),_=aR(C),M=new Float32Array(_.transformation.elements),A=!1,F=c?t:this._nextAvailableID++;this._geometries.set(F,{position:C,normal:S,index:b,boundingBox:M,hasHoles:A}),c||(this._splittedGeometries.has(t)||this._splittedGeometries.set(t,new Set),this._splittedGeometries.get(t).add(F));const D=this._visitedGeometries.size,x=Un.generateUUID(),N=F*h;this._visitedGeometries.set(N,{uuid:x,index:D}),this._geometryCount++,c=!1}n.delete()}async streamAssets(){await this.onAssetStreamed.trigger(this._assets),this._assets=null,this._assets=[]}async streamGeometries(){const e=new Map;for(const[t,s]of this._geometries)e.set(t,s),e.size>this.settings.minGeometrySize&&await this.outputGeometries(e);await this.outputGeometries(e),this._geometries.clear(),this._geometryCount=0}async outputGeometries(e){let t=this._streamSerializer.export(e),s={};for(const[n,{boundingBox:r,hasHoles:o}]of e)s[n]={boundingBox:r,hasHoles:o};await this.onGeometryStreamed.trigger({data:s,buffer:t}),s=null,t=null,e.clear()}registerGeometryData(e,t,s,n,r,o){const a=this._visitedGeometries.get(o);if(a===void 0)throw new Error("Error getting geometry data for streaming!");const l=e.data.get(t);if(!l)throw new Error("Data not found!");l[0].push(a.index);const{x:h,y:u,z:c,w:d}=s.color,f=[h,u,c,d],p=s.flatTransformation;n.geometries.push({color:f,geometryID:r,transformation:p})}};T(OA,"uuid","d9999a00-e1f5-4d3f-8cfe-c56e08609764");let NA=class extends Tp{constructor(){super(...arguments),T(this,"propertiesSize",100)}},PA=class extends be{constructor(){super(...arguments),T(this,"onPropertiesStreamed",new rs),T(this,"onProgress",new rs),T(this,"onIndicesStreamed",new rs),T(this,"onDisposed",new Y),T(this,"enabled",!0),T(this,"settings",new NA),T(this,"webIfc",new Gr)}async dispose(){this.onIndicesStreamed.reset(),this.onPropertiesStreamed.reset(),this.webIfc=null,this.onDisposed.reset()}async streamFromBuffer(e){await this.readIfcFile(e),await this.streamAllProperties(),this.cleanUp()}async streamFromCallBack(e){await this.streamIfcFile(e),await this.streamAllProperties(),this.cleanUp()}async readIfcFile(e){const{path:t,absolute:s,logLevel:n}=this.settings.wasm;this.webIfc.SetWasmPath(t,s),await this.webIfc.Init(),n&&this.webIfc.SetLogLevel(n),this.webIfc.OpenModel(e,this.settings.webIfc)}async streamIfcFile(e){const{path:t,absolute:s,logLevel:n}=this.settings.wasm;this.webIfc.SetWasmPath(t,s),await this.webIfc.Init(),n&&this.webIfc.SetLogLevel(n),this.webIfc.OpenModelFromCallback(e,this.settings.webIfc)}async streamAllProperties(){const{propertiesSize:e}=this.settings,t=new Set(this.webIfc.GetIfcEntityList(0)),s=new Set([Wc,Qf,Kf,jc,Zn]);for(const a of s)t.add(a);let n=.01,r=0;for(const a of t){if(r++,ev.has(a))continue;const l=s.has(a),h=this.webIfc.GetLineIDsWithType(0,a),u=h.size();let c=0;for(let d=0;d<u-e;d+=e){const f={};for(let p=0;p<e;p++){c++;const m=h.get(d+p);try{const g=this.webIfc.GetLine(0,m,l);f[g.expressID]=g}catch{console.log(`Could not get property: ${m}`)}}await this.onPropertiesStreamed.trigger({type:a,data:f})}if(c!==u){const d={};for(let f=c;f<u;f++){const p=h.get(f);try{const m=this.webIfc.GetLine(0,p,l);d[m.expressID]=m}catch{console.log(`Could not get property: ${p}`)}}await this.onPropertiesStreamed.trigger({type:a,data:d})}r/t.size>n&&(n=Math.round(n*100)/100,await this.onProgress.trigger(n),n+=.01)}await this.onProgress.trigger(1);const o=await this.components.get(Ht).processFromWebIfc(this.webIfc,0);await this.onIndicesStreamed.trigger(o)}cleanUp(){this.webIfc.Dispose(),this.webIfc=null,this.webIfc=new Gr}};T(PA,"uuid","88d2c89c-ce32-47d7-8cb6-d51e4b311a0b");let Ov=class{constructor(e,t,s){T(this,"title"),T(this,"guid",ms.create()),T(this,"clippingPlanes",new Bs),T(this,"camera",{aspectRatio:1,fov:60,direction:{x:0,y:0,z:0},position:{x:0,y:0,z:0}}),T(this,"exceptionComponents",new Bs),T(this,"selectionComponents",new Bs),T(this,"componentColors",new Ci),T(this,"spacesVisible",!1),T(this,"spaceBoundariesVisible",!1),T(this,"openingsVisible",!1),T(this,"defaultVisibility",!0),T(this,"_components"),T(this,"world");const n={setCamera:!0,...s},{data:r,setCamera:o}=n;this._components=e,this.world=t,r&&(this.guid=r.guid??this.guid,this.set(r)),o&&this.updateCamera()}get _selectionModelIdMap(){const e=this._components.get(ve),t={};for(const[s,n]of e.groups){s in t||(t[s]=new Set);for(const r of this.selectionComponents){const o=n.globalToExpressIDs.get(r);o&&t[s].add(o)}}return t}get _exceptionModelIdMap(){const e=this._components.get(ve),t={};for(const[s,n]of e.groups){s in t||(t[s]=new Set);for(const r of this.exceptionComponents){const o=n.globalToExpressIDs.get(r);o&&t[s].add(o)}}return t}get selection(){return this._components.get(ve).modelIdToFragmentIdMap(this._selectionModelIdMap)}get exception(){return this._components.get(ve).modelIdToFragmentIdMap(this._exceptionModelIdMap)}get projection(){return"fov"in this.camera?"Perspective":"Orthographic"}get position(){const e=this._components.get(ve),{position:t}=this.camera,{x:s,y:n,z:r}=t,o=new P(s,n,r);return e.applyBaseCoordinateSystem(o,new ce),o}get direction(){const{direction:e}=this.camera,{x:t,y:s,z:n}=e;return new P(t,s,n)}get _managerVersion(){return this._components.get(xt).config.version}get topics(){return[...this._components.get(xt).list.values()].filter(e=>e.viewpoints.has(this.guid))}addComponentsFromMap(e){const t=this._components.get(ve).fragmentIdMapToGuids(e);this.selectionComponents.add(...t),this._components.get(os).list.set(this.guid,this)}set(e){const t=e,s=this;for(const n in e){if(n==="guid")continue;const r=t[n];if(n==="selectionComponents"){this.selectionComponents.clear(),this.selectionComponents.add(...r);continue}if(n==="exceptionComponents"){this.exceptionComponents.clear(),this.exceptionComponents.add(...r);continue}n in this&&(s[n]=r)}return this._components.get(os).list.set(this.guid,this),this}async go(e,t=!0){const{camera:s}=e??this.world;if(!s.hasCameraControls())throw new Error("Viewpoint: the world's camera need controls to set the viewpoint.");s instanceof s_&&s.projection.set(this.projection);const n=new P(this.camera.position.x,this.camera.position.y,this.camera.position.z),r=new P(this.camera.direction.x,this.camera.direction.y,this.camera.direction.z);if(n.equals(new P)&&r.equals(new P))return;const o=this.position,a=this.direction;let l={x:o.x+a.x*80,y:o.y+a.y*80,z:o.z+a.z*80};const h=this.selection;if(Object.keys(h).length===0){const u=this._components.get(ai).get(this.world).castRayFromVector(o,this.direction);u&&(l=u.point)}else{const u=this._components.get(vc);u.reset(),u.addFragmentIdMap(h),l=u.getSphere().center,u.reset()}await s.controls.setLookAt(o.x,o.y,o.z,l.x,l.y,l.z,t)}updateCamera(e){const{camera:t,renderer:s}=e??this.world;if(!s)throw new Error("Viewpoint: the world needs to have a renderer!");if(!t.hasCameraControls())throw new Error("Viewpoint: world's camera need camera controls!");const n=new P;t.controls.getPosition(n);const r=t.three,o=new P(0,0,-1).applyEuler(r.rotation),{width:a,height:l}=s.getSize();let h=a/l;Number.isNaN(h)&&(h=1);const u=this._components.get(ve);n.applyMatrix4(u.baseCoordinationMatrix.clone().invert());const c={aspectRatio:h,position:{x:n.x,y:n.y,z:n.z},direction:{x:o.x,y:o.y,z:o.z}};r instanceof Sn?this.camera={...c,fov:r.fov}:r instanceof Qs&&(this.camera={...c,viewToWorldScale:r.top-r.bottom}),this._components.get(os).list.set(this.guid,this)}applyVisibility(){const e=this._components.get(MA);e.set(this.defaultVisibility),e.set(!this.defaultVisibility,this.exception),e.set(!0,this.selection)}applyColors(){const e=this._components.get(os),t=this._components.get(ve),s=this._components.get(af);for(const[n,r]of this.componentColors){const o=t.guidToFragmentIdMap(r);s.setColor(o,n,e.config.overwriteColors)}}resetColors(){const e=this._components.get(ve),t=this._components.get(af);for(const[s,n]of this.componentColors){const r=e.guidToFragmentIdMap(n);t.resetColor(r)}}async createComponentTags(e){var t,s;const n=this._components.get(ve),r=this._components.get(xt);let o="";if(r.config.includeSelectionTag){const a=e==="selection"?this._selectionModelIdMap:this._exceptionModelIdMap;for(const l in a){const h=n.groups.get(l);if(!h)continue;const u=a[l];for(const c of u){const d=await h.getProperties(c);if(!d)continue;const f=(t=d.GlobalId)==null?void 0:t.value;if(!f)continue;const p=(s=d.Tag)==null?void 0:s.value;let m=null;p&&(m=`AuthoringToolId="${p}"`),o+=`
<Component IfcGuid="${f}" ${m??""} />`}}}else o=[...this.selectionComponents].map(a=>`<Component IfcGuid="${a}" />`).join(`
`);return o}createColorTags(){let e="";for(const[t,s]of this.componentColors.entries()){const n=`#${t.getHexString()}`,r=s.map(o=>`
<Component IfcGuid="${o}" />`).join(`
`);e+=`<Color Color="${n}">
${r}
</Color>`}return e.length!==0?`<Coloring>
${e}
</Coloring>`:"<Coloring />"}async serialize(e=this._managerVersion){const t=this._components.get(ve),s=this.position;s.applyMatrix4(t.baseCoordinationMatrix.clone().invert());const n=this.direction;n.normalize();const r=new ce().makeRotationX(Math.PI/2),o=n.clone().applyMatrix4(r);o.normalize();const a=`<CameraViewPoint>
      <X>${s.x}</X>
      <Y>${-s.z}</Y>
      <Z>${s.y}</Z>
    </CameraViewPoint>`,l=`<CameraDirection>
      <X>${n.x}</X>
      <Y>${-n.z}</Y>
      <Z>${n.y}</Z>
    </CameraDirection>`,h=`<CameraUpVector>
      <X>${o.x}</X>
      <Y>${-o.z}</Y>
      <Z>${o.y}</Z>
    </CameraUpVector>`,u=`<AspectRatio>${this.camera.aspectRatio}</AspectRatio>`;let c="";"viewToWorld"in this.camera?c=`<OrthogonalCamera>
        ${a}
        ${l}
        ${h}
        ${u}
        <ViewToWorldScale>${this.camera.viewToWorld}</ViewToWorldScale>
      </OrthogonalCamera>`:"fov"in this.camera&&(c=`<PerspectiveCamera>
        ${a}
        ${l}
        ${h}
        ${u}
        <FieldOfView>${this.camera.fov}</FieldOfView>
      </PerspectiveCamera>`);const d=`<ViewSetupHints SpacesVisible="${this.spacesVisible??!1}" SpaceBoundariesVisible="${this.spaceBoundariesVisible??!1}" OpeningsVisible="${this.openingsVisible??!1}" />`,f=(await this.createComponentTags("selection")).trim(),p=(await this.createComponentTags("exception")).trim(),m=this.createColorTags();return`<?xml version="1.0" encoding="UTF-8"?>
    <VisualizationInfo Guid="${this.guid}">
      <Components>
        ${e==="2.1"?d:""}
        ${f.length!==0?`<Selection>${f}</Selection>`:""}
        <Visibility DefaultVisibility="${this.defaultVisibility}">
          ${e==="3"?d:""}
          ${p.length!==0?`<Exceptions>${p}</Exceptions>`:""}
        </Visibility>
        ${m}
      </Components>
      ${c}
    </VisualizationInfo>`}},LA=class extends _o{constructor(){super(...arguments),T(this,"_config",{overwriteColors:{value:!1,type:"Boolean"}})}get overwriteColors(){return this._config.overwriteColors.value}set overwriteColors(e){this._config.overwriteColors.value=e}};const Nv=class lf extends be{constructor(e){super(e),T(this,"enabled",!0),T(this,"list",new Ci),T(this,"isSetup",!1),T(this,"onSetup",new Y),T(this,"config",new LA(this,this.components,"Viewpoints",lf.uuid)),T(this,"onDisposed",new Y),e.add(lf.uuid,this)}create(e,t){const s=new Ov(this.components,e,{data:t});return t||this.list.set(s.guid,s),s}setup(){}dispose(){this.list.dispose(),this.onDisposed.trigger(),this.onDisposed.reset()}};T(Nv,"uuid","ee867824-a796-408d-8aa0-4e5962a83c66");let os=Nv,DA=class extends _o{constructor(){super(...arguments),T(this,"_config",{visible:{value:!0,type:"Boolean"},lockRotation:{value:!0,type:"Boolean"},zoom:{type:"Number",interpolable:!0,value:.05,min:.001,max:5},frontOffset:{type:"Number",interpolable:!0,value:0,min:0,max:100},sizeX:{type:"Number",interpolable:!0,value:320,min:20,max:5e3},sizeY:{type:"Number",interpolable:!0,value:160,min:20,max:5e3},backgroundColor:{value:new He,type:"Color"}})}get visible(){return this._config.visible.value}set visible(e){this._config.visible.value=e;const t=this._component.renderer.domElement.style;t.display=e?"block":"none"}get lockRotation(){return this._config.lockRotation.value}set lockRotation(e){this._config.lockRotation.value=e,this._component.lockRotation=e}get zoom(){return this._config.zoom.value}set zoom(e){this._config.zoom.value=e,this._component.zoom=e}get frontOffset(){return this._config.frontOffset.value}set frontOffset(e){this._config.frontOffset.value=e,this._component.frontOffset=e}get sizeX(){return this._config.sizeX.value}set sizeX(e){this._config.sizeX.value=e;const{sizeX:t,sizeY:s}=this._config,n=new Ue(t.value,s.value);this._component.resize(n)}get sizeY(){return this._config.sizeY.value}set sizeY(e){this._config.sizeY.value=e;const{sizeX:t,sizeY:s}=this._config,n=new Ue(t.value,s.value);this._component.resize(n)}get backgroundColor(){return this._config.backgroundColor.value}set backgroundColor(e){this._config.backgroundColor.value=e,this._component.backgroundColor=e}},UA=class{constructor(e,t){if(T(this,"onDisposed",new Y),T(this,"onAfterUpdate",new Y),T(this,"onBeforeUpdate",new Y),T(this,"onResize",new Y),T(this,"onSetup",new Y),T(this,"frontOffset",0),T(this,"overrideMaterial",new ME),T(this,"backgroundColor",new He(395274)),T(this,"renderer"),T(this,"enabled",!0),T(this,"world"),T(this,"config"),T(this,"isSetup",!1),T(this,"_defaultConfig",{visible:!0,lockRotation:!1,zoom:.05,frontOffset:0,sizeX:320,sizeY:160,backgroundColor:new He(395274)}),T(this,"_lockRotation",!0),T(this,"_size",new Ue(320,160)),T(this,"_camera"),T(this,"_plane"),T(this,"_tempVector1",new P),T(this,"_tempVector2",new P),T(this,"_tempTarget",new P),T(this,"down",new P(0,-1,0)),T(this,"updatePlanes",()=>{if(!this.world.renderer)throw new Error("The given world must have a renderer!");const r=[],o=this.world.renderer.three;for(const a of o.clippingPlanes)r.push(a);r.push(this._plane),this.renderer.clippingPlanes=r}),this.world=e,!this.world.renderer)throw new Error("The given world must have a renderer!");this.renderer=new za,this.renderer.setSize(this._size.x,this._size.y);const s=1,n=this._size.x/this._size.y;this._camera=new Qs(s*n/-2,s*n/2,s/2,s/-2),this.world.renderer.onClippingPlanesUpdated.add(this.updatePlanes),this._camera.position.set(0,200,0),this._camera.zoom=.1,this._camera.rotation.x=-Math.PI/2,this._plane=new Es(this.down,200),this.updatePlanes(),this.config=new DA(this,t,"MiniMap")}get lockRotation(){return this._lockRotation}set lockRotation(e){this._lockRotation=e,e&&(this._camera.rotation.z=0)}get zoom(){return this._camera.zoom}set zoom(e){this._camera.zoom=e,this._camera.updateProjectionMatrix()}dispose(){this.enabled=!1,this.onBeforeUpdate.reset(),this.onAfterUpdate.reset(),this.onResize.reset(),this.overrideMaterial.dispose(),this.renderer.forceContextLoss(),this.renderer.dispose(),this.onDisposed.trigger(),this.onDisposed.reset()}get(){return this._camera}update(){if(!this.enabled)return;this.onBeforeUpdate.trigger();const e=this.world.scene.three,t=this.world.camera;if(!t.hasCameraControls())throw new Error("The given world must use camera controls!");if(!(e instanceof Ks))throw new Error("The given world must have a THREE.Scene as a root!");const s=t.controls;if(s.getPosition(this._tempVector1),this._camera.position.x=this._tempVector1.x,this._camera.position.z=this._tempVector1.z,this.frontOffset!==0&&(s.getTarget(this._tempVector2),this._tempVector2.sub(this._tempVector1),this._tempVector2.normalize().multiplyScalar(this.frontOffset),this._camera.position.x+=this._tempVector2.x,this._camera.position.z+=this._tempVector2.z),!this._lockRotation){s.getTarget(this._tempTarget);const r=Math.atan2(this._tempTarget.x-this._tempVector1.x,this._tempTarget.z-this._tempVector1.z);this._camera.rotation.z=r+Math.PI}this._plane.set(this.down,this._tempVector1.y);const n=e.background;e.background=this.backgroundColor,this.renderer.render(e,this._camera),e.background=n,this.onAfterUpdate.trigger()}getSize(){return this._size}resize(e=this._size){this._size.copy(e),this.renderer.setSize(e.x,e.y);const t=e.x/e.y,s=1;this._camera.left=s*t/-2,this._camera.right=s*t/2,this._camera.top=s/2,this._camera.bottom=-1/2,this._camera.updateProjectionMatrix(),this.onResize.trigger(e)}setup(e){const t={...this._defaultConfig,...e};this.config.visible=!0,this.config.lockRotation=t.lockRotation,this.config.zoom=t.zoom,this.config.frontOffset=t.frontOffset,this.config.sizeX=t.sizeX,this.config.sizeY=t.sizeY,this.config.backgroundColor=t.backgroundColor,this.isSetup=!0,this.onSetup.trigger()}};const kA=class Pv extends be{constructor(e){super(e),T(this,"onAfterUpdate",new Y),T(this,"onBeforeUpdate",new Y),T(this,"onDisposed",new Y),T(this,"onSetup",new Y),T(this,"enabled",!0),T(this,"list",new Map),this.components.add(Pv.uuid,this)}create(e){if(this.list.has(e.uuid))throw new Error("This world already has a minimap!");const t=new UA(e,this.components);return this.list.set(e.uuid,t),t}delete(e){const t=this.list.get(e);t&&t.dispose(),this.list.delete(e)}dispose(){for(const[e,t]of this.list)t.dispose();this.list.clear(),this.onDisposed.trigger()}update(){for(const[e,t]of this.list)t.update()}};T(kA,"uuid","39ad6aad-84c8-4adf-a1e0-7f25313a9e7f");const Lv=class Dv extends be{constructor(e){super(e),T(this,"enabled",!0),e.add(Dv.uuid,this)}static distanceFromPointToLine(e,t,s,n=!1){const r=new Nt,o=new P;return r.set(t,s),r.closestPointToPoint(e,n,o),o.distanceTo(e)}getFace(e,t,s){if(!e.geometry.index)throw new Error("Geometry must be indexed!");const n=new Map,r=e.geometry.index.array,{plane:o}=this.getFaceData(t,s,e),a=[];for(let c=0;c<r.length/3;c++){const{plane:d,edges:f}=this.getFaceData(c,s,e);if(d.equals(o)){a.push({index:c,edges:f});for(const{id:p,points:m,distance:g}of f)n.set(p,{points:m,distance:g})}}let l=0;const h=new Map,u=new Map;for(const{index:c,edges:d}of a){const f=new Map;for(const{id:b}of d)if(h.has(b)){const C=h.get(b);f.set(b,C)}const p=d.map(b=>b.id);if(!f.size){const b=l++;for(const{id:C}of d)h.set(C,b);u.set(b,{edges:new Set(p),indices:new Set([c])});continue}let m=null;const g=new Set,E=new Set(p);for(const[b,C]of f){m===null?m=C:C!==m&&g.add(C),h.delete(b);const{edges:S}=u.get(C);S.delete(b),E.delete(b)}if(m===null)throw new Error("Error computing face!");const I=u.get(m),{indices:v}=I;v.add(c);for(const b of E){h.set(b,m);const{edges:C}=I;C.add(b)}for(const b of g){const C=u.get(b),{edges:S,indices:_}=C,M=u.get(m),{edges:A,indices:F}=M;for(const D of S)A.add(D),h.set(D,m);for(const D of _)F.add(D);u.delete(b)}}for(const[c,{indices:d,edges:f}]of u)if(d.has(t)){const p=[];for(const m of f){const g=n.get(m);p.push(g)}return{edges:p,indices:d}}return null}getVerticesAndNormal(e,t,s){if(!e.geometry.index)throw new Error("Geometry must be indexed!");const n=e.geometry.index.array,r=e.geometry.attributes.position.array,o=e.geometry.attributes.normal.array,a=n[t*3]*3,l=n[t*3+1]*3,h=n[t*3+2]*3,u=new P(r[a],r[a+1],r[a+2]),c=new P(r[l],r[l+1],r[l+2]),d=new P(r[h],r[h+1],r[h+2]),f=new P(o[a],o[a+1],o[a+2]),p=new P(o[l],o[l+1],o[l+2]),m=new P(o[h],o[h+1],o[h+2]),g=(f.x+p.x+m.x)/3,E=(f.y+p.y+m.y)/3,I=(f.z+p.z+m.z)/3,v=new P(g,E,I);if(s!==void 0&&e instanceof oi){const b=new ce;e.getMatrixAt(s,b);const C=new ce;C.extractRotation(b),v.applyMatrix4(C),u.applyMatrix4(b),c.applyMatrix4(b),d.applyMatrix4(b)}return{p1:u,p2:c,p3:d,faceNormal:v}}round(e){e.x=Math.trunc(e.x*1e3)/1e3,e.y=Math.trunc(e.y*1e3)/1e3,e.z=Math.trunc(e.z*1e3)/1e3}getVolumeFromFragments(e){const t=this.components.get(ve),s=new ce,n=[];for(const o in e){const a=t.list.get(o);if(!a)continue;const l=e[o];let h=0;for(const d of l){const f=a.getInstancesIDs(d);f&&(h+=f.size)}const u=new oi(a.mesh.geometry,void 0,h);let c=0;for(const d of l){const f=a.getInstancesIDs(d);if(f)for(const p of f)a.mesh.getMatrixAt(p,s),u.setMatrixAt(c++,s)}n.push(u)}const r=this.getVolumeFromMeshes(n);for(const o of n)o.geometry=null,o.material=[],o.dispose();return r}getVolumeFromMeshes(e){let t=0;for(const s of e)t+=this.getVolumeOfMesh(s);return t}getFaceData(e,t,s){const n=this.getVerticesAndNormal(s,e,t),{p1:r,p2:o,p3:a,faceNormal:l}=n;this.round(r),this.round(o),this.round(a),this.round(l);const h=[{id:`${r.x}|${r.y}|${r.z}`,value:r},{id:`${o.x}|${o.y}|${o.z}`,value:o},{id:`${a.x}|${a.y}|${a.z}`,value:a}];h.sort((I,v)=>I.id<v.id?-1:I.id>v.id?1:0);const[{id:u,value:c},{id:d,value:f},{id:p,value:m}]=h,g=[{id:`${u}|${d}`,distance:c.distanceTo(f),points:[c,f]},{id:`${d}|${p}`,distance:f.distanceTo(m),points:[f,m]},{id:`${u}|${p}`,distance:c.distanceTo(m),points:[c,m]}],E=new Es;return E.setFromNormalAndCoplanarPoint(l,r),E.constant=Math.round(E.constant*10)/10,{plane:E,edges:g}}getVolumeOfMesh(e){let t=0;const s=new P,n=new P,r=new P,{index:o}=e.geometry,a=e.geometry.attributes.position.array;if(!o)return console.warn("Geometry must be indexed to compute its volume!"),0;const l=[];if(e instanceof oi)for(let u=0;u<e.count;u++){const c=new ce;e.getMatrixAt(u,c),l.push(c)}else l.push(new ce().identity());const{matrixWorld:h}=e;for(let u=0;u<o.array.length-2;u+=3)for(const c of l){const d=c.multiply(h),f=o.array[u]*3,p=o.array[u+1]*3,m=o.array[u+2]*3;s.set(a[f],a[f+1],a[f+2]).applyMatrix4(d),n.set(a[p],a[p+1],a[p+2]).applyMatrix4(d),r.set(a[m],a[m+1],a[m+2]).applyMatrix4(d),t+=this.getSignedVolumeOfTriangle(s,n,r)}return Math.abs(t)}getSignedVolumeOfTriangle(e,t,s){const n=s.x*t.y*e.z,r=t.x*s.y*e.z,o=s.x*e.y*t.z,a=e.x*s.y*t.z,l=t.x*e.y*s.z,h=e.x*t.y*s.z;return 1/6*(-n+r+o-a-l+h)}};T(Lv,"uuid","267ca032-672f-4cb0-afa9-d24e904f39d6");let On=Lv,mu=class{constructor(e){T(this,"cardinality","required"),T(this,"instructions"),T(this,"evalRequirement",(t,s,n,r)=>{const o={parameter:n,currentValue:t,requiredValue:s.parameter,pass:!1};r&&this.addCheckResult(o,r);let a=!1;if(s.type==="simple"&&(a=t===s.parameter),s.type==="enumeration"&&(a=s.parameter.includes(t)),s.type==="pattern"&&(a=new RegExp(s.parameter).test(String(t))),s.type==="length"){const{min:l,length:h,max:u}=s.parameter;h!==void 0&&(a=String(t).length===h),l!==void 0&&(a=String(t).length>=l),u!==void 0&&(a=String(t).length<=u)}if(s.type==="bounds"&&typeof t=="number"){const{min:l,minInclusive:h,max:u,maxInclusive:c}=s.parameter;let d=!0,f=!0;l!==void 0&&(d=h?t<=l:t<l),u!==void 0&&(f=c?t>=u:t>u),a=d&&f}return this.cardinality==="prohibited"&&(a=!a),this.cardinality==="optional"&&(a=!0),o.pass=a,o.pass}),T(this,"testResult",[]),this.components=e}addCheckResult(e,t){const s=t.findIndex(({parameter:n})=>n===e.parameter);s!==-1?t[s]=e:t.push(e)}saveResult(e,t){const{GlobalId:s}=e;if(!s)return;const{value:n}=s,r={expressID:n,pass:t,checks:[],cardinality:this.cardinality};this.testResult.push(r)}};const cs=(i,e)=>{let t="";return e?(e.type==="simple"&&(t=`<ids:simpleValue>${e.parameter}</ids:simpleValue>`),e.type==="enumeration"&&(t=`<xs:restriction base="xs:string">
    ${e.parameter.map(s=>`<xs:enumeration value="${s}" />`).join(`\r
`)}
    </xs:restriction>`),e.type==="pattern"&&(t=`<xs:restriction base="xs:string">
      <xs:pattern value="${e.parameter}" />
    </xs:restriction>`),`<ids:${i[0].toLowerCase()+i.slice(1)}>
    ${t}
  </ids:${i[0].toLowerCase()+i.slice(1)}>`):t};let BA=class extends mu{constructor(e,t){super(e),T(this,"facetType","Attribute"),T(this,"name"),T(this,"value"),this.name=t}serialize(e){const t=cs("Name",this.name),s=cs("Value",this.value);let n="";return e==="requirement"&&(n+=`cardinality="${this.cardinality}"`,n+=this.instructions?`instructions="${this.instructions}"`:""),`<ids:attribute ${n}>
  ${t}
  ${s}
</ids:attribute>`}async getEntities(){return[]}async test(e){var t;this.testResult=[];for(const n in e){const r=Number(n),o=e[r],a=[],l={guid:(t=o.GlobalId)==null?void 0:t.value,expressID:r,pass:!1,checks:a,cardinality:this.cardinality};this.testResult.push(l);const h=Object.keys(o).filter(c=>{const d=this.evalRequirement(c,this.name,"Name"),f=o[c];return d&&f===null?this.cardinality==="optional"||this.cardinality==="prohibited":d&&(f==null?void 0:f.type)===3&&f.value===2||d&&Array.isArray(f)&&f.length===0||d&&(f==null?void 0:f.type)===1&&f.value.trim()===""?!1:d}),u=h.length>0;if(a.push({parameter:"Name",currentValue:u?h[0]:null,requiredValue:this.name.parameter,pass:this.cardinality==="prohibited"?!u:u}),this.value)if(h[0]){const c=o[h[0]];(c==null?void 0:c.type)===5?a.push({parameter:"Value",currentValue:null,requiredValue:this.value.parameter,pass:this.cardinality==="prohibited"}):this.evalRequirement(c?c.value:null,this.value,"Value",a)}else a.push({parameter:"Value",currentValue:null,requiredValue:this.value.parameter,pass:this.cardinality==="prohibited"});l.pass=a.every(({pass:c})=>c)}const s=[...this.testResult];return this.testResult=[],s}},zA=class extends mu{constructor(e,t){super(e),T(this,"facetType","Classification"),T(this,"system"),T(this,"value"),T(this,"uri"),this.system=t}serialize(e){const t=cs("System",this.system),s=cs("Value",this.value);let n="";return e==="requirement"&&(n+=`cardinality="${this.cardinality}"`,n+=this.uri?`uri=${this.uri}`:"",n+=this.instructions?`instructions="${this.instructions}"`:""),`<ids:classification ${n}>
  ${t}
  ${s}
</ids:classification>`}async getEntities(e,t={}){var s;const n=[],r=await e.getAllPropertiesOfType(Li),o=await e.getAllPropertiesOfType(rr),a={...r,...o},l=[];for(const u in a){const c=Number(u),d=await e.getProperties(c);if(!d)continue;const f=(s=d.ReferencedSource)==null?void 0:s.value;if(!f)continue;const p=await e.getProperties(f);!p||!this.evalSystem(p)||!this.evalValue(d)||!this.evalURI(d)||l.push(c)}const h=this.components.get(Ht);for(const u of l){const c=h.getEntitiesWithRelation(e,"HasAssociations",u);for(const d of c){if(d in t)continue;const f=await e.getProperties(d);f&&(t[d]=f,n.push(d))}}return n}async test(e,t){var s;this.testResult=[];for(const r in e){const o=Number(r),a=e[o],l=[],h={guid:(s=a.GlobalId)==null?void 0:s.value,expressID:o,pass:!1,checks:l,cardinality:this.cardinality};this.testResult.push(h);let u=!0;const c=await this.getSystems(t,o),d=c.map(f=>this.getSystemName(f)).filter(f=>f);for(const f of c){if(!this.evalSystem(f,l))continue;if(u=!1,!(this.value&&this.system))break;if(f.type!==Li)continue;const p=!this.value||this.evalValue(f,l),m=!this.uri||this.evalURI(f,l);if(p&&m)break}u&&this.addCheckResult({parameter:"System",currentValue:d,requiredValue:this.system,pass:this.cardinality==="optional"},l),h.pass=l.every(({pass:f})=>f)}const n=[...this.testResult];return this.testResult=[],n}async processReferencedSource(e,t){var s;const n=(s=t.ReferencedSource)==null?void 0:s.value;if(!n)return null;const r=await e.getProperties(n);return r?(r.type===Li&&(r.ReferencedSource=await this.processReferencedSource(e,r)),r):null}async getSystems(e,t){var s;const n=[],r=this.components.get(Ht),o=r.getEntityRelations(e,t,"HasAssociations");if(o)for(const c of o){const d=await e.getProperties(c);d&&(d.type===rr&&n.push(d),d.type===Li&&(d.ReferencedSource=await this.processReferencedSource(e,d),d.ReferencedSource&&n.push(d)))}const a=n.map(c=>{var d,f,p;return c.type===rr?(d=c.Name)==null?void 0:d.value:c.type===Li?(p=(f=c.ReferencedSource)==null?void 0:f.Name)==null?void 0:p.value:null}).filter(c=>c),l=r.getEntityRelations(e,t,"IsTypedBy");if(!(l&&l[0]))return n;const h=l[0],u=r.getEntityRelations(e,h,"HasAssociations");if(u)for(const c of u){const d=await e.getProperties(c);if(d){if(d.type===rr){if(a.includes((s=d.Name)==null?void 0:s.value))continue;n.push(d)}d.type===Li&&(d.ReferencedSource=await this.processReferencedSource(e,d),d.ReferencedSource&&n.push(d))}}return n}getSystemName(e){var t,s,n,r;if(e.type===rr)return(t=e.Name)==null?void 0:t.value;if(e.type===Li){if(((s=e.ReferencedSource)==null?void 0:s.type)===Li)return this.getSystemName(e.ReferencedSource);if(((n=e.ReferencedSource)==null?void 0:n.type)===rr)return(r=e.ReferencedSource.Name)==null?void 0:r.value}return null}getAllReferenceIdentifications(e){if(e.type!==Li)return null;const t=[];if(e.Identification&&t.push(e.Identification.value),e.ReferencedSource){const s=this.getAllReferenceIdentifications(e.ReferencedSource);s&&t.push(...s)}return t}evalSystem(e,t){const s=this.getSystemName(e);return this.evalRequirement(s,this.system,"System",t)}evalValue(e,t){if(!this.value)return!0;const s=this.getAllReferenceIdentifications(e);if(!s)return!1;const n=s.find(r=>this.value?this.evalRequirement(r,this.value,"Value"):!1);return t&&this.addCheckResult({parameter:"Value",currentValue:n??null,requiredValue:this.value,pass:!!n},t),!!n}evalURI(e,t){var s;return this.uri?this.evalRequirement((s=e.Location)==null?void 0:s.value,{type:"simple",parameter:this.uri},"URI",t):!0}},VA=class extends mu{constructor(e,t){super(e),T(this,"facetType","Entity"),T(this,"name"),T(this,"predefinedType"),this.name=t}serialize(e){const t=cs("Name",this.name),s=cs("Name",this.predefinedType);let n="";return e==="requirement"&&(n+=`cardinality="${this.cardinality}"`,n+=this.instructions?`instructions="${this.instructions}"`:""),`<ids:entity ${n}>
  ${t}
  ${s}
</ids:entity>`}async getEntities(e,t={}){const s=Object.entries(bc),n=[];for(const[a]of s)await this.evalName({type:a})&&n.push(Number(a));let r={};for(const a of n){const l=await e.getAllPropertiesOfType(a);l&&(r={...r,...l})}if(!this.predefinedType){for(const a in r)a in t||(t[a]=r[a]);return Object.keys(r).map(Number)}const o=[];for(const a in r){const l=Number(a);if(l in t)continue;const h=r[l];await this.evalPredefinedType(e,h)&&(t[l]=h,o.push(l))}return o}async test(e,t){var s;this.testResult=[];for(const n in e){const r=Number(n),o=e[r],a=[],l={guid:(s=o.GlobalId)==null?void 0:s.value,expressID:r,pass:!1,checks:a,cardinality:this.cardinality};this.testResult.push(l),await this.evalName(o,a),await this.evalPredefinedType(t,o,a),l.pass=a.every(({pass:h})=>h)}return this.testResult}async evalName(e,t){const s=bc[e.type];return this.evalRequirement(s,this.name,"Name",t)}async evalPredefinedType(e,t,s){var n,r,o,a;if(!this.predefinedType)return null;const l=this.components.get(Ht),h=typeof this.predefinedType.parameter=="string"&&this.predefinedType.parameter==="USERDEFINED";let u=(n=t.PredefinedType)==null?void 0:n.value;if(u==="USERDEFINED"&&!h){const c=Object.keys(t).find(d=>/^((?!Predefined).)*Type$/.test(d));u=c?(r=t[c])==null?void 0:r.value:"USERDEFINED"}if(!u){const c=l.getEntityRelations(e,t.expressID,"IsTypedBy");if(c&&c[0]){const d=await e.getProperties(c[0]);if(d&&(u=(o=d.PredefinedType)==null?void 0:o.value,u==="USERDEFINED"&&!h)){const f=Object.keys(d).find(p=>/^((?!Predefined).)*Type$/.test(p));u=f?(a=d[f])==null?void 0:a.value:"USERDEFINED"}}}return this.evalRequirement(u,this.predefinedType,"PredefinedType",s)}},$A=class extends mu{constructor(e,t,s){super(e),T(this,"facetType","Property"),T(this,"propertySet"),T(this,"baseName"),T(this,"value"),T(this,"dataType"),T(this,"uri"),T(this,"_unsupportedTypes",[Q1,K1]),this.propertySet=t,this.baseName=s}serialize(e){const t=cs("PropertySet",this.propertySet),s=cs("BaseName",this.baseName),n=cs("Value",this.value),r=this.dataType?`dataType=${this.dataType}`:"";let o="";return e==="requirement"&&(o+=`cardinality="${this.cardinality}"`,o+=this.uri?`uri=${this.uri}`:"",o+=this.instructions?`instructions="${this.instructions}"`:""),`<ids:property ${r} ${o}>
  ${t}
  ${s}
  ${n}
</ids:property>`}async getEntities(e,t={}){var s,n;let r={};const o=await e.getAllPropertiesOfType(ks);r={...r,...o};const a=await e.getAllPropertiesOfType(Dr);if(r={...r,...a},Object.keys(r).length===0)return[];const l=[];for(const u in r){const c=Number(u),d=await e.getProperties(c);if(!d||((s=d.Name)==null?void 0:s.value)!==this.propertySet.parameter)continue;let f;if(d.type===ks&&(f="HasProperties"),d.type===Dr&&(f="Quantities"),!!f)for(const p of d[f]){const m=await e.getProperties(p.value);if(!(!m||((n=m.Name)==null?void 0:n.value)!==this.baseName.parameter)){if(this.value){const g=Object.keys(m).find(E=>E.endsWith("Value"));if(!g||m[g].value!==this.value.parameter)continue}l.push(c)}}}const h=this.components.get(Ht);for(const u of l){const c=h.getEntitiesWithRelation(e,"IsDefinedBy",u);for(const d of c){if(d in t)continue;const f=await e.getProperties(d);f&&(t[d]=f)}}return[]}async test(e,t){var s;this.testResult=[];for(const r in e){const o=Number(r),a=e[o],l=[],h={guid:(s=a.GlobalId)==null?void 0:s.value,expressID:o,pass:!1,checks:l,cardinality:this.cardinality};this.testResult.push(h);const u=(await this.getPsets(t,o)).filter(c=>{var d;return this.evalRequirement(((d=c.Name)==null?void 0:d.value)??null,this.propertySet,"PropertySet")?(l.push({currentValue:c.Name.value,parameter:"PropertySet",pass:!0,requiredValue:this.propertySet.parameter}),!0):!1});if(u.length===0){l.push({currentValue:null,parameter:"PropertySet",pass:!1,requiredValue:this.propertySet.parameter});continue}for(const c of u){const d=this.getItemsAttrName(c.type);if(!d){l.push({currentValue:null,parameter:"BaseName",pass:!1,requiredValue:this.baseName.parameter});continue}const f=c[d].filter(p=>{var m;return this._unsupportedTypes.includes(p.type)||!this.evalRequirement(((m=p.Name)==null?void 0:m.value)??null,this.baseName,"BaseName")?!1:(l.push({currentValue:p.Name.value,parameter:"BaseName",pass:!0,requiredValue:this.baseName.parameter}),!0)});if(f.length===0){l.push({currentValue:null,parameter:"BaseName",pass:!1,requiredValue:this.baseName.parameter});continue}for(const p of f)this.evalValue(p,l),this.evalDataType(p,l),this.evalURI()}h.pass=l.every(({pass:c})=>c)}const n=[...this.testResult];return this.testResult=[],n}getItemsAttrName(e){let t;return e===ks&&(t="HasProperties"),e===Dr&&(t="Quantities"),t}getValueKey(e){return Object.keys(e).find(t=>t.endsWith("Value")||t.endsWith("Values"))}async getPsetProps(e,t,s){const n=structuredClone(t),r=[],o=n[s];if(!o)return r;for(const{value:a}of o){const l=await e.getProperties(a);l&&r.push(l)}return n[s]=r,n}async getTypePsets(e,t){const s=[],n=this.components.get(Ht).getEntityRelations(e,t,"IsTypedBy");if(!(n&&n[0]))return s;const r=await e.getProperties(n[0]);if(!(r&&"HasPropertySets"in r&&Array.isArray(r.HasPropertySets)))return s;for(const{value:o}of r.HasPropertySets){const a=await e.getProperties(o);if(!(a&&"HasProperties"in a&&Array.isArray(a.HasProperties)))continue;const l=await this.getPsetProps(e,a,"HasProperties");s.push(l)}return s}async getPsets(e,t){const s=await this.getTypePsets(e,t),n=this.components.get(Ht).getEntityRelations(e,t,"IsDefinedBy");if(!n)return s;for(const r of n){const o=await e.getProperties(r);if(!o)continue;const a=this.getItemsAttrName(o.type);if(!a)continue;const l=await this.getPsetProps(e,o,a);s.push(l)}return s}evalValue(e,t){const s=this.getValueKey(e),n=e[s];if(this.value){if(!n)return t==null||t.push({parameter:"Value",currentValue:null,pass:!1,requiredValue:this.value.parameter}),!1;const r=structuredClone(this.value);if(n.name==="IFCLABEL"&&r.type==="simple"&&(r.parameter=String(r.parameter)),(e.type===lm||e.type===hm)&&Array.isArray(n)){const o=n.map(l=>l.value),a=n.find(l=>r?this.evalRequirement(l.value,r,"Value"):!1);return t==null||t.push({currentValue:o,pass:!!a,parameter:"Value",requiredValue:r.parameter}),!!a}return this.evalRequirement(n.value,r,"Value",t)}return s?n.type===3&&n.value===2?(t==null||t.push({parameter:"Value",currentValue:null,pass:!1,requiredValue:null}),!1):n.type===1&&n.value.trim()===""?(t==null||t.push({parameter:"Value",currentValue:"",pass:!1,requiredValue:null}),!1):!0:!0}evalDataType(e,t){if(!this.dataType)return!0;const s=this.getValueKey(e),n=e[s];if(!n)return t==null||t.push({parameter:"DataType",currentValue:null,pass:!1,requiredValue:this.dataType}),!1;if((e.type===lm||e.type===hm)&&Array.isArray(n)&&n[0]){const r=n[0].name;return this.evalRequirement(r,{type:"simple",parameter:this.dataType},"DataType",t)}return this.evalRequirement(n.name,{type:"simple",parameter:this.dataType},"DataType",t)}evalURI(){return!0}},HA=class{constructor(e,t,s){T(this,"name"),T(this,"ifcVersion",new Set),T(this,"identifier",ms.create()),T(this,"description"),T(this,"instructions"),T(this,"requirementsDescription"),T(this,"applicability",new Bs),T(this,"requirements",new Bs),T(this,"components"),this.components=e,this.name=t;for(const n of s)this.ifcVersion.add(n)}set(e){const t=e,s=this;for(const n in e){if(n==="identifier")continue;const r=t[n];n in this&&(s[n]=r)}return this.components.get(WA).list.set(this.identifier,this),this}async test(e){let t=[];if(this.requirements.size===0)return t;const s={};for(const n of this.applicability)await n.getEntities(e,s);return t=await[...this.requirements][0].test(s,e),t}serialize(){const e=`name="${this.name}"`,t=this.identifier?`identifier="${this.identifier}"`:"",s=this.description?`description="${this.description}"`:"",n=this.instructions?`instructions="${this.instructions}"`:"";return`<ids:specification ifcVersion="${[...this.ifcVersion].join(" ")}" ${e} ${t} ${s} ${n}>
      <ids:applicability minOccurs="1" maxOccurs="unbounded">
        ${[...this.applicability].map(r=>r.serialize("applicability"))}
      </ids:applicability>
      <ids:requirements>
        ${[...this.requirements].map(r=>r.serialize("requirement"))}
      </ids:requirements>
    </ids:specification>`}};const us=i=>{if(!i)return;const e={};if("simpleValue"in i&&(e.type="simple",e.parameter=i.simpleValue),"restriction"in i){const t=i.restriction;if("pattern"in t&&(e.type="pattern",e.parameter=t.pattern.value),"enumeration"in t){e.type="enumeration";const s=t.enumeration.map(({value:n})=>n);e.parameter=s}}if(e.parameter!==void 0)return e},Wg=(i,e)=>{const t=[];for(const s of e){const n=s.name,r=us(n);if(!r)continue;const o=new VA(i,r);s.cardinality&&(o.cardinality=s.cardinality),o.predefinedType=us(s.predefinedType),o.instructions=s.instructions,t.push(o)}return t},GA=(i,e)=>{const t=[];for(const s of e){const n=s.name,r=us(n);if(!r)continue;const o=new BA(i,r);s.cardinality&&(o.cardinality=s.cardinality),o.value=us(s.value),o.instructions=s.instructions,t.push(o)}return t},YA=(i,e)=>{const t=[];for(const s of e){const n=s.system,r=us(n);if(!r)continue;const o=new zA(i,r);s.cardinality&&(o.cardinality=s.cardinality);const a=us(s.value);(a==null?void 0:a.type)==="simple"&&(a.parameter=String(a.parameter)),(a==null?void 0:a.type)==="enumeration"&&Array.isArray(a.parameter)&&(a.parameter=a.parameter.map(String)),o.value=a,o.uri=s.uri,o.instructions=s.instructions,t.push(o)}return t},jA=(i,e)=>{const t=[];for(const s of e){const n=s.propertySet,r=s.baseName,o=us(n),a=us(r);if(!(a&&o))continue;const l=new $A(i,o,a);s.cardinality&&(l.cardinality=s.cardinality);const h=us(s.value);(h==null?void 0:h.type)==="enumeration"&&Array.isArray(h.parameter)&&(h.parameter=h.parameter.map(String)),l.value=h,l.dataType=s.dataType,l.uri=s.uri,l.instructions=s.instructions,t.push(l)}return t},_p=class hf extends be{constructor(e){super(e),T(this,"enabled",!0),T(this,"list",new Ci),e.add(hf.uuid,this)}getFragmentIdMap(e,t){const s=t.filter(a=>a.pass).map(a=>a.expressID),n=e.getFragmentMap(s),r=t.filter(a=>!a.pass).map(a=>a.expressID),o=e.getFragmentMap(r);return{pass:n,fail:o}}create(e,t,s){const n=new HA(this.components,e,t);return s&&(n.identifier=s),this.list.set(n.identifier,n),n}load(e){const t=[],s=hf.xmlParser.parse(e).ids,{specifications:n}=s;if(n&&n.specification){const r=Array.isArray(n.specification)?n.specification:[n.specification];for(const o of r){const{name:a,ifcVersion:l,description:h,instructions:u,identifier:c}=o;if(!(a&&l))continue;const d=[],f=[],{applicability:p,requirements:m}=o;if(p){const{maxOccurs:E,...I}=p,v=Array.isArray(I)?I:[I];for(const b of v)for(const C in b){const S=Array.isArray(b[C])?b[C]:[b[C]];if(C==="entity"){const _=Wg(this.components,S);d.push(..._)}}}let g;if(m){const{maxOccurs:E,...I}=m;g=m.description;const v=Array.isArray(I)?I:[I];for(const b of v)for(const C in b){const S=Array.isArray(b[C])?b[C]:[b[C]];if(C==="entity"){const _=Wg(this.components,S);f.push(..._)}if(C==="attribute"){const _=GA(this.components,S);f.push(..._)}if(C==="classification"){const _=YA(this.components,S);f.push(..._)}if(C==="property"){const _=jA(this.components,S);f.push(..._)}}}if(d.length>0&&f.length>0){const E=this.create(a,l.split(/\s+/),c);E.description=h,E.instructions=u,E.requirementsDescription=g,E.applicability.add(...d),E.requirements.add(...f),t.push(E)}}}return t}export(e,t=this.list.values()){const s=t??this.list;return`<ids:ids xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://standards.buildingsmart.org/IDS http://standards.buildingsmart.org/IDS/1.0/ids.xsd" xmlns:ids="http://standards.buildingsmart.org/IDS">
  <!-- Made with That Open Engine ${Ob.release} (https://github.com/thatopen/engine_components) -->
  <ids:info>
    <ids:title>${e.title}</ids:title>
    ${e.copyright?`<ids:copyright>${e.copyright}</ids:copyright>`:""}
    ${e.version?`<ids:version>${e.version}</ids:version>`:""}
    ${e.description?`<ids:description>${e.description}</ids:description>`:""}
    ${e.author?`<ids:author>${e.author}</ids:author>`:""}
    ${e.date?`<ids:date>${e.date.toISOString().split("T")[0]}</ids:date>`:""}
    ${e.purpose?`<ids:purpose>${e.purpose}</ids:purpose>`:""}
    ${e.milestone?`<ids:milestone>${e.milestone}</ids:milestone>`:""}
  </ids:info>
  <ids:specifications>
    ${[...s].map(n=>n.serialize()).join(`
`)}
  </ids:specifications>
</ids:ids>`}};T(_p,"uuid","9f0b9f78-9b2e-481a-b766-2fbfd01f342c");T(_p,"xmlParser",new mv.XMLParser({allowBooleanAttributes:!0,attributeNamePrefix:"",ignoreAttributes:!1,ignoreDeclaration:!0,ignorePiTags:!0,numberParseOptions:{leadingZeros:!0,hex:!0},parseAttributeValue:!0,preserveOrder:!1,processEntities:!1,removeNSPrefix:!0,trimValues:!0}));let WA=_p;const Xg=new Ge,Rh=new P;let Uv=class extends lT{constructor(){super(),this.isLineSegmentsGeometry=!0,this.type="LineSegmentsGeometry";const e=[-1,2,0,1,2,0,-1,1,0,1,1,0,-1,0,0,1,0,0,-1,-1,0,1,-1,0],t=[-1,2,1,2,-1,1,1,1,-1,-1,1,-1,-1,-2,1,-2],s=[0,2,1,2,3,1,2,4,3,4,5,3,4,6,5,6,7,5];this.setIndex(s),this.setAttribute("position",new Hr(e,3)),this.setAttribute("uv",new Hr(t,2))}applyMatrix4(e){const t=this.attributes.instanceStart,s=this.attributes.instanceEnd;return t!==void 0&&(t.applyMatrix4(e),s.applyMatrix4(e),t.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}setPositions(e){let t;e instanceof Float32Array?t=e:Array.isArray(e)&&(t=new Float32Array(e));const s=new Td(t,6,1);return this.setAttribute("instanceStart",new _r(s,3,0)),this.setAttribute("instanceEnd",new _r(s,3,3)),this.computeBoundingBox(),this.computeBoundingSphere(),this}setColors(e){let t;e instanceof Float32Array?t=e:Array.isArray(e)&&(t=new Float32Array(e));const s=new Td(t,6,1);return this.setAttribute("instanceColorStart",new _r(s,3,0)),this.setAttribute("instanceColorEnd",new _r(s,3,3)),this}fromWireframeGeometry(e){return this.setPositions(e.attributes.position.array),this}fromEdgesGeometry(e){return this.setPositions(e.attributes.position.array),this}fromMesh(e){return this.fromWireframeGeometry(new hT(e.geometry)),this}fromLineSegments(e){const t=e.geometry;return this.setPositions(t.attributes.position.array),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Ge);const e=this.attributes.instanceStart,t=this.attributes.instanceEnd;e!==void 0&&t!==void 0&&(this.boundingBox.setFromBufferAttribute(e),Xg.setFromBufferAttribute(t),this.boundingBox.union(Xg))}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new qn),this.boundingBox===null&&this.computeBoundingBox();const e=this.attributes.instanceStart,t=this.attributes.instanceEnd;if(e!==void 0&&t!==void 0){const s=this.boundingSphere.center;this.boundingBox.getCenter(s);let n=0;for(let r=0,o=e.count;r<o;r++)Rh.fromBufferAttribute(e,r),n=Math.max(n,s.distanceToSquared(Rh)),Rh.fromBufferAttribute(t,r),n=Math.max(n,s.distanceToSquared(Rh));this.boundingSphere.radius=Math.sqrt(n),isNaN(this.boundingSphere.radius)&&console.error("THREE.LineSegmentsGeometry.computeBoundingSphere(): Computed radius is NaN. The instanced position data is likely to have NaN values.",this)}}toJSON(){}applyMatrix(e){return console.warn("THREE.LineSegmentsGeometry: applyMatrix() has been renamed to applyMatrix4()."),this.applyMatrix4(e)}};zh.line={worldUnits:{value:1},linewidth:{value:1},resolution:{value:new Ue(1,1)},dashOffset:{value:0},dashScale:{value:1},dashSize:{value:1},gapSize:{value:1}};Vh.line={uniforms:kf.merge([zh.common,zh.fog,zh.line]),vertexShader:`
		#include <common>
		#include <color_pars_vertex>
		#include <fog_pars_vertex>
		#include <logdepthbuf_pars_vertex>
		#include <clipping_planes_pars_vertex>

		uniform float linewidth;
		uniform vec2 resolution;

		attribute vec3 instanceStart;
		attribute vec3 instanceEnd;

		attribute vec3 instanceColorStart;
		attribute vec3 instanceColorEnd;

		#ifdef WORLD_UNITS

			varying vec4 worldPos;
			varying vec3 worldStart;
			varying vec3 worldEnd;

			#ifdef USE_DASH

				varying vec2 vUv;

			#endif

		#else

			varying vec2 vUv;

		#endif

		#ifdef USE_DASH

			uniform float dashScale;
			attribute float instanceDistanceStart;
			attribute float instanceDistanceEnd;
			varying float vLineDistance;

		#endif

		void trimSegment( const in vec4 start, inout vec4 end ) {

			// trim end segment so it terminates between the camera plane and the near plane

			// conservative estimate of the near plane
			float a = projectionMatrix[ 2 ][ 2 ]; // 3nd entry in 3th column
			float b = projectionMatrix[ 3 ][ 2 ]; // 3nd entry in 4th column
			float nearEstimate = - 0.5 * b / a;

			float alpha = ( nearEstimate - start.z ) / ( end.z - start.z );

			end.xyz = mix( start.xyz, end.xyz, alpha );

		}

		void main() {

			#ifdef USE_COLOR

				vColor.xyz = ( position.y < 0.5 ) ? instanceColorStart : instanceColorEnd;

			#endif

			#ifdef USE_DASH

				vLineDistance = ( position.y < 0.5 ) ? dashScale * instanceDistanceStart : dashScale * instanceDistanceEnd;
				vUv = uv;

			#endif

			float aspect = resolution.x / resolution.y;

			// camera space
			vec4 start = modelViewMatrix * vec4( instanceStart, 1.0 );
			vec4 end = modelViewMatrix * vec4( instanceEnd, 1.0 );

			#ifdef WORLD_UNITS

				worldStart = start.xyz;
				worldEnd = end.xyz;

			#else

				vUv = uv;

			#endif

			// special case for perspective projection, and segments that terminate either in, or behind, the camera plane
			// clearly the gpu firmware has a way of addressing this issue when projecting into ndc space
			// but we need to perform ndc-space calculations in the shader, so we must address this issue directly
			// perhaps there is a more elegant solution -- WestLangley

			bool perspective = ( projectionMatrix[ 2 ][ 3 ] == - 1.0 ); // 4th entry in the 3rd column

			if ( perspective ) {

				if ( start.z < 0.0 && end.z >= 0.0 ) {

					trimSegment( start, end );

				} else if ( end.z < 0.0 && start.z >= 0.0 ) {

					trimSegment( end, start );

				}

			}

			// clip space
			vec4 clipStart = projectionMatrix * start;
			vec4 clipEnd = projectionMatrix * end;

			// ndc space
			vec3 ndcStart = clipStart.xyz / clipStart.w;
			vec3 ndcEnd = clipEnd.xyz / clipEnd.w;

			// direction
			vec2 dir = ndcEnd.xy - ndcStart.xy;

			// account for clip-space aspect ratio
			dir.x *= aspect;
			dir = normalize( dir );

			#ifdef WORLD_UNITS

				vec3 worldDir = normalize( end.xyz - start.xyz );
				vec3 tmpFwd = normalize( mix( start.xyz, end.xyz, 0.5 ) );
				vec3 worldUp = normalize( cross( worldDir, tmpFwd ) );
				vec3 worldFwd = cross( worldDir, worldUp );
				worldPos = position.y < 0.5 ? start: end;

				// height offset
				float hw = linewidth * 0.5;
				worldPos.xyz += position.x < 0.0 ? hw * worldUp : - hw * worldUp;

				// don't extend the line if we're rendering dashes because we
				// won't be rendering the endcaps
				#ifndef USE_DASH

					// cap extension
					worldPos.xyz += position.y < 0.5 ? - hw * worldDir : hw * worldDir;

					// add width to the box
					worldPos.xyz += worldFwd * hw;

					// endcaps
					if ( position.y > 1.0 || position.y < 0.0 ) {

						worldPos.xyz -= worldFwd * 2.0 * hw;

					}

				#endif

				// project the worldpos
				vec4 clip = projectionMatrix * worldPos;

				// shift the depth of the projected points so the line
				// segments overlap neatly
				vec3 clipPose = ( position.y < 0.5 ) ? ndcStart : ndcEnd;
				clip.z = clipPose.z * clip.w;

			#else

				vec2 offset = vec2( dir.y, - dir.x );
				// undo aspect ratio adjustment
				dir.x /= aspect;
				offset.x /= aspect;

				// sign flip
				if ( position.x < 0.0 ) offset *= - 1.0;

				// endcaps
				if ( position.y < 0.0 ) {

					offset += - dir;

				} else if ( position.y > 1.0 ) {

					offset += dir;

				}

				// adjust for linewidth
				offset *= linewidth;

				// adjust for clip-space to screen-space conversion // maybe resolution should be based on viewport ...
				offset /= resolution.y;

				// select end
				vec4 clip = ( position.y < 0.5 ) ? clipStart : clipEnd;

				// back to clip space
				offset *= clip.w;

				clip.xy += offset;

			#endif

			gl_Position = clip;

			vec4 mvPosition = ( position.y < 0.5 ) ? start : end; // this is an approximation

			#include <logdepthbuf_vertex>
			#include <clipping_planes_vertex>
			#include <fog_vertex>

		}
		`,fragmentShader:`
		uniform vec3 diffuse;
		uniform float opacity;
		uniform float linewidth;

		#ifdef USE_DASH

			uniform float dashOffset;
			uniform float dashSize;
			uniform float gapSize;

		#endif

		varying float vLineDistance;

		#ifdef WORLD_UNITS

			varying vec4 worldPos;
			varying vec3 worldStart;
			varying vec3 worldEnd;

			#ifdef USE_DASH

				varying vec2 vUv;

			#endif

		#else

			varying vec2 vUv;

		#endif

		#include <common>
		#include <color_pars_fragment>
		#include <fog_pars_fragment>
		#include <logdepthbuf_pars_fragment>
		#include <clipping_planes_pars_fragment>

		vec2 closestLineToLine(vec3 p1, vec3 p2, vec3 p3, vec3 p4) {

			float mua;
			float mub;

			vec3 p13 = p1 - p3;
			vec3 p43 = p4 - p3;

			vec3 p21 = p2 - p1;

			float d1343 = dot( p13, p43 );
			float d4321 = dot( p43, p21 );
			float d1321 = dot( p13, p21 );
			float d4343 = dot( p43, p43 );
			float d2121 = dot( p21, p21 );

			float denom = d2121 * d4343 - d4321 * d4321;

			float numer = d1343 * d4321 - d1321 * d4343;

			mua = numer / denom;
			mua = clamp( mua, 0.0, 1.0 );
			mub = ( d1343 + d4321 * ( mua ) ) / d4343;
			mub = clamp( mub, 0.0, 1.0 );

			return vec2( mua, mub );

		}

		void main() {

			#include <clipping_planes_fragment>

			#ifdef USE_DASH

				if ( vUv.y < - 1.0 || vUv.y > 1.0 ) discard; // discard endcaps

				if ( mod( vLineDistance + dashOffset, dashSize + gapSize ) > dashSize ) discard; // todo - FIX

			#endif

			float alpha = opacity;

			#ifdef WORLD_UNITS

				// Find the closest points on the view ray and the line segment
				vec3 rayEnd = normalize( worldPos.xyz ) * 1e5;
				vec3 lineDir = worldEnd - worldStart;
				vec2 params = closestLineToLine( worldStart, worldEnd, vec3( 0.0, 0.0, 0.0 ), rayEnd );

				vec3 p1 = worldStart + lineDir * params.x;
				vec3 p2 = rayEnd * params.y;
				vec3 delta = p1 - p2;
				float len = length( delta );
				float norm = len / linewidth;

				#ifndef USE_DASH

					#ifdef USE_ALPHA_TO_COVERAGE

						float dnorm = fwidth( norm );
						alpha = 1.0 - smoothstep( 0.5 - dnorm, 0.5 + dnorm, norm );

					#else

						if ( norm > 0.5 ) {

							discard;

						}

					#endif

				#endif

			#else

				#ifdef USE_ALPHA_TO_COVERAGE

					// artifacts appear on some hardware if a derivative is taken within a conditional
					float a = vUv.x;
					float b = ( vUv.y > 0.0 ) ? vUv.y - 1.0 : vUv.y + 1.0;
					float len2 = a * a + b * b;
					float dlen = fwidth( len2 );

					if ( abs( vUv.y ) > 1.0 ) {

						alpha = 1.0 - smoothstep( 1.0 - dlen, 1.0 + dlen, len2 );

					}

				#else

					if ( abs( vUv.y ) > 1.0 ) {

						float a = vUv.x;
						float b = ( vUv.y > 0.0 ) ? vUv.y - 1.0 : vUv.y + 1.0;
						float len2 = a * a + b * b;

						if ( len2 > 1.0 ) discard;

					}

				#endif

			#endif

			vec4 diffuseColor = vec4( diffuse, alpha );

			#include <logdepthbuf_fragment>
			#include <color_fragment>

			gl_FragColor = vec4( diffuseColor.rgb, alpha );

			#include <tonemapping_fragment>
			#include <colorspace_fragment>
			#include <fog_fragment>
			#include <premultiplied_alpha_fragment>

		}
		`};let _l=class extends yt{constructor(e){super({type:"LineMaterial",uniforms:kf.clone(Vh.line.uniforms),vertexShader:Vh.line.vertexShader,fragmentShader:Vh.line.fragmentShader,clipping:!0}),this.isLineMaterial=!0,this.setValues(e)}get color(){return this.uniforms.diffuse.value}set color(e){this.uniforms.diffuse.value=e}get worldUnits(){return"WORLD_UNITS"in this.defines}set worldUnits(e){e===!0?this.defines.WORLD_UNITS="":delete this.defines.WORLD_UNITS}get linewidth(){return this.uniforms.linewidth.value}set linewidth(e){this.uniforms.linewidth&&(this.uniforms.linewidth.value=e)}get dashed(){return"USE_DASH"in this.defines}set dashed(e){e===!0!==this.dashed&&(this.needsUpdate=!0),e===!0?this.defines.USE_DASH="":delete this.defines.USE_DASH}get dashScale(){return this.uniforms.dashScale.value}set dashScale(e){this.uniforms.dashScale.value=e}get dashSize(){return this.uniforms.dashSize.value}set dashSize(e){this.uniforms.dashSize.value=e}get dashOffset(){return this.uniforms.dashOffset.value}set dashOffset(e){this.uniforms.dashOffset.value=e}get gapSize(){return this.uniforms.gapSize.value}set gapSize(e){this.uniforms.gapSize.value=e}get opacity(){return this.uniforms.opacity.value}set opacity(e){this.uniforms&&(this.uniforms.opacity.value=e)}get resolution(){return this.uniforms.resolution.value}set resolution(e){this.uniforms.resolution.value.copy(e)}get alphaToCoverage(){return"USE_ALPHA_TO_COVERAGE"in this.defines}set alphaToCoverage(e){this.defines&&(e===!0!==this.alphaToCoverage&&(this.needsUpdate=!0),e===!0?(this.defines.USE_ALPHA_TO_COVERAGE="",this.extensions.derivatives=!0):(delete this.defines.USE_ALPHA_TO_COVERAGE,this.extensions.derivatives=!1))}};const qg=new P,Zg=new P,ft=new Eo,pt=new Eo,Fi=new Eo,ld=new P,hd=new ce,mt=new Nt,Qg=new P,_h=new Ge,Ah=new qn,Oi=new Eo;let ki,Nn;function Kg(i,e,t){return Oi.set(0,0,-e,1).applyMatrix4(i.projectionMatrix),Oi.multiplyScalar(1/Oi.w),Oi.x=Nn/t.width,Oi.y=Nn/t.height,Oi.applyMatrix4(i.projectionMatrixInverse),Oi.multiplyScalar(1/Oi.w),Math.abs(Math.max(Oi.x,Oi.y))}function XA(i,e){const t=i.matrixWorld,s=i.geometry,n=s.attributes.instanceStart,r=s.attributes.instanceEnd,o=Math.min(s.instanceCount,n.count);for(let a=0,l=o;a<l;a++){mt.start.fromBufferAttribute(n,a),mt.end.fromBufferAttribute(r,a),mt.applyMatrix4(t);const h=new P,u=new P;ki.distanceSqToSegment(mt.start,mt.end,u,h),u.distanceTo(h)<Nn*.5&&e.push({point:u,pointOnLine:h,distance:ki.origin.distanceTo(u),object:i,face:null,faceIndex:a,uv:null,uv1:null})}}function qA(i,e,t){const s=e.projectionMatrix,n=i.material.resolution,r=i.matrixWorld,o=i.geometry,a=o.attributes.instanceStart,l=o.attributes.instanceEnd,h=Math.min(o.instanceCount,a.count),u=-e.near;ki.at(1,Fi),Fi.w=1,Fi.applyMatrix4(e.matrixWorldInverse),Fi.applyMatrix4(s),Fi.multiplyScalar(1/Fi.w),Fi.x*=n.x/2,Fi.y*=n.y/2,Fi.z=0,ld.copy(Fi),hd.multiplyMatrices(e.matrixWorldInverse,r);for(let c=0,d=h;c<d;c++){if(ft.fromBufferAttribute(a,c),pt.fromBufferAttribute(l,c),ft.w=1,pt.w=1,ft.applyMatrix4(hd),pt.applyMatrix4(hd),ft.z>u&&pt.z>u)continue;if(ft.z>u){const E=ft.z-pt.z,I=(ft.z-u)/E;ft.lerp(pt,I)}else if(pt.z>u){const E=pt.z-ft.z,I=(pt.z-u)/E;pt.lerp(ft,I)}ft.applyMatrix4(s),pt.applyMatrix4(s),ft.multiplyScalar(1/ft.w),pt.multiplyScalar(1/pt.w),ft.x*=n.x/2,ft.y*=n.y/2,pt.x*=n.x/2,pt.y*=n.y/2,mt.start.copy(ft),mt.start.z=0,mt.end.copy(pt),mt.end.z=0;const f=mt.closestPointToPointParameter(ld,!0);mt.at(f,Qg);const p=Un.lerp(ft.z,pt.z,f),m=p>=-1&&p<=1,g=ld.distanceTo(Qg)<Nn*.5;if(m&&g){mt.start.fromBufferAttribute(a,c),mt.end.fromBufferAttribute(l,c),mt.start.applyMatrix4(r),mt.end.applyMatrix4(r);const E=new P,I=new P;ki.distanceSqToSegment(mt.start,mt.end,I,E),t.push({point:I,pointOnLine:E,distance:ki.origin.distanceTo(I),object:i,face:null,faceIndex:c,uv:null,uv1:null})}}}let ZA=class extends ne{constructor(e=new Uv,t=new _l({color:Math.random()*16777215})){super(e,t),this.isLineSegments2=!0,this.type="LineSegments2"}computeLineDistances(){const e=this.geometry,t=e.attributes.instanceStart,s=e.attributes.instanceEnd,n=new Float32Array(2*t.count);for(let o=0,a=0,l=t.count;o<l;o++,a+=2)qg.fromBufferAttribute(t,o),Zg.fromBufferAttribute(s,o),n[a]=a===0?0:n[a-1],n[a+1]=n[a]+qg.distanceTo(Zg);const r=new Td(n,2,1);return e.setAttribute("instanceDistanceStart",new _r(r,1,0)),e.setAttribute("instanceDistanceEnd",new _r(r,1,1)),this}raycast(e,t){const s=this.material.worldUnits,n=e.camera;n===null&&!s&&console.error('LineSegments2: "Raycaster.camera" needs to be set in order to raycast against LineSegments2 while worldUnits is set to false.');const r=e.params.Line2!==void 0&&e.params.Line2.threshold||0;ki=e.ray;const o=this.matrixWorld,a=this.geometry,l=this.material;Nn=l.linewidth+r,a.boundingSphere===null&&a.computeBoundingSphere(),Ah.copy(a.boundingSphere).applyMatrix4(o);let h;if(s)h=Nn*.5;else{const c=Math.max(n.near,Ah.distanceToPoint(ki.origin));h=Kg(n,c,l.resolution)}if(Ah.radius+=h,ki.intersectsSphere(Ah)===!1)return;a.boundingBox===null&&a.computeBoundingBox(),_h.copy(a.boundingBox).applyMatrix4(o);let u;if(s)u=Nn*.5;else{const c=Math.max(n.near,_h.distanceToPoint(ki.origin));u=Kg(n,c,l.resolution)}_h.expandByScalar(u),ki.intersectsBox(_h)!==!1&&(s?XA(this,t):qA(this,n,t))}},yc=class extends Uv{constructor(){super(),this.isLineGeometry=!0,this.type="LineGeometry"}setPositions(e){const t=e.length-3,s=new Float32Array(2*t);for(let n=0;n<t;n+=3)s[2*n]=e[n],s[2*n+1]=e[n+1],s[2*n+2]=e[n+2],s[2*n+3]=e[n+3],s[2*n+4]=e[n+4],s[2*n+5]=e[n+5];return super.setPositions(s),this}setColors(e){const t=e.length-3,s=new Float32Array(2*t);for(let n=0;n<t;n+=3)s[2*n]=e[n],s[2*n+1]=e[n+1],s[2*n+2]=e[n+2],s[2*n+3]=e[n+3],s[2*n+4]=e[n+4],s[2*n+5]=e[n+5];return super.setColors(s),this}fromLine(e){const t=e.geometry;return this.setPositions(t.attributes.position.array),this}},kv=class extends ZA{constructor(e=new yc,t=new _l({color:Math.random()*16777215})){super(e,t),this.isLine2=!0,this.type="Line2"}};const Bv=class zv{constructor(e,t){R(this,"scene"),R(this,"onSelect",new Y),R(this,"type"),R(this,"selectCurve"),R(this,"selectPoints"),R(this,"hoverCurve"),R(this,"hoverPoints"),R(this,"caster",new $c),this.scene=e,this.type=t,this.hoverCurve=this.newCurve(.003,4473924,!1),this.hoverPoints=this.newPoints(5,4473924),this.selectCurve=this.newCurve(.005,16777215,!0),this.selectPoints=this.newPoints(7,16777215)}dispose(){this.selectCurve&&this.scene.remove(this.selectCurve),this.selectCurve.material.dispose(),this.selectCurve.geometry.dispose(),this.selectCurve=null,this.hoverCurve.material.dispose(),this.hoverCurve.geometry.dispose(),this.hoverCurve=null,this.hoverPoints.material.dispose(),this.hoverPoints.geometry.dispose(),this.selectPoints.material.dispose(),this.selectPoints.geometry.dispose(),this.scene=null}castRay(e,t,s,n){const r=new Ue,o=s.getBoundingClientRect();r.x=(e.clientX-o.left)/o.width*2-1,r.y=-((e.clientY-o.top)/o.height)*2+1,this.caster.setFromCamera(r,t);const a=this.caster.intersectObjects(n);return a.length?a[0]:null}select(e){this.highlight(e,this.selectCurve,this.selectPoints,!0),this.onSelect.trigger(e)}unSelect(){this.selectCurve.removeFromParent(),this.selectPoints.removeFromParent()}hover(e){this.highlight(e,this.hoverCurve,this.hoverPoints,!1)}unHover(){this.hoverCurve.removeFromParent(),this.hoverPoints.removeFromParent()}setResolution({x:e,y:t}){this.selectCurve.material.resolution.set(e/t,1),this.hoverCurve.material.resolution.set(e/t,1)}highlight(e,t,s,n){const{alignment:r}=e.curve;this.scene.add(t),this.scene.add(s);const o=[],a=[],l=[];for(const d of r[this.type]){const f=d.mesh.geometry.attributes.position;for(const E of f.array)o.push(E);if(n){let E;if(this.type==="absolute"){const{horizontal:v}=d.alignment;E=v[d.index].data.TYPE}else E=d.data.TYPE;const I=zv.settings.colors[E]||[1,1,1];for(let v=0;v<f.count;v++)a.push(...I)}const[p,m,g]=f.array;l.push(new P(p,m,g))}const h=o[o.length-3],u=o[o.length-2],c=o[o.length-1];l.push(new P(h,u,c)),o.length/3>t.geometry.attributes.position.count&&(t.geometry.dispose(),t.geometry=new yc),t.geometry.setPositions(o),n&&t.geometry.setColors(a),s.geometry.setFromPoints(l)}newCurve(e,t,s){const n=new yc,r=new _l({color:t,linewidth:e,vertexColors:s,worldUnits:!1,depthTest:!1}),o=new kv(n,r);return this.scene.add(o),o}newPoints(e,t){const s=new Ne,n=new Ct(new Float32Array,3);s.setAttribute("position",n);const r=new z1({size:e,color:t,sizeAttenuation:!1,depthTest:!1}),o=new V1(s,r);return o.frustumCulled=!1,this.scene.add(o),o}};R(Bv,"settings",{colors:{LINE:[213/255,0/255,255/255],CIRCULARARC:[0/255,46,255/255],CLOTHOID:[0/255,255/255,0/255],PARABOLICARC:[0/255,255/255,72/255],CONSTANTGRADIENT:[213/255,0/255,255/255]}});let Vv=Bv,QA=class extends kn{constructor(e=document.createElement("div")){super(),this.isCSS2DObject=!0,this.element=e,this.element.style.position="absolute",this.element.style.userSelect="none",this.element.setAttribute("draggable",!1),this.center=new Ue(.5,.5),this.addEventListener("removed",function(){this.traverse(function(t){t.element instanceof Element&&t.element.parentNode!==null&&t.element.parentNode.removeChild(t.element)})})}copy(e,t){return super.copy(e,t),this.element=e.element.cloneNode(!0),this.center=e.center,this}};const vr=new P,Jg=new ce,e0=new ce,t0=new P,i0=new P;let KA=class{constructor(e={}){const t=this;let s,n,r,o;const a={objects:new WeakMap},l=e.element!==void 0?e.element:document.createElement("div");l.style.overflow="hidden",this.domElement=l,this.getSize=function(){return{width:s,height:n}},this.render=function(f,p){f.matrixWorldAutoUpdate===!0&&f.updateMatrixWorld(),p.parent===null&&p.matrixWorldAutoUpdate===!0&&p.updateMatrixWorld(),Jg.copy(p.matrixWorldInverse),e0.multiplyMatrices(p.projectionMatrix,Jg),h(f,f,p),d(f)},this.setSize=function(f,p){s=f,n=p,r=s/2,o=n/2,l.style.width=f+"px",l.style.height=p+"px"};function h(f,p,m){if(f.isCSS2DObject){vr.setFromMatrixPosition(f.matrixWorld),vr.applyMatrix4(e0);const g=f.visible===!0&&vr.z>=-1&&vr.z<=1&&f.layers.test(m.layers)===!0;if(f.element.style.display=g===!0?"":"none",g===!0){f.onBeforeRender(t,p,m);const I=f.element;I.style.transform="translate("+-100*f.center.x+"%,"+-100*f.center.y+"%)translate("+(vr.x*r+r)+"px,"+(-vr.y*o+o)+"px)",I.parentNode!==l&&l.appendChild(I),f.onAfterRender(t,p,m)}const E={distanceToCameraSquared:u(m,f)};a.objects.set(f,E)}for(let g=0,E=f.children.length;g<E;g++)h(f.children[g],p,m)}function u(f,p){return t0.setFromMatrixPosition(f.matrixWorld),i0.setFromMatrixPosition(p.matrixWorld),t0.distanceToSquared(i0)}function c(f){const p=[];return f.traverse(function(m){m.isCSS2DObject&&p.push(m)}),p}function d(f){const p=c(f).sort(function(g,E){if(g.renderOrder!==E.renderOrder)return E.renderOrder-g.renderOrder;const I=a.objects.get(g).distanceToCameraSquared,v=a.objects.get(E).distanceToCameraSquared;return I-v}),m=p.length;for(let g=0,E=p.length;g<E;g++)p[g].element.style.zIndex=m-g}}},Pt=class{constructor(e,t,s){R(this,"three"),R(this,"world"),R(this,"onDisposed",new Y),this.world=e;let n;t?n=t:(n=document.createElement("div"),n.style.width="15px",n.style.height="15px",n.style.border="5px solid red"),this.three=new QA(n),(s||e.scene.three).add(this.three),this.visible=!0}set visible(e){this.three.visible=e}get visible(){return this.three.visible}toggleVisibility(){this.visible=!this.visible}dispose(){this.three.removeFromParent(),this.three.element.remove(),this.onDisposed.trigger(),this.onDisposed.reset()}},$v=class extends _R{constructor(e,t,s){super(e,t,s),R(this,"three2D",new KA),this.onAfterUpdate.add(()=>{if(this.onBeforeUpdate.trigger(this),!this.enabled||!this.currentWorld)return;const n=this.currentWorld.scene.three,r=this.currentWorld.camera.three;n instanceof Ks&&this.three2D.render(n,r)}),this.onDisposed.add(()=>{this.three2D.domElement.remove()}),this.onResize.add(({x:n,y:r})=>{this.three2D.setSize(n,r)}),this.setupHtmlRenderer(),this.resize()}setupHtmlRenderer(){this.three2D.domElement.style.position="absolute",this.three2D.domElement.style.top="0px",this.three2D.domElement.style.pointerEvents="none",this.container&&this.container.appendChild(this.three2D.domElement)}};const Hv=class Gv extends be{constructor(e){super(e),R(this,"onDisposed",new Y),R(this,"enabled",!0),R(this,"threshold",50),R(this,"autoCluster",!0),R(this,"list",new Map),R(this,"clusterLabels",new Set),R(this,"currentKeys",new Set),R(this,"_color","white"),R(this,"_markerKey",0),R(this,"_clusterKey",0),R(this,"_worldEvents",new Map),R(this,"_setupWorlds",new Set),e.add(Gv.uuid,this)}get color(){return this._color}set color(e){this._color=e;for(const[t,s]of this.list)for(const[n,r]of s)r.label.three.element.style.color=e}create(e,t,s,n=!1){this.setupEvents(e,!0);const r=this._markerKey.toString(),o=this.getWorldMarkerList(e);if(o.has(r))return;const a=document.createElement("span");a.innerHTML=t,a.style.color=this._color;const l=new Pt(e,a);return l.three.position.copy(s),o.set(r,{key:r,label:l,merged:!1,static:n}),this._markerKey++,r}delete(e){for(const[t,s]of this.list){const n=s.get(e);n&&n.label.dispose(),s.delete(e)}}getWorldMarkerList(e){return this.list.has(e.uuid)||this.list.set(e.uuid,new Map),this.list.get(e.uuid)}dispose(e){for(const[t,s]of this.list){const n=[...s.keys()];for(const r of n){const o=s.get(r);e&&o.type!==e||(o.label.dispose(),s.delete(r))}}if(!e){this.list.clear(),this._markerKey=0;for(const t of this.clusterLabels)t.label.dispose();this.clusterLabels.clear(),this._clusterKey=0,this.currentKeys.clear()}this.onDisposed.trigger()}setupEvents(e,t){if(t&&this._setupWorlds.has(e.uuid)||!e.camera.hasCameraControls())return;const s=this.getWorldEvent(e);e.camera.controls.removeEventListener("sleep",s),e.camera.controls.removeEventListener("rest",s),t&&(e.camera.controls.addEventListener("sleep",s),e.camera.controls.addEventListener("rest",s))}cluster(e){if(!this.autoCluster)return;this.resetMarkers();const t=this.list.get(e.uuid);if(t){for(const[s,n]of t)if(!n.merged&&!n.static){this.currentKeys.clear();for(const[r,o]of t)o.static||n.key!==o.key&&!o.merged&&this.distance(n.label,o.label)<this.threshold&&(this.currentKeys.add(o.key),o.merged=!0);if(this.currentKeys.size>0){this.currentKeys.add(n.key),n.merged=!0;const r=Array.from(this.currentKeys),o=this.getAveragePositionFromLabels(r),a=new Pt(n.label.world,this.createClusterElement(this._clusterKey.toString())),{element:l}=a.three;l.textContent=r.length.toString(),a.three.position.copy(o),this.clusterLabels.add({key:this._clusterKey.toString(),markerKeys:r,label:a}),this._clusterKey++}}this.removeMergeMarkers(e)}}getWorldEvent(e){if(!this._worldEvents.has(e.uuid)){const t=()=>{this.cluster(e)};this._worldEvents.set(e.uuid,t)}return this._worldEvents.get(e.uuid)}resetMarkers(){for(const[e,t]of this.list)for(const[s,n]of t)n.merged=!1;for(const e of this.clusterLabels)e.label.dispose();this.clusterLabels.clear(),this._clusterKey=0}removeMergeMarkers(e){const t=this.list.get(e.uuid);if(t){for(const[s,n]of t)n.merged?n.label.dispose():n.label.world.scene.three.add(n.label.three);for(const s of this.clusterLabels)if(s.markerKeys.length===1){for(const[n,r]of this.list){const o=r.get(s.markerKeys[0]);o&&(o.label.world.scene.three.add(o.label.three),o.merged=!1)}s.label.dispose(),this.clusterLabels.delete(s)}}}getAveragePositionFromLabels(e){const t=e.map(s=>{for(const[n,r]of this.list){const o=r.get(s);if(o)return o.label.three.position}return new P});return t.reduce((s,n)=>s.add(n),new P).divideScalar(t.length)}createClusterElement(e){const t=document.createElement("div");return t.textContent=e,t.style.color="#000000",t.style.background="#FFFFFF",t.style.fontSize="1.2rem",t.style.fontWeight="500",t.style.pointerEvents="auto",t.style.borderRadius="50%",t.style.padding="5px 11px",t.style.textAlign="center",t.style.cursor="pointer",t.addEventListener("pointerdown",()=>{this.navigateToCluster(e)}),t.addEventListener("pointerover",()=>{t.style.background="#BCF124"}),t.addEventListener("pointerout",()=>{t.style.background="#FFFFFF"}),t}getScreenPosition(e){const t=new P;if(!e.world.renderer)throw new Error("Renderer not found!");const s=e.three.position.clone();s.project(e.world.camera.three);const n=e.world.renderer.getSize();return t.x=s.x*n.x/2+n.x/2,t.y=-(s.y*n.y/2)+n.y/2,t}distance(e,t){const s=this.getScreenPosition(e),n=this.getScreenPosition(t),r=s.x-n.x,o=s.y-n.y,a=Math.sqrt(r*r+o*o)*.5;return a===0?this.threshold+1:a}navigateToCluster(e){const t=[],s=Array.from(this.clusterLabels).find(h=>h.key===e);if(!s)return;const n=s.label.world.camera;if(!n.hasCameraControls()){console.warn("Zoom to clusters only supported with Camera Controls!");return}for(const h of s.markerKeys)for(const[u,c]of this.list){const d=c.get(h);if(d){const{x:f,y:p,z:m}=d.label.three.position;t.push(f,p,m)}}s.label.dispose(),this.clusterLabels.delete(s);const r=new Ne,o=new Float32Array(t),a=new Ct(o,3);r.setAttribute("position",a);const l=new ne(r);l.geometry.computeBoundingSphere(),l.geometry.boundingSphere&&n.controls.fitToSphere(l,!0),r.dispose(),l.clear(),t.length=0}};R(Hv,"uuid","4079eb91-79b0-4ede-bcf2-15b837129236");let En=Hv;function JA(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var Ap={exports:{}};Ap.exports=gu;Ap.exports.default=gu;function gu(i,e,t){t=t||2;var s=e&&e.length,n=s?e[0]*t:i.length,r=Yv(i,0,n,t,!0),o=[];if(!r||r.next===r.prev)return o;var a,l,h,u,c,d,f;if(s&&(r=nM(i,e,r,t)),i.length>80*t){a=h=i[0],l=u=i[1];for(var p=t;p<n;p+=t)c=i[p],d=i[p+1],c<a&&(a=c),d<l&&(l=d),c>h&&(h=c),d>u&&(u=d);f=Math.max(h-a,u-l),f=f!==0?32767/f:0}return Za(r,o,t,a,l,f,0),o}function Yv(i,e,t,s,n){var r,o;if(n===df(i,e,t,s)>0)for(r=e;r<t;r+=s)o=s0(r,i[r],i[r+1],o);else for(r=t-s;r>=e;r-=s)o=s0(r,i[r],i[r+1],o);return o&&Eu(o,o.next)&&(Ka(o),o=o.next),o}function $n(i,e){if(!i)return i;e||(e=i);var t=i,s;do if(s=!1,!t.steiner&&(Eu(t,t.next)||Ke(t.prev,t,t.next)===0)){if(Ka(t),t=e=t.prev,t===t.next)break;s=!0}else t=t.next;while(s||t!==e);return e}function Za(i,e,t,s,n,r,o){if(i){!o&&r&&hM(i,s,n,r);for(var a=i,l,h;i.prev!==i.next;){if(l=i.prev,h=i.next,r?tM(i,s,n,r):eM(i)){e.push(l.i/t|0),e.push(i.i/t|0),e.push(h.i/t|0),Ka(i),i=h.next,a=h.next;continue}if(i=h,i===a){o?o===1?(i=iM($n(i),e,t),Za(i,e,t,s,n,r,2)):o===2&&sM(i,e,t,s,n,r):Za($n(i),e,t,s,n,r,1);break}}}}function eM(i){var e=i.prev,t=i,s=i.next;if(Ke(e,t,s)>=0)return!1;for(var n=e.x,r=t.x,o=s.x,a=e.y,l=t.y,h=s.y,u=n<r?n<o?n:o:r<o?r:o,c=a<l?a<h?a:h:l<h?l:h,d=n>r?n>o?n:o:r>o?r:o,f=a>l?a>h?a:h:l>h?l:h,p=s.next;p!==e;){if(p.x>=u&&p.x<=d&&p.y>=c&&p.y<=f&&Fr(n,a,r,l,o,h,p.x,p.y)&&Ke(p.prev,p,p.next)>=0)return!1;p=p.next}return!0}function tM(i,e,t,s){var n=i.prev,r=i,o=i.next;if(Ke(n,r,o)>=0)return!1;for(var a=n.x,l=r.x,h=o.x,u=n.y,c=r.y,d=o.y,f=a<l?a<h?a:h:l<h?l:h,p=u<c?u<d?u:d:c<d?c:d,m=a>l?a>h?a:h:l>h?l:h,g=u>c?u>d?u:d:c>d?c:d,E=cf(f,p,e,t,s),I=cf(m,g,e,t,s),v=i.prevZ,b=i.nextZ;v&&v.z>=E&&b&&b.z<=I;){if(v.x>=f&&v.x<=m&&v.y>=p&&v.y<=g&&v!==n&&v!==o&&Fr(a,u,l,c,h,d,v.x,v.y)&&Ke(v.prev,v,v.next)>=0||(v=v.prevZ,b.x>=f&&b.x<=m&&b.y>=p&&b.y<=g&&b!==n&&b!==o&&Fr(a,u,l,c,h,d,b.x,b.y)&&Ke(b.prev,b,b.next)>=0))return!1;b=b.nextZ}for(;v&&v.z>=E;){if(v.x>=f&&v.x<=m&&v.y>=p&&v.y<=g&&v!==n&&v!==o&&Fr(a,u,l,c,h,d,v.x,v.y)&&Ke(v.prev,v,v.next)>=0)return!1;v=v.prevZ}for(;b&&b.z<=I;){if(b.x>=f&&b.x<=m&&b.y>=p&&b.y<=g&&b!==n&&b!==o&&Fr(a,u,l,c,h,d,b.x,b.y)&&Ke(b.prev,b,b.next)>=0)return!1;b=b.nextZ}return!0}function iM(i,e,t){var s=i;do{var n=s.prev,r=s.next.next;!Eu(n,r)&&jv(n,s,s.next,r)&&Qa(n,r)&&Qa(r,n)&&(e.push(n.i/t|0),e.push(s.i/t|0),e.push(r.i/t|0),Ka(s),Ka(s.next),s=i=r),s=s.next}while(s!==i);return $n(s)}function sM(i,e,t,s,n,r){var o=i;do{for(var a=o.next.next;a!==o.prev;){if(o.i!==a.i&&dM(o,a)){var l=Wv(o,a);o=$n(o,o.next),l=$n(l,l.next),Za(o,e,t,s,n,r,0),Za(l,e,t,s,n,r,0);return}a=a.next}o=o.next}while(o!==i)}function nM(i,e,t,s){var n=[],r,o,a,l,h;for(r=0,o=e.length;r<o;r++)a=e[r]*s,l=r<o-1?e[r+1]*s:i.length,h=Yv(i,a,l,s,!1),h===h.next&&(h.steiner=!0),n.push(uM(h));for(n.sort(rM),r=0;r<n.length;r++)t=oM(n[r],t);return t}function rM(i,e){return i.x-e.x}function oM(i,e){var t=aM(i,e);if(!t)return e;var s=Wv(t,i);return $n(s,s.next),$n(t,t.next)}function aM(i,e){var t=e,s=i.x,n=i.y,r=-1/0,o;do{if(n<=t.y&&n>=t.next.y&&t.next.y!==t.y){var a=t.x+(n-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(a<=s&&a>r&&(r=a,o=t.x<t.next.x?t:t.next,a===s))return o}t=t.next}while(t!==e);if(!o)return null;var l=o,h=o.x,u=o.y,c=1/0,d;t=o;do s>=t.x&&t.x>=h&&s!==t.x&&Fr(n<u?s:r,n,h,u,n<u?r:s,n,t.x,t.y)&&(d=Math.abs(n-t.y)/(s-t.x),Qa(t,i)&&(d<c||d===c&&(t.x>o.x||t.x===o.x&&lM(o,t)))&&(o=t,c=d)),t=t.next;while(t!==l);return o}function lM(i,e){return Ke(i.prev,i,e.prev)<0&&Ke(e.next,i,i.next)<0}function hM(i,e,t,s){var n=i;do n.z===0&&(n.z=cf(n.x,n.y,e,t,s)),n.prevZ=n.prev,n.nextZ=n.next,n=n.next;while(n!==i);n.prevZ.nextZ=null,n.prevZ=null,cM(n)}function cM(i){var e,t,s,n,r,o,a,l,h=1;do{for(t=i,i=null,r=null,o=0;t;){for(o++,s=t,a=0,e=0;e<h&&(a++,s=s.nextZ,!!s);e++);for(l=h;a>0||l>0&&s;)a!==0&&(l===0||!s||t.z<=s.z)?(n=t,t=t.nextZ,a--):(n=s,s=s.nextZ,l--),r?r.nextZ=n:i=n,n.prevZ=r,r=n;t=s}r.nextZ=null,h*=2}while(o>1);return i}function cf(i,e,t,s,n){return i=(i-t)*n|0,e=(e-s)*n|0,i=(i|i<<8)&16711935,i=(i|i<<4)&252645135,i=(i|i<<2)&858993459,i=(i|i<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,i|e<<1}function uM(i){var e=i,t=i;do(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next;while(e!==i);return t}function Fr(i,e,t,s,n,r,o,a){return(n-o)*(e-a)>=(i-o)*(r-a)&&(i-o)*(s-a)>=(t-o)*(e-a)&&(t-o)*(r-a)>=(n-o)*(s-a)}function dM(i,e){return i.next.i!==e.i&&i.prev.i!==e.i&&!fM(i,e)&&(Qa(i,e)&&Qa(e,i)&&pM(i,e)&&(Ke(i.prev,i,e.prev)||Ke(i,e.prev,e))||Eu(i,e)&&Ke(i.prev,i,i.next)>0&&Ke(e.prev,e,e.next)>0)}function Ke(i,e,t){return(e.y-i.y)*(t.x-e.x)-(e.x-i.x)*(t.y-e.y)}function Eu(i,e){return i.x===e.x&&i.y===e.y}function jv(i,e,t,s){var n=Fh(Ke(i,e,t)),r=Fh(Ke(i,e,s)),o=Fh(Ke(t,s,i)),a=Fh(Ke(t,s,e));return!!(n!==r&&o!==a||n===0&&Mh(i,t,e)||r===0&&Mh(i,s,e)||o===0&&Mh(t,i,s)||a===0&&Mh(t,e,s))}function Mh(i,e,t){return e.x<=Math.max(i.x,t.x)&&e.x>=Math.min(i.x,t.x)&&e.y<=Math.max(i.y,t.y)&&e.y>=Math.min(i.y,t.y)}function Fh(i){return i>0?1:i<0?-1:0}function fM(i,e){var t=i;do{if(t.i!==i.i&&t.next.i!==i.i&&t.i!==e.i&&t.next.i!==e.i&&jv(t,t.next,i,e))return!0;t=t.next}while(t!==i);return!1}function Qa(i,e){return Ke(i.prev,i,i.next)<0?Ke(i,e,i.next)>=0&&Ke(i,i.prev,e)>=0:Ke(i,e,i.prev)<0||Ke(i,i.next,e)<0}function pM(i,e){var t=i,s=!1,n=(i.x+e.x)/2,r=(i.y+e.y)/2;do t.y>r!=t.next.y>r&&t.next.y!==t.y&&n<(t.next.x-t.x)*(r-t.y)/(t.next.y-t.y)+t.x&&(s=!s),t=t.next;while(t!==i);return s}function Wv(i,e){var t=new uf(i.i,i.x,i.y),s=new uf(e.i,e.x,e.y),n=i.next,r=e.prev;return i.next=e,e.prev=i,t.next=n,n.prev=t,s.next=t,t.prev=s,r.next=s,s.prev=r,s}function s0(i,e,t,s){var n=new uf(i,e,t);return s?(n.next=s.next,n.prev=s,s.next.prev=n,s.next=n):(n.prev=n,n.next=n),n}function Ka(i){i.next.prev=i.prev,i.prev.next=i.next,i.prevZ&&(i.prevZ.nextZ=i.nextZ),i.nextZ&&(i.nextZ.prevZ=i.prevZ)}function uf(i,e,t){this.i=i,this.x=e,this.y=t,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}gu.deviation=function(i,e,t,s){var n=e&&e.length,r=n?e[0]*t:i.length,o=Math.abs(df(i,0,r,t));if(n)for(var a=0,l=e.length;a<l;a++){var h=e[a]*t,u=a<l-1?e[a+1]*t:i.length;o-=Math.abs(df(i,h,u,t))}var c=0;for(a=0;a<s.length;a+=3){var d=s[a]*t,f=s[a+1]*t,p=s[a+2]*t;c+=Math.abs((i[d]-i[p])*(i[f+1]-i[d+1])-(i[d]-i[f])*(i[p+1]-i[d+1]))}return o===0&&c===0?0:Math.abs((c-o)/o)};function df(i,e,t,s){for(var n=0,r=e,o=t-s;r<t;r+=s)n+=(i[o]-i[r])*(i[r+1]+i[o+1]),o=r;return n}gu.flatten=function(i){for(var e=i[0][0].length,t={vertices:[],holes:[],dimensions:e},s=0,n=0;n<i.length;n++){for(var r=0;r<i[n].length;r++)for(var o=0;o<e;o++)t.vertices.push(i[n][r][o]);n>0&&(s+=i[n-1].length,t.holes.push(s))}return t};var mM=Ap.exports;const gM=JA(mM),EM={name:"CopyShader",uniforms:{tDiffuse:{value:null},opacity:{value:1}},vertexShader:`

		varying vec2 vUv;

		void main() {

			vUv = uv;
			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`

		uniform float opacity;

		uniform sampler2D tDiffuse;

		varying vec2 vUv;

		void main() {

			vec4 texel = texture2D( tDiffuse, vUv );
			gl_FragColor = opacity * texel;


		}`};let Ao=class{constructor(){this.isPass=!0,this.enabled=!0,this.needsSwap=!0,this.clear=!1,this.renderToScreen=!1}setSize(){}render(){console.error("THREE.Pass: .render() must be implemented in derived pass.")}dispose(){}};const IM=new Qs(-1,1,1,-1,0,1);class bM extends Ne{constructor(){super(),this.setAttribute("position",new Hr([-1,3,0,-1,-1,0,3,-1,0],3)),this.setAttribute("uv",new Hr([0,2,0,0,2,0],2))}}const vM=new bM;let Xv=class{constructor(e){this._mesh=new ne(vM,e)}dispose(){this._mesh.geometry.dispose()}render(e){e.render(this._mesh,IM)}get material(){return this._mesh.material}set material(e){this._mesh.material=e}},qv=class extends Ao{constructor(e,t){super(),this.textureID=t!==void 0?t:"tDiffuse",e instanceof yt?(this.uniforms=e.uniforms,this.material=e):e&&(this.uniforms=kf.clone(e.uniforms),this.material=new yt({name:e.name!==void 0?e.name:"unspecified",defines:Object.assign({},e.defines),uniforms:this.uniforms,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader})),this.fsQuad=new Xv(this.material)}render(e,t,s){this.uniforms[this.textureID]&&(this.uniforms[this.textureID].value=s.texture),this.fsQuad.material=this.material,this.renderToScreen?(e.setRenderTarget(null),this.fsQuad.render(e)):(e.setRenderTarget(t),this.clear&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),this.fsQuad.render(e))}dispose(){this.material.dispose(),this.fsQuad.dispose()}},n0=class extends Ao{constructor(e,t){super(),this.scene=e,this.camera=t,this.clear=!0,this.needsSwap=!1,this.inverse=!1}render(e,t,s){const n=e.getContext(),r=e.state;r.buffers.color.setMask(!1),r.buffers.depth.setMask(!1),r.buffers.color.setLocked(!0),r.buffers.depth.setLocked(!0);let o,a;this.inverse?(o=0,a=1):(o=1,a=0),r.buffers.stencil.setTest(!0),r.buffers.stencil.setOp(n.REPLACE,n.REPLACE,n.REPLACE),r.buffers.stencil.setFunc(n.ALWAYS,o,4294967295),r.buffers.stencil.setClear(a),r.buffers.stencil.setLocked(!0),e.setRenderTarget(s),this.clear&&e.clear(),e.render(this.scene,this.camera),e.setRenderTarget(t),this.clear&&e.clear(),e.render(this.scene,this.camera),r.buffers.color.setLocked(!1),r.buffers.depth.setLocked(!1),r.buffers.color.setMask(!0),r.buffers.depth.setMask(!0),r.buffers.stencil.setLocked(!1),r.buffers.stencil.setFunc(n.EQUAL,1,4294967295),r.buffers.stencil.setOp(n.KEEP,n.KEEP,n.KEEP),r.buffers.stencil.setLocked(!0)}};class yM extends Ao{constructor(){super(),this.needsSwap=!1}render(e){e.state.buffers.stencil.setLocked(!1),e.state.buffers.stencil.setTest(!1)}}class CM{constructor(e,t){if(this.renderer=e,this._pixelRatio=e.getPixelRatio(),t===void 0){const s=e.getSize(new Ue);this._width=s.width,this._height=s.height,t=new zi(this._width*this._pixelRatio,this._height*this._pixelRatio,{type:Jf}),t.texture.name="EffectComposer.rt1"}else this._width=t.width,this._height=t.height;this.renderTarget1=t,this.renderTarget2=t.clone(),this.renderTarget2.texture.name="EffectComposer.rt2",this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2,this.renderToScreen=!0,this.passes=[],this.copyPass=new qv(EM),this.copyPass.material.blending=cT,this.clock=new SE}swapBuffers(){const e=this.readBuffer;this.readBuffer=this.writeBuffer,this.writeBuffer=e}addPass(e){this.passes.push(e),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}insertPass(e,t){this.passes.splice(t,0,e),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}removePass(e){const t=this.passes.indexOf(e);t!==-1&&this.passes.splice(t,1)}isLastEnabledPass(e){for(let t=e+1;t<this.passes.length;t++)if(this.passes[t].enabled)return!1;return!0}render(e){e===void 0&&(e=this.clock.getDelta());const t=this.renderer.getRenderTarget();let s=!1;for(let n=0,r=this.passes.length;n<r;n++){const o=this.passes[n];if(o.enabled!==!1){if(o.renderToScreen=this.renderToScreen&&this.isLastEnabledPass(n),o.render(this.renderer,this.writeBuffer,this.readBuffer,e,s),o.needsSwap){if(s){const a=this.renderer.getContext(),l=this.renderer.state.buffers.stencil;l.setFunc(a.NOTEQUAL,1,4294967295),this.copyPass.render(this.renderer,this.writeBuffer,this.readBuffer,e),l.setFunc(a.EQUAL,1,4294967295)}this.swapBuffers()}n0!==void 0&&(o instanceof n0?s=!0:o instanceof yM&&(s=!1))}}this.renderer.setRenderTarget(t)}reset(e){if(e===void 0){const t=this.renderer.getSize(new Ue);this._pixelRatio=this.renderer.getPixelRatio(),this._width=t.width,this._height=t.height,e=this.renderTarget1.clone(),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.renderTarget1=e,this.renderTarget2=e.clone(),this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2}setSize(e,t){this._width=e,this._height=t;const s=this._width*this._pixelRatio,n=this._height*this._pixelRatio;this.renderTarget1.setSize(s,n),this.renderTarget2.setSize(s,n);for(let r=0;r<this.passes.length;r++)this.passes[r].setSize(s,n)}setPixelRatio(e){this._pixelRatio=e,this.setSize(this._width,this._height)}dispose(){this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.copyPass.dispose()}}class TM extends Ao{constructor(e,t,s=null,n=null,r=null){super(),this.scene=e,this.camera=t,this.overrideMaterial=s,this.clearColor=n,this.clearAlpha=r,this.clear=!0,this.clearDepth=!1,this.needsSwap=!1,this._oldClearColor=new He}render(e,t,s){const n=e.autoClear;e.autoClear=!1;let r,o;this.overrideMaterial!==null&&(o=this.scene.overrideMaterial,this.scene.overrideMaterial=this.overrideMaterial),this.clearColor!==null&&(e.getClearColor(this._oldClearColor),e.setClearColor(this.clearColor)),this.clearAlpha!==null&&(r=e.getClearAlpha(),e.setClearAlpha(this.clearAlpha)),this.clearDepth==!0&&e.clearDepth(),e.setRenderTarget(this.renderToScreen?null:s),this.clear===!0&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),e.render(this.scene,this.camera),this.clearColor!==null&&e.setClearColor(this._oldClearColor),this.clearAlpha!==null&&e.setClearAlpha(r),this.overrideMaterial!==null&&(this.scene.overrideMaterial=o),e.autoClear=n}}const Al=new Ne;Al.setAttribute("position",new Ct(new Float32Array([-1,-1,3,-1,-1,3]),2));Al.setAttribute("uv",new Ct(new Float32Array([0,0,2,0,0,2]),2));Al.boundingSphere=new qn;Al.computeBoundingSphere=function(){};const wM=new Qs;let Oh=class{constructor(e){this._mesh=new ne(Al,e),this._mesh.frustumCulled=!1}render(e){e.render(this._mesh,wM)}get material(){return this._mesh.material}set material(e){this._mesh.material=e}dispose(){this._mesh.material.dispose(),this._mesh.geometry.dispose()}};const SM={uniforms:{sceneDiffuse:{value:null},sceneDepth:{value:null},sceneNormal:{value:null},projMat:{value:new ce},viewMat:{value:new ce},projViewMat:{value:new ce},projectionMatrixInv:{value:new ce},viewMatrixInv:{value:new ce},cameraPos:{value:new P},resolution:{value:new Ue},time:{value:0},samples:{value:[]},samplesR:{value:[]},bluenoise:{value:null},distanceFalloff:{value:1},radius:{value:5},near:{value:.1},far:{value:1e3},logDepth:{value:!1},ortho:{value:!1},screenSpaceRadius:{value:!1}},vertexShader:`
varying vec2 vUv;
void main() {
  vUv = uv;
  gl_Position = vec4(position, 1);
}`,fragmentShader:`
    #define SAMPLES 16
    #define FSAMPLES 16.0
uniform sampler2D sceneDiffuse;
uniform sampler2D sceneNormal;
uniform highp sampler2D sceneDepth;
uniform mat4 projectionMatrixInv;
uniform mat4 viewMatrixInv;
uniform mat4 projMat;
uniform mat4 viewMat;
uniform mat4 projViewMat;
uniform vec3 cameraPos;
uniform vec2 resolution;
uniform float time;
uniform vec3[SAMPLES] samples;
uniform float[SAMPLES] samplesR;
uniform float radius;
uniform float distanceFalloff;
uniform float near;
uniform float far;
uniform bool logDepth;
uniform bool ortho;
uniform bool screenSpaceRadius;
uniform sampler2D bluenoise;
    varying vec2 vUv;
    highp float linearize_depth(highp float d, highp float zNear,highp float zFar)
    {
        return (zFar * zNear) / (zFar - d * (zFar - zNear));
    }
    highp float linearize_depth_ortho(highp float d, highp float nearZ, highp float farZ) {
      return nearZ + (farZ - nearZ) * d;
    }
    highp float linearize_depth_log(highp float d, highp float nearZ,highp float farZ) {
      float depth = pow(2.0, d * log2(farZ + 1.0)) - 1.0;
      float a = farZ / (farZ - nearZ);
      float b = farZ * nearZ / (nearZ - farZ);
      float linDepth = a + b / depth;
      return ortho ? linearize_depth_ortho(
        linDepth,
        nearZ,
        farZ
      ) :linearize_depth(linDepth, nearZ, farZ);
    }

    vec3 getWorldPosLog(vec3 posS) {
      vec2 uv = posS.xy;
      float z = posS.z;
      float nearZ =near;
      float farZ = far;
      float depth = pow(2.0, z * log2(farZ + 1.0)) - 1.0;
      float a = farZ / (farZ - nearZ);
      float b = farZ * nearZ / (nearZ - farZ);
      float linDepth = a + b / depth;
      vec4 clipVec = vec4(uv, linDepth, 1.0) * 2.0 - 1.0;
      vec4 wpos = viewMatrixInv * projectionMatrixInv * clipVec;
      return wpos.xyz / wpos.w;
    }
    vec3 getWorldPos(float depth, vec2 coord) {
      #ifdef LOGDEPTH
        return getWorldPosLog(vec3(coord, depth));
      #endif
      float z = depth * 2.0 - 1.0;
      vec4 clipSpacePosition = vec4(coord * 2.0 - 1.0, z, 1.0);
      vec4 viewSpacePosition = projectionMatrixInv * clipSpacePosition;
      // Perspective division
     vec4 worldSpacePosition = viewMatrixInv * viewSpacePosition;
     worldSpacePosition.xyz /= worldSpacePosition.w;
      return worldSpacePosition.xyz;
  }

  vec3 computeNormal(vec3 worldPos, vec2 vUv) {
    ivec2 p = ivec2(vUv * resolution);
    float c0 = texelFetch(sceneDepth, p, 0).x;
    float l2 = texelFetch(sceneDepth, p - ivec2(2, 0), 0).x;
    float l1 = texelFetch(sceneDepth, p - ivec2(1, 0), 0).x;
    float r1 = texelFetch(sceneDepth, p + ivec2(1, 0), 0).x;
    float r2 = texelFetch(sceneDepth, p + ivec2(2, 0), 0).x;
    float b2 = texelFetch(sceneDepth, p - ivec2(0, 2), 0).x;
    float b1 = texelFetch(sceneDepth, p - ivec2(0, 1), 0).x;
    float t1 = texelFetch(sceneDepth, p + ivec2(0, 1), 0).x;
    float t2 = texelFetch(sceneDepth, p + ivec2(0, 2), 0).x;

    float dl = abs((2.0 * l1 - l2) - c0);
    float dr = abs((2.0 * r1 - r2) - c0);
    float db = abs((2.0 * b1 - b2) - c0);
    float dt = abs((2.0 * t1 - t2) - c0);

    vec3 ce = getWorldPos(c0, vUv).xyz;

    vec3 dpdx = (dl < dr) ? ce - getWorldPos(l1, (vUv - vec2(1.0 / resolution.x, 0.0))).xyz
                          : -ce + getWorldPos(r1, (vUv + vec2(1.0 / resolution.x, 0.0))).xyz;
    vec3 dpdy = (db < dt) ? ce - getWorldPos(b1, (vUv - vec2(0.0, 1.0 / resolution.y))).xyz
                          : -ce + getWorldPos(t1, (vUv + vec2(0.0, 1.0 / resolution.y))).xyz;

    return normalize(cross(dpdx, dpdy));
}

void main() {
      vec4 diffuse = texture2D(sceneDiffuse, vUv);
      float depth = texture2D(sceneDepth, vUv).x;
      if (depth == 1.0) {
        gl_FragColor = vec4(vec3(1.0), 1.0);
        return;
      }
      vec3 worldPos = getWorldPos(depth, vUv);
    //  vec3 normal = texture2D(sceneNormal, vUv).rgb;//computeNormal(worldPos, vUv);
      #ifdef HALFRES
        vec3 normal = texture2D(sceneNormal, vUv).rgb;
      #else
        vec3 normal = computeNormal(worldPos, vUv);
      #endif
      vec4 noise = texture2D(bluenoise, gl_FragCoord.xy / 128.0);
      vec3 randomVec = normalize(noise.rgb * 2.0 - 1.0);
      vec3 tangent = normalize(randomVec - normal * dot(randomVec, normal));
      vec3 bitangent = cross(normal, tangent);
      mat3 tbn = mat3(tangent, bitangent, normal);
      float occluded = 0.0;
      float totalWeight = 0.0;
     /* float radiusScreen = distance(
        worldPos,
        getWorldPos(depth, vUv + 
          vec2(48.0, 0.0) / resolution)
      );/*vUv.x < 0.5 ? radius : min(distance(
        worldPos,
        getWorldPos(depth, vUv + 
          vec2(100.0, 0.0) / resolution)
      ), radius);
      float distanceFalloffScreen = radiusScreen * 0.2;*/
      float radiusToUse = screenSpaceRadius ? distance(
        worldPos,
        getWorldPos(depth, vUv +
          vec2(radius, 0.0) / resolution)
      ) : radius;
      float distanceFalloffToUse =screenSpaceRadius ?
          radiusToUse * distanceFalloff
      : distanceFalloff;
      float bias = (0.1 / near) * fwidth(distance(worldPos, cameraPos)) / radiusToUse;
      for(float i = 0.0; i < FSAMPLES; i++) {
        vec3 sampleDirection = 
        tbn * 
        samples[int(i)];
        ;
        float moveAmt = samplesR[int(mod(i + noise.a * FSAMPLES, FSAMPLES))];
        vec3 samplePos = worldPos + radiusToUse * moveAmt * sampleDirection;
        vec4 offset = projViewMat * vec4(samplePos, 1.0);
        offset.xyz /= offset.w;
        offset.xyz = offset.xyz * 0.5 + 0.5;
        float sampleDepth = textureLod(sceneDepth, offset.xy, 0.0).x;
        /*float distSample = logDepth ? linearize_depth_log(sampleDepth, near, far) 
         (ortho ?  linearize_depth_ortho(sampleDepth, near, far) : linearize_depth(sampleDepth, near, far));*/
        #ifdef LOGDEPTH
        float distSample = linearize_depth_log(sampleDepth, near, far);
        #else
        float distSample = ortho ? linearize_depth_ortho(sampleDepth, near, far) : linearize_depth(sampleDepth, near, far);
        #endif
        float distWorld = ortho ? linearize_depth_ortho(offset.z, near, far) : linearize_depth(offset.z, near, far);
        float rangeCheck = smoothstep(0.0, 1.0, distanceFalloffToUse / (abs(distSample - distWorld)));
        vec2 diff = gl_FragCoord.xy - ( offset.xy * resolution);
        float weight = dot(sampleDirection, normal);
          occluded += rangeCheck * weight * 
            (distSample + bias
               < distWorld ? 1.0 : 0.0) * (
          (dot(
            diff,
            diff
             
            ) < 1.0 || (sampleDepth == depth) || (
              offset.x < 0.0 || offset.x > 1.0 || offset.y < 0.0 || offset.y > 1.0
            ) ? 0.0 : 1.0)
          );
          totalWeight += weight;
      }
      float occ = clamp(1.0 - occluded / totalWeight, 0.0, 1.0);
      gl_FragColor = vec4(0.5 + 0.5 * normal, occ);
}`},xM={uniforms:{sceneDiffuse:{value:null},sceneDepth:{value:null},tDiffuse:{value:null},projMat:{value:new ce},viewMat:{value:new ce},projectionMatrixInv:{value:new ce},viewMatrixInv:{value:new ce},cameraPos:{value:new P},resolution:{value:new Ue},color:{value:new P(0,0,0)},blueNoise:{value:null},downsampledDepth:{value:null},time:{value:0},intensity:{value:10},renderMode:{value:0},gammaCorrection:{value:!1},logDepth:{value:!1},ortho:{value:!1},near:{value:.1},far:{value:1e3},screenSpaceRadius:{value:!1},radius:{value:0},distanceFalloff:{value:1}},vertexShader:`
		varying vec2 vUv;
		void main() {
			vUv = uv;
			gl_Position = vec4(position, 1);
		}`,fragmentShader:`
		uniform sampler2D sceneDiffuse;
    uniform sampler2D sceneDepth;
    uniform sampler2D downsampledDepth;
    uniform sampler2D tDiffuse;
    uniform sampler2D blueNoise;
    uniform vec2 resolution;
    uniform vec3 color;
    uniform mat4 projectionMatrixInv;
    uniform mat4 viewMatrixInv;
    uniform float intensity;
    uniform float renderMode;
    uniform float near;
    uniform float far;
    uniform bool gammaCorrection;
    uniform bool logDepth;
    uniform bool ortho;
    uniform bool screenSpaceRadius;
    uniform float radius;
    uniform float distanceFalloff;
    varying vec2 vUv;
    highp float linearize_depth(highp float d, highp float zNear,highp float zFar)
    {
        return (zFar * zNear) / (zFar - d * (zFar - zNear));
    }
    highp float linearize_depth_ortho(highp float d, highp float nearZ, highp float farZ) {
      return nearZ + (farZ - nearZ) * d;
    }
    highp float linearize_depth_log(highp float d, highp float nearZ,highp float farZ) {
      float depth = pow(2.0, d * log2(farZ + 1.0)) - 1.0;
      float a = farZ / (farZ - nearZ);
      float b = farZ * nearZ / (nearZ - farZ);
      float linDepth = a + b / depth;
      return ortho ? linearize_depth_ortho(
        linDepth,
        nearZ,
        farZ
      ) :linearize_depth(linDepth, nearZ, farZ);
    }
    vec3 getWorldPosLog(vec3 posS) {
        vec2 uv = posS.xy;
        float z = posS.z;
        float nearZ =near;
        float farZ = far;
        float depth = pow(2.0, z * log2(farZ + 1.0)) - 1.0;
        float a = farZ / (farZ - nearZ);
        float b = farZ * nearZ / (nearZ - farZ);
        float linDepth = a + b / depth;
        vec4 clipVec = vec4(uv, linDepth, 1.0) * 2.0 - 1.0;
        vec4 wpos = viewMatrixInv * projectionMatrixInv * clipVec;
        return wpos.xyz / wpos.w;
      }
      vec3 getWorldPos(float depth, vec2 coord) {
       // if (logDepth) {
        #ifdef LOGDEPTH
          return getWorldPosLog(vec3(coord, depth));
        #endif
      //  }
        float z = depth * 2.0 - 1.0;
        vec4 clipSpacePosition = vec4(coord * 2.0 - 1.0, z, 1.0);
        vec4 viewSpacePosition = projectionMatrixInv * clipSpacePosition;
        // Perspective division
       vec4 worldSpacePosition = viewMatrixInv * viewSpacePosition;
       worldSpacePosition.xyz /= worldSpacePosition.w;
        return worldSpacePosition.xyz;
    }
  
    vec3 computeNormal(vec3 worldPos, vec2 vUv) {
      ivec2 p = ivec2(vUv * resolution);
      float c0 = texelFetch(sceneDepth, p, 0).x;
      float l2 = texelFetch(sceneDepth, p - ivec2(2, 0), 0).x;
      float l1 = texelFetch(sceneDepth, p - ivec2(1, 0), 0).x;
      float r1 = texelFetch(sceneDepth, p + ivec2(1, 0), 0).x;
      float r2 = texelFetch(sceneDepth, p + ivec2(2, 0), 0).x;
      float b2 = texelFetch(sceneDepth, p - ivec2(0, 2), 0).x;
      float b1 = texelFetch(sceneDepth, p - ivec2(0, 1), 0).x;
      float t1 = texelFetch(sceneDepth, p + ivec2(0, 1), 0).x;
      float t2 = texelFetch(sceneDepth, p + ivec2(0, 2), 0).x;
  
      float dl = abs((2.0 * l1 - l2) - c0);
      float dr = abs((2.0 * r1 - r2) - c0);
      float db = abs((2.0 * b1 - b2) - c0);
      float dt = abs((2.0 * t1 - t2) - c0);
  
      vec3 ce = getWorldPos(c0, vUv).xyz;
  
      vec3 dpdx = (dl < dr) ? ce - getWorldPos(l1, (vUv - vec2(1.0 / resolution.x, 0.0))).xyz
                            : -ce + getWorldPos(r1, (vUv + vec2(1.0 / resolution.x, 0.0))).xyz;
      vec3 dpdy = (db < dt) ? ce - getWorldPos(b1, (vUv - vec2(0.0, 1.0 / resolution.y))).xyz
                            : -ce + getWorldPos(t1, (vUv + vec2(0.0, 1.0 / resolution.y))).xyz;
  
      return normalize(cross(dpdx, dpdy));
  }

    #include <common>
    #include <dithering_pars_fragment>
    void main() {
        //vec4 texel = texture2D(tDiffuse, vUv);//vec3(0.0);
        vec4 sceneTexel = texture2D(sceneDiffuse, vUv);

        #ifdef HALFRES 
        float depth = texture2D(
            sceneDepth,
            vUv
        ).x;
        vec4 texel;
        if (depth == 1.0) {
            texel = vec4(0.0, 0.0, 0.0, 1.0);
        } else {
        vec3 worldPos = getWorldPos(depth, vUv);
        vec3 normal = computeNormal(getWorldPos(depth, vUv), vUv);
       // vec4 texel = texture2D(tDiffuse, vUv);
       // Find closest depth;
       float totalWeight = 0.0;
       float radiusToUse = screenSpaceRadius ? distance(
        worldPos,
        getWorldPos(depth, vUv +
          vec2(radius, 0.0) / resolution)
      ) : radius;
      float distanceFalloffToUse =screenSpaceRadius ?
          radiusToUse * distanceFalloff
      : distanceFalloff;
        for(float x = -1.0; x <= 1.0; x++) {
            for(float y = -1.0; y <= 1.0; y++) {
                vec2 offset = vec2(x, y);
                ivec2 p = ivec2(
                    (vUv * resolution * 0.5) + offset
                );
                vec2 pUv = vec2(p) / (resolution * 0.5);
                float sampleDepth = texelFetch(downsampledDepth,p, 0).x;
                vec4 sampleInfo = texelFetch(tDiffuse, p, 0);
                vec3 normalSample = sampleInfo.xyz * 2.0 - 1.0;
                vec3 worldPosSample = getWorldPos(sampleDepth, pUv);
                float tangentPlaneDist = abs(dot(worldPos - worldPosSample, normal));
                float rangeCheck = exp(-1.0 * tangentPlaneDist * (1.0 / distanceFalloffToUse)) * max(dot(normal, normalSample), 0.0);
                float weight = rangeCheck;
                totalWeight += weight;
                texel += sampleInfo * weight;
            }
        }
        if (totalWeight == 0.0) {
            texel = texture2D(tDiffuse, vUv);
        } else {
            texel /= totalWeight;
        }
    }
        #else
        vec4 texel = texture2D(tDiffuse, vUv);
        #endif

     
        float finalAo = pow(texel.a, intensity);
        if (renderMode == 0.0) {
            gl_FragColor = vec4( mix(sceneTexel.rgb, color * sceneTexel.rgb, 1.0 - finalAo), sceneTexel.a);
        } else if (renderMode == 1.0) {
            gl_FragColor = vec4( mix(vec3(1.0), color * sceneTexel.rgb, 1.0 - finalAo), sceneTexel.a);
        } else if (renderMode == 2.0) {
            gl_FragColor = vec4( sceneTexel.rgb, sceneTexel.a);
        } else if (renderMode == 3.0) {
            if (vUv.x < 0.5) {
                gl_FragColor = vec4( sceneTexel.rgb, sceneTexel.a);
            } else if (abs(vUv.x - 0.5) < 1.0 / resolution.x) {
                gl_FragColor = vec4(1.0);
            } else {
                gl_FragColor = vec4( mix(sceneTexel.rgb, color * sceneTexel.rgb, 1.0 - finalAo), sceneTexel.a);
            }
        } else if (renderMode == 4.0) {
            if (vUv.x < 0.5) {
                gl_FragColor = vec4( sceneTexel.rgb, sceneTexel.a);
            } else if (abs(vUv.x - 0.5) < 1.0 / resolution.x) {
                gl_FragColor = vec4(1.0);
            } else {
                gl_FragColor = vec4( mix(vec3(1.0), color * sceneTexel.rgb, 1.0 - finalAo), sceneTexel.a);
            }
        }
        #include <dithering_fragment>
        if (gammaCorrection) {
            gl_FragColor = LinearTosRGB(gl_FragColor);
        }
    }
    `},RM={uniforms:{sceneDiffuse:{value:null},sceneDepth:{value:null},tDiffuse:{value:null},projMat:{value:new ce},viewMat:{value:new ce},projectionMatrixInv:{value:new ce},viewMatrixInv:{value:new ce},cameraPos:{value:new P},resolution:{value:new Ue},time:{value:0},r:{value:5},blueNoise:{value:null},radius:{value:12},worldRadius:{value:5},index:{value:0},poissonDisk:{value:[]},distanceFalloff:{value:1},near:{value:.1},far:{value:1e3},logDepth:{value:!1},screenSpaceRadius:{value:!1}},vertexShader:`
		varying vec2 vUv;
		void main() {
			vUv = uv;
			gl_Position = vec4(position, 1.0);
		}`,fragmentShader:`
		uniform sampler2D sceneDiffuse;
    uniform highp sampler2D sceneDepth;
    uniform sampler2D tDiffuse;
    uniform sampler2D blueNoise;
    uniform mat4 projectionMatrixInv;
    uniform mat4 viewMatrixInv;
    uniform vec2 resolution;
    uniform float r;
    uniform float radius;
     uniform float worldRadius;
    uniform float index;
     uniform float near;
     uniform float far;
     uniform float distanceFalloff;
     uniform bool logDepth;
     uniform bool screenSpaceRadius;
    varying vec2 vUv;

    highp float linearize_depth(highp float d, highp float zNear,highp float zFar)
    {
        highp float z_n = 2.0 * d - 1.0;
        return 2.0 * zNear * zFar / (zFar + zNear - z_n * (zFar - zNear));
    }
    highp float linearize_depth_log(highp float d, highp float nearZ,highp float farZ) {
     float depth = pow(2.0, d * log2(farZ + 1.0)) - 1.0;
     float a = farZ / (farZ - nearZ);
     float b = farZ * nearZ / (nearZ - farZ);
     float linDepth = a + b / depth;
     return linearize_depth(linDepth, nearZ, farZ);
   }
   highp float linearize_depth_ortho(highp float d, highp float nearZ, highp float farZ) {
     return nearZ + (farZ - nearZ) * d;
   }
   vec3 getWorldPosLog(vec3 posS) {
     vec2 uv = posS.xy;
     float z = posS.z;
     float nearZ =near;
     float farZ = far;
     float depth = pow(2.0, z * log2(farZ + 1.0)) - 1.0;
     float a = farZ / (farZ - nearZ);
     float b = farZ * nearZ / (nearZ - farZ);
     float linDepth = a + b / depth;
     vec4 clipVec = vec4(uv, linDepth, 1.0) * 2.0 - 1.0;
     vec4 wpos = viewMatrixInv * projectionMatrixInv * clipVec;
     return wpos.xyz / wpos.w;
   }
    vec3 getWorldPos(float depth, vec2 coord) {
     #ifdef LOGDEPTH
          return getWorldPosLog(vec3(coord, depth));
     #endif
        
        float z = depth * 2.0 - 1.0;
        vec4 clipSpacePosition = vec4(coord * 2.0 - 1.0, z, 1.0);
        vec4 viewSpacePosition = projectionMatrixInv * clipSpacePosition;
        // Perspective division
       vec4 worldSpacePosition = viewMatrixInv * viewSpacePosition;
       worldSpacePosition.xyz /= worldSpacePosition.w;
        return worldSpacePosition.xyz;
    }
    #include <common>
    #define NUM_SAMPLES 16
    uniform vec2 poissonDisk[NUM_SAMPLES];
    void main() {
        const float pi = 3.14159;
        vec2 texelSize = vec2(1.0 / resolution.x, 1.0 / resolution.y);
        vec2 uv = vUv;
        vec4 data = texture2D(tDiffuse, vUv);
        float occlusion = data.a;
        float baseOcc = data.a;
        vec3 normal = data.rgb * 2.0 - 1.0;
        float count = 1.0;
        float d = texture2D(sceneDepth, vUv).x;
        vec3 worldPos = getWorldPos(d, vUv);
        float size = radius;
        float angle;
        if (index == 0.0) {
             angle = texture2D(blueNoise, gl_FragCoord.xy / 128.0).x * PI2;
        } else if (index == 1.0) {
             angle = texture2D(blueNoise, gl_FragCoord.xy / 128.0).y * PI2;
        } else if (index == 2.0) {
             angle = texture2D(blueNoise, gl_FragCoord.xy / 128.0).z * PI2;
        } else {
             angle = texture2D(blueNoise, gl_FragCoord.xy / 128.0).w * PI2;
        }

        mat2 rotationMatrix = mat2(cos(angle), -sin(angle), sin(angle), cos(angle));
        float radiusToUse = screenSpaceRadius ? distance(
          worldPos,
          getWorldPos(d, vUv +
            vec2(worldRadius, 0.0) / resolution)
        ) : worldRadius;
        float distanceFalloffToUse =screenSpaceRadius ?
            radiusToUse * distanceFalloff
        : distanceFalloff;


        for(int i = 0; i < NUM_SAMPLES; i++) {
            vec2 offset = (rotationMatrix * poissonDisk[i]) * texelSize * size;
            vec4 dataSample = texture2D(tDiffuse, uv + offset);
            float occSample = dataSample.a;
            vec3 normalSample = dataSample.rgb * 2.0 - 1.0;
            float dSample = texture2D(sceneDepth, uv + offset).x;
            vec3 worldPosSample = getWorldPos(dSample, uv + offset);
            float tangentPlaneDist = abs(dot(worldPos - worldPosSample, normal));
            float rangeCheck = exp(-1.0 * tangentPlaneDist * (1.0 / distanceFalloffToUse)) * max(dot(normal, normalSample), 0.0) * (1.0 - abs(occSample - baseOcc));
            occlusion += occSample * rangeCheck;
            count += rangeCheck;
        }
        occlusion /= count;
        gl_FragColor = vec4(0.5 + 0.5 * normal, occlusion);
    }
    `},_M={uniforms:{sceneDepth:{value:null},resolution:{value:new Ue},near:{value:.1},far:{value:1e3},viewMatrixInv:{value:new ce},projectionMatrixInv:{value:new ce},logDepth:{value:!1}},vertexShader:`
    varying vec2 vUv;
    void main() {
        vUv = uv;
        gl_Position = vec4(position, 1);
    }`,fragmentShader:`
    uniform sampler2D sceneDepth;
    uniform vec2 resolution;
    uniform float near;
    uniform float far;
    uniform bool logDepth;
    uniform mat4 viewMatrixInv;
    uniform mat4 projectionMatrixInv;
    varying vec2 vUv;
    layout(location = 1) out vec4 gNormal;
    vec3 getWorldPosLog(vec3 posS) {
        vec2 uv = posS.xy;
        float z = posS.z;
        float nearZ =near;
        float farZ = far;
        float depth = pow(2.0, z * log2(farZ + 1.0)) - 1.0;
        float a = farZ / (farZ - nearZ);
        float b = farZ * nearZ / (nearZ - farZ);
        float linDepth = a + b / depth;
        vec4 clipVec = vec4(uv, linDepth, 1.0) * 2.0 - 1.0;
        vec4 wpos = viewMatrixInv * projectionMatrixInv * clipVec;
        return wpos.xyz / wpos.w;
      }
      vec3 getWorldPos(float depth, vec2 coord) {
        if (logDepth) {
          return getWorldPosLog(vec3(coord, depth));
        }
        float z = depth * 2.0 - 1.0;
        vec4 clipSpacePosition = vec4(coord * 2.0 - 1.0, z, 1.0);
        vec4 viewSpacePosition = projectionMatrixInv * clipSpacePosition;
        // Perspective division
       vec4 worldSpacePosition = viewMatrixInv * viewSpacePosition;
       worldSpacePosition.xyz /= worldSpacePosition.w;
        return worldSpacePosition.xyz;
    }
  
    vec3 computeNormal(vec3 worldPos, vec2 vUv) {
      ivec2 p = ivec2(vUv * resolution);
      float c0 = texelFetch(sceneDepth, p, 0).x;
      float l2 = texelFetch(sceneDepth, p - ivec2(2, 0), 0).x;
      float l1 = texelFetch(sceneDepth, p - ivec2(1, 0), 0).x;
      float r1 = texelFetch(sceneDepth, p + ivec2(1, 0), 0).x;
      float r2 = texelFetch(sceneDepth, p + ivec2(2, 0), 0).x;
      float b2 = texelFetch(sceneDepth, p - ivec2(0, 2), 0).x;
      float b1 = texelFetch(sceneDepth, p - ivec2(0, 1), 0).x;
      float t1 = texelFetch(sceneDepth, p + ivec2(0, 1), 0).x;
      float t2 = texelFetch(sceneDepth, p + ivec2(0, 2), 0).x;
  
      float dl = abs((2.0 * l1 - l2) - c0);
      float dr = abs((2.0 * r1 - r2) - c0);
      float db = abs((2.0 * b1 - b2) - c0);
      float dt = abs((2.0 * t1 - t2) - c0);
  
      vec3 ce = getWorldPos(c0, vUv).xyz;
  
      vec3 dpdx = (dl < dr) ? ce - getWorldPos(l1, (vUv - vec2(1.0 / resolution.x, 0.0))).xyz
                            : -ce + getWorldPos(r1, (vUv + vec2(1.0 / resolution.x, 0.0))).xyz;
      vec3 dpdy = (db < dt) ? ce - getWorldPos(b1, (vUv - vec2(0.0, 1.0 / resolution.y))).xyz
                            : -ce + getWorldPos(t1, (vUv + vec2(0.0, 1.0 / resolution.y))).xyz;
  
      return normalize(cross(dpdx, dpdy));
  }
    void main() {
        vec2 uv = vUv - vec2(0.5) / resolution;
        vec2 pixelSize = vec2(1.0) / resolution;
        vec2[] uvSamples = vec2[4](
            uv,
            uv + vec2(pixelSize.x, 0.0),
            uv + vec2(0.0, pixelSize.y),
            uv + pixelSize
        );
        float depth00 = texture2D(sceneDepth, uvSamples[0]).r;
        float depth10 = texture2D(sceneDepth, uvSamples[1]).r;
        float depth01 = texture2D(sceneDepth, uvSamples[2]).r;
        float depth11 = texture2D(sceneDepth, uvSamples[3]).r;
        float minDepth = min(min(depth00, depth10), min(depth01, depth11));
        float maxDepth = max(max(depth00, depth10), max(depth01, depth11));
        float targetDepth = minDepth;
        // Checkerboard pattern to avoid artifacts
        if (mod(gl_FragCoord.x + gl_FragCoord.y, 2.0) > 0.5) { 
            targetDepth = maxDepth;
        }
        int chosenIndex = 0;
        float[] samples = float[4](depth00, depth10, depth01, depth11);
        for(int i = 0; i < 4; ++i) {
            if (samples[i] == targetDepth) {
                chosenIndex = i;
                break;
            }
        }
        gl_FragColor = vec4(samples[chosenIndex], 0.0, 0.0, 1.0);
        gNormal = vec4(computeNormal(
            getWorldPos(samples[chosenIndex], uvSamples[chosenIndex]), uvSamples[chosenIndex]
        ), 0.0);
       /* float[] samples = float[4](depth00, depth10, depth01, depth11);
        float c = 0.25 * (depth00 + depth10 + depth01 + depth11);
        float[] distances = float[4](depth00, depth10, depth01, depth11);
        float maxDistance = max(max(distances[0], distances[1]), max(distances[2], distances[3]));

        int remaining[3];
        int rejected[3];
        int i, j, k;

        for(i = 0, j = 0, k = 0; i < 4; ++i) {
            if (distances[i] < maxDistance) {
                remaining[j++] = i;
            } else {
                rejected[k++] = i;
            }
        }
        for(;j < 3;++j) {
            remaining[j] = rejected[--k];
        }
        vec3 s = vec3(
            samples[remaining[0]],
            samples[remaining[1]],
            samples[remaining[2]]
        );
        c = (s.x + s.y + s.z) / 3.0;

        distances[0] = abs(c - s.x);
        distances[1] = abs(c - s.y);
        distances[2] = abs(c - s.z);

        float minDistance = min(min(distances[0], distances[1]), distances[2]);

        for(i = 0; i < 3; ++i) {
            if (distances[i] == minDistance) {
                break;
            }
        }*/
      /*  gl_FragColor = vec4(samples[remaining[i]], 0.0, 0.0, 0.0);
        gNormal = vec4(computeNormal(
            getWorldPos(samples[remaining[i]], uvSamples[remaining[i]]), uvSamples[remaining[i]]
        ), 0.0);*/
    }`};var Zv="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";Uint8Array.from(atob(Zv),i=>i.charCodeAt(0));const AM=Uint8Array.from(atob(Zv),i=>i.charCodeAt(0));function Qv(i,e,t){if(e.getQueryParameter(i,e.QUERY_RESULT_AVAILABLE)){const s=e.getQueryParameter(i,e.QUERY_RESULT)/1e6;t.lastTime=s}else setTimeout(()=>{Qv(i,e,t)},1)}class MM extends Ao{constructor(e,t,s=512,n=512){super(),this.width=s,this.height=n,this.clear=!0,this.camera=t,this.scene=e,this.configuration=new Proxy({aoSamples:16,aoRadius:5,denoiseSamples:8,denoiseRadius:12,distanceFalloff:1,intensity:5,denoiseIterations:2,renderMode:0,color:new He(0,0,0),gammaCorrection:!0,logarithmicDepthBuffer:!1,screenSpaceRadius:!1,halfRes:!1,depthAwareUpsampling:!0},{set:(r,o,a)=>{const l=r[o];return r[o]=a,o==="aoSamples"&&l!==a&&this.configureAOPass(this.configuration.logarithmicDepthBuffer),o==="denoiseSamples"&&l!==a&&this.configureDenoisePass(this.configuration.logarithmicDepthBuffer),o==="halfRes"&&l!==a&&(this.configureAOPass(this.configuration.logarithmicDepthBuffer),this.configureHalfResTargets(),this.configureEffectCompositer(this.configuration.logarithmicDepthBuffer),this.setSize(this.width,this.height)),o==="depthAwareUpsampling"&&l!==a&&this.configureEffectCompositer(this.configuration.logarithmicDepthBuffer),!0}}),this.samples=[],this.samplesR=[],this.samplesDenoise=[],this.configureEffectCompositer(this.configuration.logarithmicDepthBuffer),this.configureSampleDependentPasses(),this.configureHalfResTargets(),this.beautyRenderTarget=new zi(this.width,this.height,{minFilter:Go,magFilter:ss}),this.beautyRenderTarget.depthTexture=new uT(this.width,this.height,dT),this.beautyRenderTarget.depthTexture.format=fT,this.writeTargetInternal=new zi(this.width,this.height,{minFilter:Go,magFilter:Go,depthBuffer:!1}),this.readTargetInternal=new zi(this.width,this.height,{minFilter:Go,magFilter:Go,depthBuffer:!1}),this.bluenoise=new pT(AM,128,128),this.bluenoise.colorSpace=mT,this.bluenoise.wrapS=um,this.bluenoise.wrapT=um,this.bluenoise.minFilter=ss,this.bluenoise.magFilter=ss,this.bluenoise.needsUpdate=!0,this.lastTime=0,this._r=new Ue,this._c=new He}configureHalfResTargets(){this.configuration.halfRes?(this.depthDownsampleTarget=new gT(this.width/2,this.height/2,2),this.depthDownsampleTarget.texture[0].format=ET,this.depthDownsampleTarget.texture[0].type=IT,this.depthDownsampleTarget.texture[0].minFilter=ss,this.depthDownsampleTarget.texture[0].magFilter=ss,this.depthDownsampleTarget.texture[0].depthBuffer=!1,this.depthDownsampleTarget.texture[1].format=NE,this.depthDownsampleTarget.texture[1].type=Jf,this.depthDownsampleTarget.texture[1].minFilter=ss,this.depthDownsampleTarget.texture[1].magFilter=ss,this.depthDownsampleTarget.texture[1].depthBuffer=!1,this.depthDownsampleQuad=new Oh(new yt(_M))):(this.depthDownsampleTarget&&(this.depthDownsampleTarget.dispose(),this.depthDownsampleTarget=null),this.depthDownsampleQuad&&(this.depthDownsampleQuad.dispose(),this.depthDownsampleQuad=null))}configureSampleDependentPasses(){this.configureAOPass(this.configuration.logarithmicDepthBuffer),this.configureDenoisePass(this.configuration.logarithmicDepthBuffer)}configureAOPass(e=!1){this.samples=this.generateHemisphereSamples(this.configuration.aoSamples),this.samplesR=this.generateHemisphereSamplesR(this.configuration.aoSamples);const t={...SM};t.fragmentShader=t.fragmentShader.replace("16",this.configuration.aoSamples).replace("16.0",this.configuration.aoSamples+".0"),e&&(t.fragmentShader=`#define LOGDEPTH
`+t.fragmentShader),this.configuration.halfRes&&(t.fragmentShader=`#define HALFRES
`+t.fragmentShader),this.effectShaderQuad?(this.effectShaderQuad.material.dispose(),this.effectShaderQuad.material=new yt(t)):this.effectShaderQuad=new Oh(new yt(t))}configureDenoisePass(e=!1){this.samplesDenoise=this.generateDenoiseSamples(this.configuration.denoiseSamples,11);const t={...RM};t.fragmentShader=t.fragmentShader.replace("16",this.configuration.denoiseSamples),e&&(t.fragmentShader=`#define LOGDEPTH
`+t.fragmentShader),this.poissonBlurQuad?(this.poissonBlurQuad.material.dispose(),this.poissonBlurQuad.material=new yt(t)):this.poissonBlurQuad=new Oh(new yt(t))}configureEffectCompositer(e=!1){const t={...xM};e&&(t.fragmentShader=`#define LOGDEPTH
`+t.fragmentShader),this.configuration.halfRes&&this.configuration.depthAwareUpsampling&&(t.fragmentShader=`#define HALFRES
`+t.fragmentShader),this.effectCompositerQuad?(this.effectCompositerQuad.material.dispose(),this.effectCompositerQuad.material=new yt(t)):this.effectCompositerQuad=new Oh(new yt(t))}generateHemisphereSamples(e){const t=[];for(let s=0;s<e;s++){const n=2.399963*s,r=Math.sqrt(s+.5)/Math.sqrt(e),o=r*Math.cos(n),a=r*Math.sin(n),l=Math.sqrt(1-(o*o+a*a));t.push(new P(o,a,l))}return t}generateHemisphereSamplesR(e){let t=[];for(let s=0;s<e;s++)t.push((s+1)/e);return t}generateDenoiseSamples(e,t){const s=2*Math.PI*t/e,n=1/e,r=n,o=[];let a=n,l=0;for(let h=0;h<e;h++)o.push(new Ue(Math.cos(l),Math.sin(l)).multiplyScalar(Math.pow(a,.75))),a+=r,l+=s;return o}setSize(e,t){this.width=e,this.height=t;const s=this.configuration.halfRes?.5:1;this.beautyRenderTarget.setSize(e,t),this.writeTargetInternal.setSize(e*s,t*s),this.readTargetInternal.setSize(e*s,t*s),this.configuration.halfRes&&this.depthDownsampleTarget.setSize(e*s,t*s)}render(e,t,s,n,r){e.capabilities.logarithmicDepthBuffer!==this.configuration.logarithmicDepthBuffer&&(this.configuration.logarithmicDepthBuffer=e.capabilities.logarithmicDepthBuffer,this.configureAOPass(this.configuration.logarithmicDepthBuffer),this.configureDenoisePass(this.configuration.logarithmicDepthBuffer),this.configureEffectCompositer(this.configuration.logarithmicDepthBuffer));let o,a,l;this.debugMode&&(o=e.getContext(),a=o.getExtension("EXT_disjoint_timer_query_webgl2"),a===null&&(console.error("EXT_disjoint_timer_query_webgl2 not available, disabling debug mode."),this.debugMode=!1)),e.setRenderTarget(this.beautyRenderTarget),e.render(this.scene,this.camera),this.debugMode&&(l=o.createQuery(),o.beginQuery(a.TIME_ELAPSED_EXT,l));const h=e.xr.enabled;e.xr.enabled=!1,this.camera.updateMatrixWorld(),this._r.set(this.width,this.height);let u=this.configuration.aoRadius;this.configuration.halfRes&&this.configuration.screenSpaceRadius&&(u*=.5),this.configuration.halfRes&&(e.setRenderTarget(this.depthDownsampleTarget),this.depthDownsampleQuad.material.uniforms.sceneDepth.value=this.beautyRenderTarget.depthTexture,this.depthDownsampleQuad.material.uniforms.resolution.value=this._r,this.depthDownsampleQuad.material.uniforms.near.value=this.camera.near,this.depthDownsampleQuad.material.uniforms.far.value=this.camera.far,this.depthDownsampleQuad.material.uniforms.projectionMatrixInv.value=this.camera.projectionMatrixInverse,this.depthDownsampleQuad.material.uniforms.viewMatrixInv.value=this.camera.matrixWorld,this.depthDownsampleQuad.material.uniforms.logDepth.value=this.configuration.logarithmicDepthBuffer,this.depthDownsampleQuad.render(e)),this.effectShaderQuad.material.uniforms.sceneDiffuse.value=this.beautyRenderTarget.texture,this.effectShaderQuad.material.uniforms.sceneDepth.value=this.configuration.halfRes?this.depthDownsampleTarget.texture[0]:this.beautyRenderTarget.depthTexture,this.effectShaderQuad.material.uniforms.sceneNormal.value=this.configuration.halfRes?this.depthDownsampleTarget.texture[1]:null,this.effectShaderQuad.material.uniforms.projMat.value=this.camera.projectionMatrix,this.effectShaderQuad.material.uniforms.viewMat.value=this.camera.matrixWorldInverse,this.effectShaderQuad.material.uniforms.projViewMat.value=this.camera.projectionMatrix.clone().multiply(this.camera.matrixWorldInverse.clone()),this.effectShaderQuad.material.uniforms.projectionMatrixInv.value=this.camera.projectionMatrixInverse,this.effectShaderQuad.material.uniforms.viewMatrixInv.value=this.camera.matrixWorld,this.effectShaderQuad.material.uniforms.cameraPos.value=this.camera.position,this.effectShaderQuad.material.uniforms.resolution.value=this.configuration.halfRes?this._r.clone().multiplyScalar(.5).floor():this._r,this.effectShaderQuad.material.uniforms.time.value=performance.now()/1e3,this.effectShaderQuad.material.uniforms.samples.value=this.samples,this.effectShaderQuad.material.uniforms.samplesR.value=this.samplesR,this.effectShaderQuad.material.uniforms.bluenoise.value=this.bluenoise,this.effectShaderQuad.material.uniforms.radius.value=u,this.effectShaderQuad.material.uniforms.distanceFalloff.value=this.configuration.distanceFalloff,this.effectShaderQuad.material.uniforms.near.value=this.camera.near,this.effectShaderQuad.material.uniforms.far.value=this.camera.far,this.effectShaderQuad.material.uniforms.logDepth.value=e.capabilities.logarithmicDepthBuffer,this.effectShaderQuad.material.uniforms.ortho.value=this.camera.isOrthographicCamera,this.effectShaderQuad.material.uniforms.screenSpaceRadius.value=this.configuration.screenSpaceRadius,e.setRenderTarget(this.writeTargetInternal),this.effectShaderQuad.render(e);for(let c=0;c<this.configuration.denoiseIterations;c++)[this.writeTargetInternal,this.readTargetInternal]=[this.readTargetInternal,this.writeTargetInternal],this.poissonBlurQuad.material.uniforms.tDiffuse.value=this.readTargetInternal.texture,this.poissonBlurQuad.material.uniforms.sceneDepth.value=this.configuration.halfRes?this.depthDownsampleTarget.texture[0]:this.beautyRenderTarget.depthTexture,this.poissonBlurQuad.material.uniforms.projMat.value=this.camera.projectionMatrix,this.poissonBlurQuad.material.uniforms.viewMat.value=this.camera.matrixWorldInverse,this.poissonBlurQuad.material.uniforms.projectionMatrixInv.value=this.camera.projectionMatrixInverse,this.poissonBlurQuad.material.uniforms.viewMatrixInv.value=this.camera.matrixWorld,this.poissonBlurQuad.material.uniforms.cameraPos.value=this.camera.position,this.poissonBlurQuad.material.uniforms.resolution.value=this.configuration.halfRes?this._r.clone().multiplyScalar(.5).floor():this._r,this.poissonBlurQuad.material.uniforms.time.value=performance.now()/1e3,this.poissonBlurQuad.material.uniforms.blueNoise.value=this.bluenoise,this.poissonBlurQuad.material.uniforms.radius.value=this.configuration.denoiseRadius*(this.configuration.halfRes?.5:1),this.poissonBlurQuad.material.uniforms.worldRadius.value=u,this.poissonBlurQuad.material.uniforms.distanceFalloff.value=this.configuration.distanceFalloff,this.poissonBlurQuad.material.uniforms.index.value=c,this.poissonBlurQuad.material.uniforms.poissonDisk.value=this.samplesDenoise,this.poissonBlurQuad.material.uniforms.near.value=this.camera.near,this.poissonBlurQuad.material.uniforms.far.value=this.camera.far,this.poissonBlurQuad.material.uniforms.logDepth.value=e.capabilities.logarithmicDepthBuffer,this.poissonBlurQuad.material.uniforms.screenSpaceRadius.value=this.configuration.screenSpaceRadius,e.setRenderTarget(this.writeTargetInternal),this.poissonBlurQuad.render(e);this.effectCompositerQuad.material.uniforms.sceneDiffuse.value=this.beautyRenderTarget.texture,this.effectCompositerQuad.material.uniforms.sceneDepth.value=this.beautyRenderTarget.depthTexture,this.effectCompositerQuad.material.uniforms.near.value=this.camera.near,this.effectCompositerQuad.material.uniforms.far.value=this.camera.far,this.effectCompositerQuad.material.uniforms.projectionMatrixInv.value=this.camera.projectionMatrixInverse,this.effectCompositerQuad.material.uniforms.viewMatrixInv.value=this.camera.matrixWorld,this.effectCompositerQuad.material.uniforms.logDepth.value=e.capabilities.logarithmicDepthBuffer,this.effectCompositerQuad.material.uniforms.ortho.value=this.camera.isOrthographicCamera,this.effectCompositerQuad.material.uniforms.downsampledDepth.value=this.configuration.halfRes?this.depthDownsampleTarget.texture[0]:this.beautyRenderTarget.depthTexture,this.effectCompositerQuad.material.uniforms.resolution.value=this._r,this.effectCompositerQuad.material.uniforms.blueNoise.value=this.bluenoise,this.effectCompositerQuad.material.uniforms.intensity.value=this.configuration.intensity,this.effectCompositerQuad.material.uniforms.renderMode.value=this.configuration.renderMode,this.effectCompositerQuad.material.uniforms.screenSpaceRadius.value=this.configuration.screenSpaceRadius,this.effectCompositerQuad.material.uniforms.radius.value=u,this.effectCompositerQuad.material.uniforms.distanceFalloff.value=this.configuration.distanceFalloff,this.effectCompositerQuad.material.uniforms.gammaCorrection.value=this.configuration.gammaCorrection,this.effectCompositerQuad.material.uniforms.tDiffuse.value=this.writeTargetInternal.texture,this.effectCompositerQuad.material.uniforms.color.value=this._c.copy(this.configuration.color).convertSRGBToLinear(),e.setRenderTarget(this.renderToScreen?null:t),this.effectCompositerQuad.render(e),this.debugMode&&(o.endQuery(a.TIME_ELAPSED_EXT),Qv(l,o,this)),e.xr.enabled=h}enableDebugMode(){this.debugMode=!0}disableDebugMode(){this.debugMode=!1}setDisplayMode(e){this.configuration.renderMode=["Combined","AO","No AO","Split","Split AO"].indexOf(e)}setQualityMode(e){e==="Performance"?(this.configuration.aoSamples=8,this.configuration.denoiseSamples=4,this.configuration.denoiseRadius=12):e==="Low"?(this.configuration.aoSamples=16,this.configuration.denoiseSamples=4,this.configuration.denoiseRadius=12):e==="Medium"?(this.configuration.aoSamples=16,this.configuration.denoiseSamples=8,this.configuration.denoiseRadius=12):e==="High"?(this.configuration.aoSamples=64,this.configuration.denoiseSamples=8,this.configuration.denoiseRadius=6):e==="Ultra"&&(this.configuration.aoSamples=64,this.configuration.denoiseSamples=16,this.configuration.denoiseRadius=6)}}const FM={name:"GammaCorrectionShader",uniforms:{tDiffuse:{value:null}},vertexShader:`

		varying vec2 vUv;

		void main() {

			vUv = uv;
			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`

		uniform sampler2D tDiffuse;

		varying vec2 vUv;

		void main() {

			vec4 tex = texture2D( tDiffuse, vUv );

			gl_FragColor = sRGBTransferOETF( tex );

		}`};function OM(){return new yt({side:2,clipping:!0,uniforms:{},vertexShader:`
    varying vec4 vColor;
    
    #include <clipping_planes_pars_vertex>
  
    void main() {
       #include <begin_vertex>
    
       vec4 absPosition = vec4(position, 1.0);
       vec3 trueNormal = normal;
       
       #ifdef USE_INSTANCING
          absPosition = instanceMatrix * absPosition;
          trueNormal = (instanceMatrix * vec4(normal, 0.)).xyz;
       #endif
       
       absPosition = modelMatrix * absPosition;
       trueNormal = (normalize(modelMatrix * vec4(trueNormal, 0.))).xyz;
       
       vec3 planePosition = absPosition.xyz / 40.;
       float d = abs(dot(trueNormal, planePosition));
       vColor = vec4(abs(trueNormal), d);
       gl_Position = projectionMatrix * viewMatrix * absPosition;
       
       #include <project_vertex>
       #include <clipping_planes_vertex>
    }
    `,fragmentShader:`
    varying vec4 vColor;
    
    #include <clipping_planes_pars_fragment>
  
    void main() {
      #include <clipping_planes_fragment>
      gl_FragColor = vColor;
    }
    `})}function NM(){return new yt({side:2,clipping:!0,uniforms:{},vertexShader:`
    varying vec3 vCameraPosition;
    varying vec3 vPosition;
    varying vec3 vNormal;
    
    #include <clipping_planes_pars_vertex>
  
    void main() {
       #include <begin_vertex>
       
       vec4 absPosition = vec4(position, 1.0);
       vNormal = normal;
       
       #ifdef USE_INSTANCING
          absPosition = instanceMatrix * absPosition;
          vNormal = (instanceMatrix * vec4(normal, 0.)).xyz;
       #endif
       
       absPosition = modelMatrix * absPosition;
       vNormal = (normalize(modelMatrix * vec4(vNormal, 0.))).xyz;
       
       gl_Position = projectionMatrix * viewMatrix * absPosition;
       
       vCameraPosition = cameraPosition;
       vPosition = absPosition.xyz;
       
       #include <project_vertex>
       #include <clipping_planes_vertex>
    }
    `,fragmentShader:`
    varying vec3 vCameraPosition;
    varying vec3 vPosition;
    varying vec3 vNormal;
    
    #include <clipping_planes_pars_fragment>
  
    void main() {
      #include <clipping_planes_fragment>
      vec3 cameraPixelVec = normalize(vCameraPosition - vPosition);
      float difference = abs(dot(vNormal, cameraPixelVec));
      
      // This achieves a double gloss effect: when the surface is perpendicular and when it's parallel
      difference = abs((difference * 2.) - 1.);
      
      gl_FragColor = vec4(difference, difference, difference, 1.);
    }
    `})}class PM extends Ao{constructor(e,t,s,n,r){if(super(),R(this,"components"),R(this,"resolution"),R(this,"renderScene"),R(this,"renderCamera"),R(this,"fsQuad"),R(this,"normalOverrideMaterial"),R(this,"glossOverrideMaterial"),R(this,"planeBuffer"),R(this,"glossBuffer"),R(this,"outlineBuffer"),R(this,"excludedMeshes",[]),R(this,"outlinedMeshes",{}),R(this,"outlineScene",new Ks),R(this,"_outlineEnabled",!1),R(this,"_lineColor",10066329),R(this,"_opacity",.4),R(this,"_tolerance",3),R(this,"_glossEnabled",!0),R(this,"_glossExponent",1.9),R(this,"_minGloss",-.1),R(this,"_maxGloss",.1),!s.renderer)throw new Error("The given world must have a renderer!");this.components=t,this.renderScene=n,this.renderCamera=r,this.resolution=new Ue(e.x,e.y),this.fsQuad=new Xv,this.fsQuad.material=this.createOutlinePostProcessMaterial(),this.planeBuffer=this.newRenderTarget(),this.glossBuffer=this.newRenderTarget(),this.outlineBuffer=this.newRenderTarget();const o=OM();o.clippingPlanes=s.renderer.clippingPlanes,this.normalOverrideMaterial=o;const a=NM();a.clippingPlanes=s.renderer.clippingPlanes,this.glossOverrideMaterial=a}get lineColor(){return this._lineColor}set lineColor(e){this._lineColor=e,this.fsQuad.material.uniforms.lineColor.value.set(e)}get tolerance(){return this._tolerance}set tolerance(e){this._tolerance=e;const t=this.fsQuad.material;t.uniforms.tolerance.value=e}get opacity(){return this._opacity}set opacity(e){this._opacity=e;const t=this.fsQuad.material;t.uniforms.opacity.value=e}get glossEnabled(){return this._glossEnabled}set glossEnabled(e){if(e===this._glossEnabled)return;this._glossEnabled=e;const t=this.fsQuad.material;t.uniforms.glossEnabled.value=e?1:0}get glossExponent(){return this._glossExponent}set glossExponent(e){this._glossExponent=e;const t=this.fsQuad.material;t.uniforms.glossExponent.value=e}get minGloss(){return this._minGloss}set minGloss(e){this._minGloss=e;const t=this.fsQuad.material;t.uniforms.minGloss.value=e}get maxGloss(){return new jt().color.convertLinearToSRGB(),this._maxGloss}set maxGloss(e){this._maxGloss=e;const t=this.fsQuad.material;t.uniforms.maxGloss.value=e}get outlineEnabled(){return this._outlineEnabled}set outlineEnabled(e){if(e===this._outlineEnabled)return;this._outlineEnabled=e;const t=this.fsQuad.material;t.uniforms.outlineEnabled.value=e?1:0}async dispose(){this.planeBuffer.dispose(),this.glossBuffer.dispose(),this.outlineBuffer.dispose(),this.normalOverrideMaterial.dispose(),this.glossOverrideMaterial.dispose(),this.fsQuad.material.dispose(),this.fsQuad.dispose(),this.excludedMeshes=[],this.outlineScene.children=[];const e=this.components.get(Gi);for(const t in this.outlinedMeshes){const s=this.outlinedMeshes[t];for(const n of s.meshes){e.destroy(n,!0,!0);const r=n;r.fragment&&r.fragment.dispose(!0)}s.material.dispose()}}setSize(e,t){this.planeBuffer.setSize(e,t),this.glossBuffer.setSize(e,t),this.outlineBuffer.setSize(e,t),this.resolution.set(e,t);const s=this.fsQuad.material;s.uniforms.screenSize.value.set(this.resolution.x,this.resolution.y,1/this.resolution.x,1/this.resolution.y),s.uniformsNeedUpdate=!0}render(e,t,s){const n=t.depthBuffer;t.depthBuffer=!1;const r=this.renderScene.overrideMaterial,o=this.renderScene.background;this.renderScene.background=null;for(const l of this.excludedMeshes)l.visible=!1;e.setRenderTarget(this.planeBuffer),this.renderScene.overrideMaterial=this.normalOverrideMaterial,e.render(this.renderScene,this.renderCamera),this._glossEnabled&&(e.setRenderTarget(this.glossBuffer),this.renderScene.overrideMaterial=this.glossOverrideMaterial,e.render(this.renderScene,this.renderCamera)),this.renderScene.overrideMaterial=r,e.setRenderTarget(this.outlineBuffer),this._outlineEnabled?e.render(this.outlineScene,this.renderCamera):e.clear();for(const l of this.excludedMeshes)l.visible=!0;this.renderScene.background=o;const a=this.fsQuad.material;a.uniforms.planeBuffer.value=this.planeBuffer.texture,a.uniforms.glossBuffer.value=this.glossBuffer.texture,a.uniforms.outlineBuffer.value=this.outlineBuffer.texture,a.uniforms.sceneColorBuffer.value=s.texture,this.renderToScreen?(e.setRenderTarget(null),this.fsQuad.render(e)):(e.setRenderTarget(t),this.fsQuad.render(e)),t.depthBuffer=n}get vertexShader(){return`
	  varying vec2 vUv;
	  void main() {
	  	vUv = uv;
	  	gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
	  }
	`}get fragmentShader(){return`
	  uniform sampler2D sceneColorBuffer;
	  uniform sampler2D planeBuffer;
	  uniform sampler2D glossBuffer;
	  uniform sampler2D outlineBuffer;
	  uniform vec4 screenSize;
	  uniform vec3 lineColor;
	  
	  uniform float outlineEnabled;
	  
      uniform int width;
	  uniform float opacity;
      uniform float tolerance;
      uniform float glossExponent;
      uniform float minGloss;
      uniform float maxGloss;
      uniform float glossEnabled;

	  varying vec2 vUv;

	  vec4 getValue(sampler2D buffer, int x, int y) {
	  	return texture2D(buffer, vUv + screenSize.zw * vec2(x, y));
	  }

      float normalDiff(vec3 normal1, vec3 normal2) {
        return ((dot(normal1, normal2) - 1.) * -1.) / 2.;
      }

      // Returns 0 if it's background, 1 if it's not
      float getIsBackground(vec3 normal) {
        float background = 1.0;
        background *= step(normal.x, 0.);
        background *= step(normal.y, 0.);
        background *= step(normal.z, 0.);
        background = (background - 1.) * -1.;
        return background;
      }

	  void main() {
	  
	    vec4 sceneColor = getValue(sceneColorBuffer, 0, 0);
	    vec3 normSceneColor = normalize(sceneColor.rgb);
  
        vec4 plane = getValue(planeBuffer, 0, 0);
	    vec3 normal = plane.xyz;
        float distance = plane.w;
  
        vec3 normalTop = getValue(planeBuffer, 0, width).rgb;
        vec3 normalBottom = getValue(planeBuffer, 0, -width).rgb;
        vec3 normalRight = getValue(planeBuffer, width, 0).rgb;
        vec3 normalLeft = getValue(planeBuffer, -width, 0).rgb;
        vec3 normalTopRight = getValue(planeBuffer, width, width).rgb;
        vec3 normalTopLeft = getValue(planeBuffer, -width, width).rgb;
        vec3 normalBottomRight = getValue(planeBuffer, width, -width).rgb;
        vec3 normalBottomLeft = getValue(planeBuffer, -width, -width).rgb;
  
        float distanceTop = getValue(planeBuffer, 0, width).a;
        float distanceBottom = getValue(planeBuffer, 0, -width).a;
        float distanceRight = getValue(planeBuffer, width, 0).a;
        float distanceLeft = getValue(planeBuffer, -width, 0).a;
        float distanceTopRight = getValue(planeBuffer, width, width).a;
        float distanceTopLeft = getValue(planeBuffer, -width, width).a;
        float distanceBottomRight = getValue(planeBuffer, width, -width).a;
        float distanceBottomLeft = getValue(planeBuffer, -width, -width).a;
        
        vec3 sceneColorTop = normalize(getValue(sceneColorBuffer, 1, 0).rgb);
        vec3 sceneColorBottom = normalize(getValue(sceneColorBuffer, -1, 0).rgb);
        vec3 sceneColorLeft = normalize(getValue(sceneColorBuffer, 0, -1).rgb);
        vec3 sceneColorRight = normalize(getValue(sceneColorBuffer, 0, 1).rgb);
        vec3 sceneColorTopRight = normalize(getValue(sceneColorBuffer, 1, 1).rgb);
        vec3 sceneColorBottomRight = normalize(getValue(sceneColorBuffer, -1, 1).rgb);
        vec3 sceneColorTopLeft = normalize(getValue(sceneColorBuffer, 1, 1).rgb);
        vec3 sceneColorBottomLeft = normalize(getValue(sceneColorBuffer, -1, 1).rgb);

        // Checks if the planes of this texel and the neighbour texels are different

        float planeDiff = 0.0;

        planeDiff += step(0.001, normalDiff(normal, normalTop));
        planeDiff += step(0.001, normalDiff(normal, normalBottom));
        planeDiff += step(0.001, normalDiff(normal, normalLeft));
        planeDiff += step(0.001, normalDiff(normal, normalRight));
        planeDiff += step(0.001, normalDiff(normal, normalTopRight));
        planeDiff += step(0.001, normalDiff(normal, normalTopLeft));
        planeDiff += step(0.001, normalDiff(normal, normalBottomRight));
        planeDiff += step(0.001, normalDiff(normal, normalBottomLeft));
        
        planeDiff += step(0.001, normalDiff(normSceneColor, sceneColorTop));
        planeDiff += step(0.001, normalDiff(normSceneColor, sceneColorBottom));
        planeDiff += step(0.001, normalDiff(normSceneColor, sceneColorLeft));
        planeDiff += step(0.001, normalDiff(normSceneColor, sceneColorRight));
       	planeDiff += step(0.001, normalDiff(normSceneColor, sceneColorTopRight));
        planeDiff += step(0.001, normalDiff(normSceneColor, sceneColorTopLeft));
        planeDiff += step(0.001, normalDiff(normSceneColor, sceneColorBottomRight));
        planeDiff += step(0.001, normalDiff(normSceneColor, sceneColorBottomLeft));

        planeDiff += step(0.001, abs(distance - distanceTop));
        planeDiff += step(0.001, abs(distance - distanceBottom));
        planeDiff += step(0.001, abs(distance - distanceLeft));
        planeDiff += step(0.001, abs(distance - distanceRight));
        planeDiff += step(0.001, abs(distance - distanceTopRight));
        planeDiff += step(0.001, abs(distance - distanceTopLeft));
        planeDiff += step(0.001, abs(distance - distanceBottomRight));
        planeDiff += step(0.001, abs(distance - distanceBottomLeft));

        // Add extra background outline

        int width2 = width + 1;
        vec3 normalTop2 = getValue(planeBuffer, 0, width2).rgb;
        vec3 normalBottom2 = getValue(planeBuffer, 0, -width2).rgb;
        vec3 normalRight2 = getValue(planeBuffer, width2, 0).rgb;
        vec3 normalLeft2 = getValue(planeBuffer, -width2, 0).rgb;
        vec3 normalTopRight2 = getValue(planeBuffer, width2, width2).rgb;
        vec3 normalTopLeft2 = getValue(planeBuffer, -width2, width2).rgb;
        vec3 normalBottomRight2 = getValue(planeBuffer, width2, -width2).rgb;
        vec3 normalBottomLeft2 = getValue(planeBuffer, -width2, -width2).rgb;

        planeDiff += -(getIsBackground(normalTop2) - 1.);
        planeDiff += -(getIsBackground(normalBottom2) - 1.);
        planeDiff += -(getIsBackground(normalRight2) - 1.);
        planeDiff += -(getIsBackground(normalLeft2) - 1.);
        planeDiff += -(getIsBackground(normalTopRight2) - 1.);
        planeDiff += -(getIsBackground(normalBottomRight2) - 1.);
        planeDiff += -(getIsBackground(normalBottomRight2) - 1.);
        planeDiff += -(getIsBackground(normalBottomLeft2) - 1.);

        // Tolerance sets the minimum amount of differences to consider
        // this texel an edge

        float line = step(tolerance, planeDiff);

        // Exclude background and apply opacity

        float background = getIsBackground(normal);
        line *= background;
        line *= opacity;
        
        // Add gloss
        
        vec3 gloss = getValue(glossBuffer, 0, 0).xyz;
        float diffGloss = abs(maxGloss - minGloss);
        vec3 glossExpVector = vec3(glossExponent,glossExponent,glossExponent);
        gloss = min(pow(gloss, glossExpVector), vec3(1.,1.,1.));
        gloss *= diffGloss;
        gloss += minGloss;
        vec4 glossedColor = sceneColor + vec4(gloss, 1.) * glossEnabled;
        
        vec4 corrected = mix(sceneColor, glossedColor, background);
        
        // Draw lines
        
        corrected = mix(corrected, vec4(lineColor, 1.), line);
        
        // Add outline
        
        vec4 outlinePreview =getValue(outlineBuffer, 0, 0);
        float outlineColorCorrection = 1. / max(0.2, outlinePreview.a);
        vec3 outlineColor = outlinePreview.rgb * outlineColorCorrection;
        
        // thickness between 10 and 2, opacity between 1 and 0.2
	    int outlineThickness = int(outlinePreview.a * 10.);
	    
	    float outlineDiff = 0.;
        
        outlineDiff += step(0.1, getValue(outlineBuffer, 0, 0).a);
        outlineDiff += step(0.1, getValue(outlineBuffer, 1, 0).a);
        outlineDiff += step(0.1, getValue(outlineBuffer, -1, 0).a);
        outlineDiff += step(0.1, getValue(outlineBuffer, 0, -1).a);
        outlineDiff += step(0.1, getValue(outlineBuffer, 0, 1).a);
        outlineDiff += step(0.1, getValue(outlineBuffer, outlineThickness, 0).a);
        outlineDiff += step(0.1, getValue(outlineBuffer, -outlineThickness, 0).a);
        outlineDiff += step(0.1, getValue(outlineBuffer, 0, -outlineThickness).a);
        outlineDiff += step(0.1, getValue(outlineBuffer, 0, outlineThickness).a);
        outlineDiff += step(0.1, getValue(outlineBuffer, outlineThickness, outlineThickness).a);
        outlineDiff += step(0.1, getValue(outlineBuffer, -outlineThickness, outlineThickness).a);
        outlineDiff += step(0.1, getValue(outlineBuffer, -outlineThickness, -outlineThickness).a);
        outlineDiff += step(0.1, getValue(outlineBuffer, outlineThickness, -outlineThickness).a);
        
        float outLine = step(4., outlineDiff) * step(outlineDiff, 12.) * outlineEnabled;
        corrected = mix(corrected, vec4(outlineColor, 1.), outLine);
        
        gl_FragColor = corrected;
	}
			`}createOutlinePostProcessMaterial(){return new yt({uniforms:{opacity:{value:this._opacity},debugVisualize:{value:0},sceneColorBuffer:{value:null},tolerance:{value:this._tolerance},planeBuffer:{value:null},glossBuffer:{value:null},outlineBuffer:{value:null},glossEnabled:{value:1},minGloss:{value:this._minGloss},maxGloss:{value:this._maxGloss},outlineEnabled:{value:0},glossExponent:{value:this._glossExponent},width:{value:1},lineColor:{value:new He(this._lineColor)},screenSize:{value:new Eo(this.resolution.x,this.resolution.y,1/this.resolution.x,1/this.resolution.y)}},vertexShader:this.vertexShader,fragmentShader:this.fragmentShader})}newRenderTarget(){const e=new zi(this.resolution.x,this.resolution.y);return e.texture.colorSpace="srgb-linear",e.texture.format=NE,e.texture.type=Jf,e.texture.minFilter=ss,e.texture.magFilter=ss,e.texture.generateMipmaps=!1,e.stencilBuffer=!1,e}}class LM{constructor(e,t,s){if(R(this,"composer"),R(this,"overrideClippingPlanes",!1),R(this,"_components"),R(this,"_world"),R(this,"_renderTarget"),R(this,"_enabled",!1),R(this,"_initialized",!1),R(this,"_n8ao"),R(this,"_customEffects"),R(this,"_basePass"),R(this,"_gammaPass"),R(this,"_depthTexture"),R(this,"_renderer"),R(this,"_settings",{gamma:!0,custom:!0,ao:!1}),!s.renderer)throw new Error("The given world must have a renderer!");this._components=e,this._renderer=t,this._world=s,this._renderTarget=new zi(window.innerWidth,window.innerHeight),this._renderTarget.texture.colorSpace="srgb-linear",this.composer=new CM(t,this._renderTarget),this.composer.setSize(window.innerWidth,window.innerHeight)}get basePass(){if(!this._basePass)throw new Error("Custom effects not initialized!");return this._basePass}get gammaPass(){if(!this._gammaPass)throw new Error("Custom effects not initialized!");return this._gammaPass}get customEffects(){if(!this._customEffects)throw new Error("Custom effects not initialized!");return this._customEffects}get n8ao(){if(!this._n8ao)throw new Error("Custom effects not initialized!");return this._n8ao}get enabled(){return this._enabled}set enabled(e){this._initialized||this.initialize(),this._enabled=e}get settings(){return{...this._settings}}dispose(){var e,t,s,n;this.composer.dispose(),this._renderTarget.dispose(),(e=this._depthTexture)==null||e.dispose(),(t=this._customEffects)==null||t.dispose(),(s=this._gammaPass)==null||s.dispose(),(n=this._n8ao)==null||n.dispose()}setPasses(e){let t=!1;for(const s in e){const n=s;if(this.settings[n]!==e[n]){t=!0;break}}if(t){for(const s in e){const n=s;this._settings[n]!==void 0&&(this._settings[n]=e[n])}this.updatePasses()}}setSize(e,t){if(!(e===0||t===0)&&this._initialized){const s=this._settings.custom;s&&this.setPasses({custom:!1}),this.setPasses({custom:!1}),this.composer.setSize(e,t),this.basePass.setSize(e,t),this.n8ao.setSize(e,t),this.customEffects.setSize(e,t),this.gammaPass.setSize(e,t),s&&this.setPasses({custom:!0})}}update(){this._enabled&&this.composer.render()}updateCamera(){const e=this._world.camera.three;this._n8ao&&(this._n8ao.camera=e),this._customEffects&&(this._customEffects.renderCamera=e),this._basePass&&(this._basePass.camera=e)}updateProjection(e){this.composer.passes.forEach(t=>{t.camera=e}),this.update()}initialize(){if(!this._world.renderer)throw new Error("The given world must have a renderer!");const e=this._world.scene.three,t=this._world.camera.three;if(!(e instanceof Ks))throw new Error("The given scene must have a THREE.Scene as core!");const s=this._world.camera;s.projection&&s.projection.onChanged.add(()=>{this.updateCamera()});const n=this._world.renderer;this.overrideClippingPlanes||(this._renderer.clippingPlanes=n.clippingPlanes),this._renderer.outputColorSpace="srgb",this._renderer.toneMapping=J1,this.newBasePass(e,t),this.newSaoPass(e,t),this.newGammaPass(),this.newCustomPass(e,t),this._initialized=!0,this.updatePasses()}updatePasses(){for(const e of this.composer.passes)this.composer.removePass(e);this._basePass&&this.composer.addPass(this.basePass),this._settings.gamma&&this.composer.addPass(this.gammaPass),this._settings.ao&&this.composer.addPass(this.n8ao),this._settings.custom&&this.composer.addPass(this.customEffects)}newCustomPass(e,t){this._customEffects=new PM(new Ue(window.innerWidth,window.innerHeight),this._components,this._world,e,t)}newGammaPass(){this._gammaPass=new qv(FM)}newSaoPass(e,t){if(!this._world.renderer)throw new Error("The given world must have a renderer!");const{width:s,height:n}=this._world.renderer.getSize();this._n8ao=new MM(e,t,s,n);const{configuration:r}=this._n8ao;r.aoSamples=16,r.denoiseSamples=1,r.denoiseRadius=13,r.aoRadius=1,r.distanceFalloff=4,r.aoRadius=1,r.intensity=4,r.halfRes=!0,r.color=new He().setHex(13421772,"srgb-linear")}newBasePass(e,t){this._basePass=new TM(e,t)}}let We=class extends $v{constructor(e,t,s){super(e,t,s),R(this,"_postproduction"),this.onResize.add(n=>this.resizePostproduction(n)),this.onWorldChanged.add(()=>{this.currentWorld&&(this._postproduction&&this._postproduction.dispose(),this._postproduction=new LM(e,this.three,this.currentWorld),this.setPostproductionSize())})}get postproduction(){if(!this._postproduction)throw new Error("Renderer not initialized yet with a world!");return this._postproduction}update(){if(!this.enabled||!this.currentWorld)return;this.onBeforeUpdate.trigger();const e=this.currentWorld.scene.three,t=this.currentWorld.camera.three;this.postproduction.enabled?this.postproduction.composer.render():this.three.render(e,t),e instanceof Ks&&this.three2D.render(e,t),this.onAfterUpdate.trigger()}dispose(){super.dispose(),this.postproduction.dispose()}resizePostproduction(e){this.postproduction&&this.setPostproductionSize(e)}setPostproductionSize(e){if(!this.container)return;const t=e?e.x:this.container.clientWidth,s=e?e.y:this.container.clientHeight;this.postproduction.setSize(t,s)}};class DM{constructor(e,t,s,n,r){R(this,"mesh",new ne(new Ne)),R(this,"components"),R(this,"world"),R(this,"styleName"),R(this,"_precission",1e4),R(this,"_tempVector",new P),R(this,"_plane"),R(this,"_geometry"),R(this,"_outlinedMesh"),R(this,"_plane2DCoordinateSystem",new ce),R(this,"_planeAxis"),this.components=e,this.world=t,this.mesh.material=r,this.mesh.frustumCulled=!1,this.mesh.userData.indexFragmentMap=new Map,this._plane=s;const{x:o,y:a,z:l}=s.normal;Math.abs(o)===1?this._planeAxis="x":Math.abs(a)===1?this._planeAxis="y":Math.abs(l)===1&&(this._planeAxis="z"),this._geometry=n,this.mesh.geometry.attributes.position=n.attributes.position;const h=s.normal.clone().multiplyScalar(.01);this._outlinedMesh=new ne(this.mesh.geometry),this.mesh.position.copy(h),this._outlinedMesh.position.copy(h),this.visible=!0}get visible(){return this.mesh.parent!==null}set visible(e){const t=this.getStyleAndScene();if(e){if(this.world.scene.three.add(this.mesh),t){const{style:s,outlineScene:n}=t;this._outlinedMesh.material=s.material,s.meshes.add(this._outlinedMesh),n.add(this._outlinedMesh)}}else if(this.mesh.removeFromParent(),t){const{style:s}=t;s.meshes.delete(this._outlinedMesh),this._outlinedMesh.removeFromParent()}}set geometry(e){this._geometry=e,this.mesh.geometry.attributes.position=e.attributes.position}dispose(){const e=this.getStyleAndScene();if(e){const{style:t}=e;t.meshes.delete(this._outlinedMesh),this._outlinedMesh.removeFromParent()}this.mesh.material=[],this._outlinedMesh.material=[],this.mesh.userData.indexFragmentMap.clear(),this.mesh.userData={},this.mesh.geometry.dispose(),this.mesh.removeFromParent(),this.mesh.geometry=null,this._outlinedMesh.geometry=null,this.mesh=null,this._plane=null,this._geometry=null,this.components=null}update(e,t){const s=this._geometry.attributes.position.array;if(!s)return;this.updatePlane2DCoordinateSystem();const{userData:n}=this.mesh,r=n.indexFragmentMap;r.clear();let o=0;const a=[];let l=0;const h=this.components.get(ve);for(const[u,c]of t)for(const d in c){const f=h.list.get(d);f&&(f.mesh.userData.fills||(f.mesh.userData.fills=new Set),f.mesh.userData.fills.add(this.mesh))}for(let u=0;u<e.length;u++){const c=e[u],d=[];for(let g=l;g<c;g+=2)d.push(g*3);const f=this.computeFill(d,s),p=t.get(c);let m=0;for(const g of f)a.push(g),p&&m%3===0&&r.set(o++,p),m++;l=c}this.mesh.geometry.setIndex(a)}computeFill(e,t){const s=new Map,n={},r=new Map;let o=0;const a=new Map,l=new Map,h=new Set,u=this._precission;for(let d=0;d<e.length;d++){const f=e[d];let p=0,m=0,g=0,E=0;const I=t[f],v=t[f+1],b=t[f+2],C=t[f+3],S=t[f+4],_=t[f+5];if(this._tempVector.set(I,v,b),this._tempVector.applyMatrix4(this._plane2DCoordinateSystem),p=Math.trunc(this._tempVector.x*u)/u,m=Math.trunc(this._tempVector.y*u)/u,this._tempVector.set(C,S,_),this._tempVector.applyMatrix4(this._plane2DCoordinateSystem),g=Math.trunc(this._tempVector.x*u)/u,E=Math.trunc(this._tempVector.y*u)/u,p===g&&m===E)continue;const M=`${p}|${m}`,A=`${g}|${E}`;s.has(M)||s.set(M,f/3),s.has(A)||s.set(A,f/3+1);const F=s.get(M),D=s.get(A);n[F]=[p,m],n[D]=[g,E];const x=l.has(F),N=a.has(F),y=l.has(D),U=a.has(D);if(!x&&!N&&!y&&!U)l.set(F,o),a.set(D,o),h.add(o),r.set(o,[F,D]),o++;else if(x&&U){const B=l.get(F),k=a.get(D);if(B!==k){const W=r.get(k),z=r.get(B);if(!W||!z)continue;r.delete(B),h.delete(B),a.set(z[z.length-1],k),a.delete(W[W.length-1]);for(const he of z)W.push(he)}else h.delete(k);l.delete(F),a.delete(D)}else if(N&&y){const B=l.get(D),k=a.get(F);if(B!==k){const W=r.get(k),z=r.get(B);if(!W||!z)continue;r.delete(B),h.delete(B),a.set(z[z.length-1],k),a.delete(W[W.length-1]);for(const he of z)W.push(he)}else h.delete(k);l.delete(D),a.delete(F)}else if(x&&y){const B=l.get(D),k=l.get(F),W=r.get(k),z=r.get(B);if(!W||!z)continue;r.delete(B),h.delete(B),l.delete(W[0]),l.delete(z[0]),a.delete(z[z.length-1]),l.set(z[z.length-1],k),z.reverse(),W.splice(0,0,...z)}else if(N&&U){const B=a.get(D),k=a.get(F),W=r.get(k),z=r.get(B);if(!W||!z)continue;r.delete(B),h.delete(B),a.delete(W[W.length-1]),a.delete(z[z.length-1]),l.delete(z[0]),a.set(z[0],k),z.reverse(),W.push(...z)}else if(x){const B=l.get(F),k=r.get(B);if(!k)continue;k.unshift(D),l.delete(F),l.set(D,B)}else if(N){const B=a.get(F),k=r.get(B);if(!k)continue;k.push(D),a.delete(F),a.set(D,B)}else if(y){const B=l.get(D),k=r.get(B);if(!k)continue;k.unshift(F),l.delete(D),l.set(F,B)}else if(U){const B=a.get(D),k=r.get(B);if(!k)continue;k.push(F),a.delete(D),a.set(F,B)}}const c=[];for(const[d,f]of r){if(h.has(d))continue;const p=[],m=new Map;let g=0;for(const I of f){const v=n[I];p.push(v[0],v[1]),m.set(g++,I)}const E=gM(p);for(const I of E){const v=m.get(I);if(v===void 0)throw new Error("Map error!");c.push(v)}}return c}updatePlane2DCoordinateSystem(){this._plane2DCoordinateSystem=new ce;const e=new P(1,0,0),t=new P(0,1,0),s=this._plane.normal,n=new P;this._plane.coplanarPoint(n),this._planeAxis==="x"?e.crossVectors(t,s):this._planeAxis==="y"?t.crossVectors(s,e):this._planeAxis==="z"||(e.crossVectors(t,s).normalize(),t.crossVectors(s,e)),this._plane2DCoordinateSystem.fromArray([e.x,e.y,e.z,0,t.x,t.y,t.z,0,s.x,s.y,s.z,0,n.x,n.y,n.z,1]),this._plane2DCoordinateSystem.invert()}getStyleAndScene(){if(!this.world.renderer)return null;const e=this.world.renderer instanceof We;if(this.styleName&&e){const t=this.world.renderer,s=t.postproduction.customEffects.outlinedMeshes[this.styleName],n=t.postproduction.customEffects.outlineScene;return{style:s,outlineScene:n}}return null}}class UM{constructor(e,t,s){R(this,"onDisposed",new Y),R(this,"onAfterUpdate",new Y),R(this,"onBeforeUpdate",new Y),R(this,"enabled",!0),R(this,"fillNeedsUpdate",!1),R(this,"components"),R(this,"world"),R(this,"_edges",{}),R(this,"_visible",!0),R(this,"_inverseMatrix",new ce),R(this,"_localPlane",new Es),R(this,"_tempLine",new Nt),R(this,"_tempVector",new P),R(this,"_plane"),this.components=e,this.world=t,this._plane=s}get visible(){return this._visible}set visible(e){this._visible=e;for(const t in this._edges){const s=this._edges[t];e?this.world.scene.three.add(s.mesh):s.mesh.removeFromParent(),s.fill&&(s.fill.visible=e)}}get fillMeshes(){const e=[];for(const t in this._edges){const s=this._edges[t];s.fill&&e.push(s.fill.mesh)}return e}update(){const e=this.components.get(Nh).styles.list;this.updateDeletedEdges(e);for(const t in e)this.drawEdges(t);this.fillNeedsUpdate=!1}get(){return this._edges}dispose(){const e=Object.keys(this._edges);for(const t of e)this.disposeEdge(t);this.onDisposed.trigger(),this.onDisposed.reset()}newEdgesMesh(e){const t=this.components.get(Nh).styles.list[e].lineMaterial,s=new Ne,n=new Float32Array(3e5),r=new Ct(n,3,!1);r.setUsage(bT),s.setAttribute("position",r);const o=new PE(s,t);return o.frustumCulled=!1,o}newFillMesh(e,t){const s=this.components.get(Nh).styles.list[e],n=s.fillMaterial;if(n){const r=new DM(this.components,this.world,this._plane,t,n);return this.newFillOutline(e,r,s),r}}newFillOutline(e,t,s){if(!s.outlineMaterial||!this.world.renderer)return;const n=this.world.renderer;if(n instanceof We){const r=n.postproduction.customEffects.outlinedMeshes;r[e]||(r[e]={meshes:new Set,material:s.outlineMaterial}),t.styleName=e}}drawEdges(e){const t=this.components.get(Nh).styles.list[e];this._edges[e]||this.initializeStyle(e);const s=this._edges[e];let n=0;const r=s.mesh.geometry.attributes.position;r.array.fill(0);const o=[];let a=0;const l=new Map;for(const u of t.meshes)if(u.geometry){if(!u.geometry.boundsTree)throw new Error("Bounds tree not found for clipping edges subset.");if(u instanceof oi){if(u.count===0)continue;const c=u;for(let d=0;d<c.count;d++){const f=c instanceof _E,p=c,m=t.fragments[p.fragment.id];if(f&&m){const I=p.fragment.getItemID(d);if(I===null||!m.has(I))continue}const g=new ne(u.geometry);g.matrix.copy(u.matrix);const E=new ce;if(c.getMatrixAt(d,E),g.applyMatrix4(E),g.applyMatrix4(u.matrixWorld),g.updateMatrix(),g.updateMatrixWorld(),this._inverseMatrix.copy(g.matrixWorld).invert(),this._localPlane.copy(this._plane).applyMatrix4(this._inverseMatrix),n=this.shapecast(g,r,n),n!==a){if(f&&m){const I=p.fragment.getItemID(d);I!==null&&l.set(n,{[p.fragment.id]:new Set([I])})}o.push(n),a=n}}}else this._inverseMatrix.copy(u.matrixWorld).invert(),this._localPlane.copy(this._plane).applyMatrix4(this._inverseMatrix),n=this.shapecast(u,r,n),n!==a&&(o.push(n),a=n)}s.mesh.geometry.setDrawRange(0,n),s.mesh.position.copy(this._plane.normal).multiplyScalar(1e-4),r.needsUpdate=!0;const h=s.mesh.geometry.attributes.position;Number.isNaN(h.array[0])||this.fillNeedsUpdate&&s.fill&&(s.fill.geometry=s.mesh.geometry,s.fill.update(o,l),s.fill.visible=this._visible)}initializeStyle(e){const t=this.newEdgesMesh(e),s=t.geometry,n=this.newFillMesh(e,s);this._edges[e]={mesh:t,name:e,fill:n}}shapecast(e,t,s){return e.geometry.boundsTree.shapecast({intersectsBounds:n=>this._localPlane.intersectsBox(n),intersectsTriangle:n=>{let r=0;if(this._tempLine.start.copy(n.a),this._tempLine.end.copy(n.b),this._localPlane.intersectLine(this._tempLine,this._tempVector)){const o=this._tempVector.applyMatrix4(e.matrixWorld);t.setXYZ(s,o.x,o.y,o.z),r++,s++}if(this._tempLine.start.copy(n.b),this._tempLine.end.copy(n.c),this._localPlane.intersectLine(this._tempLine,this._tempVector)){const o=this._tempVector.applyMatrix4(e.matrixWorld);t.setXYZ(s,o.x,o.y,o.z),r++,s++}if(this._tempLine.start.copy(n.c),this._tempLine.end.copy(n.a),this._localPlane.intersectLine(this._tempLine,this._tempVector)){const o=this._tempVector.applyMatrix4(e.matrixWorld);t.setXYZ(s,o.x,o.y,o.z),r++,s++}r!==2&&(s-=r)}}),s}updateDeletedEdges(e){const t=Object.keys(this._edges);for(const s of t)e[s]===void 0&&(this.disposeEdge(s),this.disposeOutline(s))}disposeOutline(e){if(!this.world.renderer)return;const t=this.world.renderer;if(t instanceof We){const s=t.postproduction.customEffects.outlinedMeshes;delete s[e]}}disposeEdge(e){const t=this.components.get(Gi),s=this._edges[e];s.fill&&s.fill.dispose(),t.destroy(s.mesh,!1),delete this._edges[e]}}let Cc=class extends jb{constructor(e,t,s,n,r,o=5,a=!0){super(e,t,s,n,r,o,a),R(this,"edges"),R(this,"edgesMaxUpdateRate",50),R(this,"_visible",!0),R(this,"_edgesVisible",!0),R(this,"updateFill",()=>{this.edges.fillNeedsUpdate=!0,this.edges.update()}),this.edges=new UM(e,t,this.three),this.toggleControls(!0),this.edges.visible=!0,this.onDraggingEnded.add(()=>{this.updateFill(),this.edges.visible=!0}),this.onDraggingStarted.add(()=>this.edges.visible=!1)}get visible(){return this._visible}set visible(e){super.visible=e,this.toggleControls(e)}set enabled(e){this._enabled=e,this.world.renderer&&this.world.renderer.setPlane(e,this.three)}get enabled(){return super.enabled}dispose(){super.dispose(),this.edges.dispose()}};class kM{constructor(){R(this,"onDisposed",new Y),R(this,"enabled",!0),R(this,"list",{}),R(this,"_defaultLineMaterial",new Is({color:0,linewidth:.001})),R(this,"onAfterUpdate",new Y),R(this,"onBeforeUpdate",new Y)}update(e){this.onBeforeUpdate.trigger(this.list),this.onAfterUpdate.trigger(this.list)}create(e,t,s,n,r,o){if(!s.renderer)throw new Error("The given world doesn't have a renderer!");n||(n=this._defaultLineMaterial);for(const h of t)h.geometry.boundsTree||h.geometry.computeBoundsTree();const a=s.renderer;n.clippingPlanes=a.clippingPlanes;const l={name:e,lineMaterial:n,meshes:t,fillMaterial:r,outlineMaterial:o,fragments:{}};return this.list[e]=l,l}dispose(){const e=Object.keys(this.list);for(const t of e)this.deleteStyle(t);this.list={},this.onDisposed.trigger(),this.onDisposed.reset()}deleteStyle(e,t=!0){var s,n;const r=this.list[e];r&&(r.meshes.clear(),t&&(r.lineMaterial.dispose(),(s=r.fillMaterial)==null||s.dispose(),(n=r.outlineMaterial)==null||n.dispose())),delete this.list[e]}}const Kv=class Jv extends be{constructor(e){super(e),R(this,"onDisposed",new Y),R(this,"enabled",!0),R(this,"styles"),R(this,"fillsNeedUpdate",!1),R(this,"_visible",!0),this.components.list.set(Jv.uuid,this),this.styles=new kM}get visible(){return this._visible}set visible(e){this._visible=e;const t=this.components.get(io);for(const s of t.list)s instanceof Cc&&(s.edges.visible=e)}dispose(){this.styles.dispose(),this.onDisposed.trigger()}async update(e=!1){if(!this.enabled)return;const t=this.components.get(io);for(const s of t.list)s instanceof Cc&&(e||this.fillsNeedUpdate?s.updateFill():s.update());this.fillsNeedUpdate=!1}};R(Kv,"uuid","24dfc306-a3c4-410f-8071-babc4afa5e4d");let Nh=Kv;const BM={name:"HorizontalBlurShader",uniforms:{tDiffuse:{value:null},h:{value:1/512}},vertexShader:`

		varying vec2 vUv;

		void main() {

			vUv = uv;
			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`

		uniform sampler2D tDiffuse;
		uniform float h;

		varying vec2 vUv;

		void main() {

			vec4 sum = vec4( 0.0 );

			sum += texture2D( tDiffuse, vec2( vUv.x - 4.0 * h, vUv.y ) ) * 0.051;
			sum += texture2D( tDiffuse, vec2( vUv.x - 3.0 * h, vUv.y ) ) * 0.0918;
			sum += texture2D( tDiffuse, vec2( vUv.x - 2.0 * h, vUv.y ) ) * 0.12245;
			sum += texture2D( tDiffuse, vec2( vUv.x - 1.0 * h, vUv.y ) ) * 0.1531;
			sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y ) ) * 0.1633;
			sum += texture2D( tDiffuse, vec2( vUv.x + 1.0 * h, vUv.y ) ) * 0.1531;
			sum += texture2D( tDiffuse, vec2( vUv.x + 2.0 * h, vUv.y ) ) * 0.12245;
			sum += texture2D( tDiffuse, vec2( vUv.x + 3.0 * h, vUv.y ) ) * 0.0918;
			sum += texture2D( tDiffuse, vec2( vUv.x + 4.0 * h, vUv.y ) ) * 0.051;

			gl_FragColor = sum;

		}`},zM={name:"VerticalBlurShader",uniforms:{tDiffuse:{value:null},v:{value:1/512}},vertexShader:`

		varying vec2 vUv;

		void main() {

			vUv = uv;
			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`

		uniform sampler2D tDiffuse;
		uniform float v;

		varying vec2 vUv;

		void main() {

			vec4 sum = vec4( 0.0 );

			sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 4.0 * v ) ) * 0.051;
			sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 3.0 * v ) ) * 0.0918;
			sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 2.0 * v ) ) * 0.12245;
			sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 1.0 * v ) ) * 0.1531;
			sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y ) ) * 0.1633;
			sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 1.0 * v ) ) * 0.1531;
			sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 2.0 * v ) ) * 0.12245;
			sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 3.0 * v ) ) * 0.0918;
			sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 4.0 * v ) ) * 0.051;

			gl_FragColor = sum;

		}`},VM=class Tr extends be{constructor(e){super(e),R(this,"onDisposed",new Y),R(this,"enabled",!0),R(this,"cameraHeight",10),R(this,"darkness",1.2),R(this,"opacity",1),R(this,"resolution",512),R(this,"amount",3.5),R(this,"planeColor",16777215),R(this,"shadowOffset",0),R(this,"shadowExtraScaleFactor",1.5),R(this,"list",{}),R(this,"tempMaterial",new jt({visible:!1})),R(this,"depthMaterial",new ME),this.components.add(Tr.uuid,this),this.initializeDepthMaterial()}dispose(){for(const e in this.list)this.deleteShadow(e);this.tempMaterial.dispose(),this.depthMaterial.dispose(),this.components=null,this.onDisposed.trigger(Tr.uuid),this.onDisposed.reset()}create(e,t,s){if(this.list[t])throw new Error(`There is already a shadow with ID ${t}`);const{size:n,center:r,min:o}=this.getSizeCenterMin(e),a=this.createShadow(t,n,s);return this.initializeShadow(a,r,o),this.createPlanes(a,n),this.bakeShadow(e,a),a.root}deleteShadow(e){const t=this.components.get(Gi),s=this.list[e];if(delete this.list[e],!s)throw new Error(`No shadow with ID ${e} was found.`);t.destroy(s.root),t.destroy(s.blurPlane),s.rt.dispose(),s.rtBlur.dispose()}createPlanes(e,t){const s=new Yc(t.x,t.z).rotateX(Math.PI/2);this.createBasePlane(e,s),Tr.createBlurPlane(e,s)}initializeShadow(e,t,s){this.initializeRoot(e,t,s),Tr.initializeRenderTargets(e),Tr.initializeCamera(e)}bakeShadow(e,t){const s=t.world.scene.three;if(!(s instanceof Ks))throw new Error("The core of the scene of the world must be a scene!");if(!t.world.renderer)throw new Error("The given world must have a renderer!");const n=t.world.renderer.three,r=e.map(h=>!!h.parent);for(let h=0;h<e.length;h++)r[h]||s.add(e[h]);const o=s.children.filter(h=>!e.includes(h)&&h!==t.root);for(let h=o.length-1;h>=0;h--)s.remove(o[h]);const a=s.background;s.background=null,s.overrideMaterial=this.depthMaterial;const l=[];for(const h of e)l.push(h.visible),h.visible=!0;n.setRenderTarget(t.rt),n.render(s,t.camera),s.overrideMaterial=null,this.blurShadow(t,this.amount),this.blurShadow(t,this.amount*.4),n.setRenderTarget(null),s.background=a;for(let h=0;h<e.length;h++)e[h].visible=l[h];for(let h=o.length-1;h>=0;h--)s.add(o[h]);for(let h=0;h<e.length;h++)r[h]||s.remove(e[h])}static initializeCamera(e){e.camera.rotation.x=Math.PI/2,e.root.add(e.camera)}static initializeRenderTargets(e){e.rt.texture.generateMipmaps=!1,e.rtBlur.texture.generateMipmaps=!1}initializeRoot(e,t,s){const n=e.world.scene.three;e.root.position.set(t.x,s.y-this.shadowOffset,t.z),n.add(e.root)}createBasePlane(e,t){const s=this.createPlaneMaterial(e),n=new ne(t,s);n.renderOrder=2,e.root.add(n),n.scale.y=-1}static createBlurPlane(e,t){e.blurPlane.geometry=t,e.blurPlane.visible=!1,e.root.add(e.blurPlane)}createPlaneMaterial(e){if(!e.world.renderer)throw new Error("The given world must have a renderer!");const t=e.world.renderer.three;return new jt({map:e.rt.texture,opacity:this.opacity,transparent:!0,depthWrite:!1,clippingPlanes:t.clippingPlanes})}initializeDepthMaterial(){this.depthMaterial.depthTest=!1,this.depthMaterial.depthWrite=!1;const e="gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );",t="gl_FragColor = vec4( vec3( 0.0 ), ( 1.0 - fragCoordZ ) * darkness );";this.depthMaterial.userData.darkness={value:this.darkness},this.depthMaterial.onBeforeCompile=s=>{s.uniforms.darkness=this.depthMaterial.userData.darkness,s.fragmentShader=`
						uniform float darkness;
						${s.fragmentShader.replace(e,t)}
					`}}createShadow(e,t,s){return this.list[e]={root:new jr,world:s,rt:new zi(this.resolution,this.resolution),rtBlur:new zi(this.resolution,this.resolution),blurPlane:new ne,camera:this.createCamera(t)},this.list[e]}createCamera(e){return new Qs(-e.x/2,e.x/2,e.z/2,-e.z/2,0,this.cameraHeight)}getSizeCenterMin(e){const t=e[0].parent,s=new jr;s.children=e;const n=new Ge().setFromObject(s);t==null||t.add(...e);const r=new P;n.getSize(r),r.x*=this.shadowExtraScaleFactor,r.z*=this.shadowExtraScaleFactor;const o=new P;n.getCenter(o);const a=n.min;return{size:r,center:o,min:a}}blurShadow(e,t){if(!e.world.renderer)throw new Error("The given world must have a renderer!");const s=new yt(BM);s.depthTest=!1;const n=new yt(zM);n.depthTest=!1,e.blurPlane.visible=!0,e.blurPlane.material=s,e.blurPlane.material.uniforms.tDiffuse.value=e.rt.texture,s.uniforms.h.value=t*1/256;const r=e.world.renderer.three;r.setRenderTarget(e.rtBlur),r.render(e.blurPlane,e.camera),e.blurPlane.material=n,e.blurPlane.material.uniforms.tDiffuse.value=e.rtBlur.texture,n.uniforms.v.value=t*1/256,r.setRenderTarget(e.rt),r.render(e.blurPlane,e.camera),e.blurPlane.visible=!1}};R(VM,"uuid","f833a09a-a3ab-4c58-b03e-da5298c7a1b6");const $M=class ey extends be{constructor(e){super(e),R(this,"enabled",!0),R(this,"inputs",["OBC","BUI"]),R(this,"_requestEventID","thatOpenCompanyComponentRequested"),R(this,"_createEventID","thatOpenCompanyComponentCreated"),e.add(ey.uuid,this)}async import(e){return new Promise(t=>{const s=document.createElement("script"),n=`
        function main() {
          const { ${this.inputs} } = window.ThatOpenCompany;
        
          ${e}
        
          const onComponentRequested = () => {
            window.removeEventListener("${this._requestEventID}", onComponentRequested);
            const event = new CustomEvent("${this._createEventID}", { detail: main });
            window.dispatchEvent(event);
          };
          
          window.addEventListener("${this._requestEventID}", onComponentRequested);
        }
        
        main();
      `,r=o=>{window.removeEventListener(this._createEventID,r);const a=o.detail,l=this.components.get(a);s.remove(),t(l)};s.addEventListener("load",()=>{window.addEventListener(this._createEventID,r),window.dispatchEvent(new Event(this._requestEventID))}),s.src=URL.createObjectURL(new File([n],"temp.js")),document.head.appendChild(s)})}};R($M,"uuid","74c0c370-1af8-4ca9-900a-4a4196c0f2f5");const HM=["Station","Radius","Length","InitialKP","FinalKP","KP","Slope","Height","InitialKPV","FinalKPV"],ty=class iy extends be{constructor(e){super(e),R(this,"enabled",!0),R(this,"world",null),R(this,"_markerKey",0),R(this,"_list",new Map),R(this,"type","horizontal"),R(this,"divisionLength",100),e.add(iy.uuid,this)}addKPStation(e,t,s){const n=this.components.get(En),r=document.createElement("div"),o=document.createElement("div");r.appendChild(o),o.innerHTML=t,o.style.color=n.color,o.style.borderBottom="1px dotted white",o.style.width="160px",o.style.textAlign="left";const a=new Pt(e,r),l=new P;l.x=s.geometry.attributes.position.getX(s.geometry.attributes.position.count-1),l.y=s.geometry.attributes.position.getY(s.geometry.attributes.position.count-1),l.z=s.geometry.attributes.position.getZ(s.geometry.attributes.position.count-1);const h=new P;h.x=s.geometry.attributes.position.getX(s.geometry.attributes.position.count-2),h.y=s.geometry.attributes.position.getY(s.geometry.attributes.position.count-2),h.z=s.geometry.attributes.position.getZ(s.geometry.attributes.position.count-2);const u=new P;u.x=(l.x+h.x)/2,u.y=(l.y+h.y)/2,u.z=(l.z+h.z)/2,a.three.position.copy(u);const c=new P;c.subVectors(l,h).normalize();const d=new Jt;d.setFromUnitVectors(new P(0,1,0),c);const f=new FE().setFromQuaternion(d).z,p=Un.radToDeg(f);o.style.transform=`rotate(${-p-90}deg) translate(-35%, -50%)`;const m=this._markerKey.toString();n.setupEvents(e,!0),n.getWorldMarkerList(e).set(m,{label:a,key:m,merged:!1,static:!1}),this._markerKey++,this.save(m,"KP")}addVerticalMarker(e,t,s,n,r){const o=this.components.get(En),a=document.createElement("span");a.innerHTML=t,a.style.color=o.color;const l=new Pt(e,a,r);if(n==="Height"){const u=document.createElement("span");u.innerHTML=t,u.style.color=o.color;const{position:c}=s.geometry.attributes,d=(c.array.length/3-1)*3,f=c.array.slice(d,d+3);l.three.position.set(f[0],f[1]+10,f[2])}else if(n==="InitialKPV"){const{position:u}=s.geometry.attributes,c=u.getX(0),d=u.getY(0),f=u.getZ(0);l.three.position.set(c-20,d,f)}else if(n==="FinalKPV"){const{position:u}=s.geometry.attributes,c=u.getX(s.geometry.attributes.position.count-1),d=u.getY(s.geometry.attributes.position.count-1),f=u.getZ(s.geometry.attributes.position.count-1);l.three.position.set(c+20,d,f)}else if(n==="Slope"){a.style.color="grey";const{position:u}=s.geometry.attributes,c=new P;c.x=u.getX(0),c.y=u.getY(0),c.z=u.getZ(0);const d=new P;d.x=u.getX(u.count-1),d.y=u.getY(u.count-1),d.z=u.getZ(u.count-1);const f=new P;f.addVectors(c,d).multiplyScalar(.5),l.three.position.set(f.x,f.y-10,f.z)}const h=this._markerKey.toString();return o.setupEvents(e,!0),o.getWorldMarkerList(e).set(h,{label:l,key:h,type:n,merged:!1,static:!1}),this._markerKey++,this.save(h,n),l}addCivilMarker(e,t,s,n){const r=this.components.get(En),o=document.createElement("span");o.innerHTML=t,o.style.color=r.color;const a=new Pt(e,o);if(n==="InitialKP"){const h=s.geometry.attributes.position.getX(0),u=s.geometry.attributes.position.getY(0),c=s.geometry.attributes.position.getZ(0);a.three.position.set(h+2,u+2,c)}else if(n==="FinalKP"){const h=s.geometry.attributes.position.getX(s.geometry.attributes.position.count-1),u=s.geometry.attributes.position.getY(s.geometry.attributes.position.count-1),c=s.geometry.attributes.position.getZ(s.geometry.attributes.position.count-1);a.three.position.set(h+2,u-2,c)}else if(n==="Length"){const h=new P;h.x=s.geometry.attributes.position.getX(0),h.y=s.geometry.attributes.position.getY(0),h.z=s.geometry.attributes.position.getZ(0);const u=new P;u.x=s.geometry.attributes.position.getX(s.geometry.attributes.position.count-1),u.y=s.geometry.attributes.position.getY(s.geometry.attributes.position.count-1),u.z=s.geometry.attributes.position.getZ(s.geometry.attributes.position.count-1);const c=h.distanceTo(u);a.three.element.innerText=c.toFixed(2);const d=u.clone().add(h).divideScalar(2);a.three.position.copy(d)}const l=this._markerKey.toString();return r.setupEvents(e,!0),r.getWorldMarkerList(e).set(l,{label:a,key:l,type:n,merged:!1,static:!1}),this._markerKey++,this.save(l,n),a}showKPStations(e){if(!this.world)throw new Error("A world is needed for this component to work!");if(this.type==="horizontal"){const t=this.generateStartAndEndKP(e);for(const[,n]of t)this.addKPStation(this.world,n.value,n.normal);const s=this.generateConstantKP(e);for(const[,n]of s)this.addKPStation(this.world,n.value,n.normal)}}showCurveLength(e,t){if(!this.world)throw new Error("A world is needed for this component to work!");const s=this.components.get(En),n=e.length,r=`${t.toFixed(2)} m`,o=Math.round(n/2),a=e[o],l=s.create(this.world,r,a,!0);l!==void 0&&this.save(l,"Radius")}showLineLength(e,t){if(!this.world)throw new Error("A world is needed for this component to work!");const s=this.components.get(En),n=new P;n.x=e.geometry.getAttribute("position").getX(0),n.y=e.geometry.getAttribute("position").getY(0),n.z=e.geometry.getAttribute("position").getZ(0);const r=new P;r.x=e.geometry.getAttribute("position").getX(1),r.y=e.geometry.getAttribute("position").getY(1),r.z=e.geometry.getAttribute("position").getZ(1);const o=`${t.toFixed(2)} m`,a=new P;a.addVectors(n,r).multiplyScalar(.5);const l=s.create(this.world,o,a,!0);l!==void 0&&this.save(l,"Radius")}showCurveRadius(e,t){if(!this.world)throw new Error("A world is needed for this component to work!");const s=this.components.get(En),n=new P;n.x=e.geometry.getAttribute("position").getX(0),n.y=e.geometry.getAttribute("position").getY(0),n.z=e.geometry.getAttribute("position").getZ(0);const r=new P;r.x=e.geometry.getAttribute("position").getX(1),r.y=e.geometry.getAttribute("position").getY(1),r.z=e.geometry.getAttribute("position").getZ(1);const o=`R = ${t.toFixed(2)} m`,a=new P;a.addVectors(n,r).multiplyScalar(.5);const l=s.create(this.world,o,a,!0);l!==void 0&&this.save(l,"Radius")}deleteByType(e=HM){const t=this.components.get(En);for(const s of e){const n=this._list.get(s);if(n){for(const r of n)t.delete(r);this._list.delete(s)}}}generateStartAndEndKP(e){const{alignment:t}=e.curve,s=new Map;for(const n of t.horizontal){const r=n.getLength();if(s.size>0){const o=n.index-1,a=s.get(o).distance+r,l=n.mesh.geometry.getAttribute("position"),h=l.count-1,u=new P;u.x=l.getX(h),u.y=l.getY(h),u.z=l.getZ(h);const c=this.createNormalLine(n.mesh);s.set(n.index,{value:this.getShortendKPValue(a),distance:a,point:u,normal:c})}else{const o=n.mesh.geometry.getAttribute("position"),a=o.count-1,l=new P;l.x=o.getX(a),l.y=o.getY(a),l.z=o.getZ(a);const h=this.createNormalLine(n.mesh);s.set(n.index,{value:this.getShortendKPValue(r),distance:r,point:l,normal:h})}}return s}createNormalLine(e){const t=e.geometry.attributes.position.count-1,s=t-1,n=new P;n.x=e.geometry.attributes.position.getX(t),n.y=e.geometry.attributes.position.getY(t),n.z=e.geometry.attributes.position.getZ(t);const r=new P;r.x=e.geometry.attributes.position.getX(s),r.y=e.geometry.attributes.position.getY(s),r.z=e.geometry.attributes.position.getZ(s);const o=new P().subVectors(n,r).clone().applyAxisAngle(new P(0,0,1),Math.PI*.5).normalize(),a=new Ne().setFromPoints([o.clone().setLength(10).add(n),o.clone().setLength(-10).add(n)]);return new tt(a)}generateConstantKP(e){const{alignment:t}=e.curve,s=new Map,n=t.getLength("horizontal"),r=Math.floor(n/this.divisionLength);for(let o=0;o<r;o++){const a=o/r,l=t.getPointAt(a,"horizontal"),h=n*a,u=this.getNormal(t,l);s.set(o,{value:this.getShortendKPValue(h),distance:h,point:l,normal:u})}return s}getNormal(e,t){const s=[],n={start:new P,end:new P};for(let a=0;a<e.horizontal.length;a++){const l=e.horizontal[a].mesh.geometry.attributes.position,h=l.count;for(let u=0;u<h;u++){const c=l.getX(u),d=l.getY(u),f=l.getZ(u);s.push(new P(c,d,f))}}for(let a=0;a<s.length-1;a++){const l=s[a],h=s[a+1],u=l.distanceTo(t),c=h.distanceTo(t),d=l.distanceTo(h);Math.abs(u+c-d)<1e-5&&(n.start=l,n.end=h)}const r=new P().subVectors(n.end,n.start).clone().applyAxisAngle(new P(0,0,1),Math.PI*.5).normalize(),o=new Ne().setFromPoints([r.clone().setLength(10).add(t),r.clone().setLength(-10).add(t)]);return new tt(o,new Is({color:16711680}))}getShortendKPValue(e){const t=e.toFixed(2),[s,n]=t.toString().split("."),r=n||"00";if(parseInt(s,10)>1e3&&parseInt(s,10)<1e4){const[o,...a]=s;return`${o}+${a.join("")}.${r}`}if(parseInt(s,10)>1e4){const[o,a,...l]=s;return`${o}${a}+${l.join("")}.${r}`}return`0+${s.padStart(3,"0")}.${r}`}save(e,t){this._list.has(t)||this._list.set(t,new Set),this._list.get(t).add(e)}};R(ty,"uuid","0af12c32-81ee-4100-a030-e9ae546f6170");let Ra=ty,sy=class extends be{constructor(e){super(e),R(this,"onHighlight",new Y),R(this,"onMarkerChange",new Y),R(this,"onMarkerHidden",new Y),R(this,"onDisposed",new Y),R(this,"enabled",!0),R(this,"mouseMarkers"),R(this,"_curves",[]),R(this,"_previousAlignment",null),R(this,"_highlighter"),R(this,"_world",null),R(this,"updateLinesResolution",t=>{var s;(s=this._highlighter)==null||s.setResolution(t)}),R(this,"onMouseMove",t=>{var s,n,r;if(!this._world)throw new Error("No world was given for this navigator!");if(!this._world.renderer)return;const o=this._world.renderer.three.domElement.parentElement,a=this._world.camera.three,l=(s=this._highlighter)==null?void 0:s.castRay(t,a,o,this._curves);if(l){const{object:h}=l;(n=this._highlighter)==null||n.hover(h),this.updateMarker(l,"hover");return}this.mouseMarkers&&(this.mouseMarkers.hover.visible=!1),(r=this._highlighter)==null||r.unHover(),this.onMarkerHidden.trigger({type:"hover"})}),R(this,"onClick",t=>{var s,n;if(!this._world)throw new Error("No world was given for this navigator!");if(!this._world.renderer)return;const r=this._world.renderer.three.domElement.parentElement,o=this._world.camera.three,a=(s=this._highlighter)==null?void 0:s.castRay(t,o,r,this._curves);if(a){const l=a,h=l.object;if((n=this._highlighter)==null||n.select(h),this.updateMarker(l,"select"),this._world.camera.hasCameraControls()&&(h.geometry.boundingBox||h.geometry.computeBoundingBox(),h.geometry.boundingBox)){const u=this.getScaledBox(h.geometry.boundingBox,2);this._world.camera.controls.fitToBox(u,!0)}this.onHighlight.trigger({mesh:h,point:l.point}),this._previousAlignment!==h.curve.alignment&&(this.components.get(Ra).showKPStations(h),this._previousAlignment=h.curve.alignment)}}),R(this,"onControlsUpdated",()=>{if(!this._world)throw new Error("No world was given for this navigator!");if(!(this._world.camera.three instanceof Qs)||!this._highlighter)return;const{zoom:t,left:s,right:n,top:r,bottom:o}=this._world.camera.three,a=s-n,l=r-o,h=Math.max(a,l)/t,u=40,{caster:c}=this._highlighter;c.params.Line.threshold=h/u})}get highlighter(){if(!this._highlighter)throw new Error("Highlighter not initialized. You must set a world first!");return this._highlighter}get world(){return this._world}set world(e){var t,s,n;if(e===this._world||(this._world&&this.setupEvents(!1),this._world=e,(t=this._highlighter)==null||t.dispose(),(s=this.mouseMarkers)==null||s.hover.dispose(),(n=this.mouseMarkers)==null||n.select.dispose(),!e))return;const r=e.scene.three;this._highlighter=new Vv(r,this.view),this.mouseMarkers={select:this.newMouseMarker("#ffffff",e),hover:this.newMouseMarker("#575757",e)},this.setupEvents(!0)}async draw(e,t){if(!e.civilData)throw new Error("The provided model doesn't have civil data!");if(!this._world)throw new Error("No world was given for this navigator!");const{alignments:s}=e.civilData,n=t||s.values(),r=this._world.scene.three,o=new Ge;o.makeEmpty(),o.min.set(Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE),o.max.set(-Number.MAX_VALUE,-Number.MAX_VALUE,-Number.MAX_VALUE);for(const l of n){if(!l)throw new Error("Alignment not found!");for(const h of l[this.view])if(r.add(h.mesh),this._curves.push(h.mesh),!o.isEmpty())o.expandByObject(h.mesh);else{h.mesh.geometry.computeBoundingBox();const u=h.mesh.geometry.boundingBox;u instanceof Ge&&o.copy(u).applyMatrix4(h.mesh.matrixWorld)}}const a=this.getScaledBox(o,1.2);this._world.camera.hasCameraControls()&&await this._world.camera.controls.fitToBox(a,!1)}async dispose(){var e;(e=this._highlighter)==null||e.dispose(),this.clear(),this.onHighlight.reset(),this._curves=[],this.onDisposed.trigger(),this.onDisposed.reset()}clear(){var e,t;(e=this._highlighter)==null||e.unSelect(),(t=this._highlighter)==null||t.unHover();for(const s of this._curves)s.removeFromParent();this._curves=[]}setMarker(e,t,s){if(!this._curves.length)return;const n=e.getCurveAt(t,this.view),r=e.getPointAt(t,this.view),{index:o}=n.curve.getSegmentAt(n.percentage);this.setMouseMarker(r,n.curve.mesh,o,s)}setDefSegments(e){const t=[],s=[],n=(r,o)=>{const a=o[1]-r[1],l=o[0]-r[0];return a/l};for(let r=0;r<e.length;r++){const o=e[r];let a,l,h,u;for(let d=0;d<Object.keys(o).length/3;d++)if(o[d*3]!==void 0&&o[d*3+1]!==void 0){a=o[d*3],l=o[d*3+1];break}for(let d=Object.keys(o).length/3-1;d>=0;d--)if(o[d*3]!==void 0&&o[d*3+1]!==void 0){h=o[d*3],u=o[d*3+1];break}const c=(n([a,l],[h,u])*100).toFixed(2);s.push({slope:c})}for(const r of e)for(let o=0;o<r.length-3;o+=3){const a=r[o],l=r[o+1],h=r[o+2],u=r[o+3],c=r[o+4],d=r[o+5];t.push({start:new P(a,l,h),end:new P(u,c,d)})}return{defSegments:t,slope:s}}hideMarker(e){this.mouseMarkers&&(this.mouseMarkers[e].visible=!1)}setupEvents(e){var t,s;if(!this._world)throw new Error("No world was given for this navigator!");if(this._world.isDisposing||!this._world.renderer)return;const n=this._world.renderer.three.domElement.parentElement;(t=this._world.renderer)==null||t.onResize.remove(this.updateLinesResolution),n.removeEventListener("pointermove",this.onMouseMove),n.removeEventListener("click",this.onClick),this._world.camera.hasCameraControls()&&this._world.camera.controls.removeEventListener("update",this.onControlsUpdated),e&&(n.addEventListener("pointermove",this.onMouseMove),n.addEventListener("click",this.onClick),(s=this._world.renderer)==null||s.onResize.add(this.updateLinesResolution),this._world.camera.hasCameraControls()&&this._world.camera.controls.addEventListener("update",this.onControlsUpdated))}newMouseMarker(e,t){if(!this._world)throw new Error("No world was given for this navigator!");const s=t.scene.three,n=document.createElement("div"),r=document.createElement("div");n.appendChild(r),r.style.backgroundColor=e,r.style.width="3rem",r.style.height="3px";const o=new Pt(this._world,n,s);return o.visible=!1,o}setMouseMarker(e,t,s,n){if(s===void 0||!this.mouseMarkers)return;this.mouseMarkers[n].visible=!0;const r=this.mouseMarkers[n].three;r.position.copy(e);const o=t,{startPoint:a,endPoint:l}=o.curve.getSegment(s),h=Math.atan2(l.y-a.y,l.x-a.x),u=r.element.children[0],c=90-h/Math.PI*180;u.style.transform=`rotate(${c}deg)`}updateMarker(e,t){const{point:s,index:n,object:r}=e,o=r,a=o.curve,l=o.curve.alignment,h=l.getPercentageAt(s,this.view),u=s.clone();this.setMouseMarker(u,o,n,t),h!==null&&this.onMarkerChange.trigger({alignment:l,percentage:h,type:t,curve:a})}getScaledBox(e,t){const s=new Ge,n=new P,r=new P;return e.getCenter(r),e.getSize(n),n.multiplyScalar(t),s.setFromCenterAndSize(r,n),s}};class GM{constructor(e,t,s){R(this,"components"),R(this,"_scene"),R(this,"_world"),R(this,"offset",10),R(this,"markupLines",[]),R(this,"currentCurveMesh"),R(this,"markupMaterial",new Is({color:6842472})),this.components=e,this._scene=t,this._world=s}showCurveInfo(e){switch(this.disposeMarkups(),this.currentCurveMesh=e,e.curve.data.TYPE){case"LINE":this.showLineInfo(e,this.offset);break;case"CIRCULARARC":this.showCircularArcInfo(e,this.offset);break;case"CLOTHOID":this.showClothoidInfo(e,this.offset);break;default:console.log("Unknown curve type:",e.curve.data.TYPE);break}}updateOffset(e,t,s){const n=Math.max(e.height,e.width)/(t*150);n!==this.offset&&(this.offset=n,s&&this.currentCurveMesh&&this.showCurveInfo(this.currentCurveMesh))}dispose(){for(const e of this.markupLines)e.removeFromParent();this.disposeMarkups(),this.markupMaterial.dispose()}disposeMarkups(){for(const e of this.markupLines)e.geometry.dispose(),e.removeFromParent();this.markupLines=[]}unSelect(){this.disposeMarkups()}calculateTangent(e,t){const s=t*3,n=Math.max(0,s-3),r=Math.min(e.length-3,s+3),o=new P().fromArray(e,n);return new P().fromArray(e,r).clone().sub(o).normalize()}calculateParallelCurve(e,t,s){const n=[];for(let r=0;r<t;r++){const o=this.calculateTangent(e,r).clone().applyAxisAngle(new P(0,0,1),Math.PI/2);o.normalize();const a=o.clone().multiplyScalar(s),l=r*3,h=new P().fromArray(e,l).add(a);n.push(h)}return n}calculateDimensionLines(e,t){const s=[],n=e.geometry.attributes.position.array,r=t.geometry.attributes.position.array;if(n.length<6&&r.length<6)throw new Error("Line must have at least two vertices");const o=new P(n[0],n[1],n[2]),a=new P(r[0],r[1],r[2]),l=[],h=n.length-3,u=new P(n[h],n[h+1],n[h+2]),c=r.length-3,d=new P(r[c],r[c+1],r[c+2]);return s.push(o,a),l.push(u,d),{startDimensionPoints:s,endDimensionPoints:l}}offsetDimensionLine(e,t){const s=new P().copy(e[e.length-1]).sub(e[0]).normalize().clone().multiplyScalar(t);return e.map(n=>n.clone().add(s))}showLineInfo(e,t){const s=this.components.get(Ra);s.world=this._world,s.deleteByType(["Length","Radius"]);const n=e.geometry.attributes.position.array,r=this.calculateParallelCurve(n,n.length/3,t),o=new Ne().setFromPoints(r),a=new tt(o,this.markupMaterial);s.showLineLength(a,e.curve.getLength()),this._scene.add(a),this.markupLines.push(a);const{startDimensionPoints:l,endDimensionPoints:h}=this.calculateDimensionLines(e,a),u=this.offsetDimensionLine(l,t*.1),c=this.offsetDimensionLine(h,t*.1),d=new Ne().setFromPoints(u),f=new Ne().setFromPoints(c),p=new tt(d,this.markupMaterial);this._scene.add(p),this.markupLines.push(p);const m=new tt(f,this.markupMaterial);this._scene.add(m),this.markupLines.push(m)}showClothoidInfo(e,t){const s=this.components.get(Ra);s.world=this._world,s.deleteByType(["Length","Radius"]);const n=e.geometry.attributes.position.array,r=this.calculateParallelCurve(n,n.length/3,t),o=new Ne().setFromPoints(r);s.showCurveLength(r,e.curve.getLength());const a=new tt(o,this.markupMaterial);this._scene.add(a),this.markupLines.push(a);const{startDimensionPoints:l,endDimensionPoints:h}=this.calculateDimensionLines(e,a),u=this.offsetDimensionLine(l,t*.1),c=this.offsetDimensionLine(h,t*.1),d=new Ne().setFromPoints(u),f=new Ne().setFromPoints(c),p=new tt(d,this.markupMaterial);this._scene.add(p),this.markupLines.push(p);const m=new tt(f,this.markupMaterial);this._scene.add(m),this.markupLines.push(m)}showCircularArcInfo(e,t){const s=this.components.get(Ra);s.world=this._world,s.deleteByType(["Length","Radius"]);const n=e.curve.data.RADIUS,r=e.geometry.attributes.position.array,o=e.geometry.attributes.position.count,a=[],l=new P(r[0],r[1],r[2]),h=(o-1)*3,u=new P(r[h],r[h+1],r[h+2]),c=o/2*3,d=new P(r[c],r[c+1],r[c+2]),f=u.clone().sub(l).normalize(),p=new P(-f.y,f.x,0);p.multiplyScalar(n);const m=d.clone().add(p);a.push(d),a.push(m);const g=new Ne().setFromPoints(a),E=new tt(g,this.markupMaterial);s.showCurveRadius(E,Math.abs(n)),this._scene.add(E),this.markupLines.push(E);const I=[];for(let N=0;N<o;N++){const y=this.calculateTangent(r,N),U=e.curve.data.RADIUS,B=new P(y.y,-y.x,0);B.normalize(),U<0&&B.negate();const k=B.clone().multiplyScalar(t),W=N*3,z=new P(r[W]+k.x,r[W+1]+k.y,r[W+2]+k.z);I.push(z)}const v=new Ne().setFromPoints(I);s.showCurveLength(I,e.curve.getLength());const b=new tt(v,this.markupMaterial);this._scene.add(b),this.markupLines.push(b);const{startDimensionPoints:C,endDimensionPoints:S}=this.calculateDimensionLines(e,b),_=this.offsetDimensionLine(C,t*.1),M=this.offsetDimensionLine(S,t*.1),A=new Ne().setFromPoints(_),F=new Ne().setFromPoints(M),D=new tt(A,this.markupMaterial);this._scene.add(D),this.markupLines.push(D);const x=new tt(F,this.markupMaterial);this._scene.add(x),this.markupLines.push(x)}}const YM=class ny extends sy{constructor(e){super(e),R(this,"view","horizontal"),R(this,"planHighlighter"),this.components.add(ny.uuid,this),this.onHighlight.add(({mesh:t})=>{!this._highlighter||!this.planHighlighter||this.planHighlighter.showCurveInfo(t)})}get world(){return super.world}set world(e){var t;super.world=e,e&&((t=this.planHighlighter)==null||t.dispose(),this.planHighlighter=new GM(this.components,e.scene.three,e))}};R(YM,"uuid","3096dea0-5bc2-41c7-abce-9089b6c9431b");const jM=class ry extends sy{constructor(e){super(e),R(this,"enabled",!0),R(this,"view","vertical"),this.components.add(ry.uuid,this)}get world(){return super.world}set world(e){this.world!==e&&(super.world=e,this._highlighter&&this._highlighter.onSelect.add(t=>{if(!this.world)throw new Error("A world is needed to work with this component!");const s=this.components.get(Ra);s.deleteByType(["Slope","Height","InitialKPV","FinalKPV"]);const{alignment:n}=t.curve,r=[];for(const h of n.vertical){const u=h.mesh.geometry.attributes.position.array;r.push(u)}const{defSegments:o,slope:a}=this.setDefSegments(r),l=this.world.scene.three;for(let h=0;h<n.vertical.length;h++){const u=n.vertical[h];s.addVerticalMarker(this.world,`S: ${a[h].slope}%`,u.mesh,"Slope",l),s.addVerticalMarker(this.world,`H: ${o[h].end.y.toFixed(2)}`,u.mesh,"Height",l)}s.addVerticalMarker(this.world,"KP: 0",n.vertical[0].mesh,"InitialKPV",l),s.addVerticalMarker(this.world,`KP: ${n.vertical.length}`,n.vertical[n.vertical.length-1].mesh,"FinalKPV",l)}))}};R(jM,"uuid","097eea29-2d5a-431a-a247-204d44670621");const WM=class oy extends be{constructor(e){super(e),R(this,"onHighlight",new Y),R(this,"onMarkerChange",new Y),R(this,"onMarkerHidden",new Y),R(this,"enabled",!0),R(this,"mouseMarkers"),R(this,"_highlighter"),R(this,"_curves",[]),R(this,"_world",null),R(this,"updateLinesResolution",t=>{var s;(s=this.highlighter)==null||s.setResolution(t)}),R(this,"onClick",t=>{if(!this.enabled||!this._highlighter)return;if(!this.world)throw new Error("No world found!");if(!this.world.renderer)return;const s=this.world.renderer.three.domElement,n=this.world.camera.three,r=this._highlighter.castRay(t,n,s,this._curves);if(r){const o=r.object;this._highlighter.select(o),this.updateMarker(r,"select");const{point:a,index:l}=r;l!==void 0&&this.onHighlight.trigger({curve:o,point:a,index:l});return}this._highlighter.unSelect(),this.mouseMarkers&&(this.mouseMarkers.hover.visible=!1),this.onMarkerHidden.trigger({type:"hover"})}),R(this,"onMouseMove",async t=>{if(!this.enabled||!this._highlighter)return;if(!this.world)throw new Error("No world found!");if(!this.world.renderer)return;const s=this.world.renderer.three.domElement,n=this.world.camera.three,r=this._highlighter.castRay(t,n,s,this._curves);if(r){this._highlighter.hover(r.object),this.updateMarker(r,"hover");return}this._highlighter.unHover()}),this.components.add(oy.uuid,this)}get world(){return this._world}set world(e){var t,s,n;if(e===this._world||(this._world&&this.setupEvents(!1),this._world=e,(t=this._highlighter)==null||t.dispose(),(s=this.mouseMarkers)==null||s.hover.dispose(),(n=this.mouseMarkers)==null||n.select.dispose(),!e))return;const r=e.scene.three;this._highlighter=new Vv(r,"absolute"),this.mouseMarkers={select:this.newMouseMarker("#ffffff",e),hover:this.newMouseMarker("#575757",e)},this.setupEvents(!0)}get highlighter(){if(!this._highlighter)throw new Error("Navigator not initialized!");return this._highlighter}draw(e){if(!e.civilData)throw new Error("Model must have civil data!");if(!this.world)throw new Error("A world must be given before drawing an alignment!");const t=this.world.scene.three;for(const[s,n]of e.civilData.alignments)for(const{mesh:r}of n.absolute)t.add(r),this._curves.push(r)}setMarker(e,t,s){if(!this.mouseMarkers)throw new Error("No mouse markers found! Initialize the world before using this.");const n=e.getPointAt(t,"absolute");this.mouseMarkers[s].visible=!0,this.mouseMarkers[s].three.position.copy(n)}hideMarker(e){if(!this.mouseMarkers)throw new Error("No mouse markers found! Initialize the world before using this.");const t=this.mouseMarkers[e].three;t.visible=!1}newMouseMarker(e,t){const s=t.scene.three,n=document.createElement("div");n.style.backgroundColor=e,n.style.width="1rem",n.style.height="1rem",n.style.borderRadius="1rem";const r=new Pt(t,n,s);return r.visible=!1,r}setupEvents(e){var t,s;if(!this.world)throw new Error("No world found!");if(this.world.isDisposing||!this.world.renderer)return;const n=this.world.renderer.three.domElement;(t=this.world.renderer)==null||t.onResize.remove(this.updateLinesResolution),n.removeEventListener("click",this.onClick),n.removeEventListener("pointermove",this.onMouseMove),e&&(n.addEventListener("click",this.onClick),n.addEventListener("pointermove",this.onMouseMove),(s=this.world.renderer)==null||s.onResize.add(this.updateLinesResolution))}updateMarker(e,t){if(!this.mouseMarkers)return;const{point:s,object:n}=e,r=n,o=r.curve,a=r.curve.alignment,l=a.getPercentageAt(s,"absolute");this.mouseMarkers[t].visible=!0,this.mouseMarkers[t].three.position.copy(s),l!==null&&this.onMarkerChange.trigger({alignment:a,percentage:l,type:t,curve:o})}};R(WM,"uuid","0a59c09e-2b49-474a-9320-99f51f40f182");const XM=class ay extends be{constructor(e){super(e),R(this,"enabled",!0),R(this,"world",null),R(this,"plane"),R(this,"_world3D",null),this.components.add(ay.uuid,this)}get world3D(){return this._world3D}set world3D(e){var t;if(this._world3D=e,(t=this.plane)==null||t.dispose(),!e)return;const s=this.components.get(io),n=s.Type;s.Type=Cc,this.plane=s.createFromNormalAndCoplanarPoint(e,new P(1,0,0),new P),s.Type=n,this.plane.visible=!1,this.plane.enabled=!1}async set(e,t){if(!this.world||!this.plane)throw new Error("You must set a world before using this component");this.plane.enabled=!0;const s=e.curve.getPercentageAt(t);if(s===null)return;const{startPoint:n,endPoint:r}=e.curve.getSegmentAt(s);if(e.geometry.index===null)throw new Error("Geometry must be indexed!");const o=new P;o.subVectors(r,n),o.normalize(),this.plane.setFromNormalAndCoplanarPoint(o,t),this.plane.edges.update();const a=this.plane.helper.matrix.clone();a.invert();const l=this.world.scene.three,h=this.plane.edges.get();for(const u in h){const{mesh:c}=h[u];c.position.set(0,0,0),c.rotation.set(0,0,0),c.updateMatrix(),c.applyMatrix4(a),c.parent!==l&&l.add(c)}this.plane.enabled=!1}};R(XM,"uuid","96b2c87e-d90b-4639-8257-8f01136fe324");function Ys(){const i=document.createElement("div");return i.style.backgroundColor="black",i.style.color="white",i.style.padding="8px",i.style.borderRadius="8px",i.style.fontFamily="sans-serif",i}const Xh=class qh{constructor(e,t,s){R(this,"label"),R(this,"boundingBox",new ne),R(this,"world"),R(this,"components"),R(this,"_length"),R(this,"_visible",!0),R(this,"_start"),R(this,"_end"),R(this,"_root",new jr),R(this,"_endpoints",[]),R(this,"_line"),this.components=e,this.world=t,this._start=s.start,this._end=s.end,this._length=this.getLength(),this._line=this.createLine(s),this.newEndpointElement(s.endpointElement),this.newEndpointElement(s.endpointElement.cloneNode(!0)),this.label=this.newText(),this._root.renderOrder=2,this.world.scene.three.add(this._root)}get visible(){return this._visible}set visible(e){this._visible=e,this.label.visible=e,this._endpoints[0].visible=e,this._endpoints[1].visible=e;const[t,s]=this._endpoints,n=t.three,r=s.three,o=this.label.three;e?(this.world.scene.three.add(this._root),this._root.add(o,n,r)):(o.removeFromParent(),n.removeFromParent(),r.removeFromParent(),this._root.removeFromParent())}get endPoint(){return this._end}set endPoint(e){this._end=e;const t=this._line.geometry.attributes.position;t.setXYZ(1,e.x,e.y,e.z),t.needsUpdate=!0,this._endpoints[1].three.position.copy(e),this.updateLabel()}get startPoint(){return this._start}set startPoint(e){this._start=e;const t=this._line.geometry.attributes.position;t.setXYZ(0,e.x,e.y,e.z),t.needsUpdate=!0,this._endpoints[0].three.position.copy(e),this.updateLabel()}get _center(){let e=this._end.clone().sub(this._start);const t=e.length()*.5;return e=e.normalize().multiplyScalar(t),this._start.clone().add(e)}dispose(){const e=this.components.get(Gi);this.visible=!1,e.destroy(this._root),e.destroy(this._line);for(const t of this._endpoints)t.dispose();this._endpoints.length=0,this.label.dispose(),this.boundingBox&&e.destroy(this.boundingBox),this.components=null}createBoundingBox(){this.boundingBox.geometry=new ct(1,1,this._length),this.boundingBox.position.copy(this._center),this.boundingBox.lookAt(this._end),this.boundingBox.visible=!1,this._root.add(this.boundingBox)}toggleLabel(){this.label.toggleVisibility()}newEndpointElement(e){const t=this._endpoints.length===0?this._start:this._end,s=new Pt(this.world,e);s.three.position.copy(t),this._endpoints.push(s),this._root.add(s.three)}updateLabel(){this._length=this.getLength(),this.label.three.element.textContent=this.getTextContent(),this.label.three.position.copy(this._center),this._line.computeLineDistances()}createLine(e){const t=new Ne;t.setFromPoints([e.start,e.end]);const s=new tt(t,e.lineMaterial);return this._root.add(s),s}newText(){const e=Ys();e.textContent=this.getTextContent();const t=new Pt(this.world,e);return t.three.position.copy(this._center),this._root.add(t.three),t}getTextContent(){return`${(this._length/qh.scale).toFixed(qh.rounding)} ${qh.units}`}getLength(){return this._start.distanceTo(this._end)}};R(Xh,"scale",1),R(Xh,"units","m"),R(Xh,"rounding",2);let Mp=Xh;class qM{constructor(e,t,s){R(this,"enabled",!0),R(this,"points",[]),R(this,"workingPlane",null),R(this,"labelMarker"),R(this,"world"),R(this,"components"),R(this,"onDisposed",new Y),R(this,"onAreaComputed",new Y),R(this,"onWorkingPlaneComputed",new Y),R(this,"onPointAdded",new Y),R(this,"onPointRemoved",new Y),R(this,"_visible",!0),R(this,"_rotationMatrix",null),R(this,"_dimensionLines",[]),R(this,"_defaultLineMaterial",new Is({color:"red"})),this.world=t,this.components=e;const n=Ys();this.labelMarker=new Pt(t,n),this.labelMarker.visible=!1,this.onPointAdded.add(r=>{this.points.length===3&&!this._dimensionLines[2]&&(this.addDimensionLine(r,this.points[0]),this.labelMarker.visible=!0)}),s==null||s.forEach(r=>this.setPoint(r))}get visible(){return this._visible}set visible(e){this._visible=e;for(const t of this._dimensionLines)t.visible=e,t.label.visible=!1;this.labelMarker.visible=e}setPoint(e,t){let s;if(t?s=t:s=this.points.length===0?0:this.points.length,s===0){this.points[0]=e;return}if(s<0||s>this.points.length)return;const n=this.points.length>s;this.points[s]=e,this.onPointAdded.trigger(e),n||this.addDimensionLine(this.points[s-1],e);const{previousLine:r,nextLine:o}=this.getLinesBetweenIndex(s);r&&(r.endPoint=e),o&&(o.startPoint=e)}removePoint(e){if(this.points.length===3)return;this.points.splice(e,1);const{previousLine:t,nextLine:s}=this.getLinesBetweenIndex(e);s&&(t.endPoint=s.endPoint),s==null||s.dispose(),this._dimensionLines.splice(e,1),this.onPointRemoved.trigger()}toggleLabel(){this.labelMarker.toggleVisibility()}addDimensionLine(e,t){const s=new Mp(this.components,this.world,{start:e,end:t,lineMaterial:this._defaultLineMaterial,endpointElement:Ys()});return s.toggleLabel(),this._dimensionLines.length>1?this._dimensionLines.splice(this._dimensionLines.length-1,0,s):this._dimensionLines.push(s),s}getLinesBetweenIndex(e){const t=e===0?this._dimensionLines.length-1:e-1,s=this._dimensionLines[t],n=this._dimensionLines[e];return{previousLine:s,nextLine:n}}computeWorkingPlane(){this.workingPlane=new Es().setFromCoplanarPoints(this.points[0],this.points[1],this.points[2]);const e=new P(0,1,0),t=this.workingPlane.normal.angleTo(e),s=new P().crossVectors(this.workingPlane.normal,e).normalize();this._rotationMatrix=new ce().makeRotationAxis(s,t),this.onWorkingPlaneComputed.trigger(this.workingPlane)}computeArea(){if(!(this._rotationMatrix&&this.workingPlane))return this.onAreaComputed.trigger(0),0;let e=0,t=0;const s=this._rotationMatrix,n=this.points.map(o=>{const a=o.clone().applyMatrix4(s),l=new Ue(a.x,a.z);return e+=l.x,t+=l.y,l}),r=Math.abs(eT.area(n));return this.labelMarker.three.element.textContent=`${r.toFixed(2)} m²`,this.labelMarker.three.position.set(e/n.length,-this.workingPlane.constant,t/n.length).applyMatrix4(s.clone().invert()),this.onAreaComputed.trigger(r),r}dispose(){this.onAreaComputed.reset(),this.onWorkingPlaneComputed.reset(),this.onPointAdded.reset(),this.onPointRemoved.reset();for(const e of this._dimensionLines)e.dispose();this.labelMarker.dispose(),this._dimensionLines=[],this.points=[],this._rotationMatrix=null,this.workingPlane=null,this._defaultLineMaterial.dispose(),this.onDisposed.trigger(),this.onDisposed.reset()}get(){return{points:this.points,workingPlane:this.workingPlane,area:this.computeArea()}}}let Fp=class extends lR{constructor(e,t){super(e,t),R(this,"onDisposed",new Y),R(this,"marker",null),R(this,"_className","default-vertex-picker"),this.onEnabled.add(s=>{this.marker&&(this.marker.visible=s)})}get className(){return this._className}set className(e){this._className=e,this.marker&&(this.marker.three.element.className=e)}dispose(){this.marker&&this.marker.dispose(),super.dispose()}get(e){const t=super.get(e);return t?(this.marker||(this.marker=new Pt(e),this.marker.three.element.className=this._className),this.marker.world!==e&&(this.marker.world=e,this.marker.three.removeFromParent(),e.scene.three.add(this.marker.three)),this.marker.visible=!0,this.marker.three.position.copy(t)):this.marker&&(this.marker.visible=!1),t}};const ZM=class ff extends be{constructor(e){super(e),R(this,"onDisposed",new Y),R(this,"list",[]),R(this,"world"),R(this,"_enabled",!1),R(this,"_visible",!0),R(this,"_vertexPicker"),R(this,"_currentAreaElement",null),R(this,"_clickCount",0),R(this,"create",()=>{if(!this.enabled)return;if(!this.world)throw new Error("World not defined for the area measurement!");const t=this._vertexPicker.get(this.world);if(t){if(!this._currentAreaElement){const s=new qM(this.components,this.world);s.onPointAdded.add(()=>{this._clickCount===2&&!s.workingPlane&&(s.computeWorkingPlane(),this._vertexPicker.workingPlane=s.workingPlane)}),s.onPointRemoved.add(()=>this._clickCount--),this._currentAreaElement=s}this._currentAreaElement.setPoint(t,this._clickCount),this._currentAreaElement.computeArea(),this._clickCount++}}),R(this,"onMouseMove",()=>{if(!this.world){console.log("No world given for the area measurement!");return}const t=this._vertexPicker.get(this.world);t&&this._currentAreaElement&&(this._currentAreaElement.setPoint(t,this._clickCount),this._currentAreaElement.computeArea())}),R(this,"onKeydown",t=>{this.enabled&&(t.key==="z"&&t.ctrlKey&&this._currentAreaElement&&this._currentAreaElement.removePoint(this._clickCount-1),t.key==="Enter"&&this._currentAreaElement&&this.endCreation(),t.key==="Escape"&&(this._clickCount===0&&!this._currentAreaElement?this.enabled=!1:this.cancelCreation()))}),this.components.add(ff.uuid,this),this._vertexPicker=new Fp(e)}set enabled(e){this._enabled=e,this._vertexPicker.enabled=e,this.setupEvents(e),e||this.cancelCreation()}get enabled(){return this._enabled}set workingPlane(e){this._vertexPicker.workingPlane=e}get workingPlane(){return this._vertexPicker.workingPlane}get visible(){return this._visible}set visible(e){this._visible=e;for(const t of this.list)t.visible=e}dispose(){this.setupEvents(!1),this._vertexPicker.dispose(),this._currentAreaElement&&this._currentAreaElement.dispose();for(const e of this.list)e.dispose();this.components=null,this.onDisposed.trigger(ff.uuid),this.onDisposed.reset()}delete(){}deleteAll(){for(const e of this.list)e.dispose();this.list=[]}endCreation(){this._currentAreaElement&&(this._currentAreaElement.points.length<3||(this._currentAreaElement&&(this.list.push(this._currentAreaElement),this._currentAreaElement.removePoint(this._clickCount),this._currentAreaElement.computeWorkingPlane(),this._currentAreaElement.computeArea(),this._currentAreaElement=null),this._vertexPicker.workingPlane=null,this._clickCount=0))}cancelCreation(){this._currentAreaElement&&(this._currentAreaElement.dispose(),this._currentAreaElement=null),this._vertexPicker.workingPlane=null,this._clickCount=0}setupEvents(e){if(!this.world)throw new Error("The area measurement needs a world to work!");if(this.world.isDisposing)return;if(!this.world.renderer)throw new Error("The world of the area measurement needs a renderer!");const t=this.world.renderer.three.domElement.parentElement;e?(t.addEventListener("pointermove",this.onMouseMove),window.addEventListener("keydown",this.onKeydown)):(t.removeEventListener("pointermove",this.onMouseMove),window.removeEventListener("keydown",this.onKeydown))}};R(ZM,"uuid","c453a99e-f054-4781-9060-33df617db4a5");class QM{constructor(e,t){R(this,"enabled",!0),R(this,"visible",!0),R(this,"points",[]),R(this,"world"),R(this,"onDisposed",new Y),R(this,"_lineMaterial",new _l({color:6629591,linewidth:2})),R(this,"_lineGeometry",new yc),R(this,"_line",new kv(this._lineGeometry,this._lineMaterial)),R(this,"_labelMarker"),R(this,"onAngleComputed",new Y),R(this,"onPointAdded",new Y),this.world=e;const s=Ys();this._labelMarker=new Pt(e,s),this.labelMarker.visible=!0,this.onPointAdded.add(()=>{this.points.length===1&&e.scene.three.add(this._line),this.points.length===3&&(this.labelMarker.visible=!0)}),this.onAngleComputed.add(n=>{this.labelMarker.three.element.textContent=`${n.toFixed(2)}°`,this.labelMarker.three.position.copy(this.points[1]??new P)}),t==null||t.forEach(n=>this.setPoint(n))}set lineMaterial(e){this._lineMaterial.dispose(),this._lineMaterial=e,this._line.material=e,this._lineMaterial.resolution.set(window.innerWidth,window.innerHeight)}get lineMaterial(){return this._lineMaterial}set labelMarker(e){this._labelMarker.dispose(),this._labelMarker=e}get labelMarker(){return this._labelMarker}get angle(){return{points:this.points,angle:this.computeAngle()}}setPoint(e,t){let s;if(t?s=t:s=this.points.length===0?0:this.points.length,![0,1,2].includes(s))return;this.points[s]=e,this.onPointAdded.trigger(e);const n=this.points.map(r=>[r.x,r.y,r.z]);this._lineGeometry.setPositions(n.flat())}toggleLabel(){this.labelMarker.toggleVisibility()}computeAngle(){const e=this.points[0],t=this.points[1],s=this.points[2];if(!(e&&t&&s))return 0;const n=new P().subVectors(t,e),r=new P().subVectors(t,s),o=Un.radToDeg(n.angleTo(r));return this.onAngleComputed.trigger(o),o}dispose(){this.points=[],this.labelMarker.dispose(),this.onAngleComputed.reset(),this.onPointAdded.reset(),this.labelMarker.dispose(),this._line.removeFromParent(),this._lineMaterial.dispose(),this._lineGeometry.dispose(),this.onDisposed.trigger(),this.onDisposed.reset()}}const KM=class pf extends be{constructor(e){super(e),R(this,"onDisposed",new Y),R(this,"world"),R(this,"list",[]),R(this,"_lineMaterial"),R(this,"_enabled",!1),R(this,"_vertexPicker"),R(this,"_currentAngleElement",null),R(this,"_clickCount",0),R(this,"create",()=>{if(!this.enabled)return;if(!this.world){console.log("No world selected for angle measurement!");return}const t=this._vertexPicker.get(this.world);if(t){if(!this._currentAngleElement){const s=new QM(this.world);s.lineMaterial=this.lineMaterial,this._currentAngleElement=s}this._currentAngleElement.setPoint(t,this._clickCount),this._currentAngleElement.setPoint(t,this._clickCount+1),this._currentAngleElement.setPoint(t,this._clickCount+2),this._currentAngleElement.computeAngle(),this._clickCount++,this._clickCount===3&&this.endCreation()}}),R(this,"onMouseMove",()=>{if(!this.world){console.log("No world selected for angle measurement!");return}const t=this._vertexPicker.get(this.world);t&&this._currentAngleElement&&(this._currentAngleElement.setPoint(t,this._clickCount),this._currentAngleElement.computeAngle())}),R(this,"onKeyDown",t=>{this.enabled&&t.key==="Escape"&&this.cancelCreation()}),this.components.add(pf.uuid,this),this._vertexPicker=new Fp(e),this._lineMaterial=new _l({color:6629591,linewidth:2})}get enabled(){return this._enabled}set enabled(e){this._enabled=e,this.setupEvents(e),this._vertexPicker.enabled=e,e||this.cancelCreation()}get lineMaterial(){return this._lineMaterial}set lineMaterial(e){this._lineMaterial.dispose(),this._lineMaterial=e,this._lineMaterial.resolution.set(window.innerWidth,window.innerHeight)}get workingPlane(){return this._vertexPicker.workingPlane}set workingPlane(e){this._vertexPicker.workingPlane=e}dispose(){this.setupEvents(!1),this._lineMaterial.dispose(),this._vertexPicker.dispose();for(const e of this.list)e.dispose();this._currentAngleElement&&this._currentAngleElement.dispose(),this.components=null,this.onDisposed.trigger(pf.uuid),this.onDisposed.reset()}delete(){}deleteAll(){for(const e of this.list)e.dispose();this.list=[]}endCreation(){this._currentAngleElement&&(this.list.push(this._currentAngleElement),this._currentAngleElement.computeAngle(),this._currentAngleElement=null),this._clickCount=0}cancelCreation(){this._currentAngleElement&&(this._currentAngleElement.dispose(),this._currentAngleElement=null),this._clickCount=0}setupEvents(e){if(!this.world)throw new Error("No world selected for angle measurement!");if(this.world.isDisposing)return;if(!this.world.renderer)throw new Error("The given world doesn't have a renderer!");const t=this.world.renderer.three.domElement.parentElement;e?(t.addEventListener("pointermove",this.onMouseMove),window.addEventListener("keydown",this.onKeyDown)):(t.removeEventListener("pointermove",this.onMouseMove),window.removeEventListener("keydown",this.onKeyDown))}};R(KM,"uuid","622fb2c9-528c-4b0a-8a0e-6a1375f0a3aa");const ly=class mf extends be{constructor(e){super(e),R(this,"onDisposed",new Y),R(this,"onBeforeUpdate",new Y),R(this,"onAfterUpdate",new Y),R(this,"onCleaned",new Y),R(this,"snapDistance",.25),R(this,"list",[]),R(this,"world"),R(this,"_vertexPicker"),R(this,"_lineMaterial",new Is({color:"#DC2626",linewidth:2,depthTest:!1})),R(this,"_visible",!0),R(this,"_enabled",!1),R(this,"_temp",{isDragging:!1,start:new P,end:new P,dimension:void 0}),R(this,"create",t=>{const s=t instanceof kn?t:void 0;if(this._enabled){if(!this._temp.isDragging){this.drawStart(s);return}this.endCreation()}}),R(this,"onMouseMove",()=>{this.world&&this._vertexPicker.get(this.world)}),R(this,"onKeydown",t=>{this.enabled&&t.key==="Escape"&&this.cancelCreation()}),this.components.add(mf.uuid,this),this._vertexPicker=new Fp(e,{previewElement:Ys(),snapDistance:this.snapDistance})}get enabled(){return this._enabled}set enabled(e){e||this.cancelCreation(),this._enabled=e,this._vertexPicker.enabled=e,this.setupEvents(e)}get visible(){return this._visible}set visible(e){this._visible=e;for(const t of this.list)t.visible=e}get color(){return this._lineMaterial.color}set color(e){this._lineMaterial.color=e}dispose(){this.setupEvents(!1),this.enabled=!1;for(const e of this.list)e.dispose();this._lineMaterial.dispose(),this.list=[],this._vertexPicker.dispose(),this.onDisposed.trigger(mf.uuid),this.onDisposed.reset()}async update(e){this._enabled&&this._temp.isDragging&&this.drawInProcess()}createOnPoints(e,t){const s=this.drawDimension();return s.startPoint=e,s.endPoint=t,s.createBoundingBox(),this.list.push(s),s}delete(){if(!this.world)throw new Error("World is needed for Length Measurement!");if(!this._enabled||this.list.length===0)return;const e=this.getBoundingBoxes(),t=this.components.get(ai).get(this.world).castRay(e);if(!t)return;const s=this.list.find(n=>n.boundingBox===t.object);if(s){const n=this.list.indexOf(s);this.list.splice(n,1),s.dispose()}}async deleteMeasurement(e){if(e){const t=this.list.indexOf(e);this.list.splice(t,1),e.dispose()}}deleteAll(){for(const e of this.list)e.dispose();this.list=[],this.onCleaned.trigger(null)}cancelCreation(){var e;this._temp.dimension&&(this._temp.isDragging=!1,(e=this._temp.dimension)==null||e.dispose(),this._temp.dimension=void 0)}endCreation(){this._temp.dimension&&(this._temp.dimension.createBoundingBox(),this.list.push(this._temp.dimension),this._temp.dimension=void 0,this._temp.isDragging=!1)}drawStart(e){if(!this.world)throw new Error("The length measurement needs a world to work!");const t=e?[e]:void 0,s=this.components.get(ai).get(this.world).castRay(t),n=this._vertexPicker.get(this.world);s&&n&&(this._temp.isDragging=!0,this._temp.start=e?s.point:n)}drawInProcess(){if(!this.world)throw new Error("The length measurement needs a world to work!");if(!this.components.get(ai).get(this.world).castRay())return;const e=this._vertexPicker.get(this.world);e&&(this._temp.end=e,this._temp.dimension||(this._temp.dimension=this.drawDimension()),this._temp.dimension.endPoint=this._temp.end)}drawDimension(){if(!this.world)throw new Error("The length measurement needs a world to work!");return new Mp(this.components,this.world,{start:this._temp.start,end:this._temp.end,lineMaterial:this._lineMaterial,endpointElement:Ys()})}getBoundingBoxes(){return this.list.map(e=>e.boundingBox).filter(e=>e!==void 0)}setupEvents(e){if(!this.world)throw new Error("The length measurement needs a world to work!");if(this.world.isDisposing)return;if(!this.world.renderer)throw new Error("The world of the length measurement needs a renderer!");const t=this.world.renderer.three.domElement.parentElement;t&&(t.removeEventListener("pointermove",this.onMouseMove),window.removeEventListener("keydown",this.onKeydown),e&&(t.addEventListener("pointermove",this.onMouseMove),window.addEventListener("keydown",this.onKeydown)))}};R(ly,"uuid","2f9bcacf-18a9-4be6-a293-e898eae64ea1");let ha=ly;const JM=class hy extends be{constructor(e){super(e),R(this,"onDisposed",new Y),R(this,"onVolumeFound",new Y),R(this,"label",null),R(this,"world"),R(this,"_enabled",!1),R(this,"create",()=>{if(!this.enabled)return;if(!this.world)throw new Error("World is needed for Volume Measurement!");const t=this.components.get(ai).get(this.world).castRay(),s=this.components.get(On);if(!t||!t.object)return;const{object:n}=t;if(n instanceof ne){const r=s.getVolumeFromMeshes([n]);this.onVolumeFound.trigger(r)}}),R(this,"onMouseMove",()=>{}),R(this,"onKeydown",t=>{}),this.components.add(hy.uuid,this)}set enabled(e){this._enabled=e,this.setupEvents(e),e||this.cancelCreation()}get enabled(){return this._enabled}async dispose(){var e;this.setupEvents(!1),(e=this.label)==null||e.dispose(),this.onDisposed.trigger(),this.onDisposed.reset(),this.components=null}delete(){}async deleteAll(){}endCreation(){}cancelCreation(){}getVolumeFromFragments(e){const t=this.components.get(On).getVolumeFromFragments(e),s=this.components.get(vc);s.reset(),s.addFragmentIdMap(e);const n=s.getSphere();return this.setLabel(n,t),t}getVolumeFromMeshes(e){const t=this.components.get(On),s=this.components.get(vc);s.reset();for(const o of e)s.addMesh(o);const n=s.getSphere(),r=t.getVolumeFromMeshes(e);return this.setLabel(n,r),r}clear(){this.label&&(this.label.visible=!1)}newLabel(){if(!this.world)throw new Error("World is needed for Volume Measurement!");const e=Ys();return new Pt(this.world,e)}setupEvents(e){if(!this.world)throw new Error("The volume measurement needs a world to work!");if(this.world.isDisposing)return;if(!this.world.renderer)throw new Error("The world of the volume measurement needs a renderer!");const t=this.world.renderer.three.domElement.parentElement;e?(t.addEventListener("click",this.create),t.addEventListener("pointermove",this.onMouseMove),window.addEventListener("keydown",this.onKeydown)):(t.removeEventListener("click",this.create),t.removeEventListener("pointermove",this.onMouseMove),window.removeEventListener("keydown",this.onKeydown))}setLabel(e,t){if(!this.world)throw new Error("World is needed for Volume Measurement!");this.label||(this.label=this.newLabel(),this.label.three.removeFromParent()),this.label.visible=!0,this.world.scene.three.add(this.label.three),this.label.three.position.copy(e.center);const s=Math.trunc(t*100)/100;this.label.three.element.textContent=s.toString()}};R(JM,"uuid","811da532-7af3-4635-b592-1c06ae494af5");const eF=class cy extends be{constructor(e){super(e),R(this,"onDisposed",new Y),R(this,"selection",[]),R(this,"preview",new ne(new Ne,new jt({side:2,depthTest:!1,transparent:!0,opacity:.25,color:"#BCF124"}))),R(this,"selectionMaterial",new jt({side:2,depthTest:!1,transparent:!0,color:"#BCF124",opacity:.75})),R(this,"world"),R(this,"_enabled",!1),R(this,"_currentSelelection",null),R(this,"create",()=>{if(!this.world)throw new Error("No world given to the face measurement!");if(!this.enabled||!this._currentSelelection)return;const t=this.world.scene.three,s=new Ne,n=new ne(s,this.selectionMaterial);s.setAttribute("position",this.preview.geometry.attributes.position),t.add(n),s.computeBoundingSphere();const{area:r,perimeter:o}=this._currentSelelection,a=this.newLabel(s,r);n.add(a.three),this.selection.push({area:r,perimeter:o,mesh:n,label:a})}),R(this,"onMouseMove",()=>{if(!this.world)throw new Error("The face measurement needs a world to work!");if(!this.enabled){this.unselect();return}const t=this.components.get(ai).get(this.world).castRay();if(!t||!t.object||t.faceIndex===void 0){this.unselect();return}const{object:s,faceIndex:n}=t;s instanceof ne||s instanceof oi?this.updateSelection(s,n,t.instanceId):this.unselect()}),R(this,"onKeydown",t=>{}),this.components.add(cy.uuid,this),this.preview.frustumCulled=!1}set enabled(e){if(!this.world)throw new Error("No world given for the Face measurement!");this._enabled=e,this.setupEvents(e),e?this.world.scene.three.add(this.preview):(this.preview.removeFromParent(),this.cancelCreation()),this.setVisibility(e)}get enabled(){return this._enabled}dispose(){this.setupEvents(!1),this.deleteAll(),this.preview.removeFromParent(),this.preview.material.dispose(),this.preview.geometry.dispose(),this.selectionMaterial.dispose(),this.onDisposed.trigger(),this.onDisposed.reset(),this.components=null}delete(){if(!this.world)throw new Error("No world given to the face measurement!");const e=this.selection.map(r=>r.mesh),t=this.components.get(ai).get(this.world).castRay(e);if(!t||!t.object)return;const s=this.selection.find(r=>r.mesh===t.object);if(!s)return;s.mesh.removeFromParent(),s.mesh.geometry.dispose(),s.label.dispose();const n=this.selection.indexOf(s);this.selection.splice(n,1)}deleteAll(){for(const e of this.selection)e.mesh.removeFromParent(),e.mesh.geometry.dispose(),e.label.dispose();this.selection=[]}endCreation(){}cancelCreation(){}get(){const e=[];for(const t of this.selection){const s=t.mesh.geometry,{area:n,perimeter:r}=t,o=s.attributes.position.array;e.push({position:o,area:n,perimeter:r})}return e}set(e){if(!this.world)throw new Error("No world given to the face measurement!");const t=this.world.scene.three;for(const s of e){const n=new Ne,r=new ne(n,this.selectionMaterial);t.add(r);const o=new Ct(s.position,3);n.setAttribute("position",o),n.computeBoundingSphere();const{area:a,perimeter:l}=s,h=this.newLabel(n,a);r.add(h.three),this.selection.push({area:a,perimeter:l,mesh:r,label:h})}}setupEvents(e){if(!this.world)throw new Error("The face measurement needs a world to work!");if(this.world.isDisposing)return;if(!this.world.renderer)throw new Error("The world of the face measurement needs a renderer!");const t=this.world.renderer.three.domElement.parentElement;t.removeEventListener("pointermove",this.onMouseMove),window.removeEventListener("keydown",this.onKeydown),e&&(t.addEventListener("pointermove",this.onMouseMove),window.addEventListener("keydown",this.onKeydown))}setVisibility(e){if(!this.world)throw new Error("The face measurement needs a world to work!");if(this.world.isDisposing)return;const t=this.world.scene.three;for(const s of this.selection){const n=s.label.three;e?(t.add(s.mesh),s.mesh.add(n)):(s.mesh.removeFromParent(),n.removeFromParent())}}unselect(){this.preview.removeFromParent(),this._currentSelelection=null}updateSelection(e,t,s){if(!this.world)throw new Error("The face measurement needs a world to work!");this.world.scene.three.add(this.preview);const n=this.components.get(On).getFace(e,t,s);if(n===null)return;const r=this.regenerateHighlight(e,n.indices,s);let o=0;for(const{distance:a}of n.edges)o+=a;this._currentSelelection={perimeter:o,area:r}}newLabel(e,t){if(!e.boundingSphere)throw new Error("Error computing area geometry");if(!this.world)throw new Error("The face measurement needs a world to work!");const{center:s}=e.boundingSphere,n=Ys(),r=Math.trunc(t*100)/100;n.textContent=r.toString();const o=new Pt(this.world,n);return o.three.position.copy(s),o}regenerateHighlight(e,t,s){const n=[],r=[];let o=0,a=0;const l=new wn,h=this.components.get(On);for(const d of t){const{p1:f,p2:p,p3:m}=h.getVerticesAndNormal(e,d,s);n.push(f.x,f.y,f.z),n.push(p.x,p.y,p.z),n.push(m.x,m.y,m.z),l.set(f,p,m),a+=l.getArea(),r.push(o,o+1,o+2),o+=3}this.preview.position.set(0,0,0),this.preview.rotation.set(0,0,0),this.preview.scale.set(1,1,1),this.preview.updateMatrix(),this.preview.applyMatrix4(e.matrixWorld);const u=new Float32Array(n),c=new Ct(u,3);return this.preview.geometry.setAttribute("position",c),this.preview.geometry.setIndex(r),a}};R(eF,"uuid","30279548-1309-44f6-aa97-ce26eed73522");const tF=class uy extends be{constructor(e){super(e),R(this,"onDisposed",new Y),R(this,"preview"),R(this,"tolerance",.3),R(this,"world"),R(this,"_enabled",!1),R(this,"_lineMaterial",new Is({color:"#DC2626",linewidth:2,depthTest:!1,transparent:!0})),R(this,"create",async()=>{if(!this.preview||!this.enabled||!this.preview.visible)return;const t=this.components.get(ha);t.world=this.world;const s=this.preview.startPoint.clone(),n=this.preview.endPoint.clone();t.createOnPoints(s,n)}),R(this,"onMouseMove",()=>{if(!this.preview)return;if(!this.world)throw new Error("The edge measurement needs a world to work!");if(!this.enabled){this.preview.visible=!1;return}const t=this.components.get(ai).get(this.world).castRay();if(!t||!t.object){this.preview.visible=!1;return}const{object:s,faceIndex:n,point:r}=t;if(n===void 0){this.preview.visible=!1;return}s instanceof ne||s instanceof oi?this.updateSelection(s,r,n,t.instanceId):this.preview.visible=!1}),R(this,"onKeydown",t=>{}),this.components.add(uy.uuid,this)}set enabled(e){if(this._enabled=e,this.setupEvents(e),e){if(!this.world)throw new Error("The edge measurement needs a world to work!");if(!this.preview){const t=document.createElement("div");t.className="w-2 h-2 bg-red-600 rounded-full",this.preview=new Mp(this.components,this.world,{start:new P,end:new P,lineMaterial:this._lineMaterial,endpointElement:t}),this.preview.visible=!1}}else this.cancelCreation()}get enabled(){return this._enabled}dispose(){this.preview&&this.preview.dispose(),this._lineMaterial.dispose(),this.setupEvents(!1),this.onDisposed.trigger(),this.onDisposed.reset(),this.components=null}delete(){if(!this.enabled)return;const e=this.components.get(ha),t=e.enabled;e.enabled=!0,e.delete(),e.enabled=t}deleteAll(){this.components.get(ha).deleteAll()}endCreation(){}cancelCreation(){}get(){const e=this.components.get(ha).list,t=[];for(const s of e){const n=s.startPoint,r=s.endPoint,o=[n.x,n.y,n.z,r.x,r.y,r.z];t.push(o)}return t}set(e){const t=this.components.get(ha);t.world=this.world;for(const s of e){const[n,r,o,a,l,h]=s,u=new P(n,r,o),c=new P(a,l,h);t.createOnPoints(u,c)}}setupEvents(e){if(!this.world)throw new Error("The edge measurement needs a world to work!");if(this.world.isDisposing)return;if(!this.world.renderer)throw new Error("The world of the edge measurement needs a renderer!");const t=this.world.renderer.three.domElement.parentElement;e?(t.addEventListener("pointermove",this.onMouseMove),window.addEventListener("keydown",this.onKeydown)):(t.removeEventListener("pointermove",this.onMouseMove),window.removeEventListener("keydown",this.onKeydown))}updateSelection(e,t,s,n){if(!this.preview||!e.geometry.index)return;const r=this.components.get(On).getFace(e,s,n);if(!r)return;const{edges:o}=r;let a=Number.MAX_VALUE,l=[];for(const c of o){const[d,f]=c.points,p=On.distanceFromPointToLine(t,d,f,!0);p<this.tolerance&&p<a&&(a=p,l=c.points)}if(!l.length){this.preview.visible=!1;return}const[h,u]=l;this.preview.startPoint=h,this.preview.endPoint=u,this.preview.visible=!0}};R(tF,"uuid","e7be5749-89df-4514-8d25-83aa38ce12d8");class iF extends Vb{constructor(e,t){super(e,t),R(this,"threshold",50),R(this,"bboxThreshold",200),R(this,"maxLostTime",3e4),R(this,"maxHiddenTime",5e3),R(this,"boxes",new Map),R(this,"_staticGeometries",{culled:{},unculled:{}}),R(this,"_geometry"),R(this,"_material",new jt({transparent:!1,side:2,opacity:1})),R(this,"_materialT",new tT),R(this,"onViewUpdated",new rs),R(this,"_modelIDIndex",new Map),R(this,"_indexModelID",new Map),R(this,"_nextModelID",0),R(this,"_geometries",new Map),R(this,"_geometriesGroups",new Map),R(this,"_geometriesInMemory",new Set),R(this,"_intervalID",null),R(this,"codes",new Map),R(this,"handleWorkerMessage",async n=>{const r=n.data.colors,o={},a={},l={},h={},u=performance.now();let c=!1;const d=new Set(this._geometriesInMemory);for(const[f,p]of r){const m=this._geometries.get(f);if(!m||!(p>this.threshold))continue;d.delete(f);const{exists:g}=m,E=this._indexModelID.get(m.modelIndex);g?(m.time=u,h[E]||(h[E]=new Set),h[E].add(m.geometryID),this._geometriesInMemory.add(f),c=!0):(o[E]||(o[E]=new Map),m.time=u,m.exists=!0,o[E].has(p)||o[E].set(p,new Set),o[E].get(p).add(m.geometryID),this._geometriesInMemory.add(f),c=!0)}for(const f of d){const p=this._geometries.get(f);p&&(this.handleLostGeometries(u,f,p,a,l),c=!0)}c&&await this.onViewUpdated.trigger({toLoad:o,toRemove:a,toHide:l,toShow:h}),this._isWorkerBusy=!1}),this.config.updateInterval=500,this._geometry=new ct(1,1,1),this._geometry.groups=[],this._geometry.deleteAttribute("uv");const s=this._geometry.attributes.position.array;for(let n=0;n<s.length;n++)s[n]+=.5;this._geometry.attributes.position.needsUpdate=!0,this.worker.addEventListener("message",this.handleWorkerMessage)}dispose(){super.dispose(),this.onViewUpdated.reset(),this._intervalID!==null&&(window.clearInterval(this._intervalID),this._intervalID=null);for(const[e,t]of this._geometriesGroups){t.removeFromParent();const s=[...t.children];for(const n of s)n.removeFromParent()}this._geometriesGroups.clear();for(const[e,t]of this.boxes)t.dispose(!0);this.boxes.clear();for(const[e,t]of this._geometries)t.fragment&&(t.fragment.dispose(!0),t.fragment=void 0);this._geometries.clear(),this._staticGeometries={culled:{},unculled:{}},this._geometry.dispose(),this._material.dispose(),this._modelIDIndex.clear(),this._indexModelID.clear(),this.codes.clear()}add(e,t,s){const n=this.createModelIndex(e),r=ns.enabled;ns.enabled=!1;const o=new Map,a=new ce,l=new rc(this._geometry,this._material,10);this.boxes.set(n,l),this.scene.add(l.mesh);const h=new jr;this.scene.add(h),this._geometriesGroups.set(n,h);const u=new Map;for(const d of t)for(const f of d.geometries){const{geometryID:p,transformation:m,color:g}=f,E=new He;E.setRGB(g[0],g[1],g[2],"srgb");const I=this.getInstanceID(d.id,p),v=s[p];if(!v){console.log(`Geometry not found: ${p}`);continue}const{boundingBox:b}=v;let C;o.has(p)?C=o.get(p):(C=this.getAvailableColor(),this.increaseColor(),o.set(p,C));const{r:S,g:_,b:M,code:A}=C,F=new He;F.setRGB(S/255,_/255,M/255,"srgb"),this.codes.has(n)||this.codes.set(n,new Map),this.codes.get(n).set(p,A);const D=new ce,x=Object.values(b);if(D.fromArray(m),a.fromArray(x),D.multiply(a),u.has(I)){const N=u.get(I);if(N===void 0||!N.colors)throw new Error("Malformed item!");N.colors.push(F),N.geometryColors.push(E),N.transforms.push(D)}else u.set(I,{id:I,colors:[F],geometryColors:[E],transforms:[D]});if(this._geometries.has(A))this._geometries.get(A).assetIDs.add(d.id);else{const N=new Set([d.id]);this._geometries.set(A,{modelIndex:n,geometryID:p,assetIDs:N,exists:!1,hidden:!1,time:0})}}const c=Array.from(u.values());l.add(c),ns.enabled=r}remove(e){const t=this._modelIDIndex.get(e);if(t===void 0)throw new Error("Model doesn't exist!");const s=this._geometriesGroups.get(t);s.removeFromParent();const n=[...s.children];for(const o of n)o.removeFromParent();this._geometriesGroups.delete(t),this.boxes.get(t).dispose(!1),this.boxes.delete(t);const r=this.codes.get(t);this.codes.delete(t);for(const[o,a]of r){const l=this._geometries.get(a);l&&l.fragment&&(l.fragment.dispose(!1),l.fragment=void 0),this._geometries.delete(a)}this._modelIDIndex.delete(e),this._indexModelID.delete(t),this._geometriesInMemory.clear()}addFragment(e,t,s){var n,r;const o=ns.enabled;ns.enabled=!1;const a=this._modelIDIndex.get(e),l=this.codes.get(a).get(t),h=this._geometries.get(l);if(this.setGeometryVisibility(h,!1,!1),!h.fragment){const p=((r=(n=s.mesh.instanceColor)==null?void 0:n.array)==null?void 0:r[4])!==void 0&&s.mesh.instanceColor.array[4]<.9?this._materialT:this._material;h.fragment=new rc(s.mesh.geometry,p,s.capacity);const m=this._geometriesGroups.get(a);if(!m)throw new Error("Group not found!");m.add(h.fragment.mesh)}const[u,c,d]=l.split("-").map(p=>parseInt(p,10)),f=[];for(const p of s.ids){const m=s.get(p);if(!m.colors)throw new Error("Malformed fragments!");for(const g of m.colors)g.setRGB(u/255,c/255,d/255,"srgb");f.push(m)}h.fragment.add(f),ns.enabled=o,this.needsUpdate=!0}removeFragment(e,t){const s=this._modelIDIndex.get(e),n=this.codes.get(s).get(t),r=this._geometries.get(n);if(r.hidden||this.setGeometryVisibility(r,!0,!1),r.fragment){const{fragment:o}=r;o.dispose(!1),r.fragment=void 0}}setModelTransformation(e,t){const s=this._modelIDIndex.get(e);if(s===void 0)throw new Error("Model not found!");const n=this.boxes.get(s);n&&(n.mesh.position.set(0,0,0),n.mesh.rotation.set(0,0,0),n.mesh.scale.set(1,1,1),n.mesh.applyMatrix4(t));const r=this._geometriesGroups.get(s);r&&(r.position.set(0,0,0),r.rotation.set(0,0,0),r.scale.set(1,1,1),r.applyMatrix4(t))}setVisibility(e,t,s){const n=this._modelIDIndex.get(t);if(n!==void 0)for(const[r,o]of s){const a=this.codes.get(n);if(a===void 0)throw new Error("Map not found!");const l=a.get(r),h=this._geometries.get(l);if(h===void 0)throw new Error("Geometry not found!");h.hidden=!e,this.setGeometryVisibility(h,e,!0,o)}}updateTransformations(e){const t=this._modelIDIndex.get(e);if(t===void 0)return;const s=this.components.get(ve).groups.get(e);if(s){s.updateWorldMatrix(!0,!1),s.updateMatrix();const n=this.boxes.get(t);n&&(n.mesh.position.set(0,0,0),n.mesh.rotation.set(0,0,0),n.mesh.scale.set(1,1,1),n.mesh.updateMatrix(),n.mesh.applyMatrix4(s.matrixWorld),n.mesh.updateMatrix());const r=this._geometriesGroups.get(t);r&&(r.position.set(0,0,0),r.rotation.set(0,0,0),r.scale.set(1,1,1),r.updateMatrix(),r.applyMatrix4(s.matrixWorld),r.updateMatrix())}}async addStaticGeometries(e,t=!0){const s={data:{colors:new Map}},n=this.threshold+1e3;for(const r in e){const o=this._modelIDIndex.get(r);if(o===void 0)continue;const a=this.codes.get(o);if(!a)continue;const l=e[r];for(const h of l){const u=a.get(h);if(!u)continue;const c=this._geometries.get(u);if(!c)continue;c.exists=!0,t||(c.hidden=!1,c.time=performance.now(),s.data.colors.set(u,n)),this._geometriesInMemory.add(u);const d=t?this._staticGeometries.culled:this._staticGeometries.unculled;d[r]||(d[r]=new Set),d[r].add(h)}}t||await this.handleWorkerMessage(s)}removeStaticGeometries(e,t){const s=[];t===void 0?s.push("culled","unculled"):t===!0?s.push("culled"):s.push("unculled");for(const n in e){const r=e[n];for(const o of s){const a=this._staticGeometries[o][n];if(a)for(const l of r)a.delete(l)}}}cancel(e){for(const t in e){const s=this._modelIDIndex.get(t);if(s===void 0)throw new Error("Model not found.");const n=this.codes.get(s);if(n===void 0)throw new Error("Codes not found.");for(const r of e[t]){const o=n.get(r);if(o===void 0)throw new Error("Color code not found.");this._geometriesInMemory.delete(o);const a=this._geometries.get(o);if(!a)throw new Error("Geometry not found.");a.exists=!1}}}getBoundingBoxes(e){const t=new as;for(const s in e){const n=e[s],r=this._modelIDIndex.get(s);if(r===void 0)continue;const o=this.boxes.get(r);if(!o)continue;const a=o.clone(n);t.add(a.mesh),t.items.push(a)}return t}getInstanceID(e,t){const s=10**(Math.log(t)*Math.LOG10E+1|0);return e+t/s}setGeometryVisibility(e,t,s,n){const{modelIndex:r,geometryID:o,assetIDs:a}=e,l=this.boxes.get(r);if(l===void 0)throw new Error("Model not found!");const h=n||a;if(s&&e.fragment)e.fragment.setVisibility(t,h);else{const u=new Set;for(const c of h){const d=this.getInstanceID(c,o);u.add(d)}l.setVisibility(t,u)}}handleLostGeometries(e,t,s,n,r){var o,a,l;const h=this._indexModelID.get(s.modelIndex),u=e-s.time,{culled:c,unculled:d}=this._staticGeometries;if(u>this.maxLostTime){if((o=c[h])!=null&&o.has(s.geometryID)||(a=d[h])!=null&&a.has(s.geometryID))return;n[h]||(n[h]=new Set),s.exists=!1,n[h].add(s.geometryID),this._geometriesInMemory.delete(t)}else if(u>this.maxHiddenTime){if((l=d[h])!=null&&l.has(s.geometryID))return;r[h]||(r[h]=new Set),r[h].add(s.geometryID)}}createModelIndex(e){if(this._modelIDIndex.has(e))throw new Error("Can't load the same model twice!");const t=this._nextModelID;return this._nextModelID++,this._modelIDIndex.set(e,t),this._indexModelID.set(t,e),t}}const sF=class gf extends be{constructor(e){super(e),R(this,"enabled",!0),R(this,"onFragmentsDeleted",new Y),R(this,"onFragmentsLoaded",new Y),R(this,"onDisposed",new Y),R(this,"models",{}),R(this,"serializer",new AE),R(this,"maxRamTime",5e3),R(this,"useCache",!0),R(this,"cancel",!1),R(this,"url",""),R(this,"fetch",async t=>fetch(this.url+t)),R(this,"fileDB",new $1("that-open-company-streaming")),R(this,"_culler",null),R(this,"_world",null),R(this,"_ramCache",new Map),R(this,"_isDisposing",!1),R(this,"_geometryInstances",{}),R(this,"_loadedFragments",{}),R(this,"fragIDData",new Map),R(this,"_baseMaterial",new nc),R(this,"_baseMaterialT",new nc({transparent:!0,opacity:.5})),R(this,"disposeStreamedGroup",t=>{this._isDisposing=!0;const{groupID:s,fragmentIDs:n}=t;if(this.models[s]){delete this.models[s],delete this._geometryInstances[s],delete this._loadedFragments[s];for(const r of n)this.fragIDData.delete(r);this.culler.remove(s),this._isDisposing=!1}}),this.components.add(gf.uuid,this),this.components.get(ve).onFragmentsDisposed.add(this.disposeStreamedGroup),as.setPropertiesDB(!0)}get world(){if(!this._world)throw new Error("You must set a world before using the streamer!");return this._world}set world(e){var t;this._world=e,(t=this._culler)==null||t.dispose(),this._culler=new iF(this.components,e),this._culler.onViewUpdated.add(async({toLoad:s,toRemove:n,toShow:r,toHide:o})=>{await this.loadFoundGeometries(s),await this.unloadLostGeometries(n),this.setMeshVisibility(r,!0),this.setMeshVisibility(o,!1)})}get culler(){if(!this._culler)throw new Error("You must set a world before using the streamer!");return this._culler}dispose(){var e;this._isDisposing=!0,this.onFragmentsLoaded.reset(),this.onFragmentsDeleted.reset(),this._ramCache.clear(),this.components.get(ve).onFragmentsDisposed.remove(this.disposeStreamedGroup),this.models={},this._geometryInstances={},this._loadedFragments={},this.fragIDData.clear(),this._baseMaterial.dispose(),this._baseMaterialT.dispose(),(e=this._culler)==null||e.dispose(),this.onDisposed.trigger(gf.uuid),this.onDisposed.reset(),this._isDisposing=!1,as.setPropertiesDB(!1)}async load(e,t,s){const{assets:n,geometries:r,globalDataFileId:o}=e,a=await(await this.fetch(o)).arrayBuffer(),l=new Uint8Array(a),h=this.components.get(ve).load(l,{coordinate:t,isStreamed:!0});h.name=o.replace("-processed-global",""),this.world.scene.three.add(h);const{opaque:u,transparent:c}=h.geometryIDs;for(const[m,g]of u){const E=h.keyFragments.get(g);if(E===void 0)throw new Error("Malformed fragments group!");this.fragIDData.set(E,[h,m,new Set])}for(const[m,g]of c){const E=h.keyFragments.get(g);if(E===void 0)throw new Error("Malformed fragments group!");this.fragIDData.set(E,[h,Math.abs(m),new Set])}this.culler.add(h.uuid,n,r);const d=new Map;for(const m of n)d.set(m.id,m);const f={assetsMap:d,geometries:r};Object.defineProperty(f,"assets",{get:()=>Array.from(f.assetsMap.values())}),this.models[h.uuid]=f;const p=new Map;for(const m of n){const g=m.id;for(const{transformation:E,geometryID:I,color:v}of m.geometries){p.has(I)||p.set(I,[]);const b=p.get(I);if(!b)throw new Error("Malformed instances");b.push({id:g,transformation:E,color:v})}}if(this._geometryInstances[h.uuid]=p,s){const m=new Map,g=new Map;for(const C in s.ids){const S=s.ids[C],_=parseInt(C,10);m.set(_,S)}for(const C in s.types){const S=s.types[C],_=parseInt(C,10);g.set(_,S)}const E=o.replace("-global","-properties");as.url=this.url,h.streamSettings={baseFileName:E,ids:m,types:g};const{indexesFile:I}=s,v=await(await this.fetch(I)).text(),b=this.components.get(Ht);b.setRelationMap(h,b.getRelationsMapFromJSON(v))}return this.culler.updateTransformations(h.uuid),this.culler.needsUpdate=!0,h}remove(e){const t=this.components.get(ve),s=t.groups.get(e);s&&t.disposeGroup(s)}setVisibility(e,t){const s=new Map;if(!t){const n=this.components.get(ve),r={};for(const[,o]of n.groups){const a=o.getFragmentMap();for(const l in a)r[l]=a[l]}t=r}for(const n in t){const r=this.fragIDData.get(n);if(r===void 0)throw new Error("Geometry not found!");const[o,a,l]=r,h=o.uuid;s.has(h)||s.set(h,new Map);const u=s.get(h),c=t[n];for(const f of c)e?l.delete(f):l.add(f);u.get(a)||u.set(a,new Set);const d=u.get(a);for(const f of c)d.add(f)}for(const[n,r]of s){this.culler.setVisibility(e,n,r);for(const[o]of r){const a=this._loadedFragments[n];if(!a)continue;const l=a[o];if(l)for(const h of l){const u=t[h.id];u&&h.setVisibility(e,u)}}}this.culler.needsUpdate=!0}async clearCache(){await this.fileDB.clear()}async setStatic(e,t,s){const n={};for(const r of e){const o=this.fragIDData.get(r);if(!o){console.log(`Item not found: ${r}.`);continue}const[a,l]=o,h=a.uuid;n[h]||(n[h]=new Set),n[h].add(l)}if(t){const r={};for(const o in n){const a=new Map;a.set(1,n[o]),r[o]=a}await this.loadFoundGeometries(r,!1),await this.culler.addStaticGeometries(n,s)}else this.culler.removeStaticGeometries(n,s)}getBoundingBoxes(e){const t={},s=this.components.get(ve),n=new Map;for(const[o,a]of s.groups)for(const[,l]of a.keyFragments)n.set(l,o);const r=new Set;for(const o in e){const a=n.get(o);if(a===void 0){console.log("Fragment group not found!");continue}const l=e[o];r.has(a)||(t[a]=new Set,r.add(a));for(const h of l){const u=this.models[a].assetsMap.get(h);if(u)for(const c of u.geometries){const d=c.geometryID,f=this.culler.getInstanceID(h,d);t[a].add(f)}}}return this.culler.getBoundingBoxes(t)}async loadFoundGeometries(e,t=!0){this.cancel=!1;const s={};for(const n in e){const r=new Set;for(const[,o]of e[n])for(const a of o)r.add(a);s[n]=r}for(const n in e){if(this._isDisposing)return;if(this.cancel){this.cancelLoading(s);return}const r=this.components.get(ve).groups.get(n);if(!r)return;const{geometries:o}=this.models[n],a=new Map,l=new Set;for(const[f,p]of e[n])for(const m of p){if(this.cancel){this.cancelLoading(s);return}l.add(m);const g=o[m];if(!g)throw new Error("Geometry not found");if(g.geometryFile){const E=g.geometryFile,I=a.get(E)||0;a.set(E,I+f)}}if(this.useCache){const f=a.entries();for(const[p,m]of f)this.fileDB.isCached(p)&&a.set(p,m+99999)}const h=Array.from(a).sort((f,p)=>p[1]-f[1]),u=[];for(const[f]of h){const p=this.loadFragmentFile(n,r,t,f,l,s);u.push(p)}await Promise.all(u);const c=new Set,d=performance.now();for(const[f,{time:p}]of this._ramCache)d-p>this.maxRamTime&&c.add(f);for(const f of c)this._ramCache.delete(f)}}async unloadLostGeometries(e){if(this._isDisposing)return;const t=[],s=this.components.get(ve);for(const n in e){const r=s.groups.get(n);if(!r)throw new Error("Fragment group not found!");if(!this._loadedFragments[n])continue;const o=this._loadedFragments[n],a=e[n];for(const l of a){if(this.culler.removeFragment(r.uuid,l),!o[l])continue;const h=o[l];for(const u of h)r.items.splice(r.items.indexOf(u),1),t.push(u);delete o[l]}}t.length&&this.onFragmentsDeleted.trigger(t);for(const n of t)s.list.delete(n.id),this.world.meshes.delete(n.mesh),n.mesh.material=[],n.dispose(!0)}setMeshVisibility(e,t){for(const s in e)for(const n of e[s]){const r=this._loadedFragments[s];if(!r)continue;const o=r[n];if(o)for(const a of o)a.mesh.visible=t}}newFragment(e,t,s,n,r,o,a){if(n.length===0||this._isDisposing)return;const l=e.geometryIDs,h=r?l.transparent:l.opaque,u=t*(r?-1:1),c=h.get(u);if(c===void 0)return;const d=e.keyFragments.get(c);if(d===void 0)return;const f=this.components.get(ve);if(f.list.has(d))return;const p=r?this._baseMaterialT:this._baseMaterial,m=new rc(s,p,n.length);m.mesh.visible=a,m.id=d,m.mesh.uuid=d,m.group=e,e.add(m.mesh),e.items.push(m),f.list.set(m.id,m),this.world.meshes.add(m.mesh),this._loadedFragments[e.uuid]||(this._loadedFragments[e.uuid]={});const g=this._loadedFragments[e.uuid];g[t]||(g[t]=[]),g[t].push(m);const E=new Map;for(let C=0;C<n.length;C++){const S=new ce,_=new He,{id:M,transformation:A,color:F}=n[C];S.fromArray(A);const[D,x,N]=F;if(_.setRGB(D,x,N,"srgb"),E.has(M)){const y=E.get(M);if(!y)continue;y.transforms.push(S),y.colors&&y.colors.push(_)}else E.set(M,{id:M,colors:[_],transforms:[S]})}const I=Array.from(E.values());m.add(I);const v=this.fragIDData.get(m.id);if(!v)throw new Error("Fragment data not found!");const b=v[2];b.size&&m.setVisibility(!1,b),this.culler.addFragment(e.uuid,t,m),o.push(m)}cancelLoading(e){this.cancel=!1,this.culler.cancel(e)}async loadFragmentFile(e,t,s,n,r,o){if(!this._ramCache.has(n)){let h=new Uint8Array;if(this.useCache){const c=await this.fileDB.get(n);if(c){const d=await c.arrayBuffer();h=new Uint8Array(d)}else{const d=await(await this.fetch(n)).arrayBuffer();h=new Uint8Array(d),await this.fileDB.add(n,h)}}else{const c=await(await this.fetch(n)).arrayBuffer();h=new Uint8Array(c)}const u=this.serializer.import(h);this._ramCache.set(n,{data:u,time:performance.now()})}const a=this._ramCache.get(n);if(!a)return;a.time=performance.now();const l=[];if(a)for(const[h,{position:u,index:c,normal:d}]of a.data){if(this._isDisposing)return;if(this.cancel){this.cancelLoading(o);return}if(o[e].delete(h),!r.has(h)||!this._geometryInstances[e]||!this._geometryInstances[e].has(h))continue;const f=this._geometryInstances[e].get(h);if(!f)throw new Error("Instances not found!");const p=new Ne,m=new Ct(u,3),g=new Ct(d,3);p.setAttribute("position",m),p.setAttribute("normal",g),p.setIndex(Array.from(c));const E=[],I=[];for(const v of f)v.color[3]===1?I.push(v):E.push(v);this.newFragment(t,h,p,E,!0,l,s),this.newFragment(t,h,p,I,!1,l,s)}l.length&&!this._isDisposing&&this.onFragmentsLoaded.trigger(l)}};R(sF,"uuid","22437e8d-9dbc-4b99-a04f-d2da280d50c8");class nF{constructor(){R(this,"_meshes",new Map)}highlight(e,t,s,n){if(!t.userData.indexFragmentMap||!t.geometry.index)return;const{userData:r}=t,o=r.indexFragmentMap,a=[],l=t.geometry.index.array;for(const[c,d]of o)for(const f in d)if(n[f]){for(const p of d[f])if(n[f].has(p)){const m=l[c*3],g=l[c*3+1],E=l[c*3+2];a.push(m,g,E)}}this._meshes.has(e)||this._meshes.set(e,new Map);const h=this._meshes.get(e);if(!h.has(t.uuid)){const c=new jt({depthTest:!1,side:2,color:s}),d=new Ne;d.attributes=t.geometry.attributes;const f=new ne(d,c);f.frustumCulled=!1,h.set(t.uuid,f)}const u=h.get(t.uuid);u.position.copy(t.position),t.parent&&t.parent!==u.parent&&t.parent.add(u),u.geometry.setIndex(a),u.material.color.copy(s)}clear(e){for(const[t,s]of this._meshes)if(!(e&&e!==t))for(const[n,r]of s)r.removeFromParent()}dispose(){for(const[e,t]of this._meshes)for(const[s,n]of t)n.removeFromParent(),n.geometry.attributes={},n.geometry.dispose(),n.material.dispose();this._meshes.clear()}}const dy=class Ef extends be{constructor(e){super(e),R(this,"onDisposed",new Y),R(this,"onBeforeUpdate",new Y),R(this,"onAfterUpdate",new Y),R(this,"onSetup",new Y),R(this,"isSetup",!1),R(this,"enabled",!0),R(this,"events",{}),R(this,"multiple","ctrlKey"),R(this,"zoomFactor",1.5),R(this,"zoomToSelection",!1),R(this,"backupColor",null),R(this,"selection",{}),R(this,"config",{selectName:"select",hoverName:"hover",selectionColor:new He("#BCF124"),hoverColor:new He("#6528D7"),autoHighlightOnClick:!0,world:null,selectEnabled:!0,hoverEnabled:!0}),R(this,"colors",new Map),R(this,"autoToggle",new Set),R(this,"mouseDownPosition",{x:0,y:0}),R(this,"mouseMoveThreshold",5),R(this,"selectable",{}),R(this,"eventManager",new Kx),R(this,"_fills",new nF),R(this,"_mouseState",{down:!1,moved:!1}),R(this,"_colorsBeforeSelect",{}),R(this,"saveHighlightersBeforeSelect",t=>{var s;const n=this.components.get(ve);for(const r in t){const o=n.list.get(r);if(!o)continue;const a=(s=o.group)==null?void 0:s.uuid;if(a)for(const l in this.selection){if(l===this.config.selectName||l===this.config.hoverName)continue;const h=this.selection[l][r];if(h){l in this._colorsBeforeSelect||(this._colorsBeforeSelect[l]={}),a in this._colorsBeforeSelect[l]||(this._colorsBeforeSelect[l]={[a]:new Set});for(const u of h)this._colorsBeforeSelect[l][a].add(u)}}}}),R(this,"restoreHighlightersAfterDeselect",()=>{const t=this.components.get(ve);for(const s in this._colorsBeforeSelect){let n={};const r=this._colorsBeforeSelect[s];for(const o in r){const a=t.groups.get(o);if(!a)continue;const l=a.getFragmentMap(r[o]);n={...n,...l}}this.highlightByID(s,n,!1,!1)}this._colorsBeforeSelect={}}),R(this,"clearHover",()=>{this.selection[this.config.hoverName]={}}),R(this,"onMouseDown",t=>{this.enabled&&(this.mouseDownPosition={x:t.clientX,y:t.clientY},this._mouseState.down=!0)}),R(this,"onMouseUp",async t=>{if(!this.enabled)return;const{world:s,autoHighlightOnClick:n,selectEnabled:r}=this.config;if(!s)throw new Error("No world found!");if(!s.renderer)throw new Error("This world doesn't have a renderer!");if(t.target===s.renderer.three.domElement){if(this._mouseState.down=!1,this._mouseState.moved||t.button!==0){this._mouseState.moved=!1;return}if(this._mouseState.moved=!1,n&&r){const o=this.multiple==="none"?!0:!t[this.multiple];await this.highlight(this.config.selectName,o,this.zoomToSelection)}}}),R(this,"onMouseMove",async t=>{if(!this.enabled)return;const s=t.clientX-this.mouseDownPosition.x,n=t.clientY-this.mouseDownPosition.y,r=Math.sqrt(s*s+n*n),{hoverName:o,hoverEnabled:a}=this.config;if(this._mouseState.moved){this.clear(o);return}if(r>this.mouseMoveThreshold){this._mouseState.moved=this._mouseState.down;const l={};for(const h in this.selection){if(h===o)continue;const u=this.selection[h];for(const c in u){c in l||(l[c]=new Set);const d=u[c];for(const f of d)l[c].add(f)}}a&&await this.highlight(this.config.hoverName,!0,!1,l)}}),this.components.add(Ef.uuid,this),this.eventManager.list.add(this.onSetup),this.eventManager.list.add(this.onDisposed)}async dispose(){this.setupEvents(!1),this._fills.dispose(),this.onBeforeUpdate.reset(),this.onAfterUpdate.reset(),this.selection={};for(const e in this.events){const{onClear:t,onHighlight:s}=this.events[e];this.eventManager.list.delete(t),this.eventManager.list.delete(s)}this.onDisposed.trigger(Ef.uuid),this.eventManager.reset()}add(e,t){if(this.selection[e]||this.colors.has(e))throw new Error("A selection with that name already exists!");this.colors.set(e,t),this.selection[e]={};const s=new Y,n=new Y,r=new Y;this.events[e]={onHighlight:s,onClear:r,onBeforeHighlight:n},this.eventManager.add([r,s,n])}remove(e){if(this.clear(e),delete this.selection[e],this.colors.delete(e),this.selection[e]||this.colors.has(e))throw new Error("A selection with that name already exists!");if(this.events[e]){const{onHighlight:t,onClear:s,onBeforeHighlight:n}=this.events[e];this.eventManager.remove([s,t,n]),delete this.events[e]}}async highlight(e,t=!0,s=this.zoomToSelection,n={}){if(!this.enabled)return null;if(!this.config.world)throw new Error("No world found in config!");const r=this.config.world;if(!this.selection[e])throw new Error(`Selection ${e} does not exist.`);const o=[],a=this.components.get(ve).meshes;for(const g of a)o.push(g);const l=this.components.get(io);for(const g of l.list){const E=g;if(E.edges){const I=E.edges.fillMeshes;for(const v of I)o.push(v)}}const h=this.components.get(ai).get(r).castRay(o);if(!h||!h.face)return this.clear(e),null;const u=h.object;if(!u.fragment&&u.userData.indexFragmentMap){if(h.faceIndex===void 0||!u.geometry.index)return null;const{userData:g}=u,E=g.indexFragmentMap.get(h.faceIndex);if(E){await this.highlightByID(e,E,t,s,n,u,!0);const I=Object.keys(E)[0];return{id:Array.from(E[I])[0],fragments:E}}return null}const c=u.geometry,d=h.instanceId;if(!c||d===void 0)return null;const f=u.fragment.getItemID(d);if(f===null)throw new Error("Item ID not found!");const p=u.fragment.group;if(!p)throw new Error("Fragment must belong to a FragmentsGroup!");const m=p.getFragmentMap([f]);return await this.highlightByID(e,m,t,s,n,void 0,!0),{id:f,fragments:m}}async highlightByID(e,t,s=!0,n=this.zoomToSelection,r={},o=void 0,a=!1){if(!this.enabled)return;this.events[e].onBeforeHighlight.trigger(this.selection[e]),s&&this.clear(e);const l=this.components.get(ve),h=this.colors.get(e);if(h===void 0)throw new Error("Color for selection not found!");const u={};for(const c in t){const d=t[c],f=r[c];for(const p of d)if(!(f&&f.has(p))){if(this.selectable[e]){const m=this.selectable[e];if(!m[c]||!m[c].has(p))continue}u[c]||(u[c]=new Set),u[c].add(p)}}for(const c in u){this.selection[e][c]||(this.selection[e][c]=new Set);const d=u[c],f=new Set,p=new Set;for(const g of d){const E=this.selection[e][c];a&&this.autoToggle.has(e)&&E.has(g)?(f.add(g),E.delete(g)):(E.add(g),p.add(g))}const m=l.list.get(c);if(m&&(f.size&&(this.backupColor?m.setColor(this.backupColor,f):m.resetColor(f)),p.size&&h!==null&&m.setColor(h,p),m.mesh.userData.fills&&h!==null))for(const g of m.mesh.userData.fills)this._fills.highlight(e,g,h,t)}this.events[e].onHighlight.trigger(this.selection[e]),o&&h!==null&&this._fills.highlight(e,o,h,t),n&&await this.zoomSelection(e)}clear(e,t){const s=e?[e]:Object.keys(this.selection);for(const n of s){this._fills.clear(n);const r=this.components.get(ve),o=this.selection[n];for(const a in o){const l=r.list.get(a);if(!l)continue;let h=o[a];if(h){if(t){const u=t[a];if(!u)continue;const c=new Set,d=new Set;for(const f of h)u.has(f)?c.add(f):d.add(f);h=c,d.size?o[a]=d:delete o[a]}this.backupColor?l.setColor(this.backupColor,h):l.resetColor(h)}}t||(this.selection[n]={}),this.events[n].onClear.trigger(null)}}setup(e){this.config={...this.config,...e},this.add(this.config.selectName,this.config.selectionColor),this.autoToggle.add(this.config.selectName),this.add(this.config.hoverName,this.config.hoverColor),this.setupEvents(!0),this.enabled=!0,this.isSetup=!0,this.onSetup.trigger(this)}updateFragments(e){for(const t of e)for(const s in this.selection){const n=this.selection[s][t.id],r=this.colors.get(s);n&&r&&t.setColor(r,n)}}async zoomSelection(e){if(!this.config.world)throw new Error("No world found in config!");const t=this.config.world;if(!t.camera.hasCameraControls())return;const s=this.components.get(vc),n=this.components.get(ve);s.reset();const r=this.selection[e];if(!Object.keys(r).length)return;for(const m in r){const g=n.list.get(m);if(!g)continue;const E=r[m];s.addMesh(g.mesh,E)}const o=s.getSphere(),a=1/0,l=-1/0,{x:h,y:u,z:c}=o.center,d=o.radius===a||h===a||u===a||c===a,f=o.radius===l||h===l||u===l||c===l,p=o.radius===0;d||f||p||(o.radius*=this.zoomFactor,await t.camera.controls.fitToSphere(o,!0))}setupEvents(e){if(!this.config.world){console.log("No world found while setting up events!");return}if(this.config.world.isDisposing)return;if(!this.config.world.renderer)throw new Error("The given world doesn't have a renderer!");const t=this.config.world.renderer.three.domElement,s=this.events[this.config.selectName].onHighlight;s.remove(this.clearHover),s.remove(this.saveHighlightersBeforeSelect);const n=this.events[this.config.selectName].onClear;n.remove(this.restoreHighlightersAfterDeselect),t.removeEventListener("mousedown",this.onMouseDown),t.removeEventListener("mouseup",this.onMouseUp),t.removeEventListener("pointermove",this.onMouseMove),e&&(s.add(this.clearHover),s.add(this.saveHighlightersBeforeSelect),n.add(this.restoreHighlightersAfterDeselect),t.addEventListener("mousedown",this.onMouseDown),t.addEventListener("mouseup",this.onMouseUp),t.addEventListener("pointermove",this.onMouseMove))}};R(dy,"uuid","cb8a76f2-654a-4b50-80c6-66fd83cafd77");let rF=dy;class oF extends be{constructor(){super(...arguments),R(this,"onDisposed",new Y),R(this,"world")}get enabled(){return!this.world||this.world.isDisposing?!1:this.getRenderer().postproduction.customEffects.outlineEnabled}set enabled(e){if(!this.world||this.world.isDisposing)return;const t=this.getRenderer();t.postproduction.customEffects.outlineEnabled=e}create(e,t){const s=this.getRenderer();if(s.postproduction.customEffects.outlinedMeshes[e]!==void 0)throw new Error(`There's already a style with the name ${e}.`);s.postproduction.customEffects.outlinedMeshes[e]={material:t,meshes:new Set}}add(e,t){const s=this.getRenderer(),n=this.getStyles()[e];if(!n)throw new Error(`The style ${e} does not exist`);const r=s.postproduction.customEffects.outlineScene,o=this.components.get(ve);for(const a in t){const l=o.list.get(a);if(!l)continue;const h=t[a],u=l.clone(h);u.mesh.position.set(0,0,0),u.mesh.rotation.set(0,0,0),u.mesh.applyMatrix4(l.mesh.matrixWorld),u.mesh.instanceColor=null,u.mesh.material=[n.material],n.meshes.add(u.mesh),r.add(u.mesh)}}clear(e){if(e){this.clearStyle(e,!1);return}const t=this.getStyles(),s=Object.keys(t);for(const n of s)this.clearStyle(n,!1);this.world=void 0}dispose(){if(this.world&&!this.world.isDisposing){const e=this.getStyles(),t=Object.keys(e);for(const s of t)this.clearStyle(s,!0)}this.onDisposed.trigger(),this.onDisposed.reset()}clearStyle(e,t){const s=this.getStyles(),n=s[e];if(!n)return;const r=this.components.get(Gi);for(const o of n.meshes){const a=o;a.fragment&&a.fragment.dispose(!1),r.destroy(o)}n.meshes.clear(),t&&(n.material.dispose(),delete s[e])}getStyles(){return this.getRenderer().postproduction.customEffects.outlinedMeshes}getRenderer(){if(!this.world)throw new Error("You must set a world to use the outliner!");const e=this.world.renderer;if(!e.postproduction)throw new Error("The world given to the outliner must use the postproduction renderer.");return e}}R(oF,"uuid","2fd3bcc5-b3b6-4ded-9f64-f47a02854a10");let is=class extends be{constructor(){super(...arguments),R(this,"enabled",!1),R(this,"onDisposed",new Y),R(this,"onNavigated",new Y),R(this,"onExited",new Y),R(this,"planeType","section"),R(this,"offset",100),R(this,"list",new Map),R(this,"world"),R(this,"current",null),R(this,"cached3DCamera",{position:new P,target:new P,projection:"Perspective",zoom:1,top:10,bottom:-10,right:10,left:-10})}create(e){const t=this.getWorld(),{id:s,point:n,normal:r,type:o}=e;let{name:a,offset:l}=e;const h=this.components.get(io),u=h.Type;h.Type=Cc;const c=h.createFromNormalAndCoplanarPoint(t,r,n);c.visible=!1,c.edges.visible=!1,c.enabled=!1,a=a||s,l=l||this.offset,c.type=o||this.planeType,c.updateFill();const d=r.clone().multiplyScalar(-l).add(n),f=n.clone(),p={id:s,name:a,plane:c,offset:l,cached:{position:d,target:f,zoom:1,size:10}};return this.list.set(s,p),h.Type=u,p}delete(e){const t=this.list.get(e);t&&(t.plane.dispose(),this.list.delete(e))}async goTo(e,t=!1){var s;const n=this.getCamera();if(((s=this.current)==null?void 0:s.id)===e)return;const r=this.list.get(e);if(!r)throw new Error(`There's no section with the ID: ${e}.`);this.cacheCameraPosition(),await this.hidePreviousClippingPlane(),await n.projection.set("Orthographic"),this.current=r;const o=new P,a=new P,{cached:l}=r,{position:h,target:u}=l;o.copy(u),a.copy(h),await n.controls.setLookAt(a.x,a.y,a.z,o.x,o.y,o.z,t);const c=r.cached.size,d=n.threePersp.aspect;n.threeOrtho.top=c,n.threeOrtho.bottom=-c,n.threeOrtho.left=-c*d,n.threeOrtho.right=c*d,n.threeOrtho.updateProjectionMatrix(),await n.controls.zoomTo(l.zoom,!1),n.set("Plan"),this.current.plane&&(this.current.plane.enabled=!0,this.current.plane.edges.fillNeedsUpdate=!0,this.current.plane.edges.visible=!0),this.enabled=!0,this.onNavigated.trigger({id:e})}async exit(e=!1){if(!this.enabled||!this.world)return;this.cacheCameraPosition();const t=this.getCamera();t.set("Orbit");const{position:s,target:n,projection:r}=this.cached3DCamera;await t.projection.set(r),this.current&&(this.current.plane.enabled=!1,this.current.plane.edges.enabled=!1,this.current.plane.edges.visible=!1),this.current=null;const{x:o,y:a,z:l}=s,{x:h,y:u,z:c}=n;await t.controls.setLookAt(o,a,l,h,u,c,e),t.projection.current==="Orthographic"&&(await t.controls.zoomTo(this.cached3DCamera.zoom,!1),t.threeOrtho.left=this.cached3DCamera.left,t.threeOrtho.right=this.cached3DCamera.right,t.threeOrtho.top=this.cached3DCamera.top,t.threeOrtho.bottom=this.cached3DCamera.bottom),this.enabled=!1,this.onExited.trigger()}dispose(){for(const[,{plane:e}]of this.list)e.dispose();this.list.clear(),this.onDisposed.trigger(),this.onDisposed.reset()}getWorld(){if(!this.world)throw new Error("World is needed to create sections!");return this.world}getCamera(){const e=this.getWorld().camera;if(!e.hasCameraControls()||!e.projection)throw new Error("The world given to sections must have an OrthoPerspective camera.");return e}cacheCameraPosition(){if(!this.world)throw new Error("World is needed to create clipping planes!");const e=this.getCamera();if(this.enabled){if(!this.current)throw new Error("Current section not found!");const{cached:t}=this.current,{position:s,target:n}=t;e.controls.getPosition(s),e.controls.getTarget(n),t.zoom=e.threeOrtho.zoom,t.size=e.threeOrtho.top}else{e.three.getWorldPosition(this.cached3DCamera.position),e.controls.getTarget(this.cached3DCamera.target),this.cached3DCamera.projection=e.projection.current,this.cached3DCamera.zoom=e.threeOrtho.zoom;const{top:t,bottom:s,left:n,right:r}=e.threeOrtho;this.cached3DCamera.top=t,this.cached3DCamera.bottom=s,this.cached3DCamera.left=n,this.cached3DCamera.right=r}}async hidePreviousClippingPlane(){if(this.current){const e=this.current.plane;e&&(e.enabled=!1),this.current.plane.edges.visible=!1}}};R(is,"uuid","45b41ba3-7bb8-4e08-909f-e0fa87973965");const aF=class fy extends be{constructor(e){super(e),R(this,"onDisposed",new Y),R(this,"planeType","floorplan"),R(this,"onNavigated",new Y),R(this,"onExited",new Y),R(this,"enabled",!1),R(this,"currentPlan",null),R(this,"offset",1.5),R(this,"list",[]),R(this,"_cachedPlanCamera",null),this.components.add(fy.uuid,this)}get world(){return this.components.get(is).world}set world(e){const t=this.components.get(is);t.world=e}get defaultCameraOffset(){return this.components.get(is).offset}set defaultCameraOffset(e){const t=this.components.get(is);t.offset=e}dispose(){this.onExited.reset(),this.onNavigated.reset();const e=this.components.get(is);for(const t of this.list)e.delete(t.id);this.list=[],this.onDisposed.trigger(),this.onDisposed.reset()}async generate(e){if(!e.hasProperties)throw new Error("Properties are needed to compute plan views!");const t=await e.getAllPropertiesOfType(jc);if(!t)throw new Error("Floorplans not found!");const s=e.coordinationMatrix.elements[13],n=await xa.getUnits(e);for(const r of Object.values(t)){const o={value:0};this.getAbsoluteFloorHeight(r.ObjectPlacement,o);const a=o.value*n+s+this.offset;this.create({name:r.Name.value,id:r.GlobalId.value,normal:new P(0,-1,0),point:new P(0,a,0)})}}create(e){const t=this.components.get(is);e.type=e.type||this.planeType;const s={...t.create(e),planOffset:this.offset};this.list.push(s)}async goTo(e,t=!1){this.enabled&&this.cachePlanCamera(),await this.components.get(is).goTo(e,t),await this.applyCachedPlanCamera();const s=this.list.find(n=>n.id===e);s&&(this.currentPlan=s),this.enabled=!0}async exitPlanView(e=!1){this.enabled&&(this.cachePlanCamera(),await this.components.get(is).exit(e),this.currentPlan=null,this.enabled=!1,this.onExited.trigger())}cachePlanCamera(){var e;const t=(e=this.world)==null?void 0:e.camera,s=new P,n=new P;t.controls.getTarget(s),t.controls.getPosition(n),this._cachedPlanCamera={target:s,position:n,zoom:t.threeOrtho.zoom,top:t.threeOrtho.top,right:t.threeOrtho.right,bottom:t.threeOrtho.bottom,left:t.threeOrtho.left}}async applyCachedPlanCamera(){var e;if(!this._cachedPlanCamera)return;const t=(e=this.world)==null?void 0:e.camera,{position:s,target:n}=this._cachedPlanCamera,r=new P,o=new P;t.controls.getPosition(r),t.controls.getTarget(o);const a=r.y,l=o.y;await t.controls.setLookAt(s.x,a,s.z,n.x,l,n.z),await t.controls.zoomTo(this._cachedPlanCamera.zoom),t.threeOrtho.top=this._cachedPlanCamera.top,t.threeOrtho.bottom=this._cachedPlanCamera.bottom,t.threeOrtho.left=this._cachedPlanCamera.left,t.threeOrtho.right=this._cachedPlanCamera.right,t.threeOrtho.updateProjectionMatrix()}getAbsoluteFloorHeight(e,t){const s=e.RelativePlacement.Location.Coordinates;t.value+=s[2].value,e.PlacementRelTo&&this.getAbsoluteFloorHeight(e.PlacementRelTo,t)}};R(aF,"uuid","a80874aa-1c93-43a4-80f2-df346da086b1");var lF=Object.defineProperty,hF=(i,e,t)=>e in i?lF(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,In=(i,e,t)=>(hF(i,typeof e!="symbol"?e+"":e,t),t);const so=Math.min,ds=Math.max,Tc=Math.round,js=i=>({x:i,y:i}),cF={left:"right",right:"left",bottom:"top",top:"bottom"},uF={start:"end",end:"start"};function r0(i,e,t){return ds(i,so(e,t))}function Ml(i,e){return typeof i=="function"?i(e):i}function gs(i){return i.split("-")[0]}function Iu(i){return i.split("-")[1]}function py(i){return i==="x"?"y":"x"}function my(i){return i==="y"?"height":"width"}function Hn(i){return["top","bottom"].includes(gs(i))?"y":"x"}function gy(i){return py(Hn(i))}function dF(i,e,t){t===void 0&&(t=!1);const s=Iu(i),n=gy(i),r=my(n);let o=n==="x"?s===(t?"end":"start")?"right":"left":s==="start"?"bottom":"top";return e.reference[r]>e.floating[r]&&(o=wc(o)),[o,wc(o)]}function fF(i){const e=wc(i);return[If(i),e,If(e)]}function If(i){return i.replace(/start|end/g,e=>uF[e])}function pF(i,e,t){const s=["left","right"],n=["right","left"],r=["top","bottom"],o=["bottom","top"];switch(i){case"top":case"bottom":return t?e?n:s:e?s:n;case"left":case"right":return e?r:o;default:return[]}}function mF(i,e,t,s){const n=Iu(i);let r=pF(gs(i),t==="start",s);return n&&(r=r.map(o=>o+"-"+n),e&&(r=r.concat(r.map(If)))),r}function wc(i){return i.replace(/left|right|bottom|top/g,e=>cF[e])}function gF(i){return{top:0,right:0,bottom:0,left:0,...i}}function Ey(i){return typeof i!="number"?gF(i):{top:i,right:i,bottom:i,left:i}}function no(i){const{x:e,y:t,width:s,height:n}=i;return{width:s,height:n,top:t,left:e,right:e+s,bottom:t+n,x:e,y:t}}function o0(i,e,t){let{reference:s,floating:n}=i;const r=Hn(e),o=gy(e),a=my(o),l=gs(e),h=r==="y",u=s.x+s.width/2-n.width/2,c=s.y+s.height/2-n.height/2,d=s[a]/2-n[a]/2;let f;switch(l){case"top":f={x:u,y:s.y-n.height};break;case"bottom":f={x:u,y:s.y+s.height};break;case"right":f={x:s.x+s.width,y:c};break;case"left":f={x:s.x-n.width,y:c};break;default:f={x:s.x,y:s.y}}switch(Iu(e)){case"start":f[o]-=d*(t&&h?-1:1);break;case"end":f[o]+=d*(t&&h?-1:1);break}return f}const EF=async(i,e,t)=>{const{placement:s="bottom",strategy:n="absolute",middleware:r=[],platform:o}=t,a=r.filter(Boolean),l=await(o.isRTL==null?void 0:o.isRTL(e));let h=await o.getElementRects({reference:i,floating:e,strategy:n}),{x:u,y:c}=o0(h,s,l),d=s,f={},p=0;for(let m=0;m<a.length;m++){const{name:g,fn:E}=a[m],{x:I,y:v,data:b,reset:C}=await E({x:u,y:c,initialPlacement:s,placement:d,strategy:n,middlewareData:f,rects:h,platform:o,elements:{reference:i,floating:e}});u=I??u,c=v??c,f={...f,[g]:{...f[g],...b}},C&&p<=50&&(p++,typeof C=="object"&&(C.placement&&(d=C.placement),C.rects&&(h=C.rects===!0?await o.getElementRects({reference:i,floating:e,strategy:n}):C.rects),{x:u,y:c}=o0(h,d,l)),m=-1)}return{x:u,y:c,placement:d,strategy:n,middlewareData:f}};async function Iy(i,e){var t;e===void 0&&(e={});const{x:s,y:n,platform:r,rects:o,elements:a,strategy:l}=i,{boundary:h="clippingAncestors",rootBoundary:u="viewport",elementContext:c="floating",altBoundary:d=!1,padding:f=0}=Ml(e,i),p=Ey(f),m=a[d?c==="floating"?"reference":"floating":c],g=no(await r.getClippingRect({element:(t=await(r.isElement==null?void 0:r.isElement(m)))==null||t?m:m.contextElement||await(r.getDocumentElement==null?void 0:r.getDocumentElement(a.floating)),boundary:h,rootBoundary:u,strategy:l})),E=c==="floating"?{x:s,y:n,width:o.floating.width,height:o.floating.height}:o.reference,I=await(r.getOffsetParent==null?void 0:r.getOffsetParent(a.floating)),v=await(r.isElement==null?void 0:r.isElement(I))?await(r.getScale==null?void 0:r.getScale(I))||{x:1,y:1}:{x:1,y:1},b=no(r.convertOffsetParentRelativeRectToViewportRelativeRect?await r.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:E,offsetParent:I,strategy:l}):E);return{top:(g.top-b.top+p.top)/v.y,bottom:(b.bottom-g.bottom+p.bottom)/v.y,left:(g.left-b.left+p.left)/v.x,right:(b.right-g.right+p.right)/v.x}}const IF=function(i){return i===void 0&&(i={}),{name:"flip",options:i,async fn(e){var t,s;const{placement:n,middlewareData:r,rects:o,initialPlacement:a,platform:l,elements:h}=e,{mainAxis:u=!0,crossAxis:c=!0,fallbackPlacements:d,fallbackStrategy:f="bestFit",fallbackAxisSideDirection:p="none",flipAlignment:m=!0,...g}=Ml(i,e);if((t=r.arrow)!=null&&t.alignmentOffset)return{};const E=gs(n),I=Hn(a),v=gs(a)===a,b=await(l.isRTL==null?void 0:l.isRTL(h.floating)),C=d||(v||!m?[wc(a)]:fF(a)),S=p!=="none";!d&&S&&C.push(...mF(a,m,p,b));const _=[a,...C],M=await Iy(e,g),A=[];let F=((s=r.flip)==null?void 0:s.overflows)||[];if(u&&A.push(M[E]),c){const y=dF(n,o,b);A.push(M[y[0]],M[y[1]])}if(F=[...F,{placement:n,overflows:A}],!A.every(y=>y<=0)){var D,x;const y=(((D=r.flip)==null?void 0:D.index)||0)+1,U=_[y];if(U)return{data:{index:y,overflows:F},reset:{placement:U}};let B=(x=F.filter(k=>k.overflows[0]<=0).sort((k,W)=>k.overflows[1]-W.overflows[1])[0])==null?void 0:x.placement;if(!B)switch(f){case"bestFit":{var N;const k=(N=F.filter(W=>{if(S){const z=Hn(W.placement);return z===I||z==="y"}return!0}).map(W=>[W.placement,W.overflows.filter(z=>z>0).reduce((z,he)=>z+he,0)]).sort((W,z)=>W[1]-z[1])[0])==null?void 0:N[0];k&&(B=k);break}case"initialPlacement":B=a;break}if(n!==B)return{reset:{placement:B}}}return{}}}};function by(i){const e=so(...i.map(r=>r.left)),t=so(...i.map(r=>r.top)),s=ds(...i.map(r=>r.right)),n=ds(...i.map(r=>r.bottom));return{x:e,y:t,width:s-e,height:n-t}}function bF(i){const e=i.slice().sort((n,r)=>n.y-r.y),t=[];let s=null;for(let n=0;n<e.length;n++){const r=e[n];!s||r.y-s.y>s.height/2?t.push([r]):t[t.length-1].push(r),s=r}return t.map(n=>no(by(n)))}const vF=function(i){return i===void 0&&(i={}),{name:"inline",options:i,async fn(e){const{placement:t,elements:s,rects:n,platform:r,strategy:o}=e,{padding:a=2,x:l,y:h}=Ml(i,e),u=Array.from(await(r.getClientRects==null?void 0:r.getClientRects(s.reference))||[]),c=bF(u),d=no(by(u)),f=Ey(a);function p(){if(c.length===2&&c[0].left>c[1].right&&l!=null&&h!=null)return c.find(g=>l>g.left-f.left&&l<g.right+f.right&&h>g.top-f.top&&h<g.bottom+f.bottom)||d;if(c.length>=2){if(Hn(t)==="y"){const F=c[0],D=c[c.length-1],x=gs(t)==="top",N=F.top,y=D.bottom,U=x?F.left:D.left,B=x?F.right:D.right,k=B-U,W=y-N;return{top:N,bottom:y,left:U,right:B,width:k,height:W,x:U,y:N}}const g=gs(t)==="left",E=ds(...c.map(F=>F.right)),I=so(...c.map(F=>F.left)),v=c.filter(F=>g?F.left===I:F.right===E),b=v[0].top,C=v[v.length-1].bottom,S=I,_=E,M=_-S,A=C-b;return{top:b,bottom:C,left:S,right:_,width:M,height:A,x:S,y:b}}return d}const m=await r.getElementRects({reference:{getBoundingClientRect:p},floating:s.floating,strategy:o});return n.reference.x!==m.reference.x||n.reference.y!==m.reference.y||n.reference.width!==m.reference.width||n.reference.height!==m.reference.height?{reset:{rects:m}}:{}}}};async function yF(i,e){const{placement:t,platform:s,elements:n}=i,r=await(s.isRTL==null?void 0:s.isRTL(n.floating)),o=gs(t),a=Iu(t),l=Hn(t)==="y",h=["left","top"].includes(o)?-1:1,u=r&&l?-1:1,c=Ml(e,i);let{mainAxis:d,crossAxis:f,alignmentAxis:p}=typeof c=="number"?{mainAxis:c,crossAxis:0,alignmentAxis:null}:{mainAxis:c.mainAxis||0,crossAxis:c.crossAxis||0,alignmentAxis:c.alignmentAxis};return a&&typeof p=="number"&&(f=a==="end"?p*-1:p),l?{x:f*u,y:d*h}:{x:d*h,y:f*u}}const vy=function(i){return{name:"offset",options:i,async fn(e){var t,s;const{x:n,y:r,placement:o,middlewareData:a}=e,l=await yF(e,i);return o===((t=a.offset)==null?void 0:t.placement)&&(s=a.arrow)!=null&&s.alignmentOffset?{}:{x:n+l.x,y:r+l.y,data:{...l,placement:o}}}}},CF=function(i){return i===void 0&&(i={}),{name:"shift",options:i,async fn(e){const{x:t,y:s,placement:n}=e,{mainAxis:r=!0,crossAxis:o=!1,limiter:a={fn:g=>{let{x:E,y:I}=g;return{x:E,y:I}}},...l}=Ml(i,e),h={x:t,y:s},u=await Iy(e,l),c=Hn(gs(n)),d=py(c);let f=h[d],p=h[c];if(r){const g=d==="y"?"top":"left",E=d==="y"?"bottom":"right",I=f+u[g],v=f-u[E];f=r0(I,f,v)}if(o){const g=c==="y"?"top":"left",E=c==="y"?"bottom":"right",I=p+u[g],v=p-u[E];p=r0(I,p,v)}const m=a.fn({...e,[d]:f,[c]:p});return{...m,data:{x:m.x-t,y:m.y-s,enabled:{[d]:r,[c]:o}}}}}};function bu(){return typeof window<"u"}function Ws(i){return yy(i)?(i.nodeName||"").toLowerCase():"#document"}function Gt(i){var e;return(i==null||(e=i.ownerDocument)==null?void 0:e.defaultView)||window}function rn(i){var e;return(e=(yy(i)?i.ownerDocument:i.document)||window.document)==null?void 0:e.documentElement}function yy(i){return bu()?i instanceof Node||i instanceof Gt(i).Node:!1}function Yi(i){return bu()?i instanceof Element||i instanceof Gt(i).Element:!1}function ji(i){return bu()?i instanceof HTMLElement||i instanceof Gt(i).HTMLElement:!1}function a0(i){return!bu()||typeof ShadowRoot>"u"?!1:i instanceof ShadowRoot||i instanceof Gt(i).ShadowRoot}function Fl(i){const{overflow:e,overflowX:t,overflowY:s,display:n}=hi(i);return/auto|scroll|overlay|hidden|clip/.test(e+s+t)&&!["inline","contents"].includes(n)}function TF(i){return["table","td","th"].includes(Ws(i))}function wF(i){return[":popover-open",":modal"].some(e=>{try{return i.matches(e)}catch{return!1}})}function Op(i){const e=Np(),t=Yi(i)?hi(i):i;return t.transform!=="none"||t.perspective!=="none"||(t.containerType?t.containerType!=="normal":!1)||!e&&(t.backdropFilter?t.backdropFilter!=="none":!1)||!e&&(t.filter?t.filter!=="none":!1)||["transform","perspective","filter"].some(s=>(t.willChange||"").includes(s))||["paint","layout","strict","content"].some(s=>(t.contain||"").includes(s))}function SF(i){let e=ro(i);for(;ji(e)&&!vu(e);){if(Op(e))return e;if(wF(e))return null;e=ro(e)}return null}function Np(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function vu(i){return["html","body","#document"].includes(Ws(i))}function hi(i){return Gt(i).getComputedStyle(i)}function yu(i){return Yi(i)?{scrollLeft:i.scrollLeft,scrollTop:i.scrollTop}:{scrollLeft:i.scrollX,scrollTop:i.scrollY}}function ro(i){if(Ws(i)==="html")return i;const e=i.assignedSlot||i.parentNode||a0(i)&&i.host||rn(i);return a0(e)?e.host:e}function Cy(i){const e=ro(i);return vu(e)?i.ownerDocument?i.ownerDocument.body:i.body:ji(e)&&Fl(e)?e:Cy(e)}function Ty(i,e,t){var s;e===void 0&&(e=[]);const n=Cy(i),r=n===((s=i.ownerDocument)==null?void 0:s.body),o=Gt(n);return r?(xF(o),e.concat(o,o.visualViewport||[],Fl(n)?n:[],[])):e.concat(n,Ty(n,[]))}function xF(i){return i.parent&&Object.getPrototypeOf(i.parent)?i.frameElement:null}function wy(i){const e=hi(i);let t=parseFloat(e.width)||0,s=parseFloat(e.height)||0;const n=ji(i),r=n?i.offsetWidth:t,o=n?i.offsetHeight:s,a=Tc(t)!==r||Tc(s)!==o;return a&&(t=r,s=o),{width:t,height:s,$:a}}function Sy(i){return Yi(i)?i:i.contextElement}function kr(i){const e=Sy(i);if(!ji(e))return js(1);const t=e.getBoundingClientRect(),{width:s,height:n,$:r}=wy(e);let o=(r?Tc(t.width):t.width)/s,a=(r?Tc(t.height):t.height)/n;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const RF=js(0);function xy(i){const e=Gt(i);return!Np()||!e.visualViewport?RF:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function _F(i,e,t){return e===void 0&&(e=!1),!t||e&&t!==Gt(i)?!1:e}function Ja(i,e,t,s){e===void 0&&(e=!1),t===void 0&&(t=!1);const n=i.getBoundingClientRect(),r=Sy(i);let o=js(1);e&&(s?Yi(s)&&(o=kr(s)):o=kr(i));const a=_F(r,t,s)?xy(r):js(0);let l=(n.left+a.x)/o.x,h=(n.top+a.y)/o.y,u=n.width/o.x,c=n.height/o.y;if(r){const d=Gt(r),f=s&&Yi(s)?Gt(s):s;let p=d,m=p.frameElement;for(;m&&s&&f!==p;){const g=kr(m),E=m.getBoundingClientRect(),I=hi(m),v=E.left+(m.clientLeft+parseFloat(I.paddingLeft))*g.x,b=E.top+(m.clientTop+parseFloat(I.paddingTop))*g.y;l*=g.x,h*=g.y,u*=g.x,c*=g.y,l+=v,h+=b,p=Gt(m),m=p.frameElement}}return no({width:u,height:c,x:l,y:h})}const AF=[":popover-open",":modal"];function Ry(i){return AF.some(e=>{try{return i.matches(e)}catch{return!1}})}function MF(i){let{elements:e,rect:t,offsetParent:s,strategy:n}=i;const r=n==="fixed",o=rn(s),a=e?Ry(e.floating):!1;if(s===o||a&&r)return t;let l={scrollLeft:0,scrollTop:0},h=js(1);const u=js(0),c=ji(s);if((c||!c&&!r)&&((Ws(s)!=="body"||Fl(o))&&(l=yu(s)),ji(s))){const d=Ja(s);h=kr(s),u.x=d.x+s.clientLeft,u.y=d.y+s.clientTop}return{width:t.width*h.x,height:t.height*h.y,x:t.x*h.x-l.scrollLeft*h.x+u.x,y:t.y*h.y-l.scrollTop*h.y+u.y}}function FF(i){return Array.from(i.getClientRects())}function _y(i){return Ja(rn(i)).left+yu(i).scrollLeft}function OF(i){const e=rn(i),t=yu(i),s=i.ownerDocument.body,n=ds(e.scrollWidth,e.clientWidth,s.scrollWidth,s.clientWidth),r=ds(e.scrollHeight,e.clientHeight,s.scrollHeight,s.clientHeight);let o=-t.scrollLeft+_y(i);const a=-t.scrollTop;return hi(s).direction==="rtl"&&(o+=ds(e.clientWidth,s.clientWidth)-n),{width:n,height:r,x:o,y:a}}function NF(i,e){const t=Gt(i),s=rn(i),n=t.visualViewport;let r=s.clientWidth,o=s.clientHeight,a=0,l=0;if(n){r=n.width,o=n.height;const h=Np();(!h||h&&e==="fixed")&&(a=n.offsetLeft,l=n.offsetTop)}return{width:r,height:o,x:a,y:l}}function PF(i,e){const t=Ja(i,!0,e==="fixed"),s=t.top+i.clientTop,n=t.left+i.clientLeft,r=ji(i)?kr(i):js(1),o=i.clientWidth*r.x,a=i.clientHeight*r.y,l=n*r.x,h=s*r.y;return{width:o,height:a,x:l,y:h}}function l0(i,e,t){let s;if(e==="viewport")s=NF(i,t);else if(e==="document")s=OF(rn(i));else if(Yi(e))s=PF(e,t);else{const n=xy(i);s={...e,x:e.x-n.x,y:e.y-n.y}}return no(s)}function Ay(i,e){const t=ro(i);return t===e||!Yi(t)||vu(t)?!1:hi(t).position==="fixed"||Ay(t,e)}function LF(i,e){const t=e.get(i);if(t)return t;let s=Ty(i,[]).filter(a=>Yi(a)&&Ws(a)!=="body"),n=null;const r=hi(i).position==="fixed";let o=r?ro(i):i;for(;Yi(o)&&!vu(o);){const a=hi(o),l=Op(o);!l&&a.position==="fixed"&&(n=null),(r?!l&&!n:!l&&a.position==="static"&&n&&["absolute","fixed"].includes(n.position)||Fl(o)&&!l&&Ay(i,o))?s=s.filter(h=>h!==o):n=a,o=ro(o)}return e.set(i,s),s}function DF(i){let{element:e,boundary:t,rootBoundary:s,strategy:n}=i;const r=[...t==="clippingAncestors"?LF(e,this._c):[].concat(t),s],o=r[0],a=r.reduce((l,h)=>{const u=l0(e,h,n);return l.top=ds(u.top,l.top),l.right=so(u.right,l.right),l.bottom=so(u.bottom,l.bottom),l.left=ds(u.left,l.left),l},l0(e,o,n));return{width:a.right-a.left,height:a.bottom-a.top,x:a.left,y:a.top}}function UF(i){const{width:e,height:t}=wy(i);return{width:e,height:t}}function kF(i,e,t){const s=ji(e),n=rn(e),r=t==="fixed",o=Ja(i,!0,r,e);let a={scrollLeft:0,scrollTop:0};const l=js(0);if(s||!s&&!r)if((Ws(e)!=="body"||Fl(n))&&(a=yu(e)),s){const c=Ja(e,!0,r,e);l.x=c.x+e.clientLeft,l.y=c.y+e.clientTop}else n&&(l.x=_y(n));const h=o.left+a.scrollLeft-l.x,u=o.top+a.scrollTop-l.y;return{x:h,y:u,width:o.width,height:o.height}}function h0(i,e){return!ji(i)||hi(i).position==="fixed"?null:e?e(i):i.offsetParent}function My(i,e){const t=Gt(i);if(!ji(i)||Ry(i))return t;let s=h0(i,e);for(;s&&TF(s)&&hi(s).position==="static";)s=h0(s,e);return s&&(Ws(s)==="html"||Ws(s)==="body"&&hi(s).position==="static"&&!Op(s))?t:s||SF(i)||t}const BF=async function(i){const e=this.getOffsetParent||My,t=this.getDimensions;return{reference:kF(i.reference,await e(i.floating),i.strategy),floating:{x:0,y:0,...await t(i.floating)}}};function zF(i){return hi(i).direction==="rtl"}const VF={convertOffsetParentRelativeRectToViewportRelativeRect:MF,getDocumentElement:rn,getClippingRect:DF,getOffsetParent:My,getElementRects:BF,getClientRects:FF,getDimensions:UF,getScale:kr,isElement:Yi,isRTL:zF},Fy=CF,Oy=IF,Ny=vF,Py=(i,e,t)=>{const s=new Map,n={platform:VF,...t},r={...n.platform,_c:s};return EF(i,e,{...n,platform:r})};/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Zh=globalThis,Pp=Zh.ShadowRoot&&(Zh.ShadyCSS===void 0||Zh.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,Lp=Symbol(),c0=new WeakMap;let Ly=class{constructor(i,e,t){if(this._$cssResult$=!0,t!==Lp)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=i,this.t=e}get styleSheet(){let i=this.o;const e=this.t;if(Pp&&i===void 0){const t=e!==void 0&&e.length===1;t&&(i=c0.get(e)),i===void 0&&((this.o=i=new CSSStyleSheet).replaceSync(this.cssText),t&&c0.set(e,i))}return i}toString(){return this.cssText}};const $F=i=>new Ly(typeof i=="string"?i:i+"",void 0,Lp),Be=(i,...e)=>{const t=i.length===1?i[0]:e.reduce((s,n,r)=>s+(o=>{if(o._$cssResult$===!0)return o.cssText;if(typeof o=="number")return o;throw Error("Value passed to 'css' function must be a 'css' function result: "+o+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(n)+i[r+1],i[0]);return new Ly(t,i,Lp)},HF=(i,e)=>{if(Pp)i.adoptedStyleSheets=e.map(t=>t instanceof CSSStyleSheet?t:t.styleSheet);else for(const t of e){const s=document.createElement("style"),n=Zh.litNonce;n!==void 0&&s.setAttribute("nonce",n),s.textContent=t.cssText,i.appendChild(s)}},u0=Pp?i=>i:i=>i instanceof CSSStyleSheet?(e=>{let t="";for(const s of e.cssRules)t+=s.cssText;return $F(t)})(i):i;/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const{is:GF,defineProperty:YF,getOwnPropertyDescriptor:jF,getOwnPropertyNames:WF,getOwnPropertySymbols:XF,getPrototypeOf:qF}=Object,oo=globalThis,d0=oo.trustedTypes,ZF=d0?d0.emptyScript:"",f0=oo.reactiveElementPolyfillSupport,_a=(i,e)=>i,Sc={toAttribute(i,e){switch(e){case Boolean:i=i?ZF:null;break;case Object:case Array:i=i==null?i:JSON.stringify(i)}return i},fromAttribute(i,e){let t=i;switch(e){case Boolean:t=i!==null;break;case Number:t=i===null?null:Number(i);break;case Object:case Array:try{t=JSON.parse(i)}catch{t=null}}return t}},Dp=(i,e)=>!GF(i,e),p0={attribute:!0,type:String,converter:Sc,reflect:!1,hasChanged:Dp};Symbol.metadata??(Symbol.metadata=Symbol("metadata")),oo.litPropertyMetadata??(oo.litPropertyMetadata=new WeakMap);class wr extends HTMLElement{static addInitializer(e){this._$Ei(),(this.l??(this.l=[])).push(e)}static get observedAttributes(){return this.finalize(),this._$Eh&&[...this._$Eh.keys()]}static createProperty(e,t=p0){if(t.state&&(t.attribute=!1),this._$Ei(),this.elementProperties.set(e,t),!t.noAccessor){const s=Symbol(),n=this.getPropertyDescriptor(e,s,t);n!==void 0&&YF(this.prototype,e,n)}}static getPropertyDescriptor(e,t,s){const{get:n,set:r}=jF(this.prototype,e)??{get(){return this[t]},set(o){this[t]=o}};return{get(){return n==null?void 0:n.call(this)},set(o){const a=n==null?void 0:n.call(this);r.call(this,o),this.requestUpdate(e,a,s)},configurable:!0,enumerable:!0}}static getPropertyOptions(e){return this.elementProperties.get(e)??p0}static _$Ei(){if(this.hasOwnProperty(_a("elementProperties")))return;const e=qF(this);e.finalize(),e.l!==void 0&&(this.l=[...e.l]),this.elementProperties=new Map(e.elementProperties)}static finalize(){if(this.hasOwnProperty(_a("finalized")))return;if(this.finalized=!0,this._$Ei(),this.hasOwnProperty(_a("properties"))){const t=this.properties,s=[...WF(t),...XF(t)];for(const n of s)this.createProperty(n,t[n])}const e=this[Symbol.metadata];if(e!==null){const t=litPropertyMetadata.get(e);if(t!==void 0)for(const[s,n]of t)this.elementProperties.set(s,n)}this._$Eh=new Map;for(const[t,s]of this.elementProperties){const n=this._$Eu(t,s);n!==void 0&&this._$Eh.set(n,t)}this.elementStyles=this.finalizeStyles(this.styles)}static finalizeStyles(e){const t=[];if(Array.isArray(e)){const s=new Set(e.flat(1/0).reverse());for(const n of s)t.unshift(u0(n))}else e!==void 0&&t.push(u0(e));return t}static _$Eu(e,t){const s=t.attribute;return s===!1?void 0:typeof s=="string"?s:typeof e=="string"?e.toLowerCase():void 0}constructor(){super(),this._$Ep=void 0,this.isUpdatePending=!1,this.hasUpdated=!1,this._$Em=null,this._$Ev()}_$Ev(){var e;this._$ES=new Promise(t=>this.enableUpdating=t),this._$AL=new Map,this._$E_(),this.requestUpdate(),(e=this.constructor.l)==null||e.forEach(t=>t(this))}addController(e){var t;(this._$EO??(this._$EO=new Set)).add(e),this.renderRoot!==void 0&&this.isConnected&&((t=e.hostConnected)==null||t.call(e))}removeController(e){var t;(t=this._$EO)==null||t.delete(e)}_$E_(){const e=new Map,t=this.constructor.elementProperties;for(const s of t.keys())this.hasOwnProperty(s)&&(e.set(s,this[s]),delete this[s]);e.size>0&&(this._$Ep=e)}createRenderRoot(){const e=this.shadowRoot??this.attachShadow(this.constructor.shadowRootOptions);return HF(e,this.constructor.elementStyles),e}connectedCallback(){var e;this.renderRoot??(this.renderRoot=this.createRenderRoot()),this.enableUpdating(!0),(e=this._$EO)==null||e.forEach(t=>{var s;return(s=t.hostConnected)==null?void 0:s.call(t)})}enableUpdating(e){}disconnectedCallback(){var e;(e=this._$EO)==null||e.forEach(t=>{var s;return(s=t.hostDisconnected)==null?void 0:s.call(t)})}attributeChangedCallback(e,t,s){this._$AK(e,s)}_$EC(e,t){var s;const n=this.constructor.elementProperties.get(e),r=this.constructor._$Eu(e,n);if(r!==void 0&&n.reflect===!0){const o=(((s=n.converter)==null?void 0:s.toAttribute)!==void 0?n.converter:Sc).toAttribute(t,n.type);this._$Em=e,o==null?this.removeAttribute(r):this.setAttribute(r,o),this._$Em=null}}_$AK(e,t){var s;const n=this.constructor,r=n._$Eh.get(e);if(r!==void 0&&this._$Em!==r){const o=n.getPropertyOptions(r),a=typeof o.converter=="function"?{fromAttribute:o.converter}:((s=o.converter)==null?void 0:s.fromAttribute)!==void 0?o.converter:Sc;this._$Em=r,this[r]=a.fromAttribute(t,o.type),this._$Em=null}}requestUpdate(e,t,s){if(e!==void 0){if(s??(s=this.constructor.getPropertyOptions(e)),!(s.hasChanged??Dp)(this[e],t))return;this.P(e,t,s)}this.isUpdatePending===!1&&(this._$ES=this._$ET())}P(e,t,s){this._$AL.has(e)||this._$AL.set(e,t),s.reflect===!0&&this._$Em!==e&&(this._$Ej??(this._$Ej=new Set)).add(e)}async _$ET(){this.isUpdatePending=!0;try{await this._$ES}catch(t){Promise.reject(t)}const e=this.scheduleUpdate();return e!=null&&await e,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){var e;if(!this.isUpdatePending)return;if(!this.hasUpdated){if(this.renderRoot??(this.renderRoot=this.createRenderRoot()),this._$Ep){for(const[r,o]of this._$Ep)this[r]=o;this._$Ep=void 0}const n=this.constructor.elementProperties;if(n.size>0)for(const[r,o]of n)o.wrapped!==!0||this._$AL.has(r)||this[r]===void 0||this.P(r,this[r],o)}let t=!1;const s=this._$AL;try{t=this.shouldUpdate(s),t?(this.willUpdate(s),(e=this._$EO)==null||e.forEach(n=>{var r;return(r=n.hostUpdate)==null?void 0:r.call(n)}),this.update(s)):this._$EU()}catch(n){throw t=!1,this._$EU(),n}t&&this._$AE(s)}willUpdate(e){}_$AE(e){var t;(t=this._$EO)==null||t.forEach(s=>{var n;return(n=s.hostUpdated)==null?void 0:n.call(s)}),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(e)),this.updated(e)}_$EU(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$ES}shouldUpdate(e){return!0}update(e){this._$Ej&&(this._$Ej=this._$Ej.forEach(t=>this._$EC(t,this[t]))),this._$EU()}updated(e){}firstUpdated(e){}}wr.elementStyles=[],wr.shadowRootOptions={mode:"open"},wr[_a("elementProperties")]=new Map,wr[_a("finalized")]=new Map,f0==null||f0({ReactiveElement:wr}),(oo.reactiveElementVersions??(oo.reactiveElementVersions=[])).push("2.0.4");/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const xc=globalThis,Rc=xc.trustedTypes,m0=Rc?Rc.createPolicy("lit-html",{createHTML:i=>i}):void 0,Dy="$lit$",Ls=`lit$${Math.random().toFixed(9).slice(2)}$`,Uy="?"+Ls,QF=`<${Uy}>`,Gn=document,el=()=>Gn.createComment(""),tl=i=>i===null||typeof i!="object"&&typeof i!="function",Up=Array.isArray,KF=i=>Up(i)||typeof(i==null?void 0:i[Symbol.iterator])=="function",cd=`[ 	
\f\r]`,ca=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,g0=/-->/g,E0=/>/g,bn=RegExp(`>|${cd}(?:([^\\s"'>=/]+)(${cd}*=${cd}*(?:[^ 	
\f\r"'\`<>=]|("|')|))|$)`,"g"),I0=/'/g,b0=/"/g,ky=/^(?:script|style|textarea|title)$/i,JF=i=>(e,...t)=>({_$litType$:i,strings:e,values:t}),j=JF(1),Yn=Symbol.for("lit-noChange"),st=Symbol.for("lit-nothing"),v0=new WeakMap,An=Gn.createTreeWalker(Gn,129);function By(i,e){if(!Up(i)||!i.hasOwnProperty("raw"))throw Error("invalid template strings array");return m0!==void 0?m0.createHTML(e):e}const eO=(i,e)=>{const t=i.length-1,s=[];let n,r=e===2?"<svg>":e===3?"<math>":"",o=ca;for(let a=0;a<t;a++){const l=i[a];let h,u,c=-1,d=0;for(;d<l.length&&(o.lastIndex=d,u=o.exec(l),u!==null);)d=o.lastIndex,o===ca?u[1]==="!--"?o=g0:u[1]!==void 0?o=E0:u[2]!==void 0?(ky.test(u[2])&&(n=RegExp("</"+u[2],"g")),o=bn):u[3]!==void 0&&(o=bn):o===bn?u[0]===">"?(o=n??ca,c=-1):u[1]===void 0?c=-2:(c=o.lastIndex-u[2].length,h=u[1],o=u[3]===void 0?bn:u[3]==='"'?b0:I0):o===b0||o===I0?o=bn:o===g0||o===E0?o=ca:(o=bn,n=void 0);const f=o===bn&&i[a+1].startsWith("/>")?" ":"";r+=o===ca?l+QF:c>=0?(s.push(h),l.slice(0,c)+Dy+l.slice(c)+Ls+f):l+Ls+(c===-2?a:f)}return[By(i,r+(i[t]||"<?>")+(e===2?"</svg>":e===3?"</math>":"")),s]};class il{constructor({strings:e,_$litType$:t},s){let n;this.parts=[];let r=0,o=0;const a=e.length-1,l=this.parts,[h,u]=eO(e,t);if(this.el=il.createElement(h,s),An.currentNode=this.el.content,t===2||t===3){const c=this.el.content.firstChild;c.replaceWith(...c.childNodes)}for(;(n=An.nextNode())!==null&&l.length<a;){if(n.nodeType===1){if(n.hasAttributes())for(const c of n.getAttributeNames())if(c.endsWith(Dy)){const d=u[o++],f=n.getAttribute(c).split(Ls),p=/([.?@])?(.*)/.exec(d);l.push({type:1,index:r,name:p[2],strings:f,ctor:p[1]==="."?iO:p[1]==="?"?sO:p[1]==="@"?nO:Cu}),n.removeAttribute(c)}else c.startsWith(Ls)&&(l.push({type:6,index:r}),n.removeAttribute(c));if(ky.test(n.tagName)){const c=n.textContent.split(Ls),d=c.length-1;if(d>0){n.textContent=Rc?Rc.emptyScript:"";for(let f=0;f<d;f++)n.append(c[f],el()),An.nextNode(),l.push({type:2,index:++r});n.append(c[d],el())}}}else if(n.nodeType===8)if(n.data===Uy)l.push({type:2,index:r});else{let c=-1;for(;(c=n.data.indexOf(Ls,c+1))!==-1;)l.push({type:7,index:r}),c+=Ls.length-1}r++}}static createElement(e,t){const s=Gn.createElement("template");return s.innerHTML=e,s}}function ao(i,e,t=i,s){var n,r;if(e===Yn)return e;let o=s!==void 0?(n=t._$Co)==null?void 0:n[s]:t._$Cl;const a=tl(e)?void 0:e._$litDirective$;return(o==null?void 0:o.constructor)!==a&&((r=o==null?void 0:o._$AO)==null||r.call(o,!1),a===void 0?o=void 0:(o=new a(i),o._$AT(i,t,s)),s!==void 0?(t._$Co??(t._$Co=[]))[s]=o:t._$Cl=o),o!==void 0&&(e=ao(i,o._$AS(i,e.values),o,s)),e}class tO{constructor(e,t){this._$AV=[],this._$AN=void 0,this._$AD=e,this._$AM=t}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(e){const{el:{content:t},parts:s}=this._$AD,n=((e==null?void 0:e.creationScope)??Gn).importNode(t,!0);An.currentNode=n;let r=An.nextNode(),o=0,a=0,l=s[0];for(;l!==void 0;){if(o===l.index){let h;l.type===2?h=new Ol(r,r.nextSibling,this,e):l.type===1?h=new l.ctor(r,l.name,l.strings,this,e):l.type===6&&(h=new rO(r,this,e)),this._$AV.push(h),l=s[++a]}o!==(l==null?void 0:l.index)&&(r=An.nextNode(),o++)}return An.currentNode=Gn,n}p(e){let t=0;for(const s of this._$AV)s!==void 0&&(s.strings!==void 0?(s._$AI(e,s,t),t+=s.strings.length-2):s._$AI(e[t])),t++}}class Ol{get _$AU(){var e;return((e=this._$AM)==null?void 0:e._$AU)??this._$Cv}constructor(e,t,s,n){this.type=2,this._$AH=st,this._$AN=void 0,this._$AA=e,this._$AB=t,this._$AM=s,this.options=n,this._$Cv=(n==null?void 0:n.isConnected)??!0}get parentNode(){let e=this._$AA.parentNode;const t=this._$AM;return t!==void 0&&(e==null?void 0:e.nodeType)===11&&(e=t.parentNode),e}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(e,t=this){e=ao(this,e,t),tl(e)?e===st||e==null||e===""?(this._$AH!==st&&this._$AR(),this._$AH=st):e!==this._$AH&&e!==Yn&&this._(e):e._$litType$!==void 0?this.$(e):e.nodeType!==void 0?this.T(e):KF(e)?this.k(e):this._(e)}O(e){return this._$AA.parentNode.insertBefore(e,this._$AB)}T(e){this._$AH!==e&&(this._$AR(),this._$AH=this.O(e))}_(e){this._$AH!==st&&tl(this._$AH)?this._$AA.nextSibling.data=e:this.T(Gn.createTextNode(e)),this._$AH=e}$(e){var t;const{values:s,_$litType$:n}=e,r=typeof n=="number"?this._$AC(e):(n.el===void 0&&(n.el=il.createElement(By(n.h,n.h[0]),this.options)),n);if(((t=this._$AH)==null?void 0:t._$AD)===r)this._$AH.p(s);else{const o=new tO(r,this),a=o.u(this.options);o.p(s),this.T(a),this._$AH=o}}_$AC(e){let t=v0.get(e.strings);return t===void 0&&v0.set(e.strings,t=new il(e)),t}k(e){Up(this._$AH)||(this._$AH=[],this._$AR());const t=this._$AH;let s,n=0;for(const r of e)n===t.length?t.push(s=new Ol(this.O(el()),this.O(el()),this,this.options)):s=t[n],s._$AI(r),n++;n<t.length&&(this._$AR(s&&s._$AB.nextSibling,n),t.length=n)}_$AR(e=this._$AA.nextSibling,t){var s;for((s=this._$AP)==null?void 0:s.call(this,!1,!0,t);e&&e!==this._$AB;){const n=e.nextSibling;e.remove(),e=n}}setConnected(e){var t;this._$AM===void 0&&(this._$Cv=e,(t=this._$AP)==null||t.call(this,e))}}class Cu{get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}constructor(e,t,s,n,r){this.type=1,this._$AH=st,this._$AN=void 0,this.element=e,this.name=t,this._$AM=n,this.options=r,s.length>2||s[0]!==""||s[1]!==""?(this._$AH=Array(s.length-1).fill(new String),this.strings=s):this._$AH=st}_$AI(e,t=this,s,n){const r=this.strings;let o=!1;if(r===void 0)e=ao(this,e,t,0),o=!tl(e)||e!==this._$AH&&e!==Yn,o&&(this._$AH=e);else{const a=e;let l,h;for(e=r[0],l=0;l<r.length-1;l++)h=ao(this,a[s+l],t,l),h===Yn&&(h=this._$AH[l]),o||(o=!tl(h)||h!==this._$AH[l]),h===st?e=st:e!==st&&(e+=(h??"")+r[l+1]),this._$AH[l]=h}o&&!n&&this.j(e)}j(e){e===st?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,e??"")}}class iO extends Cu{constructor(){super(...arguments),this.type=3}j(e){this.element[this.name]=e===st?void 0:e}}class sO extends Cu{constructor(){super(...arguments),this.type=4}j(e){this.element.toggleAttribute(this.name,!!e&&e!==st)}}class nO extends Cu{constructor(e,t,s,n,r){super(e,t,s,n,r),this.type=5}_$AI(e,t=this){if((e=ao(this,e,t,0)??st)===Yn)return;const s=this._$AH,n=e===st&&s!==st||e.capture!==s.capture||e.once!==s.once||e.passive!==s.passive,r=e!==st&&(s===st||n);n&&this.element.removeEventListener(this.name,this,s),r&&this.element.addEventListener(this.name,this,e),this._$AH=e}handleEvent(e){var t;typeof this._$AH=="function"?this._$AH.call(((t=this.options)==null?void 0:t.host)??this.element,e):this._$AH.handleEvent(e)}}class rO{constructor(e,t,s){this.element=e,this.type=6,this._$AN=void 0,this._$AM=t,this.options=s}get _$AU(){return this._$AM._$AU}_$AI(e){ao(this,e)}}const y0=xc.litHtmlPolyfillSupport;y0==null||y0(il,Ol),(xc.litHtmlVersions??(xc.litHtmlVersions=[])).push("3.2.1");const lo=(i,e,t)=>{const s=(t==null?void 0:t.renderBefore)??e;let n=s._$litPart$;if(n===void 0){const r=(t==null?void 0:t.renderBefore)??null;s._$litPart$=n=new Ol(e.insertBefore(el(),r),r,void 0,t??{})}return n._$AI(i),n};/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */let Le=class extends wr{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){var e;const t=super.createRenderRoot();return(e=this.renderOptions).renderBefore??(e.renderBefore=t.firstChild),t}update(e){const t=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(e),this._$Do=lo(t,this.renderRoot,this.renderOptions)}connectedCallback(){var e;super.connectedCallback(),(e=this._$Do)==null||e.setConnected(!0)}disconnectedCallback(){var e;super.disconnectedCallback(),(e=this._$Do)==null||e.setConnected(!1)}render(){return Yn}};var C0;Le._$litElement$=!0,Le.finalized=!0,(C0=globalThis.litElementHydrateSupport)==null||C0.call(globalThis,{LitElement:Le});const T0=globalThis.litElementPolyfillSupport;T0==null||T0({LitElement:Le});(globalThis.litElementVersions??(globalThis.litElementVersions=[])).push("4.1.1");/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const oO={attribute:!0,type:String,converter:Sc,reflect:!1,hasChanged:Dp},aO=(i=oO,e,t)=>{const{kind:s,metadata:n}=t;let r=globalThis.litPropertyMetadata.get(n);if(r===void 0&&globalThis.litPropertyMetadata.set(n,r=new Map),r.set(t.name,i),s==="accessor"){const{name:o}=t;return{set(a){const l=e.get.call(this);e.set.call(this,a),this.requestUpdate(o,l,i)},init(a){return a!==void 0&&this.P(o,void 0,i),a}}}if(s==="setter"){const{name:o}=t;return function(a){const l=this[o];e.call(this,a),this.requestUpdate(o,l,i)}}throw Error("Unsupported decorator location: "+s)};function Q(i){return(e,t)=>typeof t=="object"?aO(i,e,t):((s,n,r)=>{const o=n.hasOwnProperty(r);return n.constructor.createProperty(r,o?{...s,wrapped:!0}:s),o?Object.getOwnPropertyDescriptor(n,r):void 0})(i,e,t)}/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */function Mo(i){return Q({...i,state:!0,attribute:!1})}/**
 * @license
 * Copyright 2020 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const lO=i=>i.strings===void 0;/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const zy={ATTRIBUTE:1,CHILD:2,PROPERTY:3,BOOLEAN_ATTRIBUTE:4,EVENT:5,ELEMENT:6},Vy=i=>(...e)=>({_$litDirective$:i,values:e});let $y=class{constructor(i){}get _$AU(){return this._$AM._$AU}_$AT(i,e,t){this._$Ct=i,this._$AM=e,this._$Ci=t}_$AS(i,e){return this.update(i,e)}update(i,e){return this.render(...e)}};/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Aa=(i,e)=>{var t;const s=i._$AN;if(s===void 0)return!1;for(const n of s)(t=n._$AO)==null||t.call(n,e,!1),Aa(n,e);return!0},_c=i=>{let e,t;do{if((e=i._$AM)===void 0)break;t=e._$AN,t.delete(i),i=e}while((t==null?void 0:t.size)===0)},Hy=i=>{for(let e;e=i._$AM;i=e){let t=e._$AN;if(t===void 0)e._$AN=t=new Set;else if(t.has(i))break;t.add(i),uO(e)}};function hO(i){this._$AN!==void 0?(_c(this),this._$AM=i,Hy(this)):this._$AM=i}function cO(i,e=!1,t=0){const s=this._$AH,n=this._$AN;if(n!==void 0&&n.size!==0)if(e)if(Array.isArray(s))for(let r=t;r<s.length;r++)Aa(s[r],!1),_c(s[r]);else s!=null&&(Aa(s,!1),_c(s));else Aa(this,i)}const uO=i=>{i.type==zy.CHILD&&(i._$AP??(i._$AP=cO),i._$AQ??(i._$AQ=hO))};class dO extends $y{constructor(){super(...arguments),this._$AN=void 0}_$AT(e,t,s){super._$AT(e,t,s),Hy(this),this.isConnected=e._$AU}_$AO(e,t=!0){var s,n;e!==this.isConnected&&(this.isConnected=e,e?(s=this.reconnected)==null||s.call(this):(n=this.disconnected)==null||n.call(this)),t&&(Aa(this,e),_c(this))}setValue(e){if(lO(this._$Ct))this._$Ct._$AI(e,this);else{const t=[...this._$Ct._$AH];t[this._$Ci]=e,this._$Ct._$AI(t,this,0)}}disconnected(){}reconnected(){}}/**
 * @license
 * Copyright 2020 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const ho=()=>new fO;class fO{}const ud=new WeakMap,_t=Vy(class extends dO{render(i){return st}update(i,[e]){var t;const s=e!==this.Y;return s&&this.Y!==void 0&&this.rt(void 0),(s||this.lt!==this.ct)&&(this.Y=e,this.ht=(t=i.options)==null?void 0:t.host,this.rt(this.ct=i.element)),st}rt(i){if(this.isConnected||(i=void 0),typeof this.Y=="function"){const e=this.ht??globalThis;let t=ud.get(e);t===void 0&&(t=new WeakMap,ud.set(e,t)),t.get(this.Y)!==void 0&&this.Y.call(this.ht,void 0),t.set(this.Y,i),i!==void 0&&this.Y.call(this.ht,i)}else this.Y.value=i}get lt(){var i,e;return typeof this.Y=="function"?(i=ud.get(this.ht??globalThis))==null?void 0:i.get(this.Y):(e=this.Y)==null?void 0:e.value}disconnected(){this.lt===this.ct&&this.rt(void 0)}reconnected(){this.rt(this.ct)}});/**
* (c) Iconify
*
* For the full copyright and license information, please view the license.txt
* files at https://github.com/iconify/iconify
*
* Licensed under MIT.
*
* @license MIT
* @version 2.0.0
*/const Gy=Object.freeze({left:0,top:0,width:16,height:16}),Ac=Object.freeze({rotate:0,vFlip:!1,hFlip:!1}),Nl=Object.freeze({...Gy,...Ac}),bf=Object.freeze({...Nl,body:"",hidden:!1}),pO=Object.freeze({width:null,height:null}),Yy=Object.freeze({...pO,...Ac});function mO(i,e=0){const t=i.replace(/^-?[0-9.]*/,"");function s(n){for(;n<0;)n+=4;return n%4}if(t===""){const n=parseInt(i);return isNaN(n)?0:s(n)}else if(t!==i){let n=0;switch(t){case"%":n=25;break;case"deg":n=90}if(n){let r=parseFloat(i.slice(0,i.length-t.length));return isNaN(r)?0:(r=r/n,r%1===0?s(r):0)}}return e}const gO=/[\s,]+/;function EO(i,e){e.split(gO).forEach(t=>{switch(t.trim()){case"horizontal":i.hFlip=!0;break;case"vertical":i.vFlip=!0;break}})}const jy={...Yy,preserveAspectRatio:""};function w0(i){const e={...jy},t=(s,n)=>i.getAttribute(s)||n;return e.width=t("width",null),e.height=t("height",null),e.rotate=mO(t("rotate","")),EO(e,t("flip","")),e.preserveAspectRatio=t("preserveAspectRatio",t("preserveaspectratio","")),e}function IO(i,e){for(const t in jy)if(i[t]!==e[t])return!0;return!1}const Ma=/^[a-z0-9]+(-[a-z0-9]+)*$/,Pl=(i,e,t,s="")=>{const n=i.split(":");if(i.slice(0,1)==="@"){if(n.length<2||n.length>3)return null;s=n.shift().slice(1)}if(n.length>3||!n.length)return null;if(n.length>1){const a=n.pop(),l=n.pop(),h={provider:n.length>0?n[0]:s,prefix:l,name:a};return e&&!Qh(h)?null:h}const r=n[0],o=r.split("-");if(o.length>1){const a={provider:s,prefix:o.shift(),name:o.join("-")};return e&&!Qh(a)?null:a}if(t&&s===""){const a={provider:s,prefix:"",name:r};return e&&!Qh(a,t)?null:a}return null},Qh=(i,e)=>i?!!((i.provider===""||i.provider.match(Ma))&&(e&&i.prefix===""||i.prefix.match(Ma))&&i.name.match(Ma)):!1;function bO(i,e){const t={};!i.hFlip!=!e.hFlip&&(t.hFlip=!0),!i.vFlip!=!e.vFlip&&(t.vFlip=!0);const s=((i.rotate||0)+(e.rotate||0))%4;return s&&(t.rotate=s),t}function S0(i,e){const t=bO(i,e);for(const s in bf)s in Ac?s in i&&!(s in t)&&(t[s]=Ac[s]):s in e?t[s]=e[s]:s in i&&(t[s]=i[s]);return t}function vO(i,e){const t=i.icons,s=i.aliases||Object.create(null),n=Object.create(null);function r(o){if(t[o])return n[o]=[];if(!(o in n)){n[o]=null;const a=s[o]&&s[o].parent,l=a&&r(a);l&&(n[o]=[a].concat(l))}return n[o]}return Object.keys(t).concat(Object.keys(s)).forEach(r),n}function yO(i,e,t){const s=i.icons,n=i.aliases||Object.create(null);let r={};function o(a){r=S0(s[a]||n[a],r)}return o(e),t.forEach(o),S0(i,r)}function Wy(i,e){const t=[];if(typeof i!="object"||typeof i.icons!="object")return t;i.not_found instanceof Array&&i.not_found.forEach(n=>{e(n,null),t.push(n)});const s=vO(i);for(const n in s){const r=s[n];r&&(e(n,yO(i,n,r)),t.push(n))}return t}const CO={provider:"",aliases:{},not_found:{},...Gy};function dd(i,e){for(const t in e)if(t in i&&typeof i[t]!=typeof e[t])return!1;return!0}function Xy(i){if(typeof i!="object"||i===null)return null;const e=i;if(typeof e.prefix!="string"||!i.icons||typeof i.icons!="object"||!dd(i,CO))return null;const t=e.icons;for(const n in t){const r=t[n];if(!n.match(Ma)||typeof r.body!="string"||!dd(r,bf))return null}const s=e.aliases||Object.create(null);for(const n in s){const r=s[n],o=r.parent;if(!n.match(Ma)||typeof o!="string"||!t[o]&&!s[o]||!dd(r,bf))return null}return e}const Mc=Object.create(null);function TO(i,e){return{provider:i,prefix:e,icons:Object.create(null),missing:new Set}}function Xs(i,e){const t=Mc[i]||(Mc[i]=Object.create(null));return t[e]||(t[e]=TO(i,e))}function kp(i,e){return Xy(e)?Wy(e,(t,s)=>{s?i.icons[t]=s:i.missing.add(t)}):[]}function wO(i,e,t){try{if(typeof t.body=="string")return i.icons[e]={...t},!0}catch{}return!1}function SO(i,e){let t=[];return(typeof i=="string"?[i]:Object.keys(Mc)).forEach(s=>{(typeof s=="string"&&typeof e=="string"?[e]:Object.keys(Mc[s]||{})).forEach(n=>{const r=Xs(s,n);t=t.concat(Object.keys(r.icons).map(o=>(s!==""?"@"+s+":":"")+n+":"+o))})}),t}let sl=!1;function qy(i){return typeof i=="boolean"&&(sl=i),sl}function nl(i){const e=typeof i=="string"?Pl(i,!0,sl):i;if(e){const t=Xs(e.provider,e.prefix),s=e.name;return t.icons[s]||(t.missing.has(s)?null:void 0)}}function Zy(i,e){const t=Pl(i,!0,sl);if(!t)return!1;const s=Xs(t.provider,t.prefix);return wO(s,t.name,e)}function x0(i,e){if(typeof i!="object")return!1;if(typeof e!="string"&&(e=i.provider||""),sl&&!e&&!i.prefix){let n=!1;return Xy(i)&&(i.prefix="",Wy(i,(r,o)=>{o&&Zy(r,o)&&(n=!0)})),n}const t=i.prefix;if(!Qh({provider:e,prefix:t,name:"a"}))return!1;const s=Xs(e,t);return!!kp(s,i)}function R0(i){return!!nl(i)}function xO(i){const e=nl(i);return e?{...Nl,...e}:null}function RO(i){const e={loaded:[],missing:[],pending:[]},t=Object.create(null);i.sort((n,r)=>n.provider!==r.provider?n.provider.localeCompare(r.provider):n.prefix!==r.prefix?n.prefix.localeCompare(r.prefix):n.name.localeCompare(r.name));let s={provider:"",prefix:"",name:""};return i.forEach(n=>{if(s.name===n.name&&s.prefix===n.prefix&&s.provider===n.provider)return;s=n;const r=n.provider,o=n.prefix,a=n.name,l=t[r]||(t[r]=Object.create(null)),h=l[o]||(l[o]=Xs(r,o));let u;a in h.icons?u=e.loaded:o===""||h.missing.has(a)?u=e.missing:u=e.pending;const c={provider:r,prefix:o,name:a};u.push(c)}),e}function Qy(i,e){i.forEach(t=>{const s=t.loaderCallbacks;s&&(t.loaderCallbacks=s.filter(n=>n.id!==e))})}function _O(i){i.pendingCallbacksFlag||(i.pendingCallbacksFlag=!0,setTimeout(()=>{i.pendingCallbacksFlag=!1;const e=i.loaderCallbacks?i.loaderCallbacks.slice(0):[];if(!e.length)return;let t=!1;const s=i.provider,n=i.prefix;e.forEach(r=>{const o=r.icons,a=o.pending.length;o.pending=o.pending.filter(l=>{if(l.prefix!==n)return!0;const h=l.name;if(i.icons[h])o.loaded.push({provider:s,prefix:n,name:h});else if(i.missing.has(h))o.missing.push({provider:s,prefix:n,name:h});else return t=!0,!0;return!1}),o.pending.length!==a&&(t||Qy([i],r.id),r.callback(o.loaded.slice(0),o.missing.slice(0),o.pending.slice(0),r.abort))})}))}let AO=0;function MO(i,e,t){const s=AO++,n=Qy.bind(null,t,s);if(!e.pending.length)return n;const r={id:s,icons:e,callback:i,abort:n};return t.forEach(o=>{(o.loaderCallbacks||(o.loaderCallbacks=[])).push(r)}),n}const vf=Object.create(null);function _0(i,e){vf[i]=e}function yf(i){return vf[i]||vf[""]}function FO(i,e=!0,t=!1){const s=[];return i.forEach(n=>{const r=typeof n=="string"?Pl(n,e,t):n;r&&s.push(r)}),s}var OO={resources:[],index:0,timeout:2e3,rotate:750,random:!1,dataAfterTimeout:!1};function NO(i,e,t,s){const n=i.resources.length,r=i.random?Math.floor(Math.random()*n):i.index;let o;if(i.random){let S=i.resources.slice(0);for(o=[];S.length>1;){const _=Math.floor(Math.random()*S.length);o.push(S[_]),S=S.slice(0,_).concat(S.slice(_+1))}o=o.concat(S)}else o=i.resources.slice(r).concat(i.resources.slice(0,r));const a=Date.now();let l="pending",h=0,u,c=null,d=[],f=[];typeof s=="function"&&f.push(s);function p(){c&&(clearTimeout(c),c=null)}function m(){l==="pending"&&(l="aborted"),p(),d.forEach(S=>{S.status==="pending"&&(S.status="aborted")}),d=[]}function g(S,_){_&&(f=[]),typeof S=="function"&&f.push(S)}function E(){return{startTime:a,payload:e,status:l,queriesSent:h,queriesPending:d.length,subscribe:g,abort:m}}function I(){l="failed",f.forEach(S=>{S(void 0,u)})}function v(){d.forEach(S=>{S.status==="pending"&&(S.status="aborted")}),d=[]}function b(S,_,M){const A=_!=="success";switch(d=d.filter(F=>F!==S),l){case"pending":break;case"failed":if(A||!i.dataAfterTimeout)return;break;default:return}if(_==="abort"){u=M,I();return}if(A){u=M,d.length||(o.length?C():I());return}if(p(),v(),!i.random){const F=i.resources.indexOf(S.resource);F!==-1&&F!==i.index&&(i.index=F)}l="completed",f.forEach(F=>{F(M)})}function C(){if(l!=="pending")return;p();const S=o.shift();if(S===void 0){if(d.length){c=setTimeout(()=>{p(),l==="pending"&&(v(),I())},i.timeout);return}I();return}const _={status:"pending",resource:S,callback:(M,A)=>{b(_,M,A)}};d.push(_),h++,c=setTimeout(C,i.rotate),t(S,e,_.callback)}return setTimeout(C),E}function Ky(i){const e={...OO,...i};let t=[];function s(){t=t.filter(o=>o().status==="pending")}function n(o,a,l){const h=NO(e,o,a,(u,c)=>{s(),l&&l(u,c)});return t.push(h),h}function r(o){return t.find(a=>o(a))||null}return{query:n,find:r,setIndex:o=>{e.index=o},getIndex:()=>e.index,cleanup:s}}function Bp(i){let e;if(typeof i.resources=="string")e=[i.resources];else if(e=i.resources,!(e instanceof Array)||!e.length)return null;return{resources:e,path:i.path||"/",maxURL:i.maxURL||500,rotate:i.rotate||750,timeout:i.timeout||5e3,random:i.random===!0,index:i.index||0,dataAfterTimeout:i.dataAfterTimeout!==!1}}const Tu=Object.create(null),Ph=["https://api.simplesvg.com","https://api.unisvg.com"],Cf=[];for(;Ph.length>0;)Ph.length===1||Math.random()>.5?Cf.push(Ph.shift()):Cf.push(Ph.pop());Tu[""]=Bp({resources:["https://api.iconify.design"].concat(Cf)});function A0(i,e){const t=Bp(e);return t===null?!1:(Tu[i]=t,!0)}function wu(i){return Tu[i]}function PO(){return Object.keys(Tu)}function M0(){}const fd=Object.create(null);function LO(i){if(!fd[i]){const e=wu(i);if(!e)return;const t=Ky(e),s={config:e,redundancy:t};fd[i]=s}return fd[i]}function Jy(i,e,t){let s,n;if(typeof i=="string"){const r=yf(i);if(!r)return t(void 0,424),M0;n=r.send;const o=LO(i);o&&(s=o.redundancy)}else{const r=Bp(i);if(r){s=Ky(r);const o=i.resources?i.resources[0]:"",a=yf(o);a&&(n=a.send)}}return!s||!n?(t(void 0,424),M0):s.query(e,n,t)().abort}const F0="iconify2",rl="iconify",eC=rl+"-count",O0=rl+"-version",tC=36e5,DO=168,UO=50;function Tf(i,e){try{return i.getItem(e)}catch{}}function zp(i,e,t){try{return i.setItem(e,t),!0}catch{}}function N0(i,e){try{i.removeItem(e)}catch{}}function wf(i,e){return zp(i,eC,e.toString())}function Sf(i){return parseInt(Tf(i,eC))||0}const Pn={local:!0,session:!0},iC={local:new Set,session:new Set};let Vp=!1;function kO(i){Vp=i}let Lh=typeof window>"u"?{}:window;function sC(i){const e=i+"Storage";try{if(Lh&&Lh[e]&&typeof Lh[e].length=="number")return Lh[e]}catch{}Pn[i]=!1}function nC(i,e){const t=sC(i);if(!t)return;const s=Tf(t,O0);if(s!==F0){if(s){const a=Sf(t);for(let l=0;l<a;l++)N0(t,rl+l.toString())}zp(t,O0,F0),wf(t,0);return}const n=Math.floor(Date.now()/tC)-DO,r=a=>{const l=rl+a.toString(),h=Tf(t,l);if(typeof h=="string"){try{const u=JSON.parse(h);if(typeof u=="object"&&typeof u.cached=="number"&&u.cached>n&&typeof u.provider=="string"&&typeof u.data=="object"&&typeof u.data.prefix=="string"&&e(u,a))return!0}catch{}N0(t,l)}};let o=Sf(t);for(let a=o-1;a>=0;a--)r(a)||(a===o-1?(o--,wf(t,o)):iC[i].add(a))}function rC(){if(!Vp){kO(!0);for(const i in Pn)nC(i,e=>{const t=e.data,s=e.provider,n=t.prefix,r=Xs(s,n);if(!kp(r,t).length)return!1;const o=t.lastModified||-1;return r.lastModifiedCached=r.lastModifiedCached?Math.min(r.lastModifiedCached,o):o,!0})}}function BO(i,e){const t=i.lastModifiedCached;if(t&&t>=e)return t===e;if(i.lastModifiedCached=e,t)for(const s in Pn)nC(s,n=>{const r=n.data;return n.provider!==i.provider||r.prefix!==i.prefix||r.lastModified===e});return!0}function zO(i,e){Vp||rC();function t(s){let n;if(!Pn[s]||!(n=sC(s)))return;const r=iC[s];let o;if(r.size)r.delete(o=Array.from(r).shift());else if(o=Sf(n),o>=UO||!wf(n,o+1))return;const a={cached:Math.floor(Date.now()/tC),provider:i.provider,data:e};return zp(n,rl+o.toString(),JSON.stringify(a))}e.lastModified&&!BO(i,e.lastModified)||Object.keys(e.icons).length&&(e.not_found&&(e=Object.assign({},e),delete e.not_found),t("local")||t("session"))}function P0(){}function VO(i){i.iconsLoaderFlag||(i.iconsLoaderFlag=!0,setTimeout(()=>{i.iconsLoaderFlag=!1,_O(i)}))}function $O(i,e){i.iconsToLoad?i.iconsToLoad=i.iconsToLoad.concat(e).sort():i.iconsToLoad=e,i.iconsQueueFlag||(i.iconsQueueFlag=!0,setTimeout(()=>{i.iconsQueueFlag=!1;const{provider:t,prefix:s}=i,n=i.iconsToLoad;delete i.iconsToLoad;let r;!n||!(r=yf(t))||r.prepare(t,s,n).forEach(o=>{Jy(t,o,a=>{if(typeof a!="object")o.icons.forEach(l=>{i.missing.add(l)});else try{const l=kp(i,a);if(!l.length)return;const h=i.pendingIcons;h&&l.forEach(u=>{h.delete(u)}),zO(i,a)}catch(l){console.error(l)}VO(i)})})}))}const $p=(i,e)=>{const t=FO(i,!0,qy()),s=RO(t);if(!s.pending.length){let l=!0;return e&&setTimeout(()=>{l&&e(s.loaded,s.missing,s.pending,P0)}),()=>{l=!1}}const n=Object.create(null),r=[];let o,a;return s.pending.forEach(l=>{const{provider:h,prefix:u}=l;if(u===a&&h===o)return;o=h,a=u,r.push(Xs(h,u));const c=n[h]||(n[h]=Object.create(null));c[u]||(c[u]=[])}),s.pending.forEach(l=>{const{provider:h,prefix:u,name:c}=l,d=Xs(h,u),f=d.pendingIcons||(d.pendingIcons=new Set);f.has(c)||(f.add(c),n[h][u].push(c))}),r.forEach(l=>{const{provider:h,prefix:u}=l;n[h][u].length&&$O(l,n[h][u])}),e?MO(e,s,r):P0},HO=i=>new Promise((e,t)=>{const s=typeof i=="string"?Pl(i,!0):i;if(!s){t(i);return}$p([s||i],n=>{if(n.length&&s){const r=nl(s);if(r){e({...Nl,...r});return}}t(i)})});function GO(i){try{const e=typeof i=="string"?JSON.parse(i):i;if(typeof e.body=="string")return{...e}}catch{}}function YO(i,e){const t=typeof i=="string"?Pl(i,!0,!0):null;if(!t){const r=GO(i);return{value:i,data:r}}const s=nl(t);if(s!==void 0||!t.prefix)return{value:i,name:t,data:s};const n=$p([t],()=>e(i,t,nl(t)));return{value:i,name:t,loading:n}}function pd(i){return i.hasAttribute("inline")}let oC=!1;try{oC=navigator.vendor.indexOf("Apple")===0}catch{}function jO(i,e){switch(e){case"svg":case"bg":case"mask":return e}return e!=="style"&&(oC||i.indexOf("<a")===-1)?"svg":i.indexOf("currentColor")===-1?"bg":"mask"}const WO=/(-?[0-9.]*[0-9]+[0-9.]*)/g,XO=/^-?[0-9.]*[0-9]+[0-9.]*$/g;function xf(i,e,t){if(e===1)return i;if(t=t||100,typeof i=="number")return Math.ceil(i*e*t)/t;if(typeof i!="string")return i;const s=i.split(WO);if(s===null||!s.length)return i;const n=[];let r=s.shift(),o=XO.test(r);for(;;){if(o){const a=parseFloat(r);isNaN(a)?n.push(r):n.push(Math.ceil(a*e*t)/t)}else n.push(r);if(r=s.shift(),r===void 0)return n.join("");o=!o}}function qO(i,e="defs"){let t="";const s=i.indexOf("<"+e);for(;s>=0;){const n=i.indexOf(">",s),r=i.indexOf("</"+e);if(n===-1||r===-1)break;const o=i.indexOf(">",r);if(o===-1)break;t+=i.slice(n+1,r).trim(),i=i.slice(0,s).trim()+i.slice(o+1)}return{defs:t,content:i}}function ZO(i,e){return i?"<defs>"+i+"</defs>"+e:e}function QO(i,e,t){const s=qO(i);return ZO(s.defs,e+s.content+t)}const KO=i=>i==="unset"||i==="undefined"||i==="none";function aC(i,e){const t={...Nl,...i},s={...Yy,...e},n={left:t.left,top:t.top,width:t.width,height:t.height};let r=t.body;[t,s].forEach(m=>{const g=[],E=m.hFlip,I=m.vFlip;let v=m.rotate;E?I?v+=2:(g.push("translate("+(n.width+n.left).toString()+" "+(0-n.top).toString()+")"),g.push("scale(-1 1)"),n.top=n.left=0):I&&(g.push("translate("+(0-n.left).toString()+" "+(n.height+n.top).toString()+")"),g.push("scale(1 -1)"),n.top=n.left=0);let b;switch(v<0&&(v-=Math.floor(v/4)*4),v=v%4,v){case 1:b=n.height/2+n.top,g.unshift("rotate(90 "+b.toString()+" "+b.toString()+")");break;case 2:g.unshift("rotate(180 "+(n.width/2+n.left).toString()+" "+(n.height/2+n.top).toString()+")");break;case 3:b=n.width/2+n.left,g.unshift("rotate(-90 "+b.toString()+" "+b.toString()+")");break}v%2===1&&(n.left!==n.top&&(b=n.left,n.left=n.top,n.top=b),n.width!==n.height&&(b=n.width,n.width=n.height,n.height=b)),g.length&&(r=QO(r,'<g transform="'+g.join(" ")+'">',"</g>"))});const o=s.width,a=s.height,l=n.width,h=n.height;let u,c;o===null?(c=a===null?"1em":a==="auto"?h:a,u=xf(c,l/h)):(u=o==="auto"?l:o,c=a===null?xf(u,h/l):a==="auto"?h:a);const d={},f=(m,g)=>{KO(g)||(d[m]=g.toString())};f("width",u),f("height",c);const p=[n.left,n.top,l,h];return d.viewBox=p.join(" "),{attributes:d,viewBox:p,body:r}}function Hp(i,e){let t=i.indexOf("xlink:")===-1?"":' xmlns:xlink="http://www.w3.org/1999/xlink"';for(const s in e)t+=" "+s+'="'+e[s]+'"';return'<svg xmlns="http://www.w3.org/2000/svg"'+t+">"+i+"</svg>"}function JO(i){return i.replace(/"/g,"'").replace(/%/g,"%25").replace(/#/g,"%23").replace(/</g,"%3C").replace(/>/g,"%3E").replace(/\s+/g," ")}function eN(i){return"data:image/svg+xml,"+JO(i)}function lC(i){return'url("'+eN(i)+'")'}const tN=()=>{let i;try{if(i=fetch,typeof i=="function")return i}catch{}};let Fc=tN();function iN(i){Fc=i}function sN(){return Fc}function nN(i,e){const t=wu(i);if(!t)return 0;let s;if(!t.maxURL)s=0;else{let n=0;t.resources.forEach(o=>{n=Math.max(n,o.length)});const r=e+".json?icons=";s=t.maxURL-n-t.path.length-r.length}return s}function rN(i){return i===404}const oN=(i,e,t)=>{const s=[],n=nN(i,e),r="icons";let o={type:r,provider:i,prefix:e,icons:[]},a=0;return t.forEach((l,h)=>{a+=l.length+1,a>=n&&h>0&&(s.push(o),o={type:r,provider:i,prefix:e,icons:[]},a=l.length),o.icons.push(l)}),s.push(o),s};function aN(i){if(typeof i=="string"){const e=wu(i);if(e)return e.path}return"/"}const lN=(i,e,t)=>{if(!Fc){t("abort",424);return}let s=aN(e.provider);switch(e.type){case"icons":{const r=e.prefix,o=e.icons.join(","),a=new URLSearchParams({icons:o});s+=r+".json?"+a.toString();break}case"custom":{const r=e.uri;s+=r.slice(0,1)==="/"?r.slice(1):r;break}default:t("abort",400);return}let n=503;Fc(i+s).then(r=>{const o=r.status;if(o!==200){setTimeout(()=>{t(rN(o)?"abort":"next",o)});return}return n=501,r.json()}).then(r=>{if(typeof r!="object"||r===null){setTimeout(()=>{r===404?t("abort",r):t("next",n)});return}setTimeout(()=>{t("success",r)})}).catch(()=>{t("next",n)})},hN={prepare:oN,send:lN};function L0(i,e){switch(i){case"local":case"session":Pn[i]=e;break;case"all":for(const t in Pn)Pn[t]=e;break}}const md="data-style";let hC="";function cN(i){hC=i}function D0(i,e){let t=Array.from(i.childNodes).find(s=>s.hasAttribute&&s.hasAttribute(md));t||(t=document.createElement("style"),t.setAttribute(md,md),i.appendChild(t)),t.textContent=":host{display:inline-block;vertical-align:"+(e?"-0.125em":"0")+"}span,svg{display:block}"+hC}function cC(){_0("",hN),qy(!0);let i;try{i=window}catch{}if(i){if(rC(),i.IconifyPreload!==void 0){const e=i.IconifyPreload,t="Invalid IconifyPreload syntax.";typeof e=="object"&&e!==null&&(e instanceof Array?e:[e]).forEach(s=>{try{(typeof s!="object"||s===null||s instanceof Array||typeof s.icons!="object"||typeof s.prefix!="string"||!x0(s))&&console.error(t)}catch{console.error(t)}})}if(i.IconifyProviders!==void 0){const e=i.IconifyProviders;if(typeof e=="object"&&e!==null)for(const t in e){const s="IconifyProviders["+t+"] is invalid.";try{const n=e[t];if(typeof n!="object"||!n||n.resources===void 0)continue;A0(t,n)||console.error(s)}catch{console.error(s)}}}}return{enableCache:e=>L0(e,!0),disableCache:e=>L0(e,!1),iconLoaded:R0,iconExists:R0,getIcon:xO,listIcons:SO,addIcon:Zy,addCollection:x0,calculateSize:xf,buildIcon:aC,iconToHTML:Hp,svgToURL:lC,loadIcons:$p,loadIcon:HO,addAPIProvider:A0,appendCustomStyle:cN,_api:{getAPIConfig:wu,setAPIModule:_0,sendAPIQuery:Jy,setFetch:iN,getFetch:sN,listAPIProviders:PO}}}const Rf={"background-color":"currentColor"},uC={"background-color":"transparent"},U0={image:"var(--svg)",repeat:"no-repeat",size:"100% 100%"},k0={"-webkit-mask":Rf,mask:Rf,background:uC};for(const i in k0){const e=k0[i];for(const t in U0)e[i+"-"+t]=U0[t]}function B0(i){return i?i+(i.match(/^[-0-9.]+$/)?"px":""):"inherit"}function uN(i,e,t){const s=document.createElement("span");let n=i.body;n.indexOf("<a")!==-1&&(n+="<!-- "+Date.now()+" -->");const r=i.attributes,o=Hp(n,{...r,width:e.width+"",height:e.height+""}),a=lC(o),l=s.style,h={"--svg":a,width:B0(r.width),height:B0(r.height),...t?Rf:uC};for(const u in h)l.setProperty(u,h[u]);return s}let Fa;function dN(){try{Fa=window.trustedTypes.createPolicy("iconify",{createHTML:i=>i})}catch{Fa=null}}function fN(i){return Fa===void 0&&dN(),Fa?Fa.createHTML(i):i}function pN(i){const e=document.createElement("span"),t=i.attributes;let s="";t.width||(s="width: inherit;"),t.height||(s+="height: inherit;"),s&&(t.style=s);const n=Hp(i.body,t);return e.innerHTML=fN(n),e.firstChild}function _f(i){return Array.from(i.childNodes).find(e=>{const t=e.tagName&&e.tagName.toUpperCase();return t==="SPAN"||t==="SVG"})}function z0(i,e){const t=e.icon.data,s=e.customisations,n=aC(t,s);s.preserveAspectRatio&&(n.attributes.preserveAspectRatio=s.preserveAspectRatio);const r=e.renderedMode;let o;switch(r){case"svg":o=pN(n);break;default:o=uN(n,{...Nl,...t},r==="mask")}const a=_f(i);a?o.tagName==="SPAN"&&a.tagName===o.tagName?a.setAttribute("style",o.getAttribute("style")):i.replaceChild(o,a):i.appendChild(o)}function V0(i,e,t){const s=t&&(t.rendered?t:t.lastRender);return{rendered:!1,inline:e,icon:i,lastRender:s}}function mN(i="iconify-icon"){let e,t;try{e=window.customElements,t=window.HTMLElement}catch{return}if(!e||!t)return;const s=e.get(i);if(s)return s;const n=["icon","mode","inline","observe","width","height","rotate","flip"],r=class extends t{constructor(){super(),In(this,"_shadowRoot"),In(this,"_initialised",!1),In(this,"_state"),In(this,"_checkQueued",!1),In(this,"_connected",!1),In(this,"_observer",null),In(this,"_visible",!0);const a=this._shadowRoot=this.attachShadow({mode:"open"}),l=pd(this);D0(a,l),this._state=V0({value:""},l),this._queueCheck()}connectedCallback(){this._connected=!0,this.startObserver()}disconnectedCallback(){this._connected=!1,this.stopObserver()}static get observedAttributes(){return n.slice(0)}attributeChangedCallback(a){switch(a){case"inline":{const l=pd(this),h=this._state;l!==h.inline&&(h.inline=l,D0(this._shadowRoot,l));break}case"observer":{this.observer?this.startObserver():this.stopObserver();break}default:this._queueCheck()}}get icon(){const a=this.getAttribute("icon");if(a&&a.slice(0,1)==="{")try{return JSON.parse(a)}catch{}return a}set icon(a){typeof a=="object"&&(a=JSON.stringify(a)),this.setAttribute("icon",a)}get inline(){return pd(this)}set inline(a){a?this.setAttribute("inline","true"):this.removeAttribute("inline")}get observer(){return this.hasAttribute("observer")}set observer(a){a?this.setAttribute("observer","true"):this.removeAttribute("observer")}restartAnimation(){const a=this._state;if(a.rendered){const l=this._shadowRoot;if(a.renderedMode==="svg")try{l.lastChild.setCurrentTime(0);return}catch{}z0(l,a)}}get status(){const a=this._state;return a.rendered?"rendered":a.icon.data===null?"failed":"loading"}_queueCheck(){this._checkQueued||(this._checkQueued=!0,setTimeout(()=>{this._check()}))}_check(){if(!this._checkQueued)return;this._checkQueued=!1;const a=this._state,l=this.getAttribute("icon");if(l!==a.icon.value){this._iconChanged(l);return}if(!a.rendered||!this._visible)return;const h=this.getAttribute("mode"),u=w0(this);(a.attrMode!==h||IO(a.customisations,u)||!_f(this._shadowRoot))&&this._renderIcon(a.icon,u,h)}_iconChanged(a){const l=YO(a,(h,u,c)=>{const d=this._state;if(d.rendered||this.getAttribute("icon")!==h)return;const f={value:h,name:u,data:c};f.data?this._gotIconData(f):d.icon=f});l.data?this._gotIconData(l):this._state=V0(l,this._state.inline,this._state)}_forceRender(){if(!this._visible){const a=_f(this._shadowRoot);a&&this._shadowRoot.removeChild(a);return}this._queueCheck()}_gotIconData(a){this._checkQueued=!1,this._renderIcon(a,w0(this),this.getAttribute("mode"))}_renderIcon(a,l,h){const u=jO(a.data.body,h),c=this._state.inline;z0(this._shadowRoot,this._state={rendered:!0,icon:a,inline:c,customisations:l,attrMode:h,renderedMode:u})}startObserver(){if(!this._observer)try{this._observer=new IntersectionObserver(a=>{const l=a.some(h=>h.isIntersecting);l!==this._visible&&(this._visible=l,this._forceRender())}),this._observer.observe(this)}catch{if(this._observer){try{this._observer.disconnect()}catch{}this._observer=null}}}stopObserver(){this._observer&&(this._observer.disconnect(),this._observer=null,this._visible=!0,this._connected&&this._forceRender())}};n.forEach(a=>{a in r.prototype||Object.defineProperty(r.prototype,a,{get:function(){return this.getAttribute(a)},set:function(l){l!==null?this.setAttribute(a,l):this.removeAttribute(a)}})});const o=cC();for(const a in o)r[a]=r.prototype[a]=o[a];return e.define(i,r),r}mN()||cC();const gN=Be`
  ::-webkit-scrollbar {
    width: 0.4rem;
    height: 0.4rem;
    overflow: hidden;
  }

  ::-webkit-scrollbar-thumb {
    border-radius: 0.25rem;
    background-color: var(
      --bim-scrollbar--c,
      color-mix(in lab, var(--bim-ui_main-base), white 15%)
    );
  }

  ::-webkit-scrollbar-track {
    background-color: var(--bim-scrollbar--bgc, var(--bim-ui_bg-base));
  }
`,EN=Be`
  :root {
    /* Grayscale Colors */
    --bim-ui_gray-0: hsl(210 10% 5%);
    --bim-ui_gray-1: hsl(210 10% 10%);
    --bim-ui_gray-2: hsl(210 10% 20%);
    --bim-ui_gray-3: hsl(210 10% 30%);
    --bim-ui_gray-4: hsl(210 10% 40%);
    --bim-ui_gray-6: hsl(210 10% 60%);
    --bim-ui_gray-7: hsl(210 10% 70%);
    --bim-ui_gray-8: hsl(210 10% 80%);
    --bim-ui_gray-9: hsl(210 10% 90%);
    --bim-ui_gray-10: hsl(210 10% 95%);

    /* Brand Colors */
    --bim-ui_main-base: #6528d7;
    --bim-ui_accent-base: #bcf124;

    /* Brand Colors Contrasts */
    --bim-ui_main-contrast: var(--bim-ui_gray-10);
    --bim-ui_accent-contrast: var(--bim-ui_gray-0);

    /* Sizes */
    --bim-ui_size-4xs: 0.375rem;
    --bim-ui_size-3xs: 0.5rem;
    --bim-ui_size-2xs: 0.625rem;
    --bim-ui_size-xs: 0.75rem;
    --bim-ui_size-sm: 0.875rem;
    --bim-ui_size-base: 1rem;
    --bim-ui_size-lg: 1.125rem;
    --bim-ui_size-xl: 1.25rem;
    --bim-ui_size-2xl: 1.375rem;
    --bim-ui_size-3xl: 1.5rem;
    --bim-ui_size-4xl: 1.625rem;
    --bim-ui_size-5xl: 1.75rem;
    --bim-ui_size-6xl: 1.875rem;
    --bim-ui_size-7xl: 2rem;
    --bim-ui_size-8xl: 2.125rem;
    --bim-ui_size-9xl: 2.25rem;
  }

  /* Background Colors */
  @media (prefers-color-scheme: dark) {
    :root {
      --bim-ui_bg-base: var(--bim-ui_gray-0);
      --bim-ui_bg-contrast-10: var(--bim-ui_gray-1);
      --bim-ui_bg-contrast-20: var(--bim-ui_gray-2);
      --bim-ui_bg-contrast-30: var(--bim-ui_gray-3);
      --bim-ui_bg-contrast-40: var(--bim-ui_gray-4);
      --bim-ui_bg-contrast-60: var(--bim-ui_gray-6);
      --bim-ui_bg-contrast-80: var(--bim-ui_gray-8);
      --bim-ui_bg-contrast-100: var(--bim-ui_gray-10);
    }
  }

  @media (prefers-color-scheme: light) {
    :root {
      --bim-ui_bg-base: var(--bim-ui_gray-10);
      --bim-ui_bg-contrast-10: var(--bim-ui_gray-9);
      --bim-ui_bg-contrast-20: var(--bim-ui_gray-8);
      --bim-ui_bg-contrast-30: var(--bim-ui_gray-7);
      --bim-ui_bg-contrast-40: var(--bim-ui_gray-6);
      --bim-ui_bg-contrast-60: var(--bim-ui_gray-4);
      --bim-ui_bg-contrast-80: var(--bim-ui_gray-2);
      --bim-ui_bg-contrast-100: var(--bim-ui_gray-0);
      --bim-ui_accent-base: #6528d7;
    }
  }

  html.bim-ui-dark {
    --bim-ui_bg-base: var(--bim-ui_gray-0);
    --bim-ui_bg-contrast-10: var(--bim-ui_gray-1);
    --bim-ui_bg-contrast-20: var(--bim-ui_gray-2);
    --bim-ui_bg-contrast-30: var(--bim-ui_gray-3);
    --bim-ui_bg-contrast-40: var(--bim-ui_gray-4);
    --bim-ui_bg-contrast-60: var(--bim-ui_gray-6);
    --bim-ui_bg-contrast-80: var(--bim-ui_gray-8);
    --bim-ui_bg-contrast-100: var(--bim-ui_gray-10);
  }

  html.bim-ui-light {
    --bim-ui_bg-base: var(--bim-ui_gray-10);
    --bim-ui_bg-contrast-10: var(--bim-ui_gray-9);
    --bim-ui_bg-contrast-20: var(--bim-ui_gray-8);
    --bim-ui_bg-contrast-30: var(--bim-ui_gray-7);
    --bim-ui_bg-contrast-40: var(--bim-ui_gray-6);
    --bim-ui_bg-contrast-60: var(--bim-ui_gray-4);
    --bim-ui_bg-contrast-80: var(--bim-ui_gray-2);
    --bim-ui_bg-contrast-100: var(--bim-ui_gray-0);
    --bim-ui_accent-base: #6528d7;
  }

  [data-context-dialog]::backdrop {
    background-color: transparent;
  }
`,on={scrollbar:gN,globalStyles:EN},dC=class Ae{static set config(e){this._config={...Ae._config,...e}}static get config(){return Ae._config}static addGlobalStyles(){let e=document.querySelector("style[id='bim-ui']");if(e)return;e=document.createElement("style"),e.id="bim-ui",e.textContent=on.globalStyles.cssText;const t=document.head.firstChild;t?document.head.insertBefore(e,t):document.head.append(e)}static defineCustomElement(e,t){customElements.get(e)||customElements.define(e,t)}static registerComponents(){Ae.init()}static init(){Ae.addGlobalStyles(),Ae.defineCustomElement("bim-button",TN),Ae.defineCustomElement("bim-checkbox",Fo),Ae.defineCustomElement("bim-color-input",tr),Ae.defineCustomElement("bim-context-menu",Mf),Ae.defineCustomElement("bim-dropdown",Cs),Ae.defineCustomElement("bim-grid",Yp),Ae.defineCustomElement("bim-icon",FN),Ae.defineCustomElement("bim-input",Dl),Ae.defineCustomElement("bim-label",No),Ae.defineCustomElement("bim-number-input",Xt),Ae.defineCustomElement("bim-option",dt),Ae.defineCustomElement("bim-panel",ir),Ae.defineCustomElement("bim-panel-section",Po),Ae.defineCustomElement("bim-selector",Lo),Ae.defineCustomElement("bim-table",gi),Ae.defineCustomElement("bim-tabs",nr),Ae.defineCustomElement("bim-tab",ti),Ae.defineCustomElement("bim-table-cell",RC),Ae.defineCustomElement("bim-table-children",AC),Ae.defineCustomElement("bim-table-group",FC),Ae.defineCustomElement("bim-table-row",sr),Ae.defineCustomElement("bim-text-input",Ei),Ae.defineCustomElement("bim-toolbar",Mu),Ae.defineCustomElement("bim-toolbar-group",_u),Ae.defineCustomElement("bim-toolbar-section",ko),Ae.defineCustomElement("bim-viewport",$C)}static newRandomId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";let t="";for(let s=0;s<10;s++){const n=Math.floor(Math.random()*e.length);t+=e.charAt(n)}return t}};dC._config={sectionLabelOnVerticalToolbar:!1};let Yt=dC;class ot extends Le{constructor(){super(...arguments),this._lazyLoadObserver=null,this._visibleElements=[],this.ELEMENTS_BEFORE_OBSERVER=20,this.useObserver=!1,this.elements=new Set,this.observe=e=>{if(!this.useObserver)return;for(const s of e)this.elements.add(s);const t=e.slice(this.ELEMENTS_BEFORE_OBSERVER);for(const s of t)s.remove();this.observeLastElement()}}set visibleElements(e){this._visibleElements=this.useObserver?e:[],this.requestUpdate()}get visibleElements(){return this._visibleElements}getLazyObserver(){if(!this.useObserver)return null;if(this._lazyLoadObserver)return this._lazyLoadObserver;const e=new IntersectionObserver(t=>{const s=t[0];if(!s.isIntersecting)return;const n=s.target;e.unobserve(n);const r=this.ELEMENTS_BEFORE_OBSERVER+this.visibleElements.length,o=[...this.elements][r];o&&(this.visibleElements=[...this.visibleElements,o],e.observe(o))},{threshold:.5});return e}observeLastElement(){const e=this.getLazyObserver();if(!e)return;const t=this.ELEMENTS_BEFORE_OBSERVER+this.visibleElements.length-1,s=[...this.elements][t];s&&e.observe(s)}resetVisibleElements(){const e=this.getLazyObserver();if(e){for(const t of this.elements)e.unobserve(t);this.visibleElements=[],this.observeLastElement()}}static create(e,t){const s=document.createDocumentFragment();if(e.length===0)return lo(e(),s),s.firstElementChild;if(!t)throw new Error("UIComponent: Initial state is required for statefull components.");let n=t;const r=e,o=l=>(n={...n,...l},lo(r(n,o),s),n);o(t);const a=()=>n;return[s.firstElementChild,o,a]}}const ol=(i,e={},t=!0)=>{let s={};for(const n of i.children){const r=n,o=r.getAttribute("name")||r.getAttribute("label"),a=e[o];if(o){if("value"in r&&typeof r.value<"u"&&r.value!==null){const l=r.value;if(typeof l=="object"&&!Array.isArray(l)&&Object.keys(l).length===0)continue;s[o]=a?a(r.value):r.value}else if(t){const l=ol(r,e);if(Object.keys(l).length===0)continue;s[o]=a?a(l):l}}else t&&(s={...s,...ol(r,e)})}return s},Su=i=>i==="true"||i==="false"?i==="true":i&&!isNaN(Number(i))&&i.trim()!==""?Number(i):i,IN=[">=","<=","=",">","<","?","/","#"];function $0(i){const e=IN.find(o=>i.split(o).length===2),t=i.split(e).map(o=>o.trim()),[s,n]=t,r=n.startsWith("'")&&n.endsWith("'")?n.replace(/'/g,""):Su(n);return{key:s,condition:e,value:r}}const Af=i=>{try{const e=[],t=i.split(/&(?![^()]*\))/).map(s=>s.trim());for(const s of t){const n=!s.startsWith("(")&&!s.endsWith(")"),r=s.startsWith("(")&&s.endsWith(")");if(n){const o=$0(s);e.push(o)}if(r){const o={operator:"&",queries:s.replace(/^(\()|(\))$/g,"").split("&").map(a=>a.trim()).map((a,l)=>{const h=$0(a);return l>0&&(h.operator="&"),h})};e.push(o)}}return e}catch{return null}},H0=(i,e,t)=>{let s=!1;switch(e){case"=":s=i===t;break;case"?":s=String(i).includes(String(t));break;case"<":(typeof i=="number"||typeof t=="number")&&(s=i<t);break;case"<=":(typeof i=="number"||typeof t=="number")&&(s=i<=t);break;case">":(typeof i=="number"||typeof t=="number")&&(s=i>t);break;case">=":(typeof i=="number"||typeof t=="number")&&(s=i>=t);break;case"/":s=String(i).startsWith(String(t));break}return s};var bN=Object.defineProperty,vN=Object.getOwnPropertyDescriptor,fC=(i,e,t,s)=>{for(var n=vN(e,t),r=i.length-1,o;r>=0;r--)(o=i[r])&&(n=o(e,t,n)||n);return n&&bN(e,t,n),n},lt;const Gp=(lt=class extends Le{constructor(){super(...arguments),this._previousContainer=null,this._visible=!1}get placement(){return this._placement}set placement(i){this._placement=i,this.updatePosition()}static removeMenus(){for(const i of lt.menus)i instanceof lt&&(i.visible=!1);lt.dialog.close(),lt.dialog.remove()}get visible(){return this._visible}set visible(i){var e;this._visible=i,i?(lt.dialog.parentElement||document.body.append(lt.dialog),this._previousContainer=this.parentElement,lt.dialog.style.top=`${window.scrollY||document.documentElement.scrollTop}px`,lt.dialog.append(this),lt.dialog.showModal(),this.updatePosition(),this.dispatchEvent(new Event("visible"))):((e=this._previousContainer)==null||e.append(this),this._previousContainer=null,this.dispatchEvent(new Event("hidden")))}async updatePosition(){if(!(this.visible&&this._previousContainer))return;const i=this.placement??"right",e=await Py(this._previousContainer,this,{placement:i,middleware:[vy(10),Ny(),Oy(),Fy({padding:5})]}),{x:t,y:s}=e;this.style.left=`${t}px`,this.style.top=`${s}px`}connectedCallback(){super.connectedCallback(),lt.menus.push(this)}render(){return j` <slot></slot> `}},lt.styles=[on.scrollbar,Be`
      :host {
        pointer-events: auto;
        position: absolute;
        top: 0;
        left: 0;
        z-index: 999;
        overflow: auto;
        max-height: 20rem;
        min-width: 3rem;
        flex-direction: column;
        box-shadow: 1px 2px 8px 2px rgba(0, 0, 0, 0.15);
        padding: 0.5rem;
        border-radius: var(--bim-ui_size-4xs);
        display: flex;
        background-color: var(
          --bim-context-menu--bgc,
          var(--bim-ui_bg-contrast-20)
        );
      }

      :host(:not([visible])) {
        display: none;
      }
    `],lt.dialog=ot.create(()=>j` <dialog
      @click=${i=>{i.target===lt.dialog&&lt.removeMenus()}}
      @cancel=${()=>lt.removeMenus()}
      data-context-dialog
      style="
      width: 0;
      height: 0;
      position: relative;
      padding: 0;
      border: none;
      outline: none;
      margin: none;
      overflow: visible;
      background-color: transparent;
    "
    ></dialog>`),lt.menus=[],lt);fC([Q({type:String,reflect:!0})],Gp.prototype,"placement");fC([Q({type:Boolean,reflect:!0})],Gp.prototype,"visible");let Mf=Gp;var yN=Object.defineProperty,CN=Object.getOwnPropertyDescriptor,Si=(i,e,t,s)=>{for(var n=s>1?void 0:s?CN(e,t):e,r=i.length-1,o;r>=0;r--)(o=i[r])&&(n=(s?o(e,t,n):o(n))||n);return s&&n&&yN(e,t,n),n},ua;const pi=(ua=class extends Le{constructor(){super(),this.labelHidden=!1,this.active=!1,this.disabled=!1,this.vertical=!1,this.tooltipVisible=!1,this._stateBeforeLoading={disabled:!1,icon:""},this._loading=!1,this._parent=ho(),this._tooltip=ho(),this._mouseLeave=!1,this.onClick=i=>{i.stopPropagation(),this.disabled||this.dispatchEvent(new Event("click"))},this.showContextMenu=()=>{const i=this._contextMenu;if(i){const e=this.getAttribute("data-context-group");e&&i.setAttribute("data-context-group",e),this.closeNestedContexts();const t=Yt.newRandomId();for(const s of i.children)s instanceof ua&&s.setAttribute("data-context-group",t);i.visible=!0}},this.mouseLeave=!0}set loading(i){if(this._loading=i,i)this._stateBeforeLoading={disabled:this.disabled,icon:this.icon},this.disabled=i,this.icon="eos-icons:loading";else{const{disabled:e,icon:t}=this._stateBeforeLoading;this.disabled=e,this.icon=t}}get loading(){return this._loading}set mouseLeave(i){this._mouseLeave=i,i&&(this.tooltipVisible=!1,clearTimeout(this.timeoutID))}get mouseLeave(){return this._mouseLeave}computeTooltipPosition(){const{value:i}=this._parent,{value:e}=this._tooltip;i&&e&&Py(i,e,{placement:"bottom",middleware:[vy(10),Ny(),Oy(),Fy({padding:5})]}).then(t=>{const{x:s,y:n}=t;Object.assign(e.style,{left:`${s}px`,top:`${n}px`})})}onMouseEnter(){if(!(this.tooltipTitle||this.tooltipText))return;this.mouseLeave=!1;const i=this.tooltipTime??700;this.timeoutID=setTimeout(()=>{this.mouseLeave||(this.computeTooltipPosition(),this.tooltipVisible=!0)},i)}closeNestedContexts(){const i=this.getAttribute("data-context-group");if(i)for(const e of Mf.dialog.children){const t=e.getAttribute("data-context-group");if(e instanceof Mf&&t===i){e.visible=!1,e.removeAttribute("data-context-group");for(const s of e.children)s instanceof ua&&(s.closeNestedContexts(),s.removeAttribute("data-context-group"))}}}click(){this.disabled||super.click()}get _contextMenu(){return this.querySelector("bim-context-menu")}connectedCallback(){super.connectedCallback(),this.addEventListener("click",this.showContextMenu)}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener("click",this.showContextMenu)}render(){const i=j`
      <div ${_t(this._tooltip)} class="tooltip">
        ${this.tooltipTitle?j`<p style="text-wrap: nowrap;">
              <strong>${this.tooltipTitle}</strong>
            </p>`:null}
        ${this.tooltipText?j`<p style="width: 9rem;">${this.tooltipText}</p>`:null}
      </div>
    `,e=j`<svg
      xmlns="http://www.w3.org/2000/svg"
      height="1.125rem"
      viewBox="0 0 24 24"
      width="1.125rem"
      style="fill: var(--bim-label--c)"
    >
      <path d="M0 0h24v24H0V0z" fill="none" />
      <path d="M7.41 8.59 12 13.17l4.59-4.58L18 10l-6 6-6-6 1.41-1.41z" />
    </svg>`;return j`
      <div ${_t(this._parent)} class="parent" @click=${this.onClick}>
        ${this.label||this.icon?j`
              <div
                class="button"
                @mouseenter=${this.onMouseEnter}
                @mouseleave=${()=>this.mouseLeave=!0}
              >
                <bim-label
                  .icon=${this.icon}
                  .vertical=${this.vertical}
                  .labelHidden=${this.labelHidden}
                  >${this.label}${this.label&&this._contextMenu?e:null}</bim-label
                >
              </div>
            `:null}
        ${this.tooltipTitle||this.tooltipText?i:null}
      </div>
      <slot></slot>
    `}},ua.styles=Be`
    :host {
      --bim-label--c: var(--bim-ui_bg-contrast-100, white);
      display: block;
      flex: 1;
      pointer-events: none;
      background-color: var(--bim-button--bgc, var(--bim-ui_bg-contrast-20));
      border-radius: var(--bim-ui_size-4xs);
      transition: all 0.15s;
    }

    :host(:not([disabled]):hover) {
      cursor: pointer;
    }

    bim-label {
      pointer-events: none;
    }

    .parent {
      --bim-icon--c: var(--bim-label--c);
      position: relative;
      display: flex;
      height: 100%;
      user-select: none;
      row-gap: 0.125rem;
      min-height: var(--bim-ui_size-5xl);
      min-width: var(--bim-ui_size-5xl);
    }

    .button,
    .children {
      box-sizing: border-box;
      display: flex;
      align-items: center;
      justify-content: center;
      pointer-events: auto;
    }

    .children {
      padding: 0 0.375rem;
      position: absolute;
      height: 100%;
      right: 0;
    }

    :host(:not([label-hidden])[icon][vertical]) .parent {
      min-height: 2.5rem;
    }

    .button {
      flex-grow: 1;
    }

    :host(:not([label-hidden])[label]) .button {
      justify-content: var(--bim-button--jc, center);
    }

    :host(:hover),
    :host([active]) {
      --bim-label--c: var(--bim-ui_main-contrast);
      background-color: var(--bim-ui_main-base);
    }

    :host(:not([label]):not([icon])) .children {
      flex: 1;
    }

    :host([vertical]) .parent {
      justify-content: center;
    }

    :host(:not([label-hidden])[label]) .button {
      padding: 0 0.5rem;
    }

    :host([disabled]) {
      --bim-label--c: var(--bim-ui_bg-contrast-80) !important;
      background-color: gray !important;
    }

    ::slotted(bim-button) {
      --bim-icon--fz: var(--bim-ui_size-base);
      --bim-button--bdrs: var(--bim-ui_size-4xs);
      --bim-button--olw: 0;
      --bim-button--olc: transparent;
    }

    .tooltip {
      position: absolute;
      padding: 0.75rem;
      z-index: 99;
      display: flex;
      flex-flow: column;
      row-gap: 0.375rem;
      box-shadow: 0 0 10px 3px rgba(0 0 0 / 20%);
      outline: 1px solid var(--bim-ui_bg-contrast-40);
      font-size: var(--bim-ui_size-xs);
      border-radius: var(--bim-ui_size-4xs);
      background-color: var(--bim-ui_bg-contrast-20);
      color: var(--bim-ui_bg-contrast-100);
    }

    .tooltip p {
      margin: 0;
      padding: 0;
    }

    :host(:not([tooltip-visible])) .tooltip {
      display: none;
    }
  `,ua);Si([Q({type:String,reflect:!0})],pi.prototype,"label",2);Si([Q({type:Boolean,attribute:"label-hidden",reflect:!0})],pi.prototype,"labelHidden",2);Si([Q({type:Boolean,reflect:!0})],pi.prototype,"active",2);Si([Q({type:Boolean,reflect:!0,attribute:"disabled"})],pi.prototype,"disabled",2);Si([Q({type:String,reflect:!0})],pi.prototype,"icon",2);Si([Q({type:Boolean,reflect:!0})],pi.prototype,"vertical",2);Si([Q({type:Number,attribute:"tooltip-time",reflect:!0})],pi.prototype,"tooltipTime",2);Si([Q({type:Boolean,attribute:"tooltip-visible",reflect:!0})],pi.prototype,"tooltipVisible",2);Si([Q({type:String,attribute:"tooltip-title",reflect:!0})],pi.prototype,"tooltipTitle",2);Si([Q({type:String,attribute:"tooltip-text",reflect:!0})],pi.prototype,"tooltipText",2);Si([Q({type:Boolean,reflect:!0})],pi.prototype,"loading",1);let TN=pi;var wN=Object.defineProperty,Ll=(i,e,t,s)=>{for(var n=void 0,r=i.length-1,o;r>=0;r--)(o=i[r])&&(n=o(e,t,n)||n);return n&&wN(e,t,n),n};const pC=class extends Le{constructor(){super(...arguments),this.checked=!1,this.inverted=!1,this.onValueChange=new Event("change")}get value(){return this.checked}onChange(i){i.stopPropagation(),this.checked=i.target.checked,this.dispatchEvent(this.onValueChange)}render(){return j`
      <div class="parent">
        ${this.label?j`<bim-label .icon="${this.icon}">${this.label}</bim-label> `:null}
        <input
          type="checkbox"
          aria-label=${this.label||this.name||"Checkbox Input"}
          @change="${this.onChange}"
          .checked="${this.checked}"
        />
      </div>
    `}};pC.styles=Be`
    :host {
      display: block;
    }

    .parent {
      display: flex;
      justify-content: space-between;
      height: 1.75rem;
      column-gap: 0.25rem;
      width: 100%;
      align-items: center;
      transition: all 0.15s;
    }

    :host([inverted]) .parent {
      flex-direction: row-reverse;
      justify-content: start;
    }

    input {
      height: 1rem;
      width: 1rem;
      cursor: pointer;
      border: none;
      outline: none;
      accent-color: var(--bim-checkbox--c, var(--bim-ui_main-base));
      transition: all 0.15s;
    }

    input:focus {
      outline: var(--bim-checkbox--olw, 2px) solid
        var(--bim-checkbox--olc, var(--bim-ui_accent-base));
    }
  `;let Fo=pC;Ll([Q({type:String,reflect:!0})],Fo.prototype,"icon");Ll([Q({type:String,reflect:!0})],Fo.prototype,"name");Ll([Q({type:String,reflect:!0})],Fo.prototype,"label");Ll([Q({type:Boolean,reflect:!0})],Fo.prototype,"checked");Ll([Q({type:Boolean,reflect:!0})],Fo.prototype,"inverted");var SN=Object.defineProperty,Oo=(i,e,t,s)=>{for(var n=void 0,r=i.length-1,o;r>=0;r--)(o=i[r])&&(n=o(e,t,n)||n);return n&&SN(e,t,n),n};const mC=class extends Le{constructor(){super(...arguments),this.vertical=!1,this.color="#bcf124",this._colorInput=ho(),this._textInput=ho(),this.onValueChange=new Event("input"),this.onOpacityInput=i=>{const e=i.target;this.opacity=e.value,this.dispatchEvent(this.onValueChange)}}set value(i){const{color:e,opacity:t}=i;this.color=e,t&&(this.opacity=t)}get value(){const i={color:this.color};return this.opacity&&(i.opacity=this.opacity),i}onColorInput(i){i.stopPropagation();const{value:e}=this._colorInput;e&&(this.color=e.value,this.dispatchEvent(this.onValueChange))}onTextInput(i){i.stopPropagation();const{value:e}=this._textInput;if(!e)return;const{value:t}=e;let s=t.replace(/[^a-fA-F0-9]/g,"");s.startsWith("#")||(s=`#${s}`),e.value=s.slice(0,7),e.value.length===7&&(this.color=e.value,this.dispatchEvent(this.onValueChange))}focus(){const{value:i}=this._colorInput;i&&i.click()}render(){return j`
      <div class="parent">
        <bim-input
          .label=${this.label}
          .icon=${this.icon}
          .vertical="${this.vertical}"
        >
          <div class="color-container">
            <div
              style="display: flex; align-items: center; gap: .375rem; height: 100%; flex: 1; padding: 0 0.5rem;"
            >
              <input
                ${_t(this._colorInput)}
                @input="${this.onColorInput}"
                type="color"
                aria-label=${this.label||this.name||"Color Input"}
                value="${this.color}"
              />
              <div
                @click=${this.focus}
                class="sample"
                style="background-color: ${this.color}"
              ></div>
              <input
                ${_t(this._textInput)}
                @input="${this.onTextInput}"
                value="${this.color}"
                type="text"
                aria-label=${this.label||this.name||"Text Color Input"}
              />
            </div>
            ${this.opacity!==void 0?j`<bim-number-input
                  @change=${this.onOpacityInput}
                  slider
                  suffix="%"
                  min="0"
                  value=${this.opacity}
                  max="100"
                ></bim-number-input>`:null}
          </div>
        </bim-input>
      </div>
    `}};mC.styles=Be`
    :host {
      --bim-input--bgc: var(--bim-ui_bg-contrast-20);
      flex: 1;
      display: block;
    }

    :host(:focus) {
      --bim-input--olw: var(--bim-number-input--olw, 2px);
      --bim-input--olc: var(--bim-ui_accent-base);
    }

    .parent {
      display: flex;
      gap: 0.375rem;
    }

    .color-container {
      position: relative;
      outline: none;
      display: flex;
      height: 100%;
      gap: 0.5rem;
      justify-content: flex-start;
      align-items: center;
      flex: 1;
      border-radius: var(--bim-color-input--bdrs, var(--bim-ui_size-4xs));
    }

    .color-container input[type="color"] {
      position: absolute;
      bottom: -0.25rem;
      visibility: hidden;
      width: 0;
      height: 0;
    }

    .color-container .sample {
      width: 1rem;
      height: 1rem;
      border-radius: 0.125rem;
      background-color: #fff;
    }

    .color-container input[type="text"] {
      height: 100%;
      flex: 1;
      width: 3.25rem;
      text-transform: uppercase;
      font-size: 0.75rem;
      background-color: transparent;
      padding: 0%;
      outline: none;
      border: none;
      color: var(--bim-color-input--c, var(--bim-ui_bg-contrast-100));
    }

    bim-number-input {
      flex-grow: 0;
    }
  `;let tr=mC;Oo([Q({type:String,reflect:!0})],tr.prototype,"name");Oo([Q({type:String,reflect:!0})],tr.prototype,"label");Oo([Q({type:String,reflect:!0})],tr.prototype,"icon");Oo([Q({type:Boolean,reflect:!0})],tr.prototype,"vertical");Oo([Q({type:Number,reflect:!0})],tr.prototype,"opacity");Oo([Q({type:String,reflect:!0})],tr.prototype,"color");var xN=Object.defineProperty,RN=Object.getOwnPropertyDescriptor,an=(i,e,t,s)=>{for(var n=s>1?void 0:s?RN(e,t):e,r=i.length-1,o;r>=0;r--)(o=i[r])&&(n=(s?o(e,t,n):o(n))||n);return s&&n&&xN(e,t,n),n};const gC=class extends Le{constructor(){super(...arguments),this.checked=!1,this.checkbox=!1,this.noMark=!1,this.vertical=!1}get value(){return this._value!==void 0?this._value:this.label?Su(this.label):this.label}set value(i){this._value=i}render(){return j`
      <div class="parent" .title=${this.label??""}>
        ${this.img||this.icon||this.label?j` <div style="display: flex; column-gap: 0.375rem">
              ${this.checkbox&&!this.noMark?j`<bim-checkbox
                    style="pointer-events: none"
                    .checked=${this.checked}
                  ></bim-checkbox>`:null}
              <bim-label
                .vertical=${this.vertical}
                .icon=${this.icon}
                .img=${this.img}
                >${this.label}</bim-label
              >
            </div>`:null}
        ${!this.checkbox&&!this.noMark&&this.checked?j`<svg
              xmlns="http://www.w3.org/2000/svg"
              height="1.125rem"
              viewBox="0 0 24 24"
              width="1.125rem"
              fill="#FFFFFF"
            >
              <path d="M0 0h24v24H0z" fill="none" />
              <path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z" />
            </svg>`:null}
        <slot></slot>
      </div>
    `}};gC.styles=Be`
    :host {
      --bim-label--c: var(--bim-ui_bg-contrast-100);
      display: block;
      box-sizing: border-box;
      flex: 1;
      padding: 0rem 0.5rem;
      border-radius: var(--bim-ui_size-4xs);
      transition: all 0.15s;
    }

    :host(:hover) {
      cursor: pointer;
      background-color: color-mix(
        in lab,
        var(--bim-selector--bgc, var(--bim-ui_bg-contrast-20)),
        var(--bim-ui_main-base) 10%
      );
    }

    :host([checked]) {
      --bim-label--c: color-mix(in lab, var(--bim-ui_main-base), white 30%);
    }

    :host([checked]) svg {
      fill: color-mix(in lab, var(--bim-ui_main-base), white 30%);
    }

    .parent {
      box-sizing: border-box;
      display: flex;
      justify-content: var(--bim-option--jc, space-between);
      column-gap: 0.5rem;
      align-items: center;
      min-height: 1.75rem;
      height: 100%;
    }

    input {
      height: 1rem;
      width: 1rem;
      cursor: pointer;
      border: none;
      outline: none;
      accent-color: var(--bim-checkbox--c, var(--bim-ui_main-base));
    }

    input:focus {
      outline: var(--bim-checkbox--olw, 2px) solid
        var(--bim-checkbox--olc, var(--bim-ui_accent-base));
    }

    bim-label {
      pointer-events: none;
    }
  `;let dt=gC;an([Q({type:String,reflect:!0})],dt.prototype,"img",2);an([Q({type:String,reflect:!0})],dt.prototype,"label",2);an([Q({type:String,reflect:!0})],dt.prototype,"icon",2);an([Q({type:Boolean,reflect:!0})],dt.prototype,"checked",2);an([Q({type:Boolean,reflect:!0})],dt.prototype,"checkbox",2);an([Q({type:Boolean,attribute:"no-mark",reflect:!0})],dt.prototype,"noMark",2);an([Q({converter:{fromAttribute(i){return i&&Su(i)}}})],dt.prototype,"value",1);an([Q({type:Boolean,reflect:!0})],dt.prototype,"vertical",2);var _N=Object.defineProperty,AN=Object.getOwnPropertyDescriptor,ln=(i,e,t,s)=>{for(var n=s>1?void 0:s?AN(e,t):e,r=i.length-1,o;r>=0;r--)(o=i[r])&&(n=(s?o(e,t,n):o(n))||n);return s&&n&&_N(e,t,n),n};const EC=class extends ot{constructor(){super(),this.multiple=!1,this.required=!1,this.vertical=!1,this._visible=!1,this._value=new Set,this.onValueChange=new Event("change"),this._contextMenu=ho(),this.onOptionClick=i=>{const e=i.target,t=this._value.has(e);if(!this.multiple&&!this.required&&!t)this._value=new Set([e]);else if(!this.multiple&&!this.required&&t)this._value=new Set([]);else if(!this.multiple&&this.required&&!t)this._value=new Set([e]);else if(this.multiple&&!this.required&&!t)this._value=new Set([...this._value,e]);else if(this.multiple&&!this.required&&t){const s=[...this._value].filter(n=>n!==e);this._value=new Set(s)}else if(this.multiple&&this.required&&!t)this._value=new Set([...this._value,e]);else if(this.multiple&&this.required&&t){const s=[...this._value].filter(r=>r!==e),n=new Set(s);n.size!==0&&(this._value=n)}this.updateOptionsState(),this.dispatchEvent(this.onValueChange)},this.useObserver=!0}set visible(i){if(i){const{value:e}=this._contextMenu;if(!e)return;for(const t of this.elements)e.append(t);this._visible=!0}else{for(const e of this.elements)this.append(e);this._visible=!1,this.resetVisibleElements()}}get visible(){return this._visible}set value(i){if(this.required&&Object.keys(i).length===0)return;const e=new Set;for(const t of i){const s=this.findOption(t);if(s&&(e.add(s),!this.multiple&&Object.keys(i).length===1))break}this._value=e,this.updateOptionsState(),this.dispatchEvent(this.onValueChange)}get value(){return[...this._value].filter(i=>i instanceof dt&&i.checked).map(i=>i.value)}get _options(){const i=new Set([...this.elements]);for(const e of this.children)e instanceof dt&&i.add(e);return[...i]}onSlotChange(i){const e=i.target.assignedElements();this.observe(e);const t=new Set;for(const s of this.elements){if(!(s instanceof dt)){s.remove();continue}s.checked&&t.add(s),s.removeEventListener("click",this.onOptionClick),s.addEventListener("click",this.onOptionClick)}this._value=t}updateOptionsState(){for(const i of this._options)i instanceof dt&&(i.checked=this._value.has(i))}findOption(i){return this._options.find(e=>e instanceof dt?e.label===i||e.value===i:!1)}render(){let i,e,t;if(this._value.size===0)i="Select an option...";else if(this._value.size===1){const s=[...this._value][0];i=(s==null?void 0:s.label)||(s==null?void 0:s.value),e=s==null?void 0:s.img,t=s==null?void 0:s.icon}else i=`Multiple (${this._value.size})`;return j`
      <bim-input
        title=${this.label??""}
        .label=${this.label}
        .icon=${this.icon}
        .vertical=${this.vertical}
      >
        <div class="input" @click=${()=>this.visible=!this.visible}>
          <bim-label
            .img=${e}
            .icon=${t}
            style="overflow: hidden;"
            >${i}</bim-label
          >
          <svg
            style="flex-shrink: 0; fill: var(--bim-dropdown--c, var(--bim-ui_bg-contrast-100))"
            xmlns="http://www.w3.org/2000/svg"
            height="1.125rem"
            viewBox="0 0 24 24"
            width="1.125rem"
            fill="#9ca3af"
          >
            <path d="M0 0h24v24H0V0z" fill="none" />
            <path d="M7.41 8.59 12 13.17l4.59-4.58L18 10l-6 6-6-6 1.41-1.41z" />
          </svg>
          <bim-context-menu
            ${_t(this._contextMenu)}
            .visible=${this.visible}
            @hidden=${()=>{this.visible&&(this.visible=!1)}}
          >
            <slot @slotchange=${this.onSlotChange}></slot>
          </bim-context-menu>
        </div>
      </bim-input>
    `}};EC.styles=[on.scrollbar,Be`
      :host {
        --bim-input--bgc: var(
          --bim-dropdown--bgc,
          var(--bim-ui_bg-contrast-20)
        );
        --bim-input--olw: 2px;
        --bim-input--olc: transparent;
        --bim-input--bdrs: var(--bim-ui_size-4xs);
        flex: 1;
        display: block;
      }

      :host([visible]) {
        --bim-input--olc: var(--bim-ui_accent-base);
      }

      .input {
        --bim-label--fz: var(--bim-drodown--fz, var(--bim-ui_size-xs));
        --bim-label--c: var(--bim-dropdown--c, var(--bim-ui_bg-contrast-100));
        height: 100%;
        display: flex;
        flex: 1;
        overflow: hidden;
        column-gap: 0.25rem;
        outline: none;
        cursor: pointer;
        align-items: center;
        justify-content: space-between;
        padding: 0 0.5rem;
      }

      bim-label {
        pointer-events: none;
      }
    `];let Cs=EC;ln([Q({type:String,reflect:!0})],Cs.prototype,"name",2);ln([Q({type:String,reflect:!0})],Cs.prototype,"icon",2);ln([Q({type:String,reflect:!0})],Cs.prototype,"label",2);ln([Q({type:Boolean,reflect:!0})],Cs.prototype,"multiple",2);ln([Q({type:Boolean,reflect:!0})],Cs.prototype,"required",2);ln([Q({type:Boolean,reflect:!0})],Cs.prototype,"vertical",2);ln([Q({type:Boolean,reflect:!0})],Cs.prototype,"visible",1);ln([Mo()],Cs.prototype,"_value",2);var MN=Object.defineProperty,IC=(i,e,t,s)=>{for(var n=void 0,r=i.length-1,o;r>=0;r--)(o=i[r])&&(n=o(e,t,n)||n);return n&&MN(e,t,n),n};const bC=class extends Le{constructor(){super(...arguments),this.floating=!1,this._layouts={},this._updateFunctions={}}set layouts(i){this._layouts=i;const e={};for(const[t,s]of Object.entries(i))for(const n in s.elements)e[t]||(e[t]={}),e[t][n]=r=>{const o=this._updateFunctions[t];if(!o)return;const a=o[n];a&&a(r)};this.updateComponent=e}get layouts(){return this._layouts}getLayoutAreas(i){const{template:e}=i,t=e.split(`
`).map(s=>s.trim()).map(s=>s.split('"')[1]).filter(s=>s!==void 0).flatMap(s=>s.split(/\s+/));return[...new Set(t)].filter(s=>s!=="")}firstUpdated(){this._onLayoutChange=new Event("layoutchange")}render(){if(this.layout){if(this._updateFunctions={},this.layouts[this.layout]){this.innerHTML="",this._updateFunctions[this.layout]={};const i=this._updateFunctions[this.layout],e=this.layouts[this.layout],t=this.getLayoutAreas(e).map(s=>{const n=e.elements[s];if(!n)return null;if(n instanceof HTMLElement)return n.style.gridArea=s,n;if("template"in n){const{template:r,initialState:o}=n,[a,l]=ot.create(r,o);return a.style.gridArea=s,i[s]=l,a}return ot.create(n)}).filter(s=>!!s);this.style.gridTemplate=e.template,this.append(...t),this._onLayoutChange&&this.dispatchEvent(this._onLayoutChange)}}else this._updateFunctions={},this.innerHTML="",this.style.gridTemplate="",this._onLayoutChange&&this.dispatchEvent(this._onLayoutChange);return j`<slot></slot>`}};bC.styles=Be`
    :host {
      display: grid;
      height: 100%;
      width: 100%;
      overflow: hidden;
      box-sizing: border-box;
    }

    /* :host(:not([layout])) {
      display: none;
    } */

    :host([floating]) {
      --bim-panel--bdrs: var(--bim-ui_size-4xs);
      background-color: transparent;
      padding: 1rem;
      gap: 1rem;
      position: absolute;
      pointer-events: none;
      top: 0px;
      left: 0px;
    }

    :host(:not([floating])) {
      --bim-panel--bdrs: 0;
      background-color: var(--bim-ui_bg-contrast-20);
      gap: 1px;
    }
  `;let Yp=bC;IC([Q({type:Boolean,reflect:!0})],Yp.prototype,"floating");IC([Q({type:String,reflect:!0})],Yp.prototype,"layout");const Ff=class extends Le{render(){return j`
      <iconify-icon .icon=${this.icon} height="none"></iconify-icon>
    `}};Ff.styles=Be`
    :host {
      height: var(--bim-icon--fz, var(--bim-ui_size-sm));
      width: var(--bim-icon--fz, var(--bim-ui_size-sm));
    }

    iconify-icon {
      height: var(--bim-icon--fz, var(--bim-ui_size-sm));
      width: var(--bim-icon--fz, var(--bim-ui_size-sm));
      color: var(--bim-icon--c);
      transition: all 0.15s;
    }
  `,Ff.properties={icon:{type:String}};let FN=Ff;var ON=Object.defineProperty,xu=(i,e,t,s)=>{for(var n=void 0,r=i.length-1,o;r>=0;r--)(o=i[r])&&(n=o(e,t,n)||n);return n&&ON(e,t,n),n};const vC=class extends Le{constructor(){super(...arguments),this.vertical=!1,this.onValueChange=new Event("change")}get value(){const i={};for(const e of this.children){const t=e;"value"in t?i[t.name||t.label]=t.value:"checked"in t&&(i[t.name||t.label]=t.checked)}return i}set value(i){const e=[...this.children];for(const t in i){const s=e.find(o=>{const a=o;return a.name===t||a.label===t});if(!s)continue;const n=s,r=i[t];typeof r=="boolean"?n.checked=r:n.value=r}}render(){return j`
      <div class="parent">
        ${this.label||this.icon?j`<bim-label .icon=${this.icon}>${this.label}</bim-label>`:null}
        <div class="input">
          <slot></slot>
        </div>
      </div>
    `}};vC.styles=Be`
    :host {
      flex: 1;
      display: block;
    }

    .parent {
      display: flex;
      flex-wrap: wrap;
      column-gap: 1rem;
      row-gap: 0.375rem;
      user-select: none;
      flex: 1;
    }

    :host(:not([vertical])) .parent {
      justify-content: space-between;
    }

    :host([vertical]) .parent {
      flex-direction: column;
    }

    .input {
      overflow: hidden;
      box-sizing: border-box;
      display: flex;
      align-items: center;
      flex-wrap: wrap;
      min-height: 1.75rem;
      min-width: 3rem;
      gap: var(--bim-input--g, var(--bim-ui_size-4xs));
      padding: var(--bim-input--p, 0);
      background-color: var(--bim-input--bgc, transparent);
      outline: var(--bim-input--olw, 2px) solid
        var(--bim-input--olc, transparent);
      border-radius: var(--bim-input--bdrs, var(--bim-ui_size-4xs));
      transition: all 0.15s;
    }

    :host(:not([vertical])) .input {
      flex: 1;
      justify-content: flex-end;
    }

    :host(:not([vertical])[label]) .input {
      max-width: fit-content;
    }
  `;let Dl=vC;xu([Q({type:String,reflect:!0})],Dl.prototype,"name");xu([Q({type:String,reflect:!0})],Dl.prototype,"label");xu([Q({type:String,reflect:!0})],Dl.prototype,"icon");xu([Q({type:Boolean,reflect:!0})],Dl.prototype,"vertical");var NN=Object.defineProperty,Ul=(i,e,t,s)=>{for(var n=void 0,r=i.length-1,o;r>=0;r--)(o=i[r])&&(n=o(e,t,n)||n);return n&&NN(e,t,n),n};const yC=class extends Le{constructor(){super(...arguments),this.labelHidden=!1,this.iconHidden=!1,this.vertical=!1}get value(){return this.textContent?Su(this.textContent):this.textContent}render(){return j`
      <div class="parent" .title=${this.textContent??""}>
        ${this.img?j`<img .src=${this.img} .alt=${this.textContent||""} />`:null}
        ${!this.iconHidden&&this.icon?j`<bim-icon .icon=${this.icon}></bim-icon>`:null}
        <p><slot></slot></p>
      </div>
    `}};yC.styles=Be`
    :host {
      --bim-icon--c: var(--bim-label--c);
      color: var(--bim-label--c, var(--bim-ui_bg-contrast-60));
      font-size: var(--bim-label--fz, var(--bim-ui_size-xs));
      overflow: hidden;
      display: block;
      white-space: nowrap;
      line-height: 1.1rem;
      transition: all 0.15s;
    }

    .parent {
      display: flex;
      align-items: center;
      column-gap: 0.25rem;
      row-gap: 0.125rem;
      user-select: none;
      height: 100%;
    }

    :host([vertical]) .parent {
      flex-direction: column;
    }

    .parent p {
      margin: 0;
      text-overflow: ellipsis;
      overflow: hidden;
      display: flex;
      align-items: center;
      gap: 0.125rem;
    }

    :host([label-hidden]) .parent p,
    :host(:empty) .parent p {
      display: none;
    }

    img {
      height: 100%;
      aspect-ratio: 1;
      border-radius: 100%;
      margin-right: 0.125rem;
    }

    :host(:not([vertical])) img {
      max-height: var(
        --bim-label_icon--sz,
        calc(var(--bim-label--fz, var(--bim-ui_size-xs)) * 1.8)
      );
    }

    :host([vertical]) img {
      max-height: var(
        --bim-label_icon--sz,
        calc(var(--bim-label--fz, var(--bim-ui_size-xs)) * 4)
      );
    }
  `;let No=yC;Ul([Q({type:String,reflect:!0})],No.prototype,"img");Ul([Q({type:Boolean,attribute:"label-hidden",reflect:!0})],No.prototype,"labelHidden");Ul([Q({type:String,reflect:!0})],No.prototype,"icon");Ul([Q({type:Boolean,attribute:"icon-hidden",reflect:!0})],No.prototype,"iconHidden");Ul([Q({type:Boolean,reflect:!0})],No.prototype,"vertical");var PN=Object.defineProperty,LN=Object.getOwnPropertyDescriptor,mi=(i,e,t,s)=>{for(var n=s>1?void 0:s?LN(e,t):e,r=i.length-1,o;r>=0;r--)(o=i[r])&&(n=(s?o(e,t,n):o(n))||n);return s&&n&&PN(e,t,n),n};const CC=class extends Le{constructor(){super(...arguments),this._value=0,this.vertical=!1,this.slider=!1,this._input=ho(),this.onValueChange=new Event("change")}set value(i){this.setValue(i.toString())}get value(){return this._value}onChange(i){i.stopPropagation();const{value:e}=this._input;e&&this.setValue(e.value)}setValue(i){const{value:e}=this._input;let t=i;if(t=t.replace(/[^0-9.-]/g,""),t=t.replace(/(\..*)\./g,"$1"),t.endsWith(".")||(t.lastIndexOf("-")>0&&(t=t[0]+t.substring(1).replace(/-/g,"")),t==="-"||t==="-0"))return;let s=Number(t);Number.isNaN(s)||(s=this.min!==void 0?Math.max(s,this.min):s,s=this.max!==void 0?Math.min(s,this.max):s,this.value!==s&&(this._value=s,e&&(e.value=this.value.toString()),this.requestUpdate(),this.dispatchEvent(this.onValueChange)))}onBlur(){const{value:i}=this._input;i&&Number.isNaN(Number(i.value))&&(i.value=this.value.toString())}onSliderMouseDown(i){document.body.style.cursor="w-resize";const{clientX:e}=i,t=this.value;let s=!1;const n=a=>{var l;s=!0;const{clientX:h}=a,u=this.step??1,c=((l=u.toString().split(".")[1])==null?void 0:l.length)||0,d=1/(this.sensitivity??1),f=(h-e)/d;if(Math.floor(Math.abs(f))!==Math.abs(f))return;const p=t+f*u;this.setValue(p.toFixed(c))},r=()=>{this.slider=!0,this.removeEventListener("blur",r)},o=()=>{document.removeEventListener("mousemove",n),document.body.style.cursor="default",s?s=!1:(this.addEventListener("blur",r),this.slider=!1,requestAnimationFrame(()=>this.focus())),document.removeEventListener("mouseup",o)};document.addEventListener("mousemove",n),document.addEventListener("mouseup",o)}onFocus(i){i.stopPropagation();const e=t=>{t.key==="Escape"&&(this.blur(),window.removeEventListener("keydown",e))};window.addEventListener("keydown",e)}connectedCallback(){super.connectedCallback(),this.min&&this.min>this.value&&(this._value=this.min),this.max&&this.max<this.value&&(this._value=this.max)}focus(){const{value:i}=this._input;i&&i.focus()}render(){const i=j`
      ${this.pref||this.icon?j`<bim-label
            style="pointer-events: auto"
            @mousedown=${this.onSliderMouseDown}
            .icon=${this.icon}
            >${this.pref}</bim-label
          >`:null}
      <input
        ${_t(this._input)}
        type="text"
        aria-label=${this.label||this.name||"Number Input"}
        size="1"
        @input=${o=>o.stopPropagation()}
        @change=${this.onChange}
        @blur=${this.onBlur}
        @focus=${this.onFocus}
        .value=${this.value.toString()}
      />
      ${this.suffix?j`<bim-label
            style="pointer-events: auto"
            @mousedown=${this.onSliderMouseDown}
            >${this.suffix}</bim-label
          >`:null}
    `,e=this.min??-1/0,t=this.max??1/0,s=100*(this.value-e)/(t-e),n=j`
      <style>
        .slider-indicator {
          width: ${`${s}%`};
        }
      </style>
      <div class="slider" @mousedown=${this.onSliderMouseDown}>
        <div class="slider-indicator"></div>
        ${this.pref||this.icon?j`<bim-label
              style="z-index: 1; margin-right: 0.125rem"
              .icon=${this.icon}
              >${`${this.pref}: `}</bim-label
            >`:null}
        <bim-label style="z-index: 1;">${this.value}</bim-label>
        ${this.suffix?j`<bim-label style="z-index: 1;">${this.suffix}</bim-label>`:null}
      </div>
    `,r=`${this.label||this.name||this.pref?`${this.label||this.name||this.pref}: `:""}${this.value}${this.suffix??""}`;return j`
      <bim-input
        title=${r}
        .label=${this.label}
        .icon=${this.icon}
        .vertical=${this.vertical}
      >
        ${this.slider?n:i}
      </bim-input>
    `}};CC.styles=Be`
    :host {
      --bim-input--bgc: var(
        --bim-number-input--bgc,
        var(--bim-ui_bg-contrast-20)
      );
      --bim-input--olw: var(--bim-number-input--olw, 2px);
      --bim-input--olc: var(--bim-number-input--olc, transparent);
      --bim-input--bdrs: var(--bim-number-input--bdrs, var(--bim-ui_size-4xs));
      --bim-input--p: 0 0.375rem;
      flex: 1;
      display: block;
    }

    :host(:focus) {
      --bim-input--olw: var(--bim-number-input--olw, 2px);
      --bim-input--olc: var(
        --bim-number-input¡focus--c,
        var(--bim-ui_accent-base)
      );
    }

    :host(:not([slider])) bim-label {
      --bim-label--c: var(
        --bim-number-input_affixes--c,
        var(--bim-ui_bg-contrast-60)
      );
      --bim-label--fz: var(
        --bim-number-input_affixes--fz,
        var(--bim-ui_size-xs)
      );
    }

    p {
      margin: 0;
      padding: 0;
    }

    input {
      background-color: transparent;
      outline: none;
      border: none;
      padding: 0;
      flex-grow: 1;
      text-align: right;
      font-family: inherit;
      font-feature-settings: inherit;
      font-variation-settings: inherit;
      font-size: var(--bim-number-input--fz, var(--bim-ui_size-xs));
      color: var(--bim-number-input--c, var(--bim-ui_bg-contrast-100));
    }

    :host([suffix]:not([pref])) input {
      text-align: left;
    }

    :host([slider]) {
      --bim-input--p: 0;
    }

    :host([slider]) .slider {
      --bim-label--c: var(--bim-ui_bg-contrast-100);
    }

    .slider {
      position: relative;
      display: flex;
      justify-content: center;
      width: 100%;
      height: 100%;
      padding: 0 0.5rem;
    }

    .slider-indicator {
      height: 100%;
      background-color: var(--bim-ui_main-base);
      position: absolute;
      top: 0;
      left: 0;
      border-radius: var(--bim-input--bdrs, var(--bim-ui_size-4xs));
    }

    bim-input {
      display: flex;
    }

    bim-label {
      pointer-events: none;
    }
  `;let Xt=CC;mi([Q({type:String,reflect:!0})],Xt.prototype,"name",2);mi([Q({type:String,reflect:!0})],Xt.prototype,"icon",2);mi([Q({type:String,reflect:!0})],Xt.prototype,"label",2);mi([Q({type:String,reflect:!0})],Xt.prototype,"pref",2);mi([Q({type:Number,reflect:!0})],Xt.prototype,"min",2);mi([Q({type:Number,reflect:!0})],Xt.prototype,"value",1);mi([Q({type:Number,reflect:!0})],Xt.prototype,"step",2);mi([Q({type:Number,reflect:!0})],Xt.prototype,"sensitivity",2);mi([Q({type:Number,reflect:!0})],Xt.prototype,"max",2);mi([Q({type:String,reflect:!0})],Xt.prototype,"suffix",2);mi([Q({type:Boolean,reflect:!0})],Xt.prototype,"vertical",2);mi([Q({type:Boolean,reflect:!0})],Xt.prototype,"slider",2);var DN=Object.defineProperty,UN=Object.getOwnPropertyDescriptor,kl=(i,e,t,s)=>{for(var n=s>1?void 0:s?UN(e,t):e,r=i.length-1,o;r>=0;r--)(o=i[r])&&(n=(s?o(e,t,n):o(n))||n);return s&&n&&DN(e,t,n),n};const TC=class extends Le{constructor(){super(...arguments),this.onValueChange=new Event("change"),this._hidden=!1,this.headerHidden=!1,this.valueTransform={},this.activationButton=document.createElement("bim-button")}set hidden(i){this._hidden=i,this.activationButton.active=!i,this.dispatchEvent(new Event("hiddenchange"))}get hidden(){return this._hidden}get value(){return ol(this,this.valueTransform)}set value(i){const e=[...this.children];for(const t in i){const s=e.find(r=>{const o=r;return o.name===t||o.label===t});if(!s)continue;const n=s;n.value=i[t]}}connectedCallback(){super.connectedCallback(),this.activationButton.active=!this.hidden,this.activationButton.onclick=()=>this.hidden=!this.hidden}disconnectedCallback(){super.disconnectedCallback(),this.activationButton.remove()}collapseSections(){const i=this.querySelectorAll("bim-panel-section");for(const e of i)e.collapsed=!0}expandSections(){const i=this.querySelectorAll("bim-panel-section");for(const e of i)e.collapsed=!1}render(){return this.activationButton.icon=this.icon,this.activationButton.label=this.label||this.name,this.activationButton.tooltipTitle=this.label||this.name,j`
      <div class="parent">
        ${this.label||this.name||this.icon?j`<bim-label .icon=${this.icon}>${this.label}</bim-label>`:null}
        <div class="sections">
          <slot></slot>
        </div>
      </div>
    `}};TC.styles=[on.scrollbar,Be`
      :host {
        display: flex;
        border-radius: var(--bim-ui_size-base);
        background-color: var(--bim-ui_bg-base);
        overflow: auto;
      }

      :host([hidden]) {
        display: none;
      }

      .parent {
        display: flex;
        flex: 1;
        flex-direction: column;
        pointer-events: auto;
        overflow: auto;
      }

      .parent bim-label {
        --bim-label--c: var(--bim-panel--c, var(--bim-ui_bg-contrast-80));
        --bim-label--fz: var(--bim-panel--fz, var(--bim-ui_size-sm));
        font-weight: 600;
        padding: 1rem;
        flex-shrink: 0;
        border-bottom: 1px solid var(--bim-ui_bg-contrast-20);
      }

      :host([header-hidden]) .parent bim-label {
        display: none;
      }

      .sections {
        display: flex;
        flex-direction: column;
        overflow: auto;
      }

      ::slotted(bim-panel-section:not(:last-child)) {
        border-bottom: 1px solid var(--bim-ui_bg-contrast-20);
      }
    `];let ir=TC;kl([Q({type:String,reflect:!0})],ir.prototype,"icon",2);kl([Q({type:String,reflect:!0})],ir.prototype,"name",2);kl([Q({type:String,reflect:!0})],ir.prototype,"label",2);kl([Q({type:Boolean,reflect:!0})],ir.prototype,"hidden",1);kl([Q({type:Boolean,attribute:"header-hidden",reflect:!0})],ir.prototype,"headerHidden",2);var kN=Object.defineProperty,Bl=(i,e,t,s)=>{for(var n=void 0,r=i.length-1,o;r>=0;r--)(o=i[r])&&(n=o(e,t,n)||n);return n&&kN(e,t,n),n};const wC=class extends Le{constructor(){super(...arguments),this.onValueChange=new Event("change"),this.valueTransform={}}get value(){const i=this.parentElement;let e;return i instanceof ir&&(e=i.valueTransform),Object.values(this.valueTransform).length!==0&&(e=this.valueTransform),ol(this,e)}set value(i){const e=[...this.children];for(const t in i){const s=e.find(r=>{const o=r;return o.name===t||o.label===t});if(!s)continue;const n=s;n.value=i[t]}}onHeaderClick(){this.fixed||(this.collapsed=!this.collapsed)}render(){const i=this.label||this.icon||this.name||this.fixed,e=j`<svg
      xmlns="http://www.w3.org/2000/svg"
      height="1.125rem"
      viewBox="0 0 24 24"
      width="1.125rem"
    >
      <path d="M0 0h24v24H0V0z" fill="none" />
      <path d="M7.41 8.59 12 13.17l4.59-4.58L18 10l-6 6-6-6 1.41-1.41z" />
    </svg>`,t=j`<svg
      xmlns="http://www.w3.org/2000/svg"
      height="1.125rem"
      viewBox="0 0 24 24"
      width="1.125rem"
    >
      <path d="M0 0h24v24H0z" fill="none" />
      <path d="M12 8l-6 6 1.41 1.41L12 10.83l4.59 4.58L18 14z" />
    </svg>`,s=this.collapsed?e:t,n=j`
      <div
        class="header"
        title=${this.label??""}
        @click=${this.onHeaderClick}
      >
        ${this.label||this.icon||this.name?j`<bim-label .icon=${this.icon}>${this.label}</bim-label>`:null}
        ${this.fixed?null:s}
      </div>
    `;return j`
      <div class="parent">
        ${i?n:null}
        <div class="components">
          <slot></slot>
        </div>
      </div>
    `}};wC.styles=[on.scrollbar,Be`
      :host {
        display: block;
        pointer-events: auto;
      }

      :host(:not([fixed])) .header:hover {
        --bim-label--c: var(--bim-ui_accent-base);
        color: var(--bim-ui_accent-base);
        cursor: pointer;
      }

      :host(:not([fixed])) .header:hover svg {
        fill: var(--bim-ui_accent-base);
      }

      .header {
        --bim-label--fz: var(--bim-ui_size-sm);
        --bim-label--c: var(--bim-ui_bg-contrast-80);
        display: flex;
        justify-content: space-between;
        align-items: center;
        font-weight: 600;
        height: 1.5rem;
        padding: 0.75rem 1rem;
      }

      .header svg {
        fill: var(--bim-ui_bg-contrast-80);
      }

      .title {
        display: flex;
        align-items: center;
        column-gap: 0.5rem;
      }

      .title p {
        font-size: var(--bim-ui_size-sm);
      }

      .components {
        display: flex;
        flex-direction: column;
        row-gap: 0.75rem;
        padding: 0.125rem 1rem 1rem;
      }

      :host(:not([fixed])[collapsed]) .components {
        display: none;
        height: 0px;
      }

      bim-label {
        pointer-events: none;
      }
    `];let Po=wC;Bl([Q({type:String,reflect:!0})],Po.prototype,"icon");Bl([Q({type:String,reflect:!0})],Po.prototype,"label");Bl([Q({type:String,reflect:!0})],Po.prototype,"name");Bl([Q({type:Boolean,reflect:!0})],Po.prototype,"fixed");Bl([Q({type:Boolean,reflect:!0})],Po.prototype,"collapsed");var BN=Object.defineProperty,zl=(i,e,t,s)=>{for(var n=void 0,r=i.length-1,o;r>=0;r--)(o=i[r])&&(n=o(e,t,n)||n);return n&&BN(e,t,n),n};const SC=class extends Le{constructor(){super(...arguments),this.vertical=!1,this.onValueChange=new Event("change"),this._canEmitEvents=!1,this._value=document.createElement("bim-option"),this.onOptionClick=i=>{this._value=i.target,this.dispatchEvent(this.onValueChange);for(const e of this.children)e instanceof dt&&(e.checked=e===i.target)}}get _options(){return[...this.querySelectorAll("bim-option")]}set value(i){const e=this.findOption(i);if(e){for(const t of this._options)t.checked=t===e;this._value=e,this._canEmitEvents&&this.dispatchEvent(this.onValueChange)}}get value(){return this._value.value}onSlotChange(i){const e=i.target.assignedElements();for(const t of e)t instanceof dt&&(t.noMark=!0,t.removeEventListener("click",this.onOptionClick),t.addEventListener("click",this.onOptionClick))}findOption(i){return this._options.find(e=>e instanceof dt?e.label===i||e.value===i:!1)}firstUpdated(){const i=[...this.children].find(e=>e instanceof dt&&e.checked);i&&(this._value=i)}render(){return j`
      <bim-input
        .vertical=${this.vertical}
        .label=${this.label}
        .icon=${this.icon}
      >
        <slot @slotchange=${this.onSlotChange}></slot>
      </bim-input>
    `}};SC.styles=Be`
    :host {
      --bim-input--bgc: var(--bim-ui_bg-contrast-20);
      --bim-input--g: 0;
      --bim-option--jc: center;
      flex: 1;
      display: block;
    }

    ::slotted(bim-option) {
      border-radius: 0;
    }

    ::slotted(bim-option[checked]) {
      --bim-label--c: var(--bim-ui_main-contrast);
      background-color: var(--bim-ui_main-base);
    }
  `;let Lo=SC;zl([Q({type:String,reflect:!0})],Lo.prototype,"name");zl([Q({type:String,reflect:!0})],Lo.prototype,"icon");zl([Q({type:String,reflect:!0})],Lo.prototype,"label");zl([Q({type:Boolean,reflect:!0})],Lo.prototype,"vertical");zl([Mo()],Lo.prototype,"_value");const zN=()=>j`
    <style>
      div {
        display: flex;
        gap: 0.375rem;
        border-radius: 0.25rem;
        min-height: 1.25rem;
      }

      [data-type="row"] {
        background-color: var(--bim-ui_bg-contrast-10);
        animation: row-loading 1s linear infinite alternate;
        padding: 0.5rem;
      }

      [data-type="cell"] {
        background-color: var(--bim-ui_bg-contrast-20);
        flex: 0.25;
      }

      @keyframes row-loading {
        0% {
          background-color: var(--bim-ui_bg-contrast-10);
        }
        100% {
          background-color: var(--bim-ui_bg-contrast-20);
        }
      }
    </style>
    <div style="display: flex; flex-direction: column;">
      <div data-type="row" style="gap: 2rem">
        <div data-type="cell" style="flex: 1"></div>
        <div data-type="cell" style="flex: 2"></div>
        <div data-type="cell" style="flex: 1"></div>
        <div data-type="cell" style="flex: 0.5"></div>
      </div>
      <div style="display: flex;">
        <div data-type="row" style="flex: 1">
          <div data-type="cell" style="flex: 0.5"></div>
        </div>
        <div data-type="row" style="flex: 2">
          <div data-type="cell" style="flex: 0.75"></div>
        </div>
        <div data-type="row" style="flex: 1">
          <div data-type="cell"></div>
        </div>
        <div data-type="row" style="flex: 0.5">
          <div data-type="cell" style="flex: 0.75"></div>
        </div>
      </div>
      <div style="display: flex;">
        <div data-type="row" style="flex: 1">
          <div data-type="cell" style="flex: 0.75"></div>
        </div>
        <div data-type="row" style="flex: 2">
          <div data-type="cell"></div>
        </div>
        <div data-type="row" style="flex: 1">
          <div data-type="cell" style="flex: 0.5"></div>
        </div>
        <div data-type="row" style="flex: 0.5">
          <div data-type="cell" style="flex: 0.5"></div>
        </div>
      </div>
      <div style="display: flex;">
        <div data-type="row" style="flex: 1">
          <div data-type="cell"></div>
        </div>
        <div data-type="row" style="flex: 2">
          <div data-type="cell" style="flex: 0.5"></div>
        </div>
        <div data-type="row" style="flex: 1">
          <div data-type="cell" style="flex: 0.75"></div>
        </div>
        <div data-type="row" style="flex: 0.5">
          <div data-type="cell" style="flex: 0.7s5"></div>
        </div>
      </div>
    </div>
  `,VN=()=>j`
    <style>
      .loader {
        grid-area: Processing;
        position: relative;
        padding: 0.125rem;
      }
      .loader:before {
        content: "";
        position: absolute;
      }
      .loader .loaderBar {
        position: absolute;
        top: 0;
        right: 100%;
        bottom: 0;
        left: 0;
        background: var(--bim-ui_main-base);
        /* width: 25%; */
        width: 0;
        animation: borealisBar 2s linear infinite;
      }

      @keyframes borealisBar {
        0% {
          left: 0%;
          right: 100%;
          width: 0%;
        }
        10% {
          left: 0%;
          right: 75%;
          width: 25%;
        }
        90% {
          right: 0%;
          left: 75%;
          width: 25%;
        }
        100% {
          left: 100%;
          right: 0%;
          width: 0%;
        }
      }
    </style>
    <div class="loader">
      <div class="loaderBar"></div>
    </div>
  `;var $N=Object.defineProperty,HN=(i,e,t,s)=>{for(var n=void 0,r=i.length-1,o;r>=0;r--)(o=i[r])&&(n=o(e,t,n)||n);return n&&$N(e,t,n),n};const xC=class extends Le{constructor(){super(...arguments),this.column="",this.columnIndex=0,this.rowData={}}get data(){return this.column?this.rowData[this.column]:null}render(){return j`
      <style>
        :host {
          grid-area: ${this.column??"unset"};
        }
      </style>
      <slot></slot>
    `}};xC.styles=Be`
    :host {
      padding: 0.375rem;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    :host([data-column-index="0"]) {
      justify-content: normal;
    }

    :host([data-column-index="0"]:not([data-cell-header]))
      ::slotted(bim-label) {
      text-align: left;
    }

    ::slotted(*) {
      --bim-input--bgc: transparent;
      --bim-input--olc: var(--bim-ui_bg-contrast-20);
      --bim-input--olw: 1px;
    }

    ::slotted(bim-input) {
      --bim-input--olw: 0;
    }

    ::slotted(bim-label) {
      white-space: normal;
      text-align: center;
    }
  `;let RC=xC;HN([Q({type:String,reflect:!0})],RC.prototype,"column");var GN=Object.defineProperty,YN=(i,e,t,s)=>{for(var n=void 0,r=i.length-1,o;r>=0;r--)(o=i[r])&&(n=o(e,t,n)||n);return n&&GN(e,t,n),n};const _C=class extends Le{constructor(){super(...arguments),this._groups=[],this.data=[],this.table=this.closest("bim-table")}toggleGroups(i,e=!1){for(const t of this._groups)t.childrenHidden=typeof i>"u"?!t.childrenHidden:!i,e&&t.toggleChildren(i,e)}render(){return this._groups=[],j`
      <slot></slot>
      ${this.data.map(i=>{const e=document.createElement("bim-table-group");return this._groups.push(e),e.table=this.table,e.data=i,e})}
    `}};_C.styles=Be`
    :host {
      --bim-button--bgc: transparent;
      position: relative;
      grid-area: Children;
    }

    :host([hidden]) {
      display: none;
    }

    ::slotted(.branch.branch-vertical) {
      top: 0;
      bottom: 1.125rem;
    }
  `;let AC=_C;YN([Q({type:Array,attribute:!1})],AC.prototype,"data");var jN=Object.defineProperty,WN=(i,e,t,s)=>{for(var n=void 0,r=i.length-1,o;r>=0;r--)(o=i[r])&&(n=o(e,t,n)||n);return n&&jN(e,t,n),n};const MC=class extends Le{constructor(){super(...arguments),this.data={data:{}},this.childrenHidden=!0,this.table=this.closest("bim-table")}connectedCallback(){super.connectedCallback(),this.table&&this.table.expanded?this.childrenHidden=!1:this.childrenHidden=!0}toggleChildren(i,e=!1){this._children&&(this.childrenHidden=typeof i>"u"?!this.childrenHidden:!i,e&&this._children.toggleGroups(i,e))}render(){if(!this.table)throw new Error("TableGroup: parent table wasn't found!");const i=this.table.getGroupIndentation(this.data)??0,e=j`
      ${this.table.noIndentation?null:j`
            <style>
              .branch-vertical {
                left: ${i+(this.table.selectableRows?1.9375:.5625)}rem;
              }
            </style>
            <div class="branch branch-vertical"></div>
          `}
    `,t=document.createDocumentFragment();lo(e,t);let s=null;this.table.noIndentation||(s=document.createElement("div"),s.classList.add("branch","branch-horizontal"),s.style.left=`${i-1+(this.table.selectableRows?2.05:.5625)}rem`);let n=null;if(!this.table.noIndentation){const a=document.createElementNS("http://www.w3.org/2000/svg","svg");a.setAttribute("height","9.5"),a.setAttribute("width","7.5"),a.setAttribute("viewBox","0 0 4.6666672 7.3333333");const l=document.createElementNS("http://www.w3.org/2000/svg","path");l.setAttribute("d","m 1.7470835,6.9583848 2.5899999,-2.59 c 0.39,-0.39 0.39,-1.02 0,-1.41 L 1.7470835,0.36838483 c -0.63,-0.62000003 -1.71000005,-0.18 -1.71000005,0.70999997 v 5.17 c 0,0.9 1.08000005,1.34 1.71000005,0.71 z"),a.append(l);const h=document.createElementNS("http://www.w3.org/2000/svg","svg");h.setAttribute("height","6.5"),h.setAttribute("width","9.5"),h.setAttribute("viewBox","0 0 5.9111118 5.0175439");const u=document.createElementNS("http://www.w3.org/2000/svg","path");u.setAttribute("d","M -0.33616196,1.922522 2.253838,4.5125219 c 0.39,0.39 1.02,0.39 1.41,0 L 6.2538379,1.922522 c 0.6200001,-0.63 0.18,-1.71000007 -0.7099999,-1.71000007 H 0.37383804 c -0.89999997,0 -1.33999997,1.08000007 -0.71,1.71000007 z"),h.append(u),n=document.createElement("div"),n.addEventListener("click",c=>{c.stopPropagation(),this.toggleChildren()}),n.classList.add("caret"),n.style.left=`${(this.table.selectableRows?1.5:.125)+i}rem`,this.childrenHidden?n.append(a):n.append(h)}const r=document.createElement("bim-table-row");this.data.children&&!this.childrenHidden&&r.append(t),r.table=this.table,r.data=this.data.data,this.table.dispatchEvent(new CustomEvent("rowcreated",{detail:{row:r}})),n&&this.data.children&&r.append(n),i!==0&&(!this.data.children||this.childrenHidden)&&s&&r.append(s);let o;if(this.data.children){o=document.createElement("bim-table-children"),this._children=o,o.table=this.table,o.data=this.data.children;const a=document.createDocumentFragment();lo(e,a),o.append(a)}return j`
      <div class="parent">${r} ${this.childrenHidden?null:o}</div>
    `}};MC.styles=Be`
    :host {
      position: relative;
    }

    .parent {
      display: grid;
      grid-template-areas: "Data" "Children";
    }

    .branch {
      position: absolute;
      z-index: 1;
    }

    .branch-vertical {
      border-left: 1px dotted var(--bim-ui_bg-contrast-40);
    }

    .branch-horizontal {
      top: 50%;
      width: 1rem;
      border-bottom: 1px dotted var(--bim-ui_bg-contrast-40);
    }

    .caret {
      position: absolute;
      z-index: 2;
      transform: translateY(-50%) rotate(0deg);
      top: 50%;
      display: flex;
      width: 0.95rem;
      height: 0.95rem;
      justify-content: center;
      align-items: center;
      cursor: pointer;
    }

    .caret svg {
      fill: var(--bim-ui_bg-contrast-60);
    }
  `;let FC=MC;WN([Q({type:Boolean,attribute:"children-hidden",reflect:!0})],FC.prototype,"childrenHidden");var XN=Object.defineProperty,Do=(i,e,t,s)=>{for(var n=void 0,r=i.length-1,o;r>=0;r--)(o=i[r])&&(n=o(e,t,n)||n);return n&&XN(e,t,n),n};const OC=class extends Le{constructor(){super(...arguments),this.selected=!1,this.columns=[],this.hiddenColumns=[],this.data={},this.isHeader=!1,this.table=this.closest("bim-table"),this.onTableColumnsChange=()=>{this.table&&(this.columns=this.table.columns)},this.onTableColumnsHidden=()=>{this.table&&(this.hiddenColumns=this.table.hiddenColumns)},this._observer=new IntersectionObserver(i=>{this._intersecting=i[0].isIntersecting},{rootMargin:"36px"})}get _columnNames(){return this.columns.filter(i=>!this.hiddenColumns.includes(i.name)).map(i=>i.name)}get _columnWidths(){return this.columns.filter(i=>!this.hiddenColumns.includes(i.name)).map(i=>i.width)}get _isSelected(){var i;return(i=this.table)==null?void 0:i.selection.has(this.data)}onSelectionChange(i){if(!this.table)return;const e=i.target;this.selected=e.value,e.value?(this.table.selection.add(this.data),this.table.dispatchEvent(new CustomEvent("rowselected",{detail:{data:this.data}}))):(this.table.selection.delete(this.data),this.table.dispatchEvent(new CustomEvent("rowdeselected",{detail:{data:this.data}})))}connectedCallback(){super.connectedCallback(),this._observer.observe(this),this.table&&(this.columns=this.table.columns,this.hiddenColumns=this.table.hiddenColumns,this.table.addEventListener("columnschange",this.onTableColumnsChange),this.table.addEventListener("columnshidden",this.onTableColumnsHidden),this.toggleAttribute("selected",this._isSelected))}disconnectedCallback(){super.disconnectedCallback(),this._observer.unobserve(this),this.table&&(this.columns=[],this.hiddenColumns=[],this.table.removeEventListener("columnschange",this.onTableColumnsChange),this.table.removeEventListener("columnshidden",this.onTableColumnsHidden),this.toggleAttribute("selected",!1))}compute(){if(!this.table)throw new Error("TableRow: parent table wasn't found!");const i=this.table.getRowIndentation(this.data)??0,e=this.isHeader?this.data:this.table.applyDataTransform(this.data)??this.data,t=[];for(const s in e){if(this.hiddenColumns.includes(s))continue;const n=e[s];let r;if(typeof n=="string"||typeof n=="boolean"||typeof n=="number"?(r=document.createElement("bim-label"),r.textContent=String(n)):n instanceof HTMLElement?r=n:(r=document.createDocumentFragment(),lo(n,r)),!r)continue;const o=document.createElement("bim-table-cell");o.append(r),o.column=s,this._columnNames.indexOf(s)===0&&(o.style.marginLeft=`${this.table.noIndentation?0:i+.75}rem`);const a=this._columnNames.indexOf(s);o.setAttribute("data-column-index",String(a)),o.toggleAttribute("data-no-indentation",a===0&&this.table.noIndentation),o.toggleAttribute("data-cell-header",this.isHeader),o.rowData=this.data,this.table.dispatchEvent(new CustomEvent("cellcreated",{detail:{cell:o}})),t.push(o)}return this.style.gridTemplateAreas=`"${this.table.selectableRows?"Selection":""} ${this._columnNames.join(" ")}"`,this.style.gridTemplateColumns=`${this.table.selectableRows?"1.6rem":""} ${this._columnWidths.join(" ")}`,j`
      ${!this.isHeader&&this.table.selectableRows?j`<bim-checkbox
            @change=${this.onSelectionChange}
            .checked=${this._isSelected}
            style="align-self: center; justify-self: center"
          ></bim-checkbox>`:null}
      ${t}
      <slot></slot>
    `}render(){return j`${this._intersecting?this.compute():j``}`}};OC.styles=Be`
    :host {
      position: relative;
      grid-area: Data;
      display: grid;
      min-height: 2.25rem;
      transition: all 0.15s;
    }

    ::slotted(.branch.branch-vertical) {
      top: 50%;
      bottom: 0;
    }

    :host([selected]) {
      background-color: color-mix(
        in lab,
        var(--bim-ui_bg-contrast-20) 30%,
        var(--bim-ui_main-base) 10%
      );
    }
  `;let sr=OC;Do([Q({type:Boolean,reflect:!0})],sr.prototype,"selected");Do([Q({attribute:!1})],sr.prototype,"columns");Do([Q({attribute:!1})],sr.prototype,"hiddenColumns");Do([Q({attribute:!1})],sr.prototype,"data");Do([Q({type:Boolean,attribute:"is-header",reflect:!0})],sr.prototype,"isHeader");Do([Mo()],sr.prototype,"_intersecting");var qN=Object.defineProperty,ZN=Object.getOwnPropertyDescriptor,xi=(i,e,t,s)=>{for(var n=s>1?void 0:s?ZN(e,t):e,r=i.length-1,o;r>=0;r--)(o=i[r])&&(n=(s?o(e,t,n):o(n))||n);return s&&n&&qN(e,t,n),n};const NC=class extends Le{constructor(){super(...arguments),this._filteredData=[],this.headersHidden=!1,this.minColWidth="4rem",this._columns=[],this._textDelimiters={comma:",",tab:"	"},this._queryString=null,this._data=[],this.expanded=!1,this.preserveStructureOnFilter=!1,this.indentationInText=!1,this.dataTransform={},this.selectableRows=!1,this.selection=new Set,this.noIndentation=!1,this.loading=!1,this._errorLoading=!1,this._onColumnsHidden=new Event("columnshidden"),this._hiddenColumns=[],this._stringFilterFunction=(i,e)=>Object.values(e.data).some(t=>String(t).toLowerCase().includes(i.toLowerCase())),this._queryFilterFunction=(i,e)=>{let t=!1;const s=Af(i)??[];for(const n of s){if("queries"in n){t=!1;break}const{condition:r,value:o}=n;let{key:a}=n;if(a.startsWith("[")&&a.endsWith("]")){const l=a.replace("[","").replace("]","");a=l,t=Object.keys(e.data).filter(h=>h.includes(l)).map(h=>H0(e.data[h],r,o)).some(h=>h)}else t=H0(e.data[a],r,o);if(!t)break}return t}}set columns(i){const e=[];for(const t of i){const s=typeof t=="string"?{name:t,width:`minmax(${this.minColWidth}, 1fr)`}:t;e.push(s)}this._columns=e,this.computeMissingColumns(this.data),this.dispatchEvent(new Event("columnschange"))}get columns(){return this._columns}get _headerRowData(){const i={};for(const e of this.columns){const{name:t}=e;i[t]=String(t)}return i}get value(){return this._filteredData}set queryString(i){this.toggleAttribute("data-processing",!0),this._queryString=i&&i.trim()!==""?i.trim():null,this.updateFilteredData(),this.toggleAttribute("data-processing",!1)}get queryString(){return this._queryString}set data(i){this._data=i,this.updateFilteredData(),this.computeMissingColumns(i)&&(this.columns=this._columns)}get data(){return this._data}get dataAsync(){return new Promise(i=>{setTimeout(()=>{i(this.data)})})}set hiddenColumns(i){this._hiddenColumns=i,setTimeout(()=>{this.dispatchEvent(this._onColumnsHidden)})}get hiddenColumns(){return this._hiddenColumns}updateFilteredData(){this.queryString?(Af(this.queryString)?(this.filterFunction=this._queryFilterFunction,this._filteredData=this.filter(this.queryString)):(this.filterFunction=this._stringFilterFunction,this._filteredData=this.filter(this.queryString)),this.preserveStructureOnFilter&&(this._expandedBeforeFilter===void 0&&(this._expandedBeforeFilter=this.expanded),this.expanded=!0)):(this.preserveStructureOnFilter&&this._expandedBeforeFilter!==void 0&&(this.expanded=this._expandedBeforeFilter,this._expandedBeforeFilter=void 0),this._filteredData=this.data)}computeMissingColumns(i){let e=!1;for(const t of i){const{children:s,data:n}=t;for(const r in n)this._columns.map(o=>typeof o=="string"?o:o.name).includes(r)||(this._columns.push({name:r,width:`minmax(${this.minColWidth}, 1fr)`}),e=!0);if(s){const r=this.computeMissingColumns(s);r&&!e&&(e=r)}}return e}generateText(i="comma",e=this.value,t="",s=!0){const n=this._textDelimiters[i];let r="";const o=this.columns.map(a=>a.name);if(s){this.indentationInText&&(r+=`Indentation${n}`);const a=`${o.join(n)}
`;r+=a}for(const[a,l]of e.entries()){const{data:h,children:u}=l,c=this.indentationInText?`${t}${a+1}${n}`:"",d=o.map(p=>h[p]??""),f=`${c}${d.join(n)}
`;r+=f,u&&(r+=this.generateText(i,l.children,`${t}${a+1}.`,!1))}return r}get csv(){return this.generateText("comma")}get tsv(){return this.generateText("tab")}applyDataTransform(i){const e={};for(const s of Object.keys(this.dataTransform)){const n=this.columns.find(r=>r.name===s);n&&n.forceDataTransform&&(s in i||(i[s]=""))}const t=i;for(const s in t){const n=this.dataTransform[s];n?e[s]=n(t[s],i):e[s]=i[s]}return e}downloadData(i="BIM Table Data",e="json"){let t=null;if(e==="json"&&(t=new File([JSON.stringify(this.value,void 0,2)],`${i}.json`)),e==="csv"&&(t=new File([this.csv],`${i}.csv`)),e==="tsv"&&(t=new File([this.tsv],`${i}.tsv`)),!t)return;const s=document.createElement("a");s.href=URL.createObjectURL(t),s.download=t.name,s.click(),URL.revokeObjectURL(s.href)}getRowIndentation(i,e=this.value,t=0){for(const s of e){if(s.data===i)return t;if(s.children){const n=this.getRowIndentation(i,s.children,t+1);if(n!==null)return n}}return null}getGroupIndentation(i,e=this.value,t=0){for(const s of e){if(s===i)return t;if(s.children){const n=this.getGroupIndentation(i,s.children,t+1);if(n!==null)return n}}return null}connectedCallback(){super.connectedCallback(),this.dispatchEvent(new Event("connected"))}disconnectedCallback(){super.disconnectedCallback(),this.dispatchEvent(new Event("disconnected"))}async loadData(i=!1){if(this._filteredData.length!==0&&!i||!this.loadFunction)return!1;this.loading=!0;try{const e=await this.loadFunction();return this.data=e,this.loading=!1,this._errorLoading=!1,!0}catch(e){if(this.loading=!1,this._filteredData.length!==0)return!1;const t=this.querySelector("[slot='error-loading']"),s=t==null?void 0:t.querySelector("[data-table-element='error-message']");return e instanceof Error&&s&&e.message.trim()!==""&&(s.textContent=e.message),this._errorLoading=!0,!1}}filter(i,e=this.filterFunction??this._stringFilterFunction,t=this.data){const s=[];for(const n of t)if(e(i,n)){if(this.preserveStructureOnFilter){const r={data:n.data};if(n.children){const o=this.filter(i,e,n.children);o.length&&(r.children=o)}s.push(r)}else if(s.push({data:n.data}),n.children){const r=this.filter(i,e,n.children);s.push(...r)}}else if(n.children){const r=this.filter(i,e,n.children);this.preserveStructureOnFilter&&r.length?s.push({data:n.data,children:r}):s.push(...r)}return s}get _missingDataElement(){return this.querySelector("[slot='missing-data']")}render(){if(this.loading)return zN();if(this._errorLoading)return j`<slot name="error-loading"></slot>`;if(this._filteredData.length===0&&this._missingDataElement)return j`<slot name="missing-data"></slot>`;const i=document.createElement("bim-table-row");i.table=this,i.isHeader=!0,i.data=this._headerRowData,i.style.gridArea="Header",i.style.position="sticky",i.style.top="0",i.style.zIndex="5";const e=document.createElement("bim-table-children");return e.table=this,e.data=this.value,e.style.gridArea="Body",e.style.backgroundColor="transparent",j`
      <div class="parent">
        ${this.headersHidden?null:i} ${VN()}
        <div style="overflow-x: hidden; grid-area: Body">${e}</div>
      </div>
    `}};NC.styles=[on.scrollbar,Be`
      :host {
        position: relative;
        overflow: auto;
        display: block;
        pointer-events: auto;
      }

      :host(:not([data-processing])) .loader {
        display: none;
      }

      .parent {
        display: grid;
        grid-template:
          "Header" auto
          "Processing" auto
          "Body" 1fr
          "Footer" auto;
        overflow: auto;
        height: 100%;
      }

      .parent > bim-table-row[is-header] {
        color: var(--bim-table_header--c, var(--bim-ui_bg-contrast-100));
        background-color: var(
          --bim-table_header--bgc,
          var(--bim-ui_bg-contrast-20)
        );
      }

      .controls {
        display: flex;
        gap: 0.375rem;
        flex-wrap: wrap;
        margin-bottom: 0.5rem;
      }
    `];let gi=NC;xi([Mo()],gi.prototype,"_filteredData",2);xi([Q({type:Boolean,attribute:"headers-hidden",reflect:!0})],gi.prototype,"headersHidden",2);xi([Q({type:String,attribute:"min-col-width",reflect:!0})],gi.prototype,"minColWidth",2);xi([Q({type:Array,attribute:!1})],gi.prototype,"columns",1);xi([Q({type:Array,attribute:!1})],gi.prototype,"data",1);xi([Q({type:Boolean,reflect:!0})],gi.prototype,"expanded",2);xi([Q({type:Boolean,reflect:!0,attribute:"selectable-rows"})],gi.prototype,"selectableRows",2);xi([Q({attribute:!1})],gi.prototype,"selection",2);xi([Q({type:Boolean,attribute:"no-indentation",reflect:!0})],gi.prototype,"noIndentation",2);xi([Q({type:Boolean,reflect:!0})],gi.prototype,"loading",2);xi([Mo()],gi.prototype,"_errorLoading",2);var QN=Object.defineProperty,KN=Object.getOwnPropertyDescriptor,Ru=(i,e,t,s)=>{for(var n=s>1?void 0:s?KN(e,t):e,r=i.length-1,o;r>=0;r--)(o=i[r])&&(n=(s?o(e,t,n):o(n))||n);return s&&n&&QN(e,t,n),n};const PC=class extends Le{constructor(){super(...arguments),this._defaultName="__unnamed__",this.name=this._defaultName,this._hidden=!1}set hidden(i){this._hidden=i,this.dispatchEvent(new Event("hiddenchange"))}get hidden(){return this._hidden}connectedCallback(){super.connectedCallback();const{parentElement:i}=this;if(i&&this.name===this._defaultName){const e=[...i.children].indexOf(this);this.name=`${this._defaultName}${e}`}}render(){return j` <slot></slot> `}};PC.styles=Be`
    :host {
      display: block;
      height: 100%;
    }

    :host([hidden]) {
      display: none;
    }
  `;let ti=PC;Ru([Q({type:String,reflect:!0})],ti.prototype,"name",2);Ru([Q({type:String,reflect:!0})],ti.prototype,"label",2);Ru([Q({type:String,reflect:!0})],ti.prototype,"icon",2);Ru([Q({type:Boolean,reflect:!0})],ti.prototype,"hidden",1);var JN=Object.defineProperty,eP=Object.getOwnPropertyDescriptor,Uo=(i,e,t,s)=>{for(var n=s>1?void 0:s?eP(e,t):e,r=i.length-1,o;r>=0;r--)(o=i[r])&&(n=(s?o(e,t,n):o(n))||n);return s&&n&&JN(e,t,n),n};const LC=class extends Le{constructor(){super(...arguments),this._switchers=[],this.bottom=!1,this.switchersHidden=!1,this.floating=!1,this.switchersFull=!1,this.onTabHiddenChange=i=>{const e=i.target;e instanceof ti&&!e.hidden&&(e.removeEventListener("hiddenchange",this.onTabHiddenChange),this.tab=e.name,e.addEventListener("hiddenchange",this.onTabHiddenChange))}}set tab(i){this._tab=i;const e=[...this.children],t=e.find(s=>s instanceof ti&&s.name===i);for(const s of e){if(!(s instanceof ti))continue;s.hidden=t!==s;const n=this.getTabSwitcher(s.name);n&&n.toggleAttribute("data-active",!s.hidden)}}get tab(){return this._tab}getTabSwitcher(i){return this._switchers.find(e=>e.getAttribute("data-name")===i)}createSwitchers(){this._switchers=[];for(const i of this.children){if(!(i instanceof ti))continue;const e=document.createElement("div");e.addEventListener("click",()=>{this.tab===i.name?this.toggleAttribute("tab",!1):this.tab=i.name}),e.setAttribute("data-name",i.name),e.className="switcher";const t=document.createElement("bim-label");t.textContent=i.label??"",t.icon=i.icon,e.append(t),this._switchers.push(e)}}onSlotChange(i){this.createSwitchers();const e=i.target.assignedElements(),t=e.find(s=>s instanceof ti?this.tab?s.name===this.tab:!s.hidden:!1);t&&t instanceof ti&&(this.tab=t.name);for(const s of e){if(!(s instanceof ti)){s.remove();continue}s.removeEventListener("hiddenchange",this.onTabHiddenChange),t!==s&&(s.hidden=!0),s.addEventListener("hiddenchange",this.onTabHiddenChange)}}render(){return j`
      <div class="parent">
        <div class="switchers">${this._switchers}</div>
        <div class="content">
          <slot @slotchange=${this.onSlotChange}></slot>
        </div>
      </div>
    `}};LC.styles=[on.scrollbar,Be`
      * {
        box-sizing: border-box;
      }

      :host {
        background-color: var(--bim-ui_bg-base);
        display: block;
        overflow: auto;
      }

      .parent {
        display: grid;
        grid-template: "switchers" auto "content" 1fr;
        height: 100%;
      }

      :host([bottom]) .parent {
        grid-template: "content" 1fr "switchers" auto;
      }

      .switchers {
        display: flex;
        height: 2.25rem;
        font-weight: 600;
        grid-area: switchers;
      }

      .switcher {
        --bim-label--c: var(--bim-ui_bg-contrast-80);
        background-color: var(--bim-ui_bg-base);
        cursor: pointer;
        pointer-events: auto;
        padding: 0rem 0.75rem;
        display: flex;
        justify-content: center;
        transition: all 0.15s;
      }

      :host([switchers-full]) .switcher {
        flex: 1;
      }

      .switcher:hover,
      .switcher[data-active] {
        --bim-label--c: var(--bim-ui_main-contrast);
        background-color: var(--bim-ui_main-base);
      }

      .switchers bim-label {
        pointer-events: none;
      }

      :host([switchers-hidden]) .switchers {
        display: none;
      }

      .content {
        grid-area: content;
        overflow: auto;
      }

      :host(:not([bottom])) .content {
        border-top: 1px solid var(--bim-ui_bg-contrast-20);
      }

      :host([bottom]) .content {
        border-bottom: 1px solid var(--bim-ui_bg-contrast-20);
      }

      :host(:not([tab])) .content {
        display: none;
      }

      :host([floating]) {
        background-color: transparent;
      }

      :host([floating]) .switchers {
        justify-self: center;
        overflow: auto;
      }

      :host([floating]:not([bottom])) .switchers {
        border-radius: var(--bim-ui_size-2xs) var(--bim-ui_size-2xs) 0 0;
        border-top: 1px solid var(--bim-ui_bg-contrast-20);
        border-left: 1px solid var(--bim-ui_bg-contrast-20);
        border-right: 1px solid var(--bim-ui_bg-contrast-20);
      }

      :host([floating][bottom]) .switchers {
        border-radius: 0 0 var(--bim-ui_size-2xs) var(--bim-ui_size-2xs);
        border-bottom: 1px solid var(--bim-ui_bg-contrast-20);
        border-left: 1px solid var(--bim-ui_bg-contrast-20);
        border-right: 1px solid var(--bim-ui_bg-contrast-20);
      }

      :host([floating]:not([tab])) .switchers {
        border-radius: var(--bim-ui_size-2xs);
        border-bottom: 1px solid var(--bim-ui_bg-contrast-20);
      }

      :host([floating][bottom]:not([tab])) .switchers {
        border-top: 1px solid var(--bim-ui_bg-contrast-20);
      }

      :host([floating]) .content {
        border: 1px solid var(--bim-ui_bg-contrast-20);
        border-radius: var(--bim-ui_size-2xs);
        background-color: var(--bim-ui_bg-base);
      }
    `];let nr=LC;Uo([Mo()],nr.prototype,"_switchers",2);Uo([Q({type:Boolean,reflect:!0})],nr.prototype,"bottom",2);Uo([Q({type:Boolean,attribute:"switchers-hidden",reflect:!0})],nr.prototype,"switchersHidden",2);Uo([Q({type:Boolean,reflect:!0})],nr.prototype,"floating",2);Uo([Q({type:String,reflect:!0})],nr.prototype,"tab",1);Uo([Q({type:Boolean,attribute:"switchers-full",reflect:!0})],nr.prototype,"switchersFull",2);/**
 * @license
 * Copyright 2018 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const G0=i=>i??st;var tP=Object.defineProperty,iP=Object.getOwnPropertyDescriptor,Ts=(i,e,t,s)=>{for(var n=s>1?void 0:s?iP(e,t):e,r=i.length-1,o;r>=0;r--)(o=i[r])&&(n=(s?o(e,t,n):o(n))||n);return s&&n&&tP(e,t,n),n};const DC=class extends Le{constructor(){super(...arguments),this._inputTypes=["date","datetime-local","email","month","password","search","tel","text","time","url","week","area"],this.value="",this.vertical=!1,this._type="text",this.onValueChange=new Event("input")}set type(i){this._inputTypes.includes(i)&&(this._type=i)}get type(){return this._type}get query(){return Af(this.value)}onInputChange(i){i.stopPropagation();const e=i.target;clearTimeout(this._debounceTimeoutID),this._debounceTimeoutID=setTimeout(()=>{this.value=e.value,this.dispatchEvent(this.onValueChange)},this.debounce)}focus(){setTimeout(()=>{var i;const e=(i=this.shadowRoot)==null?void 0:i.querySelector("input");e==null||e.focus()})}render(){return j`
      <bim-input
        .name=${this.name}
        .icon=${this.icon}
        .label=${this.label}
        .vertical=${this.vertical}
      >
        ${this.type==="area"?j` <textarea
              aria-label=${this.label||this.name||"Text Input"}
              .value=${this.value}
              .rows=${this.rows??5}
              placeholder=${G0(this.placeholder)}
              @input=${this.onInputChange}
            ></textarea>`:j` <input
              aria-label=${this.label||this.name||"Text Input"}
              .type=${this.type}
              .value=${this.value}
              placeholder=${G0(this.placeholder)}
              @input=${this.onInputChange}
            />`}
      </bim-input>
    `}};DC.styles=[on.scrollbar,Be`
      :host {
        --bim-input--bgc: var(--bim-ui_bg-contrast-20);
        flex: 1;
        display: block;
      }

      input,
      textarea {
        font-family: inherit;
        background-color: transparent;
        border: none;
        width: 100%;
        padding: var(--bim-ui_size-3xs);
        color: var(--bim-text-input--c, var(--bim-ui_bg-contrast-100));
      }

      input {
        outline: none;
        height: 100%;
        padding: 0 var(--bim-ui_size-3xs); /* Override padding */
        border-radius: var(--bim-text-input--bdrs, var(--bim-ui_size-4xs));
      }

      textarea {
        line-height: 1.1rem;
        resize: vertical;
      }

      :host(:focus) {
        --bim-input--olc: var(--bim-ui_accent-base);
      }

      /* :host([disabled]) {
      --bim-input--bgc: var(--bim-ui_bg-contrast-20);
    } */
    `];let Ei=DC;Ts([Q({type:String,reflect:!0})],Ei.prototype,"icon",2);Ts([Q({type:String,reflect:!0})],Ei.prototype,"label",2);Ts([Q({type:String,reflect:!0})],Ei.prototype,"name",2);Ts([Q({type:String,reflect:!0})],Ei.prototype,"placeholder",2);Ts([Q({type:String,reflect:!0})],Ei.prototype,"value",2);Ts([Q({type:Boolean,reflect:!0})],Ei.prototype,"vertical",2);Ts([Q({type:Number,reflect:!0})],Ei.prototype,"debounce",2);Ts([Q({type:Number,reflect:!0})],Ei.prototype,"rows",2);Ts([Q({type:String,reflect:!0})],Ei.prototype,"type",1);var sP=Object.defineProperty,nP=Object.getOwnPropertyDescriptor,UC=(i,e,t,s)=>{for(var n=s>1?void 0:s?nP(e,t):e,r=i.length-1,o;r>=0;r--)(o=i[r])&&(n=(s?o(e,t,n):o(n))||n);return s&&n&&sP(e,t,n),n};const kC=class extends Le{constructor(){super(...arguments),this.rows=2,this._vertical=!1}set vertical(i){this._vertical=i,this.updateChildren()}get vertical(){return this._vertical}updateChildren(){const i=this.children;for(const e of i)this.vertical?e.setAttribute("label-hidden",""):e.removeAttribute("label-hidden")}render(){return j`
      <style>
        .parent {
          grid-auto-flow: ${this.vertical?"row":"column"};
          grid-template-rows: repeat(${this.rows}, 1fr);
        }
      </style>
      <div class="parent">
        <slot @slotchange=${this.updateChildren}></slot>
      </div>
    `}};kC.styles=Be`
    .parent {
      display: grid;
      gap: 0.25rem;
    }

    ::slotted(bim-button[label]:not([vertical])) {
      --bim-button--jc: flex-start;
    }

    ::slotted(bim-button) {
      --bim-label--c: var(--bim-ui_bg-contrast-80);
    }
  `;let _u=kC;UC([Q({type:Number,reflect:!0})],_u.prototype,"rows",2);UC([Q({type:Boolean,reflect:!0})],_u.prototype,"vertical",1);var rP=Object.defineProperty,oP=Object.getOwnPropertyDescriptor,Au=(i,e,t,s)=>{for(var n=s>1?void 0:s?oP(e,t):e,r=i.length-1,o;r>=0;r--)(o=i[r])&&(n=(s?o(e,t,n):o(n))||n);return s&&n&&rP(e,t,n),n};const BC=class extends Le{constructor(){super(...arguments),this._vertical=!1,this._labelHidden=!1}set vertical(i){this._vertical=i,this.updateChildren()}get vertical(){return this._vertical}set labelHidden(i){this._labelHidden=i,this.updateChildren()}get labelHidden(){return this._labelHidden}updateChildren(){const i=this.children;for(const e of i)e instanceof _u&&(e.vertical=this.vertical),e.toggleAttribute("label-hidden",this.vertical)}render(){return j`
      <div class="parent">
        <div class="children">
          <slot @slotchange=${this.updateChildren}></slot>
        </div>
        ${!this.labelHidden&&(this.label||this.icon)?j`<bim-label .icon=${this.icon}>${this.label}</bim-label>`:null}
      </div>
    `}};BC.styles=Be`
    :host {
      --bim-label--fz: var(--bim-ui_size-xs);
      --bim-label--c: var(--bim-ui_bg-contrast-60);
      display: block;
      flex: 1;
    }

    :host(:not([vertical])) ::slotted(bim-button[vertical]) {
      --bim-icon--fz: var(--bim-ui_size-5xl);
      min-height: 3.75rem;
    }

    ::slotted(bim-button) {
      --bim-label--c: var(--bim-ui_bg-contrast-80);
    }

    .parent {
      display: flex;
      flex-direction: column;
      gap: 0.5rem;
      align-items: center;
      padding: 0.5rem;
      height: 100%;
      box-sizing: border-box;
      justify-content: space-between;
    }

    :host([vertical]) .parent {
      flex-direction: row-reverse;
    }

    :host([vertical]) .parent > bim-label {
      writing-mode: tb;
    }

    .children {
      display: flex;
      gap: 0.25rem;
    }

    :host([vertical]) .children {
      flex-direction: column;
    }
  `;let ko=BC;Au([Q({type:String,reflect:!0})],ko.prototype,"label",2);Au([Q({type:String,reflect:!0})],ko.prototype,"icon",2);Au([Q({type:Boolean,reflect:!0})],ko.prototype,"vertical",1);Au([Q({type:Boolean,attribute:"label-hidden",reflect:!0})],ko.prototype,"labelHidden",1);var aP=Object.defineProperty,lP=Object.getOwnPropertyDescriptor,jp=(i,e,t,s)=>{for(var n=s>1?void 0:s?lP(e,t):e,r=i.length-1,o;r>=0;r--)(o=i[r])&&(n=(s?o(e,t,n):o(n))||n);return s&&n&&aP(e,t,n),n};const zC=class extends Le{constructor(){super(...arguments),this.labelsHidden=!1,this._vertical=!1,this._hidden=!1}set vertical(i){this._vertical=i,this.updateSections()}get vertical(){return this._vertical}set hidden(i){this._hidden=i,this.dispatchEvent(new Event("hiddenchange"))}get hidden(){return this._hidden}updateSections(){const i=this.children;for(const e of i)e instanceof ko&&(e.labelHidden=this.vertical&&!Yt.config.sectionLabelOnVerticalToolbar,e.vertical=this.vertical)}render(){return j`
      <div class="parent">
        <slot @slotchange=${this.updateSections}></slot>
      </div>
    `}};zC.styles=Be`
    :host {
      --bim-button--bgc: transparent;
      background-color: var(--bim-ui_bg-base);
      border-radius: var(--bim-ui_size-2xs);
      display: block;
    }

    :host([hidden]) {
      display: none;
    }

    .parent {
      display: flex;
      width: min-content;
      pointer-events: auto;
    }

    :host([vertical]) .parent {
      flex-direction: column;
    }

    :host([vertical]) {
      width: min-content;
      border-radius: var(--bim-ui_size-2xs);
      border: 1px solid var(--bim-ui_bg-contrast-20);
    }

    ::slotted(bim-toolbar-section:not(:last-child)) {
      border-right: 1px solid var(--bim-ui_bg-contrast-20);
      border-bottom: none;
    }

    :host([vertical]) ::slotted(bim-toolbar-section:not(:last-child)) {
      border-bottom: 1px solid var(--bim-ui_bg-contrast-20);
      border-right: none;
    }
  `;let Mu=zC;jp([Q({type:String,reflect:!0})],Mu.prototype,"icon",2);jp([Q({type:Boolean,attribute:"labels-hidden",reflect:!0})],Mu.prototype,"labelsHidden",2);jp([Q({type:Boolean,reflect:!0})],Mu.prototype,"vertical",1);var hP=Object.defineProperty,cP=(i,e,t,s)=>{for(var n=void 0,r=i.length-1,o;r>=0;r--)(o=i[r])&&(n=o(e,t,n)||n);return n&&hP(e,t,n),n};const VC=class extends Le{constructor(){super(),this._onResize=new Event("resize"),new ResizeObserver(()=>{setTimeout(()=>{this.dispatchEvent(this._onResize)})}).observe(this)}render(){return j`
      <div class="parent">
        <slot></slot>
      </div>
    `}};VC.styles=Be`
    :host {
      display: grid;
      min-width: 0;
      min-height: 0;
      height: 100%;
    }

    .parent {
      overflow: hidden;
      position: relative;
    }
  `;let $C=VC;cP([Q({type:String,reflect:!0})],$C.prototype,"name");/**
 * @license
 * Copyright 2018 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const HC="important",uP=" !"+HC,Ln=Vy(class extends $y{constructor(i){var e;if(super(i),i.type!==zy.ATTRIBUTE||i.name!=="style"||((e=i.strings)==null?void 0:e.length)>2)throw Error("The `styleMap` directive must be used in the `style` attribute and must be the only part in the attribute.")}render(i){return Object.keys(i).reduce((e,t)=>{const s=i[t];return s==null?e:e+`${t=t.includes("-")?t:t.replace(/(?:^(webkit|moz|ms|o)|)(?=[A-Z])/g,"-$&").toLowerCase()}:${s};`},"")}update(i,[e]){const{style:t}=i.element;if(this.ft===void 0)return this.ft=new Set(Object.keys(e)),this.render(e);for(const s of this.ft)e[s]==null&&(this.ft.delete(s),s.includes("-")?t.removeProperty(s):t[s]=null);for(const s in e){const n=e[s];if(n!=null){this.ft.add(s);const r=typeof n=="string"&&n.endsWith(uP);s.includes("-")||r?t.setProperty(s,r?n.slice(0,-11):n,r?HC:""):t[s]=n}}return Yn}}),dP=i=>{const{components:e}=i,t=e.get(tp);return j`
    <bim-button
      data-ui-id="import-ifc"
      label="Load IFC"
      icon="mage:box-3d-fill"
      @click=${()=>{const s=document.createElement("input");s.type="file",s.accept=".ifc",s.onchange=async()=>{if(s.files===null||s.files.length===0)return;const n=s.files[0],r=n.name.replace(".ifc","");s.remove();const o=await n.arrayBuffer(),a=new Uint8Array(o);await t.load(a,!0,r)},s.click()}}
    ></bim-button>
  `},fP=i=>ot.create(dP,i),pP=Object.freeze(Object.defineProperty({__proto__:null,loadIfc:fP},Symbol.toStringTag,{value:"Module"}));({...pP});const mP=i=>{const{components:e,actions:t,tags:s}=i,n=(t==null?void 0:t.dispose)??!0,r=(t==null?void 0:t.download)??!0,o=(t==null?void 0:t.visibility)??!0,a=(s==null?void 0:s.schema)??!0,l=(s==null?void 0:s.viewDefinition)??!0,h=e.get(bs),u=({detail:c})=>{const{cell:d}=c;d.style.padding="0.25rem 0"};return j`
    <bim-table ${_t(c=>{if(!c)return;const d=c;d.hiddenColumns=["modelID"];const f=[];for(const[,p]of h.groups){if(!p)continue;const m={data:{Name:p.name||p.uuid,modelID:p.uuid}};f.push(m)}d.dataTransform={Name:(p,m)=>{const{modelID:g}=m;if(typeof g!="string")return p;const E=h.groups.get(g);if(!E)return g;const I={};for(const A of E.items)I[A.id]=A.ids;let v;const{schema:b}=E.ifcMetadata;a&&b&&(v=j`
            <bim-label style="background-color: var(--bim-ui_main-base); padding: 0 0.25rem; color: var(--bim-ui_main-contrast); border-radius: 0.25rem;">${b}</bim-label>
            `);let C;if(l&&"viewDefinition"in E.ifcMetadata){const A=E.ifcMetadata.viewDefinition;C=j`
            ${A.split(",").map(F=>j`<bim-label style="background-color: var(--bim-ui_main-base); padding: 0 0.25rem; color: var(--bim-ui_main-contrast); border-radius: 0.25rem;">${F}</bim-label>`)}
          `}let S;n&&(S=j`<bim-button @click=${()=>h.disposeGroup(E)} icon="mdi:delete"></bim-button>`);let _;o&&(_=j`<bim-button @click=${A=>{const F=e.get(kE),D=A.target;F.set(D.hasAttribute("data-model-hidden"),I),D.toggleAttribute("data-model-hidden"),D.icon=D.hasAttribute("data-model-hidden")?"mdi:eye-off":"mdi:eye"}} icon="mdi:eye"></bim-button>`);let M;return r&&(M=j`<bim-button @click=${()=>{const A=document.createElement("input");A.type="file",A.accept=".ifc",A.multiple=!1,A.addEventListener("change",async()=>{if(!(A.files&&A.files.length===1))return;const F=A.files[0],D=await F.arrayBuffer(),x=await e.get(CT).saveToIfc(E,new Uint8Array(D)),N=new File([x],F.name),y=document.createElement("a");y.href=URL.createObjectURL(N),y.download=N.name,y.click(),URL.revokeObjectURL(y.href)}),A.click()}} icon="flowbite:download-solid"></bim-button>`),j`
         <div style="display: flex; flex: 1; gap: var(--bim-ui_size-4xs); justify-content: space-between; overflow: auto;">
          <div style="display: flex; flex-wrap: wrap; align-items: center; gap: 0 var(--bim-ui_size-4xs); flex-grow: 1; overflow: auto;">
            <div style="min-height: 1.75rem; overflow: auto; display: flex;">
              <bim-label style="white-space: normal;">${p}</bim-label>
            </div>
            <div style="display: flex; flex-wrap: wrap; gap: var(--bim-ui_size-4xs); overflow: auto;">
              ${v}
              ${C}
            </div>
          </div>
          <div style="display: flex; align-self: flex-start; flex-shrink: 0;">
            ${M}
            ${_}
            ${S}
          </div>
         </div>
        `}},d.data=f})} @cellcreated=${u} headers-hidden no-indentation>
      <bim-label slot="missing-data" style="--bim-icon--c: gold" icon="ic:round-warning">
        No models has been loaded yet
      </bim-label>
    </bim-table>
  `},gP=(i,e=!0)=>{const t=ot.create(mP,i);if(e){const{components:s}=i,n=s.get(bs),[,r]=t;n.onFragmentsLoaded.add(()=>setTimeout(()=>r())),n.onFragmentsDisposed.add(()=>r())}return t},EP=Object.freeze(Object.defineProperty({__proto__:null,modelsList:gP},Symbol.toStringTag,{value:"Module"})),GC=["Name","ContainedInStructure","ForLayerSet","LayerThickness","HasProperties","HasAssociations","HasAssignments","HasPropertySets","PredefinedType","Quantities","ReferencedSource","Identification",i=>i.includes("Value"),i=>i.startsWith("Material"),i=>i.startsWith("Relating"),i=>{const e=["IsGroupedBy","IsDecomposedBy"];return i.startsWith("Is")&&!e.includes(i)}];async function Kh(i,e,t,s=GC,n=!1){const r=i.get(Xi),o=await e.getProperties(t);if(!o)return{data:{Entity:`${t} properties not found...`}};const a=r.relationMaps[e.uuid],l={data:{}};for(const h in o){const u=s.map(d=>typeof d=="string"?h===d:d(h)).includes(!0);if(!(h==="type"||u))continue;const c=o[h];if(c)if(c.type===5){l.children||(l.children=[]);const d=await Kh(i,e,c.value,s,n);l.children.push(d)}else if(typeof c=="object"&&!Array.isArray(c)){const{value:d,type:f}=c;if(n)f===1||f===2||f===3||(l.data[h]=d);else{const p=typeof d=="number"?Number(d.toFixed(3)):d;l.data[h]=p}}else if(Array.isArray(c))for(const d of c){if(d.type!==5)continue;l.children||(l.children=[]);const f=await Kh(i,e,d.value,s,n);l.children.push(f)}else if(h==="type"){const d=oc[c];l.data.Entity=d}else l.data[h]=c}if(a&&a.get(o.expressID)){const h=a.get(o.expressID);for(const u of s){const c=[];if(typeof u=="string"){const d=r._inverseAttributes.indexOf(u);d!==-1&&c.push(d)}else{const d=r._inverseAttributes.filter(f=>u(f));for(const f of d){const p=r._inverseAttributes.indexOf(f);c.push(p)}}for(const d of c){const f=h.get(d);if(f)for(const p of f){const m=await Kh(i,e,p,s,n);l.children||(l.children=[]),l.children.push(m)}}}}return l}const IP=i=>{const{components:e,fragmentIdMap:t,attributesToInclude:s,editable:n,tableDefinition:r}=i,o=e.get(bs);let a;return typeof s=="function"?a=s(GC):a=s,j`<bim-table ${_t(async l=>{if(!l)return;const h=l,u=[],c=[];for(const d in t){const f=o.list.get(d);if(!(f&&f.group))continue;const p=f.group,m=c.find(g=>g.model===p);if(m)for(const g of t[d])m.expressIDs.add(g);else{const g={model:p,expressIDs:new Set(t[d])};c.push(g)}}for(const d of c){const{model:f,expressIDs:p}=d;for(const m of p){const g=await Kh(e,f,m,a,n);u.push(g)}}h.dataTransform=r,h.data=u,h.columns=[{name:"Entity",width:"minmax(15rem, 1fr)"}]})}></bim-table>`},bP=i=>ot.create(IP,i),vP=Object.freeze(Object.defineProperty({__proto__:null,entityAttributes:bP},Symbol.toStringTag,{value:"Module"}));let _s;const yP=i=>{const{components:e,classifications:t}=i,s=e.get(TT),n=e.get(kE);_s||(_s=document.createElement("bim-table"),_s.headersHidden=!0,_s.hiddenColumns=["system"],_s.columns=["Name",{name:"Actions",width:"auto"}],_s.dataTransform={Actions:(o,a)=>{const{system:l,Name:h}=a;if(!(typeof l=="string"&&typeof h=="string"))return o;const u=s.list[l];if(!(u&&u[h]))return o;const c=u[h],{map:d}=c;return j`
          <div>
            <bim-checkbox checked @change=${f=>{const p=f.target;n.set(p.value,d)}}></bim-checkbox>
          </div>
        `}});const r=[];for(const o of t){const a=typeof o=="string"?o:o.system,l=typeof o=="string"?o:o.label,h=s.list[a];h&&r.push({data:{Name:l,system:a},children:Object.keys(h).map(u=>({data:{Name:u,system:a,Actions:""}}))})}return _s.data=r,j`${_s}`},CP=(i,e=!0)=>{const t=ot.create(yP,i);if(e){const{components:s}=i,n=s.get(bs),[,r]=t;n.onFragmentsDisposed.add(()=>r())}return t},TP=Object.freeze(Object.defineProperty({__proto__:null,classificationTree:CP},Symbol.toStringTag,{value:"Module"})),YC=async(i,e,t)=>{var s,n,r,o;const a=i.get(Xi),l={data:{Name:(s=t.Name)==null?void 0:s.value},children:[{data:{Name:"Identification",Value:(n=t.Identification)==null?void 0:n.value}},{data:{Name:"Name",Value:(r=t.Name)==null?void 0:r.value}},{data:{Name:"Description",Value:(o=t.Description)==null?void 0:o.value}}]},h=a.getEntityRelations(e,t.expressID,"IsNestedBy");if(!h)return l;l.children||(l.children=[]);const u=[];l.children.push({data:{Name:"Tasks"},children:u});for(const c of h){const d=await e.getProperties(c);if(!d)continue;const f=await YC(i,e,d);u.push(f)}return l},wP=async(i,e,t)=>{const s=[];for(const n of t){const r=await YC(i,e,n);s.push(r)}return{data:{Name:"Tasks"},children:s}},SP=async(i,e)=>{var t,s,n,r;const o={data:{Name:"Classifications"}};for(const a of e){const{value:l}=a.ReferencedSource,h=await i.getProperties(l);if(!h)continue;const u={data:{Name:(t=h.Name)==null?void 0:t.value},children:[{data:{Name:"Identification",Value:((s=a.Identification)==null?void 0:s.value)||((n=a.ItemReference)==null?void 0:n.value)}},{data:{Name:"Name",Value:(r=a.Name)==null?void 0:r.value}}]};o.children||(o.children=[]),o.children.push(u)}return o},xP=async(i,e)=>{var t,s,n,r,o,a;const l={data:{Name:"Materials"}};for(const h of e){if(h.type===BE){const u=(t=h.ForLayerSet)==null?void 0:t.value,c=await i.getProperties(u);if(!c)continue;for(const d of c.MaterialLayers){const{value:f}=d,p=await i.getProperties(f);if(!p)continue;const m=await i.getProperties((s=p.Material)==null?void 0:s.value);if(!m)continue;const g={data:{Name:"Layer"},children:[{data:{Name:"Thickness",Value:(n=p.LayerThickness)==null?void 0:n.value}},{data:{Name:"Material",Value:(r=m.Name)==null?void 0:r.value}}]};l.children||(l.children=[]),l.children.push(g)}}if(h.type===VE)for(const u of h.Materials){const{value:c}=u,d=await i.getProperties(c);if(!d)continue;const f={data:{Name:"Name",Value:(o=d.Name)==null?void 0:o.value}};l.children||(l.children=[]),l.children.push(f)}if(h.type===zE){const u={data:{Name:"Name",Value:(a=h.Name)==null?void 0:a.value}};l.children||(l.children=[]),l.children.push(u)}}return l},RP={IFCLENGTHMEASURE:"LENGTHUNIT",IFCAREAMEASURE:"AREAUNIT",IFCVOLUMEMEASURE:"VOLUMEUNIT",IFCPLANEANGLEMEASURE:"PLANEANGLEUNIT"},_P={MILLIMETRE:{symbol:"mm",digits:0},METRE:{symbol:"m",digits:2},KILOMETRE:{symbol:"km",digits:2},SQUARE_METRE:{symbol:"m²",digits:2},CUBIC_METRE:{symbol:"m³",digits:2},DEGREE:{symbol:"°",digits:2},RADIAN:{symbol:"rad",digits:2},GRAM:{symbol:"g",digits:0},KILOGRAM:{symbol:"kg",digits:2},MILLISECOND:{symbol:"ms",digits:0},SECOND:{symbol:"s",digits:0}},jC=async(i,e)=>{var t,s,n;const r=Object.values(await i.getAllPropertiesOfType(OE))[0];let o;for(const a of r.Units){const l=await i.getProperties(a.value);if(l&&((t=l.UnitType)==null?void 0:t.value)===RP[e]){o=`${((s=l.Prefix)==null?void 0:s.value)??""}${((n=l.Name)==null?void 0:n.value)??""}`;break}}return o?_P[o]:null},AP=async(i,e,t)=>{var s,n;const{displayUnits:r}=t,o={data:{Name:"PropertySets"}};for(const a of e){const l={data:{Name:(s=a.Name)==null?void 0:s.value}};if(a.type===ks){for(const h of a.HasProperties){const{value:u}=h,c=await i.getProperties(u);if(!c)continue;const d=Object.keys(c).find(g=>g.includes("Value"));if(!(d&&c[d]))continue;let f=c[d].value,p="";if(r){const{name:g}=c[d],E=await jC(i,g)??{};p=E.symbol,f=c[d].value,typeof f=="number"&&E.digits&&(f=f.toFixed(E.digits))}const m={data:{Name:(n=c.Name)==null?void 0:n.value,Value:`${f} ${p??""}`}};l.children||(l.children=[]),l.children.push(m)}l.children&&(o.children||(o.children=[]),o.children.push(l))}}return o},MP=async(i,e,t)=>{var s,n;const{displayUnits:r}=t,o={data:{Name:"QuantitySets"}};for(const a of e){const l={data:{Name:(s=a.Name)==null?void 0:s.value}};if(a.type===Dr){for(const h of a.Quantities){const{value:u}=h,c=await i.getProperties(u);if(!c)continue;const d=Object.keys(c).find(g=>g.includes("Value"));if(!(d&&c[d]))continue;let f=c[d].value,p="";if(r){const{name:g}=c[d],E=await jC(i,g)??{};p=E.symbol,f=c[d].value,typeof f=="number"&&E.digits&&(f=f.toFixed(E.digits))}const m={data:{Name:(n=c.Name)==null?void 0:n.value,Value:`${f} ${p??""}`}};l.children||(l.children=[]),l.children.push(m)}l.children&&(o.children||(o.children=[]),o.children.push(l))}}return o},FP=["OwnerHistory","ObjectPlacement","CompositionType"],WC=async(i,e)=>{const t={groupName:"Attributes",includeClass:!1,...e},{groupName:s,includeClass:n}=t,r={data:{Name:s}};n&&(r.children||(r.children=[]),r.children.push({data:{Name:"Class",Value:oc[i.type]}}));for(const o in i){if(FP.includes(o))continue;const a=i[o];if(a&&typeof a=="object"&&!Array.isArray(a)){if(a.type===RT)continue;const l={data:{Name:o,Value:a.value}};r.children||(r.children=[]),r.children.push(l)}}return r},co=(i,...e)=>{i.children||(i.children=[]),i.children.push(...e)},OP=async(i,e,t,s,n)=>{const r=i.get(Xi).getEntityRelations(e,t,"IsDefinedBy");if(r){const o=[],a=[];for(const u of r){const c=await e.getProperties(u);c&&(c.type===ks&&o.push(c),c.type===Dr&&a.push(c))}const l=await AP(e,o,n);l.children&&co(s,l);const h=await MP(e,a,n);h.children&&co(s,h)}},NP=async(i,e,t,s)=>{const n=i.get(Xi).getEntityRelations(e,t,"HasAssociations");if(n){const r=[],o=[];for(const h of n){const u=await e.getProperties(h);u&&(u.type===Li&&r.push(u),(u.type===BE||u.type===_T||u.type===AT||u.type===zE||u.type===VE)&&o.push(u))}const a=await SP(e,r);a.children&&co(s,a);const l=await xP(e,o);l.children&&co(s,l)}},PP=async(i,e,t,s)=>{const n=i.get(Xi).getEntityRelations(e,t,"HasAssignments");if(n){const r=[];for(const a of n){const l=await e.getProperties(a);l&&l.type===MT&&r.push(l)}const o=await wP(i,e,r);o.children&&co(s,o)}},LP=async(i,e,t,s)=>{const n=i.get(Xi).getEntityRelations(e,t,"ContainedInStructure");if(n&&n[0]){const r=n[0],o=await e.getProperties(r);if(o){const a=await WC(o,{groupName:"SpatialContainer"});co(s,a)}}};let Dh={};const DP=async(i,e,t)=>{var s;const n=i.get(Xi),r=i.get(bs),o=r.getModelIdMap(e);Object.keys(e).length===0&&(Dh={});const a=[];for(const l in o){const h=r.groups.get(l);if(!h)continue;const u=n.relationMaps[h.uuid];if(!u)continue;l in Dh||(Dh[l]=new Map);const c=Dh[l],d=o[l];for(const f of d){let p=c.get(f);if(p){a.push(p);continue}const m=await h.getProperties(f);if(!m)continue;p={data:{Name:(s=m.Name)==null?void 0:s.value}},a.push(p),c.set(f,p);const g=await WC(m,{includeClass:!0});p.children||(p.children=[]),p.children.push(g),u.get(f)&&(await OP(i,h,f,p,t),await NP(i,h,f,p),await PP(i,h,f,p),await LP(i,h,f,p))}}return a},UP=i=>{const e={emptySelectionWarning:!0,...i},{components:t,fragmentIdMap:s,emptySelectionWarning:n}=e;return j`
    <bim-table @cellcreated=${({detail:r})=>{const{cell:o}=r;o.column==="Name"&&!("Value"in o.rowData)&&(o.style.gridColumn="1 / -1")}} ${_t(async r=>{if(!r)return;const o=r;o.columns=[{name:"Name",width:"12rem"}],o.headersHidden=!0,o.loadFunction=()=>DP(t,s,i),await o.loadData(!0)&&o.dispatchEvent(new Event("datacomputed"))})}>
      ${n?j`
            <bim-label slot="missing-data" style="--bim-icon--c: gold" icon="ic:round-warning">
              Select some elements to display its properties
            </bim-label>
            `:null}
      <bim-label slot="error-loading" style="--bim-icon--c: #e72e2e" icon="bxs:error-alt">
        Something went wrong with the properties
      </bim-label>
    </bim-table>
  `},kP=i=>ot.create(UP,i),BP=Object.freeze(Object.defineProperty({__proto__:null,elementProperties:kP},Symbol.toStringTag,{value:"Module"})),Of=async(i,e,t,s)=>{var n;const r=[],o=i.get(Xi),a=await e.getProperties(t);if(!a)return r;const{type:l}=a,h={data:{Entity:oc[l],Name:(n=a.Name)==null?void 0:n.value,modelID:e.uuid,expressID:t}};for(const u of s){const c=o.getEntityRelations(e,t,u);if(!c)continue;h.children||(h.children=[]),h.data.relations=JSON.stringify(c);const d={};for(const f of c){const p=await Of(i,e,f,s);for(const m of p)if(m.data.relations)h.children.push(m);else{const g=e.data.get(f);if(!g){h.children.push(m);continue}const E=g[1][1],I=oc[E];I in d||(d[I]=[]),m.data.Entity=m.data.Name,delete m.data.Name,d[I].push(m)}}for(const f in d){const p=d[f],m=p.map(E=>E.data.expressID),g={data:{Entity:f,modelID:e.uuid,relations:JSON.stringify(m)},children:p};h.children.push(g)}}return r.push(h),r},zP=async(i,e,t,s)=>{const n=i.get(Xi),r=[];for(const o of e){let a;if(s)a={data:{Entity:o.name!==""?o.name:o.uuid},children:await Of(i,o,s,t)};else{const l=n.relationMaps[o.uuid],h=await o.getAllPropertiesOfType(Wc);if(!(l&&h))continue;const{expressID:u}=Object.values(h)[0];a={data:{Entity:o.name!==""?o.name:o.uuid},children:await Of(i,o,u,t)}}r.push(a)}return r};let Ki;const VP=(i,e)=>{const t=i.get(bs),{modelID:s,expressID:n,relations:r}=e;if(!s)return null;const o=t.groups.get(s);return o?o.getFragmentMap([n,...JSON.parse(r??"[]")]):null},$P=i=>{const{components:e,models:t,expressID:s}=i,n=i.selectHighlighterName??"select",r=i.hoverHighlighterName??"hover";Ki||(Ki=document.createElement("bim-table"),Ki.hiddenColumns=["modelID","expressID","relations"],Ki.columns=["Entity","Name"],Ki.headersHidden=!0,Ki.addEventListener("cellcreated",({detail:a})=>{const{cell:l}=a;l.column==="Entity"&&!("Name"in l.rowData)&&(l.style.gridColumn="1 / -1")})),Ki.addEventListener("rowcreated",a=>{a.stopImmediatePropagation();const{row:l}=a.detail,h=e.get(rF),u=VP(e,l.data);u&&Object.keys(u).length!==0&&(l.onmouseover=()=>{r&&(l.style.backgroundColor="var(--bim-ui_bg-contrast-20)",h.highlightByID(r,u,!0,!1,h.selection[n]??{}))},l.onmouseout=()=>{l.style.backgroundColor="",h.clear(r)},l.onclick=()=>{n&&h.highlightByID(n,u,!0,!0)})});const o=i.inverseAttributes??["IsDecomposedBy","ContainsElements"];return zP(e,t,o,s).then(a=>Ki.data=a),j`${Ki}`},HP=(i,e=!0)=>{const t=ot.create($P,i);if(e){const[,s]=t,{components:n}=i,r=n.get(bs),o=n.get(Xi),a=()=>s({models:r.groups.values()});o.onRelationsIndexed.add(a),r.onFragmentsDisposed.add(a)}return t},GP=Object.freeze(Object.defineProperty({__proto__:null,relationsTree:HP},Symbol.toStringTag,{value:"Module"})),da=(i,e)=>[...i.get(UE).list.values()].find(t=>t.world===e),YP=(i,e)=>j`
    <bim-color-input @input=${t=>{const s=t.target;i.color=new He(s.color)}} color=${e}></bim-color-input>
  `,jP=(i,e)=>{const{postproduction:t}=i,s=t.n8ao.configuration;return j`
    <bim-color-input @input=${n=>{const r=n.target;s.color=new He(r.color)}} color=${e}></bim-color-input>
  `},WP=(i,e)=>{const{color:t,opacity:s}=JSON.parse(e),{postproduction:n}=i,{customEffects:r}=n;return j`
    <bim-color-input @input=${o=>{const{color:a,opacity:l}=o.target;r.lineColor=new He(a).getHex(),l&&(r.opacity=l/100)}} color=${t} opacity=${s*100}></bim-color-input>
  `},XP=(i,e)=>j`
    <bim-color-input @input=${t=>{const s=t.target,n=new He(s.color);i.material.uniforms.uColor.value=n}} color=${e}></bim-color-input>
  `,qP=(i,e)=>{const{postproduction:t}=i;return j`
    <bim-checkbox @change=${s=>{const n=s.target;t.setPasses({ao:n.checked})}} .checked=${e}></bim-checkbox>
  `},ZP=(i,e)=>{const{postproduction:t}=i;return j`
    <bim-checkbox @change=${s=>{const n=s.target;t.setPasses({gamma:n.checked})}} .checked=${e}></bim-checkbox>
  `},QP=(i,e)=>{const{postproduction:t}=i;return j`
    <bim-checkbox @change=${s=>{const n=s.target;t.setPasses({custom:n.checked})}} .checked=${e}></bim-checkbox>
  `},As=(i,e,t,s=()=>{})=>j`
    <bim-checkbox .checked="${t}" @change="${n=>{const r=n.target.checked;i[e]=r,s(r)}}"></bim-checkbox> 
  `,Xe=(i,e,t,s)=>{const n={slider:!1,min:0,max:100,step:1,prefix:null,suffix:null,onInputSet:()=>{},...s},{slider:r,min:o,max:a,step:l,suffix:h,prefix:u,onInputSet:c}=n;return j`
    <bim-number-input
      .pref=${u}
      .suffix=${h}
      .slider=${r} 
      min=${o} 
      value="${t}" 
      max=${a} 
      step=${l} 
      @change="${d=>{const f=d.target.value;i[e]=f,c(f)}}"
    ></bim-number-input> 
  `},KP=i=>{const{components:e}=i,t=e.get(Xc);return j`
    <bim-table @cellcreated=${({detail:s})=>{const n=s.cell.parentNode;if(!n)return;const r=n.querySelector("bim-table-cell[column='Name']"),o=n.querySelector("bim-table-cell[column='Value']");r&&!o&&(r.style.gridColumn="1 / -1")}} ${_t(async s=>{var n,r,o,a,l;if(!s)return;const h=s;h.preserveStructureOnFilter=!0,h.dataTransform={Value:(c,d)=>{const f=d.World,p=t.list.get(f);if(!p)return c;const{scene:m,camera:g,renderer:E}=p,I=d.Name;if(I==="Grid"&&d.IsGridConfig&&typeof c=="boolean"){const v=da(e,p);return v?As(v,"visible",c):c}if(I==="Color"&&d.IsGridConfig&&typeof c=="string"){const v=da(e,p);return v?XP(v,c):c}if(I==="Distance"&&d.IsGridConfig&&typeof c=="number"){const v=da(e,p);return v?Xe(v.material.uniforms.uDistance,"value",c,{slider:!0,min:300,max:1e3}):c}if(I==="Size"&&d.IsGridConfig&&typeof c=="string"){const v=da(e,p);if(!v)return c;const{x:b,y:C}=JSON.parse(c),S=Xe(v.material.uniforms.uSize1,"value",b,{slider:!0,suffix:"m",prefix:"A",min:1,max:20}),_=Xe(v.material.uniforms.uSize2,"value",C,{slider:!0,suffix:"m",prefix:"B",min:1,max:20});return j`
            <div style="display: flex; gap: 0.25rem; width: 100%; flex-wrap: wrap">${S}${_}</div>
          `}if(I==="Near Frustum"&&g.three instanceof Sn&&typeof c=="number"){const v=g.three;return Xe(g.three,"near",c,{slider:!0,min:.1,max:10,step:.1,onInputSet:()=>v.updateProjectionMatrix()})}if(I==="Far Frustum"&&g.three instanceof Sn&&typeof c=="number"){const v=g.three;return Xe(g.three,"far",c,{slider:!0,min:300,max:2e3,step:10,onInputSet:()=>v.updateProjectionMatrix()})}if(I==="Field of View"&&g.three instanceof Sn&&typeof c=="number"){const v=g.three;return Xe(g.three,"fov",c,{slider:!0,min:10,max:120,onInputSet:()=>v.updateProjectionMatrix()})}if(I==="Invert Drag"&&g.hasCameraControls()&&typeof c=="boolean")return As(g.controls,"dollyDragInverted",c);if(I==="Dolly Speed"&&g.hasCameraControls()&&typeof c=="number")return Xe(g.controls,"dollySpeed",c,{slider:!0,min:.5,max:3,step:.1});if(I==="Truck Speed"&&g.hasCameraControls()&&typeof c=="number")return Xe(g.controls,"truckSpeed",c,{slider:!0,min:.5,max:6,step:.1});if(I==="Smooth Time"&&g.hasCameraControls()&&typeof c=="number")return Xe(g.controls,"smoothTime",c,{slider:!0,min:.01,max:2,step:.01});if(I==="Intensity"&&typeof c=="number"){if(d.Light&&typeof d.Light=="string"){const v=m.three.children.find(b=>b.uuid===d.Light);return v&&v instanceof Yo?Xe(v,"intensity",c,{slider:!0,min:0,max:10,step:.1}):c}if(d.IsAOConfig&&E instanceof We)return Xe(E.postproduction.n8ao.configuration,"intensity",c,{slider:!0,max:16,step:.1})}if(I==="Color"&&typeof c=="string"){const v=d.Light,b=m.three.children.find(C=>C.uuid===v);if(b&&b instanceof Yo)return YP(b,c);if(d.IsAOConfig&&E instanceof We)return jP(E,c)}if(I==="Ambient Oclussion"&&typeof c=="boolean"&&d.IsAOConfig&&E instanceof We)return qP(E,c);if(I==="Half Resolution"&&d.IsAOConfig&&E instanceof We&&typeof c=="boolean")return As(E.postproduction.n8ao.configuration,"halfRes",c);if(I==="Screen Space Radius"&&d.IsAOConfig&&E instanceof We&&typeof c=="boolean")return As(E.postproduction.n8ao.configuration,"screenSpaceRadius",c);if(I==="Radius"&&d.IsAOConfig&&E instanceof We&&typeof c=="number")return Xe(E.postproduction.n8ao.configuration,"aoRadius",c,{slider:!0,max:2,step:.1});if(I==="Denoise Samples"&&d.IsAOConfig&&E instanceof We&&typeof c=="number")return Xe(E.postproduction.n8ao.configuration,"denoiseSamples",c,{slider:!0,min:1,max:16});if(I==="Samples"&&d.IsAOConfig&&E instanceof We&&typeof c=="number")return Xe(E.postproduction.n8ao.configuration,"aoSamples",c,{slider:!0,min:1,max:16});if(I==="Denoise Radius"&&d.IsAOConfig&&E instanceof We&&typeof c=="number")return Xe(E.postproduction.n8ao.configuration,"denoiseRadius",c,{slider:!0,min:0,max:16,step:.1});if(I==="Distance Falloff"&&d.IsAOConfig&&E instanceof We&&typeof c=="number")return Xe(E.postproduction.n8ao.configuration,"distanceFalloff",c,{slider:!0,min:0,max:4,step:.1});if(I==="Directional Light"&&d.Light&&typeof d.Light=="string"&&typeof c=="boolean"){const v=m.three.children.find(b=>b.uuid===d.Light);return v&&v instanceof Yo?As(v,"visible",c):c}if(I==="Ambient Light"&&d.Light&&typeof d.Light=="string"&&typeof c=="boolean"){const v=m.three.children.find(b=>b.uuid===d.Light);return v&&v instanceof Yo?As(v,"visible",c):c}if(I==="Position"&&d.Light&&typeof d.Light=="string"&&typeof c=="string"){const v=m.three.children.find(F=>F.uuid===d.Light);if(!(v&&v instanceof Yo))return c;const{x:b,y:C,z:S}=JSON.parse(c),_=Xe(v.position,"x",b,{slider:!0,prefix:"X",suffix:"m",min:-50,max:50}),M=Xe(v.position,"y",C,{slider:!0,prefix:"Y",suffix:"m",min:-50,max:50}),A=Xe(v.position,"z",S,{slider:!0,prefix:"Z",suffix:"m",min:-50,max:50});return j`
            <div style="display: flex; gap: 0.25rem; width: 100%; flex-wrap: wrap">${_}${M}${A}</div>
          `}return I==="Custom Effects"&&d.IsCEConfig&&E instanceof We&&typeof c=="boolean"?QP(E,c):I==="Color"&&d.IsOutlineConfig&&E instanceof We&&typeof c=="string"?WP(E,c):I==="Tolerance"&&d.IsOutlineConfig&&E instanceof We&&typeof c=="number"?Xe(E.postproduction.customEffects,"tolerance",c,{slider:!0,min:0,max:6,step:.01}):I==="Outline"&&d.IsOutlineConfig&&E instanceof We&&typeof c=="boolean"?As(E.postproduction.customEffects,"outlineEnabled",c):I==="Gloss"&&d.IsGlossConfig&&E instanceof We&&typeof c=="boolean"?As(E.postproduction.customEffects,"glossEnabled",c):I==="Min"&&d.IsGlossConfig&&E instanceof We&&typeof c=="number"?Xe(E.postproduction.customEffects,"minGloss",c,{slider:!0,min:-.5,max:.5,step:.01}):I==="Max"&&d.IsGlossConfig&&E instanceof We&&typeof c=="number"?Xe(E.postproduction.customEffects,"maxGloss",c,{slider:!0,min:-.5,max:.5,step:.01}):I==="Exponent"&&d.IsGlossConfig&&E instanceof We&&typeof c=="number"?Xe(E.postproduction.customEffects,"glossExponent",c,{slider:!0,min:0,max:5,step:.01}):I==="Gamma Correction"&&d.IsGammaConfig&&E instanceof We&&typeof c=="boolean"?ZP(E,c):c}};const u=[];for(const[,c]of t.list){const{scene:d,camera:f,renderer:p}=c,m=da(e,c),g={data:{Name:c instanceof wT&&c.name||c.uuid},children:[]};if(d){const E={data:{Name:"Scene"}};if(m){const b=`#${m.material.uniforms.uColor.value.getHexString()}`,C=JSON.stringify({x:m.material.uniforms.uSize1.value,y:m.material.uniforms.uSize2.value}),S={data:{Name:"Grid",Value:m.three.visible,World:c.uuid,IsGridConfig:!0},children:[{data:{Name:"Color",Value:b,World:c.uuid,IsGridConfig:!0}},{data:{Name:"Size",Value:C,World:c.uuid,IsGridConfig:!0}},{data:{Name:"Distance",Value:m.material.uniforms.uDistance.value,World:c.uuid,IsGridConfig:!0}}]};E.children||(E.children=[]),E.children.push(S)}const I=d.three.children.filter(b=>b instanceof ST);for(const b of I){const C={data:{Name:"Directional Light",Value:b.visible,World:c.uuid,Light:b.uuid},children:[{data:{Name:"Position",Value:JSON.stringify(b.position),World:c.uuid,Light:b.uuid}},{data:{Name:"Intensity",Value:b.intensity,World:c.uuid,Light:b.uuid}},{data:{Name:"Color",Value:`#${b.color.getHexString()}`,World:c.uuid,Light:b.uuid}}]};E.children||(E.children=[]),E.children.push(C)}const v=d.three.children.filter(b=>b instanceof xT);for(const b of v){const C={data:{Name:"Ambient Light",Value:b.visible,World:c.uuid,Light:b.uuid},children:[{data:{Name:"Intensity",Value:b.intensity,World:c.uuid,Light:b.uuid}},{data:{Name:"Color",Value:`#${b.color.getHexString()}`,World:c.uuid,Light:b.uuid}}]};E.children||(E.children=[]),E.children.push(C)}E.children&&((n=E.children)==null?void 0:n.length)>0&&((r=g.children)==null||r.push(E))}if(f.three instanceof Sn){const E={data:{Name:"Perspective Camera"},children:[{data:{Name:"Near Frustum",Value:f.three.near,World:c.uuid}},{data:{Name:"Far Frustum",Value:f.three.far,World:c.uuid}},{data:{Name:"Field of View",Value:f.three.fov,World:c.uuid}}]};if(f.hasCameraControls()){const{controls:I}=f,v={dollyDragInverted:"Invert Drag",dollySpeed:"Dolly Speed",truckSpeed:"Truck Speed",smoothTime:"Smooth Time"};for(const b in v){const C=I[b];C!=null&&((o=E.children)==null||o.push({data:{Name:v[b],Value:C,World:c.uuid}}))}}(a=g.children)==null||a.push(E)}if(p instanceof We){const{postproduction:E}=p,I=E.n8ao.configuration,v={data:{Name:"Renderer"},children:[{data:{Name:"Gamma Correction",Value:E.settings.gamma??!1,World:c.uuid,IsGammaConfig:!0}},{data:{Name:"Ambient Oclussion",Value:E.settings.ao??!1,World:c.uuid,IsAOConfig:!0},children:[{data:{Name:"Samples",Value:I.aoSamples,World:c.uuid,IsAOConfig:!0}},{data:{Name:"Color",Value:`#${I.color.getHexString()}`,World:c.uuid,IsAOConfig:!0}},{data:{Name:"Half Resolution",Value:I.halfRes,World:c.uuid,IsAOConfig:!0}},{data:{Name:"Screen Space Radius",Value:I.screenSpaceRadius,World:c.uuid,IsAOConfig:!0}},{data:{Name:"Radius",Value:I.aoRadius,World:c.uuid,IsAOConfig:!0}},{data:{Name:"Intensity",Value:I.intensity,World:c.uuid,IsAOConfig:!0}},{data:{Name:"Distance Falloff",Value:I.distanceFalloff,World:c.uuid,IsAOConfig:!0}},{data:{Name:"Denoise Samples",Value:I.denoiseSamples,World:c.uuid,IsAOConfig:!0}},{data:{Name:"Denoise Radius",Value:I.denoiseRadius,World:c.uuid,IsAOConfig:!0}}]},{data:{Name:"Custom Effects",Value:E.settings.custom??!1,World:c.uuid,IsCEConfig:!0},children:[{data:{Name:"Gloss",Value:E.customEffects.glossEnabled,World:c.uuid,IsGlossConfig:!0},children:[{data:{Name:"Min",Value:E.customEffects.minGloss,World:c.uuid,IsGlossConfig:!0}},{data:{Name:"Max",Value:E.customEffects.maxGloss,World:c.uuid,IsGlossConfig:!0}},{data:{Name:"Exponent",Value:E.customEffects.glossExponent,World:c.uuid,IsGlossConfig:!0}}]},{data:{Name:"Outline",Value:E.customEffects.outlineEnabled,World:c.uuid,IsOutlineConfig:!0},children:[{data:{Name:"Color",get Value(){const b=new He(E.customEffects.lineColor),C=E.customEffects.opacity;return JSON.stringify({color:`#${b.getHexString()}`,opacity:C})},World:c.uuid,IsOutlineConfig:!0}},{data:{Name:"Tolerance",Value:E.customEffects.tolerance,World:c.uuid,IsOutlineConfig:!0}}]}]}]};(l=g.children)==null||l.push(v)}u.push(g)}h.columns=[{name:"Name",width:"11rem"}],h.hiddenColumns=["World","Light","IsAOConfig","IsCEConfig","IsGlossConfig","IsOutlineConfig","IsGammaConfig","IsGridConfig"],h.data=u})} headers-hidden expanded>
     <bim-label slot="missing-data" style="--bim-icon--c: gold" icon="ic:round-warning">
        No worlds to configure
      </bim-label>
    </bim-table>
  `},JP=(i,e=!0)=>{const t=ot.create(KP,i);if(e){const[,s]=t,{components:n}=i;n.get(Xc).list.onItemDeleted.add(()=>s())}return t},eL=Object.freeze(Object.defineProperty({__proto__:null,worldsConfiguration:JP},Symbol.toStringTag,{value:"Module"})),Br=(i,e)=>{const t=e[i],s=(t==null?void 0:t.name)??i,n=s.trim().split(/\s+/);let r,o;return n[0]&&n[0][0]&&(r=n[0][0].toUpperCase(),n[0][1]&&(o=n[0][1].toUpperCase())),n[1]&&n[1][0]&&(o=n[1][0].toUpperCase()),j`
    <div style="display: flex; gap: 0.25rem; overflow: hidden;">
      ${!(t!=null&&t.picture)&&(r||o)?j`
        <bim-label
          style=${Ln({borderRadius:"999px",padding:"0.375rem",backgroundColor:"var(--bim-ui_bg-contrast-20)",aspectRatio:"1",fontSize:"0.7rem"})}>${r}${o}</bim-label>
        `:null}
      <bim-label .img=${t==null?void 0:t.picture}>${s}</bim-label>
    </div>
  `},kt={users:{"jhon.doe@example.com":{name:"Jhon Doe"}},priorities:{"On hold":{icon:"flowbite:circle-pause-outline",style:{backgroundColor:"var(--bim-ui_bg-contrast-20)","--bim-icon--c":"#767676"}},Minor:{icon:"mingcute:arrows-down-fill",style:{backgroundColor:"var(--bim-ui_bg-contrast-20)","--bim-icon--c":"#4CAF50"}},Normal:{icon:"fa6-solid:grip-lines",style:{backgroundColor:"var(--bim-ui_bg-contrast-20)","--bim-icon--c":"#FB8C00"}},Major:{icon:"mingcute:arrows-up-fill",style:{backgroundColor:"var(--bim-ui_bg-contrast-20)","--bim-icon--c":"#FF5252"}},Critical:{icon:"ph:warning",style:{backgroundColor:"var(--bim-ui_bg-contrast-20)","--bim-icon--c":"#FB8C00"}}},statuses:{Active:{icon:"prime:circle-fill",style:{backgroundColor:"var(--bim-ui_bg-contrast-20)"}},"In Progress":{icon:"prime:circle-fill",style:{backgroundColor:"#fa89004d","--bim-label--c":"#FB8C00","--bim-icon--c":"#FB8C00"}},"In Review":{icon:"prime:circle-fill",style:{backgroundColor:"#9c6bff4d","--bim-label--c":"#9D6BFF","--bim-icon--c":"#9D6BFF"}},Done:{icon:"prime:circle-fill",style:{backgroundColor:"#4CAF504D","--bim-label--c":"#4CAF50","--bim-icon--c":"#4CAF50"}},Closed:{icon:"prime:circle-fill",style:{backgroundColor:"#414141","--bim-label--c":"#727272","--bim-icon--c":"#727272"}}},types:{Clash:{icon:"gg:close-r",style:{backgroundColor:"var(--bim-ui_bg-contrast-20)","--bim-icon--c":"#FB8C00"}},Issue:{icon:"mdi:bug-outline",style:{backgroundColor:"var(--bim-ui_bg-contrast-20)","--bim-icon--c":"#FF5252"}},Failure:{icon:"mdi:bug-outline",style:{backgroundColor:"var(--bim-ui_bg-contrast-20)","--bim-icon--c":"#FF5252"}},Inquiry:{icon:"majesticons:comment-line",style:{backgroundColor:"var(--bim-ui_bg-contrast-20)","--bim-icon--c":"#FF5252"}},Fault:{icon:"ph:warning",style:{backgroundColor:"var(--bim-ui_bg-contrast-20)","--bim-icon--c":"#FF5252"}},Remark:{icon:"ph:note-blank-bold",style:{backgroundColor:"var(--bim-ui_bg-contrast-20)","--bim-icon--c":"#FB8C00"}},Request:{icon:"mynaui:edit-one",style:{backgroundColor:"var(--bim-ui_bg-contrast-20)","--bim-icon--c":"#9D6BFF"}}}},zr={padding:"0.25rem 0.5rem",borderRadius:"999px","--bim-label--c":"var(--bim-ui_bg-contrast-100)"};/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Oc=globalThis,Nc=Oc.trustedTypes,Y0=Nc?Nc.createPolicy("lit-html",{createHTML:i=>i}):void 0,XC="$lit$",Ds=`lit$${Math.random().toFixed(9).slice(2)}$`,qC="?"+Ds,tL=`<${qC}>`,jn=document,al=()=>jn.createComment(""),ll=i=>i===null||typeof i!="object"&&typeof i!="function",Wp=Array.isArray,iL=i=>Wp(i)||typeof(i==null?void 0:i[Symbol.iterator])=="function",gd=`[ 	
\f\r]`,fa=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,j0=/-->/g,W0=/>/g,vn=RegExp(`>|${gd}(?:([^\\s"'>=/]+)(${gd}*=${gd}*(?:[^ 	
\f\r"'\`<>=]|("|')|))|$)`,"g"),X0=/'/g,q0=/"/g,ZC=/^(?:script|style|textarea|title)$/i,sL=i=>(e,...t)=>({_$litType$:i,strings:e,values:t}),Xp=sL(1),uo=Symbol.for("lit-noChange"),nt=Symbol.for("lit-nothing"),Z0=new WeakMap,Mn=jn.createTreeWalker(jn,129);function QC(i,e){if(!Wp(i)||!i.hasOwnProperty("raw"))throw Error("invalid template strings array");return Y0!==void 0?Y0.createHTML(e):e}const nL=(i,e)=>{const t=i.length-1,s=[];let n,r=e===2?"<svg>":e===3?"<math>":"",o=fa;for(let a=0;a<t;a++){const l=i[a];let h,u,c=-1,d=0;for(;d<l.length&&(o.lastIndex=d,u=o.exec(l),u!==null);)d=o.lastIndex,o===fa?u[1]==="!--"?o=j0:u[1]!==void 0?o=W0:u[2]!==void 0?(ZC.test(u[2])&&(n=RegExp("</"+u[2],"g")),o=vn):u[3]!==void 0&&(o=vn):o===vn?u[0]===">"?(o=n??fa,c=-1):u[1]===void 0?c=-2:(c=o.lastIndex-u[2].length,h=u[1],o=u[3]===void 0?vn:u[3]==='"'?q0:X0):o===q0||o===X0?o=vn:o===j0||o===W0?o=fa:(o=vn,n=void 0);const f=o===vn&&i[a+1].startsWith("/>")?" ":"";r+=o===fa?l+tL:c>=0?(s.push(h),l.slice(0,c)+XC+l.slice(c)+Ds+f):l+Ds+(c===-2?a:f)}return[QC(i,r+(i[t]||"<?>")+(e===2?"</svg>":e===3?"</math>":"")),s]};class hl{constructor({strings:e,_$litType$:t},s){let n;this.parts=[];let r=0,o=0;const a=e.length-1,l=this.parts,[h,u]=nL(e,t);if(this.el=hl.createElement(h,s),Mn.currentNode=this.el.content,t===2||t===3){const c=this.el.content.firstChild;c.replaceWith(...c.childNodes)}for(;(n=Mn.nextNode())!==null&&l.length<a;){if(n.nodeType===1){if(n.hasAttributes())for(const c of n.getAttributeNames())if(c.endsWith(XC)){const d=u[o++],f=n.getAttribute(c).split(Ds),p=/([.?@])?(.*)/.exec(d);l.push({type:1,index:r,name:p[2],strings:f,ctor:p[1]==="."?oL:p[1]==="?"?aL:p[1]==="@"?lL:Fu}),n.removeAttribute(c)}else c.startsWith(Ds)&&(l.push({type:6,index:r}),n.removeAttribute(c));if(ZC.test(n.tagName)){const c=n.textContent.split(Ds),d=c.length-1;if(d>0){n.textContent=Nc?Nc.emptyScript:"";for(let f=0;f<d;f++)n.append(c[f],al()),Mn.nextNode(),l.push({type:2,index:++r});n.append(c[d],al())}}}else if(n.nodeType===8)if(n.data===qC)l.push({type:2,index:r});else{let c=-1;for(;(c=n.data.indexOf(Ds,c+1))!==-1;)l.push({type:7,index:r}),c+=Ds.length-1}r++}}static createElement(e,t){const s=jn.createElement("template");return s.innerHTML=e,s}}function fo(i,e,t=i,s){var n,r;if(e===uo)return e;let o=s!==void 0?(n=t._$Co)==null?void 0:n[s]:t._$Cl;const a=ll(e)?void 0:e._$litDirective$;return(o==null?void 0:o.constructor)!==a&&((r=o==null?void 0:o._$AO)==null||r.call(o,!1),a===void 0?o=void 0:(o=new a(i),o._$AT(i,t,s)),s!==void 0?(t._$Co??(t._$Co=[]))[s]=o:t._$Cl=o),o!==void 0&&(e=fo(i,o._$AS(i,e.values),o,s)),e}class rL{constructor(e,t){this._$AV=[],this._$AN=void 0,this._$AD=e,this._$AM=t}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(e){const{el:{content:t},parts:s}=this._$AD,n=((e==null?void 0:e.creationScope)??jn).importNode(t,!0);Mn.currentNode=n;let r=Mn.nextNode(),o=0,a=0,l=s[0];for(;l!==void 0;){if(o===l.index){let h;l.type===2?h=new Vl(r,r.nextSibling,this,e):l.type===1?h=new l.ctor(r,l.name,l.strings,this,e):l.type===6&&(h=new hL(r,this,e)),this._$AV.push(h),l=s[++a]}o!==(l==null?void 0:l.index)&&(r=Mn.nextNode(),o++)}return Mn.currentNode=jn,n}p(e){let t=0;for(const s of this._$AV)s!==void 0&&(s.strings!==void 0?(s._$AI(e,s,t),t+=s.strings.length-2):s._$AI(e[t])),t++}}class Vl{get _$AU(){var e;return((e=this._$AM)==null?void 0:e._$AU)??this._$Cv}constructor(e,t,s,n){this.type=2,this._$AH=nt,this._$AN=void 0,this._$AA=e,this._$AB=t,this._$AM=s,this.options=n,this._$Cv=(n==null?void 0:n.isConnected)??!0}get parentNode(){let e=this._$AA.parentNode;const t=this._$AM;return t!==void 0&&(e==null?void 0:e.nodeType)===11&&(e=t.parentNode),e}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(e,t=this){e=fo(this,e,t),ll(e)?e===nt||e==null||e===""?(this._$AH!==nt&&this._$AR(),this._$AH=nt):e!==this._$AH&&e!==uo&&this._(e):e._$litType$!==void 0?this.$(e):e.nodeType!==void 0?this.T(e):iL(e)?this.k(e):this._(e)}O(e){return this._$AA.parentNode.insertBefore(e,this._$AB)}T(e){this._$AH!==e&&(this._$AR(),this._$AH=this.O(e))}_(e){this._$AH!==nt&&ll(this._$AH)?this._$AA.nextSibling.data=e:this.T(jn.createTextNode(e)),this._$AH=e}$(e){var t;const{values:s,_$litType$:n}=e,r=typeof n=="number"?this._$AC(e):(n.el===void 0&&(n.el=hl.createElement(QC(n.h,n.h[0]),this.options)),n);if(((t=this._$AH)==null?void 0:t._$AD)===r)this._$AH.p(s);else{const o=new rL(r,this),a=o.u(this.options);o.p(s),this.T(a),this._$AH=o}}_$AC(e){let t=Z0.get(e.strings);return t===void 0&&Z0.set(e.strings,t=new hl(e)),t}k(e){Wp(this._$AH)||(this._$AH=[],this._$AR());const t=this._$AH;let s,n=0;for(const r of e)n===t.length?t.push(s=new Vl(this.O(al()),this.O(al()),this,this.options)):s=t[n],s._$AI(r),n++;n<t.length&&(this._$AR(s&&s._$AB.nextSibling,n),t.length=n)}_$AR(e=this._$AA.nextSibling,t){var s;for((s=this._$AP)==null?void 0:s.call(this,!1,!0,t);e&&e!==this._$AB;){const n=e.nextSibling;e.remove(),e=n}}setConnected(e){var t;this._$AM===void 0&&(this._$Cv=e,(t=this._$AP)==null||t.call(this,e))}}class Fu{get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}constructor(e,t,s,n,r){this.type=1,this._$AH=nt,this._$AN=void 0,this.element=e,this.name=t,this._$AM=n,this.options=r,s.length>2||s[0]!==""||s[1]!==""?(this._$AH=Array(s.length-1).fill(new String),this.strings=s):this._$AH=nt}_$AI(e,t=this,s,n){const r=this.strings;let o=!1;if(r===void 0)e=fo(this,e,t,0),o=!ll(e)||e!==this._$AH&&e!==uo,o&&(this._$AH=e);else{const a=e;let l,h;for(e=r[0],l=0;l<r.length-1;l++)h=fo(this,a[s+l],t,l),h===uo&&(h=this._$AH[l]),o||(o=!ll(h)||h!==this._$AH[l]),h===nt?e=nt:e!==nt&&(e+=(h??"")+r[l+1]),this._$AH[l]=h}o&&!n&&this.j(e)}j(e){e===nt?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,e??"")}}class oL extends Fu{constructor(){super(...arguments),this.type=3}j(e){this.element[this.name]=e===nt?void 0:e}}class aL extends Fu{constructor(){super(...arguments),this.type=4}j(e){this.element.toggleAttribute(this.name,!!e&&e!==nt)}}class lL extends Fu{constructor(e,t,s,n,r){super(e,t,s,n,r),this.type=5}_$AI(e,t=this){if((e=fo(this,e,t,0)??nt)===uo)return;const s=this._$AH,n=e===nt&&s!==nt||e.capture!==s.capture||e.once!==s.once||e.passive!==s.passive,r=e!==nt&&(s===nt||n);n&&this.element.removeEventListener(this.name,this,s),r&&this.element.addEventListener(this.name,this,e),this._$AH=e}handleEvent(e){var t;typeof this._$AH=="function"?this._$AH.call(((t=this.options)==null?void 0:t.host)??this.element,e):this._$AH.handleEvent(e)}}class hL{constructor(e,t,s){this.element=e,this.type=6,this._$AN=void 0,this._$AM=t,this.options=s}get _$AU(){return this._$AM._$AU}_$AI(e){fo(this,e)}}const Q0=Oc.litHtmlPolyfillSupport;Q0==null||Q0(hl,Vl),(Oc.litHtmlVersions??(Oc.litHtmlVersions=[])).push("3.2.1");const cL=(i,e,t)=>{const s=(t==null?void 0:t.renderBefore)??e;let n=s._$litPart$;if(n===void 0){const r=(t==null?void 0:t.renderBefore)??null;s._$litPart$=n=new Vl(e.insertBefore(al(),r),r,void 0,t??{})}return n._$AI(i),n};/**
 * @license
 * Copyright 2020 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const uL=i=>i.strings===void 0;/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const dL={ATTRIBUTE:1,CHILD:2,PROPERTY:3,BOOLEAN_ATTRIBUTE:4,EVENT:5,ELEMENT:6},fL=i=>(...e)=>({_$litDirective$:i,values:e});let pL=class{constructor(i){}get _$AU(){return this._$AM._$AU}_$AT(i,e,t){this._$Ct=i,this._$AM=e,this._$Ci=t}_$AS(i,e){return this.update(i,e)}update(i,e){return this.render(...e)}};/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Oa=(i,e)=>{var t;const s=i._$AN;if(s===void 0)return!1;for(const n of s)(t=n._$AO)==null||t.call(n,e,!1),Oa(n,e);return!0},Pc=i=>{let e,t;do{if((e=i._$AM)===void 0)break;t=e._$AN,t.delete(i),i=e}while((t==null?void 0:t.size)===0)},KC=i=>{for(let e;e=i._$AM;i=e){let t=e._$AN;if(t===void 0)e._$AN=t=new Set;else if(t.has(i))break;t.add(i),EL(e)}};function mL(i){this._$AN!==void 0?(Pc(this),this._$AM=i,KC(this)):this._$AM=i}function gL(i,e=!1,t=0){const s=this._$AH,n=this._$AN;if(n!==void 0&&n.size!==0)if(e)if(Array.isArray(s))for(let r=t;r<s.length;r++)Oa(s[r],!1),Pc(s[r]);else s!=null&&(Oa(s,!1),Pc(s));else Oa(this,i)}const EL=i=>{i.type==dL.CHILD&&(i._$AP??(i._$AP=gL),i._$AQ??(i._$AQ=mL))};let IL=class extends pL{constructor(){super(...arguments),this._$AN=void 0}_$AT(i,e,t){super._$AT(i,e,t),KC(this),this.isConnected=i._$AU}_$AO(i,e=!0){var t,s;i!==this.isConnected&&(this.isConnected=i,i?(t=this.reconnected)==null||t.call(this):(s=this.disconnected)==null||s.call(this)),e&&(Oa(this,i),Pc(this))}setValue(i){if(uL(this._$Ct))this._$Ct._$AI(i,this);else{const e=[...this._$Ct._$AH];e[this._$Ci]=i,this._$Ct._$AI(e,this,0)}}disconnected(){}reconnected(){}};/**
 * @license
 * Copyright 2020 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Nf=()=>new bL;let bL=class{};const Ed=new WeakMap,vL=fL(class extends IL{render(i){return nt}update(i,[e]){var t;const s=e!==this.Y;return s&&this.Y!==void 0&&this.rt(void 0),(s||this.lt!==this.ct)&&(this.Y=e,this.ht=(t=i.options)==null?void 0:t.host,this.rt(this.ct=i.element)),nt}rt(i){if(this.isConnected||(i=void 0),typeof this.Y=="function"){const e=this.ht??globalThis;let t=Ed.get(e);t===void 0&&(t=new WeakMap,Ed.set(e,t)),t.get(this.Y)!==void 0&&this.Y.call(this.ht,void 0),t.set(this.Y,i),i!==void 0&&this.Y.call(this.ht,i)}else this.Y.value=i}get lt(){var i,e;return typeof this.Y=="function"?(i=Ed.get(this.ht??globalThis))==null?void 0:i.get(this.Y):(e=this.Y)==null?void 0:e.value}disconnected(){this.lt===this.ct&&this.rt(void 0)}reconnected(){this.rt(this.ct)}}),yL={dueDate:i=>{if(typeof i=="string"&&i.trim()!=="")return new Date(i)},status:i=>{if(Array.isArray(i)&&i.length!==0)return i[0]},type:i=>{if(Array.isArray(i)&&i.length!==0)return i[0]},priority:i=>{if(Array.isArray(i)&&i.length!==0)return i[0]},stage:i=>{if(Array.isArray(i)&&i.length!==0)return i[0]},assignedTo:i=>{if(Array.isArray(i)&&i.length!==0)return i[0]},labels:i=>{if(Array.isArray(i))return new Set(i)}},JC=i=>{const{components:e,topic:t,value:s,onCancel:n,onSubmit:r,styles:o}=i,a=r??(()=>{}),l=e.get(qc),h=(s==null?void 0:s.title)??(t==null?void 0:t.title)??Ss.default.title,u=(s==null?void 0:s.status)??(t==null?void 0:t.status)??Ss.default.status,c=(s==null?void 0:s.type)??(t==null?void 0:t.type)??Ss.default.type,d=(s==null?void 0:s.priority)??(t==null?void 0:t.priority)??Ss.default.priority,f=(s==null?void 0:s.assignedTo)??(t==null?void 0:t.assignedTo)??Ss.default.assignedTo,p=(s==null?void 0:s.labels)??(t==null?void 0:t.labels)??Ss.default.labels,m=(s==null?void 0:s.stage)??(t==null?void 0:t.stage)??Ss.default.stage,g=(s==null?void 0:s.description)??(t==null?void 0:t.description)??Ss.default.description,E=t!=null&&t.dueDate?t.dueDate.toISOString().split("T")[0]:null,I=new Set([...l.config.statuses]);u&&I.add(u);const v=new Set([...l.config.types]);c&&v.add(c);const b=new Set([...l.config.priorities]);d&&b.add(d);const C=new Set([...l.config.users]);f&&C.add(f);const S=new Set([...l.config.labels]);if(p)for(const y of p)S.add(y);const _=new Set([...l.config.stages]);m&&_.add(m);const M=Nf(),A=async()=>{const{value:y}=M;if(!y)return;const U=ol(y,yL);if(t)t.set(U),await a(t);else{const B=l.create(U);await a(B)}},F=Nf(),D=y=>{const{value:U}=F;if(!U)return;const B=y.target;U.disabled=B.value.trim()===""},x=`btn-${Yt.newRandomId()}`,N=`btn-${Yt.newRandomId()}`;return j`
    <div ${_t(M)} style="display: flex; flex-direction: column; gap: 0.75rem;">
      <div style="display: flex; gap: 0.375rem">
        <bim-text-input @input=${D} vertical label="Title" name="title" .value=${h}></bim-text-input>
        ${t?j`
            <bim-dropdown vertical label="Status" name="status" required>
              ${[...I].map(y=>j`<bim-option label=${y} .checked=${u===y}></bim-option>`)}
            </bim-dropdown>`:j``}
      </div>
      <div style="display: flex; gap: 0.375rem">
        <bim-dropdown vertical label="Type" name="type" required>
          ${[...v].map(y=>j`<bim-option label=${y} .checked=${c===y}></bim-option>`)}
        </bim-dropdown>
        <bim-dropdown vertical label="Priority" name="priority">
          ${[...b].map(y=>j`<bim-option label=${y} .checked=${d===y}></bim-option>`)}
        </bim-dropdown>
      </div>
      <div style="display: flex; gap: 0.375rem">
        <bim-dropdown vertical label="Labels" name="labels" multiple>
          ${[...S].map(y=>j`<bim-option label=${y} .checked=${p?[...p].includes(y):!1}></bim-option>`)}
        </bim-dropdown>
        <bim-dropdown vertical label="Assignee" name="assignedTo">
          ${[...C].map(y=>{const U=o!=null&&o.users?o.users[y]:null,B=U?U.name:y,k=U==null?void 0:U.picture;return j`<bim-option label=${B} value=${y} .img=${k} .checked=${f===y}></bim-option>`})}
        </bim-dropdown>
      </div>
      <div style="display: flex; gap: 0.375rem">
        <bim-text-input vertical type="date" label="Due Date" name="dueDate" .value=${E}></bim-text-input> 
        <bim-dropdown vertical label="Stage" name="stage">
          ${[..._].map(y=>j`<bim-option label=${y} .checked=${m===y}></bim-option>`)}
        </bim-dropdown>
      </div>
      <bim-text-input vertical label="Description" name="description" type="area" .value=${g??null}></bim-text-input>
      <div style="justify-content: right; display: flex; gap: 0.375rem">
        <style>
          #${N} {
            background-color: transparent;
          }

          #${N}:hover {
            --bim-label--c: #FF5252;
          }

          #${x}:hover {
            background-color: #329936;
          }
        </style>
        <bim-button id=${N} style="flex: 0" @click=${n} label="Cancel"></bim-button>
        <bim-button id=${x} style="flex: 0" @click=${A} ${_t(F)} label=${t?"Update Topic":"Add Topic"} icon=${t?"tabler:refresh":"mi:add"}></bim-button>
      </div>
    </div>
  `},CL=i=>{const{components:e,dataStyles:t,onTopicEnter:s}=i,n=e.get(qc),r=i.topics??n.list.values();return j`
    <bim-table no-indentation ${_t(o=>{if(!o)return;const a=o;a.hiddenColumns.length===0&&(a.hiddenColumns=["Guid"]),a.columns=["Title"],a.dataTransform={Title:(l,h)=>{const{Guid:u}=h;if(typeof u!="string")return l;const c=n.list.get(u);if(!c)return l;const d=`btn-${Yt.newRandomId()}`;return j`
          <div style="display: flex; overflow: hidden;">
            <style>
              #${d} {
                background-color: transparent
              }

              #${d}:hover {
                --bim-label--c: var(--bim-ui_accent-base)
              }
            </style>
            <bim-button @click=${()=>{s&&s(c)}} id=${d} icon="iconamoon:enter-duotone"></bim-button>
            <bim-label>${l}</bim-label>
          </div>
        `},Priority:l=>{if(typeof l!="string")return l;const h=((t==null?void 0:t.priorities)??kt.priorities)[l];return j`
          <bim-label
            .icon=${h==null?void 0:h.icon}
            style=${Ln({...zr,...h==null?void 0:h.style})}
          >${l}
          </bim-label>
        `},Status:l=>{if(typeof l!="string")return l;const h=((t==null?void 0:t.statuses)??kt.statuses)[l];return j`
          <bim-label
            .icon=${h==null?void 0:h.icon}
            style=${Ln({...zr,...h==null?void 0:h.style})}
          >${l}
          </bim-label>
        `},Type:l=>{if(typeof l!="string")return l;const h=((t==null?void 0:t.types)??kt.types)[l];return j`
          <bim-label
            .icon=${h==null?void 0:h.icon}
            style=${Ln({...zr,...h==null?void 0:h.style})}
          >${l}
          </bim-label>
        `},Author:l=>typeof l!="string"?l:Br(l,(t==null?void 0:t.users)??kt.users),Assignee:l=>typeof l!="string"?l:Br(l,(t==null?void 0:t.users)??kt.users)},a.data=[...r].map(l=>{var h;return{data:{Guid:l.guid,Title:l.title,Status:l.status,Description:l.description??"",Author:l.creationAuthor,Assignee:l.assignedTo??"",Date:l.creationDate.toDateString(),DueDate:((h=l.dueDate)==null?void 0:h.toDateString())??"",Type:l.type,Priority:l.priority??""}}})})}>
      <bim-label slot="missing-data" icon="ph:warning-fill" style="--bim-icon--c: gold;">There are no topics to display</bim-label>
    </bim-table>
  `},e1=(i,e=!0)=>{const t=ot.create(CL,i);if(e){const{components:s,topics:n}=i,[,r]=t,o=s.get(qc);if(o.list.onItemUpdated.add(()=>r()),o.list.onItemDeleted.add(()=>r()),n)for(const a of n)a.relatedTopics.onItemAdded.add(()=>r()),a.relatedTopics.onItemDeleted.add(()=>r()),a.relatedTopics.onCleared.add(()=>r());else o.list.onItemSet.add(()=>r())}return t},TL=Object.freeze(Object.defineProperty({__proto__:null,topicsList:e1},Symbol.toStringTag,{value:"Module"})),wL=i=>{const{topic:e,styles:t,viewpoint:s}=i,n={delete:!0,...i.actions};return j`
    <bim-table no-indentation ${_t(r=>{if(!r)return;const o=r;o.headersHidden=!0,o.hiddenColumns=["guid","author"],o.dataTransform={Comment:(l,h)=>{const{guid:u}=h;if(typeof u!="string")return l;const c=e.comments.get(u);if(!c)return l;const d=()=>{e.comments.delete(u)},f=`btn-${Yt.newRandomId()}`;return j`
          <div style="display: flex; flex-direction: column; gap: 0.25rem; flex: 1">
            <div style="display: flex; justify-content: space-between;">
              <div style="display: flex; gap: 0.375rem;">
                ${Br(c.author,t??kt.users)}
                <bim-label style="color: var(--bim-ui_bg-contrast-40)">@ ${c.date.toDateString()}</bim-label>
              </div>
              <div>
                <style>
                  #${f} {
                    background-color: transparent;
                    --bim-label--c: var(--bim-ui_bg-contrast-60)
                  }

                  #${f}:hover {
                    --bim-label--c: #FF5252;
                  }
                </style>
                ${n!=null&&n.delete?j`<bim-button @click=${d} id=${f} icon="majesticons:delete-bin"></bim-button>`:null}
              </div>
            </div>
            <bim-label style="margin-left: 1.7rem; white-space: normal">${c.comment}</bim-label>
          </div>
        `}};let a=e.comments.values();s&&(a=[...e.comments.values()].filter(l=>l.viewpoint===s)),o.data=[...a].map(l=>({data:{guid:l.guid,Comment:l.comment,author:(()=>{const h=t;if(!h)return l.author;const u=h[l.author];return(u==null?void 0:u.name)??l.author})()}}))})}>
      <bim-label slot="missing-data" icon="ph:warning-fill" style="--bim-icon--c: gold;">This topic has no comments</bim-label>
    </bim-table>
  `},t1=(i,e=!0)=>{const t=ot.create(wL,i);if(e){const{topic:s}=i,[n,r]=t;s.comments.onItemSet.add(()=>r()),s.comments.onItemUpdated.add(()=>r()),s.comments.onItemDeleted.add(()=>r()),s.comments.onCleared.add(()=>r())}return t},SL=Object.freeze(Object.defineProperty({__proto__:null,topicComments:t1},Symbol.toStringTag,{value:"Module"})),xL=i=>{var e;const{components:t,topic:s}=i,n={selectComponents:!0,colorizeComponent:!0,resetColors:!0,updateCamera:!0,delete:!0,unlink:!!s,...i.actions},r=t.get(ep),o=((e=i.topic)==null?void 0:e.viewpoints)??r.list.keys(),a=[];for(const l of o){const h=r.list.get(l);h&&a.push(h)}return j`
    <bim-table no-indentation ${_t(l=>{if(!l)return;const h=l;h.addEventListener("cellcreated",({detail:u})=>{const{cell:c}=u;c.style.padding="0.25rem"}),h.headersHidden=!0,h.hiddenColumns=["Guid"],h.columns=["Title",{name:"Actions",width:"auto"}],h.dataTransform={Actions:(u,c)=>{const{Guid:d}=c;if(!(d&&typeof d=="string"))return d||"";const f=r.list.get(d);return f?j`
          <bim-button icon="ph:eye-fill" @click=${()=>f.go()}></bim-button>
          ${Object.values(n).includes(!0)?j`
                <bim-button icon="prime:ellipsis-v">
                  <bim-context-menu>
                    ${n.selectComponents?j`<bim-button label="Select Components" @click=${()=>console.log(f.selection)}></bim-button> `:null}
                    ${n.colorizeComponent?j`<bim-button label="Colorize Components" @click=${()=>f.applyColors()}></bim-button> `:null}
                    ${n.resetColors?j`<bim-button label="Reset Colors" @click=${()=>f.resetColors()}></bim-button> `:null}
                    ${n.updateCamera?j`<bim-button label="Update Camera" @click=${()=>f.updateCamera()}></bim-button> `:null}
                    ${n.unlink?j`<bim-button .disabled=${!s} label="Unlink" @click=${()=>s==null?void 0:s.viewpoints.delete(f.guid)}></bim-button> `:null}
                    ${n.delete?j`<bim-button label="Delete" @click=${()=>r.list.delete(f.guid)}></bim-button>`:null}
                  </bim-context-menu>
                </bim-button>
              `:null}
        `:d}},h.data=a.map((u,c)=>({data:{Guid:u.guid,Title:u.title??`Viewpoint ${i.topic?c+1:""}`,Actions:""}}))})}>
      <bim-label slot="missing-data" icon="ph:warning-fill" style="--bim-icon--c: gold;">No viewpoints to show</bim-label>
    </bim-table>
  `},i1=(i,e=!0)=>{const t=ot.create(xL,i),{components:s,topic:n}=i;if(e){const[,r]=t,o=s.get(ep);o.list.onItemUpdated.add(()=>r()),o.list.onItemDeleted.add(()=>r()),o.list.onCleared.add(()=>r()),n?(n.viewpoints.onItemAdded.add(()=>r()),n.viewpoints.onItemDeleted.add(()=>r()),n.viewpoints.onCleared.add(()=>r())):o.list.onItemSet.add(()=>r())}return t},RL=Object.freeze(Object.defineProperty({__proto__:null,viewpointsList:i1},Symbol.toStringTag,{value:"Module"}));({...EP,...vP,...TP,...BP,...GP,...eL,...TL,...SL,...RL});const _L=i=>j`
    <bim-panel-section fixed label="New Topic" name="topic">
      ${JC(i)}
    </bim-panel-section>
  `,AL=i=>ot.create(_L,i),ML=Object.freeze(Object.defineProperty({__proto__:null,topic:AL},Symbol.toStringTag,{value:"Module"}));({...ML});const FL=(i,e)=>{const{components:t,editing:s,topic:n,styles:r}=i,o={update:!0,...i.actions},a=(r==null?void 0:r.priorities)??kt.priorities,l=(r==null?void 0:r.statuses)??kt.statuses,h=(r==null?void 0:r.types)??kt.types;let u;n!=null&&n.priority&&(u=a[n.priority]);let c;n!=null&&n.type&&(c=h[n.type]);let d;n!=null&&n.type&&(d=l[n.status]);let f,p;return s?f=JC({components:t,topic:n,styles:r,onSubmit:()=>{e({editing:!1})},onCancel:()=>{e({editing:!1})}}):p=j`
      <div>
        <bim-label>Title</bim-label>
        <bim-label style="--bim-label--c: var(--bim-ui_bg-contrast-100)">${n.title}</bim-label>
      </div>

      ${n.description?j`
            <div>
              <bim-label>Description</bim-label>
              <bim-label style="--bim-label--c: var(--bim-ui_bg-contrast-100); white-space: normal">${n.description}</bim-label>
            </div>
          `:null}

      <div style="display: flex; gap: 0.375rem">
        <bim-label>Status</bim-label>
        <bim-label .icon=${d==null?void 0:d.icon} style=${Ln({...zr,...d==null?void 0:d.style})}
        >${n.status}
        </bim-label>
      </div>

      <div style="display: flex; gap: 0.375rem">
        <bim-label>Type</bim-label>
        <bim-label .icon=${c==null?void 0:c.icon} style=${Ln({...zr,...c==null?void 0:c.style})}
        >${n.type}
        </bim-label>
      </div>

      ${n.priority?j`
            <div style="display: flex; gap: 0.375rem">
              <bim-label>Priority</bim-label>
              <bim-label .icon=${u==null?void 0:u.icon} style=${Ln({...zr,...u==null?void 0:u.style})}
              >${n.priority}
              </bim-label>
            </div>`:null}

      <div style="display: flex; gap: 0.375rem">
        <bim-label>Author</bim-label>
        ${Br(n.creationAuthor,(r==null?void 0:r.users)??kt.users)}
      </div>

      ${n.assignedTo?j`
          <div style="display: flex; gap: 0.375rem">
            <bim-label>Assignee</bim-label>
            ${Br(n.assignedTo,(r==null?void 0:r.users)??kt.users)}
          </div>`:null}

      ${n.dueDate?j`
          <div style="display: flex; gap: 0.375rem">
            <bim-label>Due Date</bim-label>
            <bim-label style="--bim-label--c: var(--bim-ui_bg-contrast-100)">${n.dueDate.toDateString()}</bim-label>
          </div>`:null}

      ${n.modifiedAuthor?j`
          <div style="display: flex; gap: 0.375rem">
            <bim-label>Modified By</bim-label>
            ${Br(n.modifiedAuthor,(r==null?void 0:r.users)??kt.users)}
          </div>`:null}

      ${n.modifiedDate?j`
            <div style="display: flex; gap: 0.375rem">
              <bim-label>Modified Date</bim-label>
              <bim-label style="--bim-label--c: var(--bim-ui_bg-contrast-100)">${n.modifiedDate.toDateString()}</bim-label>
            </div>`:null}

      ${n.labels.size!==0?j`
          <div style="display: flex; gap: 0.375rem">
            <bim-label>Labels</bim-label>
            <bim-label style="--bim-label--c: var(--bim-ui_bg-contrast-100)">${[...n.labels].join(", ")}</bim-label>
          </div>`:null}

      ${o.update?j`
              <bim-button @click=${()=>e({editing:!0})} label="Update Information" icon="tabler:refresh"></bim-button> 
            `:null}
    `,j`
    <div style="display: flex; flex-direction: column; gap: 0.75rem;">
      ${s?f:p}
    </div>
  `},OL=i=>ot.create(FL,i),NL=Object.freeze(Object.defineProperty({__proto__:null,topicInformation:OL},Symbol.toStringTag,{value:"Module"})),PL=(i,e)=>{const{showInput:t,topic:s,styles:n}=i,r={add:!0,delete:!0,...i.actions},o=`input-${Yt.newRandomId()}`,a=`btn-${Yt.newRandomId()}`,l=`btn-${Yt.newRandomId()}`,h=()=>document.getElementById(a),u=()=>document.getElementById(o),c=()=>{const v=u();return v?v.value.trim().length>0:!1},d=()=>{e({showInput:!0})},f=()=>{const v=u(),b=c();v&&b&&(s.createComment(v.value),e({showInput:!1}))},p=()=>{e({showInput:!1})},m=()=>{const v=h();if(v){if(!u()){v.disabled=!0;return}v.disabled=!c()}},g=j`
    ${r.add?j`<bim-button @click=${d} label="Add Comment" icon="majesticons:comment-line"></bim-button>`:null}
  `,E=j`
    <bim-text-input id=${o} @input=${m} @keypress=${v=>{v.code==="Enter"&&v.ctrlKey&&f()}} type="area"></bim-text-input>

    <div style="justify-content: right; display: flex; gap: 0.375rem">
      <style>
        #${a} {
          background-color: #329936;
        }  

        #${l} {
          background-color: transparent;
        }

        #${l}:hover {
          --bim-label--c: #FF5252;
        }
      </style>

      <bim-button style="flex: 0" id=${l} @click=${p} label="Cancel"></bim-button>
      <bim-button style="flex: 0" id=${a} @click=${f} label="Accept" icon="material-symbols:check" disabled></bim-button>
    </div>
  `,[I]=t1({topic:s,actions:r,styles:n??kt.users});return j`
    <div style="display: flex; flex-direction: column; gap: 0.5rem">
      ${I}
      ${t?E:g}
    </div>
  `},LL=i=>ot.create(PL,i),DL=Object.freeze(Object.defineProperty({__proto__:null,topicComments:LL},Symbol.toStringTag,{value:"Module"})),UL=(i,e)=>{const{components:t,topic:s,linking:n}=i,r=t.get(qc),o={link:!0,...i.actions},[a,l]=e1({components:t,topics:[...s.relatedTopics].map(d=>r.list.get(d)).map(d=>d)});a.headersHidden=!0,a.hiddenColumns=["Guid","Status","Description","Author","Assignee","Date","DueDate","Type","Priority"];const h=()=>j`
      <bim-text-input placeholder="Search..." debounce="100" @input=${d=>{const f=d.target;f instanceof Ei&&(a.queryString=f.value)}}></bim-text-input> 
    `;let u,c;if(n){a.selectableRows=!0,l({topics:void 0});const d=a.data.filter(E=>{const{Guid:I}=E.data;return typeof I!="string"?!1:s.relatedTopics.has(I)}).map(E=>E.data);a.selection=new Set(d);const f=()=>{const E=[...a.selection].map(({Guid:I})=>typeof I!="string"?null:r.list.has(I)?I:null).map(I=>I);s.relatedTopics.clear(),s.relatedTopics.add(...E),e({linking:!1})},p=()=>{e({linking:!1})},m=`btn-${Yt.newRandomId()}`,g=`btn-${Yt.newRandomId()}`;u=j`
      <div style="display: flex; gap: 0.25rem">
        <style>
          #${m}:hover {
            background-color: #329936;
          }  

          #${g} {
            background-color: transparent;
          }

          #${g}:hover {
            --bim-label--c: #FF5252;
          }
        </style>
        ${h()}
        <div style="display: flex; justify-content: right; gap: 0.25rem">
          <bim-button id=${g} @click=${p} style="flex: 0" label="Cancel" icon="material-symbols:close"></bim-button>
          <bim-button id=${m} @click=${f} style="flex: 0" label="Accept" icon="material-symbols:check"></bim-button>
        </div>
      </div> 
    `}else{a.selectableRows=!1;const d=()=>{e({linking:!0})};c=j`
      <div style="display: flex; justify-content: right; gap: 0.25rem">
        ${h()}
        ${o.link?j`<bim-button style="flex: 0" @click=${d} icon="tabler:link"></bim-button>`:null}
      </div> 
    `}return j`
    <div style="display: flex; flex-direction: column; gap: 0.5rem;">
      ${c}
      ${u}
      ${a}
    </div> 
  `},kL=i=>ot.create(UL,i),BL=Object.freeze(Object.defineProperty({__proto__:null,topicRelations:kL},Symbol.toStringTag,{value:"Module"})),zL=(i,e)=>{const{components:t,topic:s,world:n,linking:r}=i,o={add:!0,link:!0,selectComponents:!0,colorizeComponent:!0,resetColors:!0,updateCamera:!0,delete:!0,unlink:!0,...i.actions},a=t.get(ep),[l,h]=i1({components:t,topic:s,actions:o}),u=()=>j`
      <bim-text-input placeholder="Search..." debounce="100" @input=${f=>{const p=f.target;p instanceof Ei&&(l.queryString=p.value)}}></bim-text-input> 
    `;let c,d;if(r){l.selectableRows=!0,h({topic:void 0,actions:{delete:!1,updateCamera:!1,colorizeComponent:!1,resetColors:!1}});const f=l.data.filter(I=>{const{Guid:v}=I.data;return typeof v!="string"?!1:s.viewpoints.has(v)}).map(I=>I.data);l.selection=new Set(f);const p=()=>{const I=[...l.selection].map(({Guid:v})=>typeof v!="string"?null:a.list.has(v)?v:null).map(v=>v);s.viewpoints.clear(),s.viewpoints.add(...I),e({linking:!1})},m=()=>{e({linking:!1})},g=`btn-${Yt.newRandomId()}`,E=`btn-${Yt.newRandomId()}`;c=j`
      <div style="display: flex; gap: 0.25rem">
        <style>
          #${g}:hover {
            background-color: #329936;
          }  

          #${E} {
            background-color: transparent;
          }

          #${E}:hover {
            --bim-label--c: #FF5252;
          }
        </style>
        ${u()}
        <div style="display: flex; justify-content: right; gap: 0.25rem">
          <bim-button id=${E} @click=${m} style="flex: 0" label="Cancel" icon="material-symbols:close"></bim-button>
          <bim-button id=${g} @click=${p} style="flex: 0" label="Accept" icon="material-symbols:check"></bim-button>
        </div>
      </div> 
    `}else{l.selectableRows=!1,h({topic:s,actions:o});const f=()=>{if(!(s&&n&&o.add&&!r))return;const E=a.create(n);s.viewpoints.add(E.guid)},p=()=>{e({linking:!0})},m=j`<bim-button style="flex: 0" @click=${f} .disabled=${!n} icon="mi:add"></bim-button>`,g=j`<bim-button style="flex: 0" @click=${p} icon="tabler:link"></bim-button>`;d=j`
      <div style="display: flex; justify-content: right; gap: 0.25rem">
        ${u()}
        <div style="display: flex; justify-content: right; gap: 0.25rem">
          ${o.add?m:null}
          ${o.link?g:null}
        </div>
      </div> 
    `}return j`
    <div style="display: flex; flex-direction: column; gap: 0.5rem;">
      ${d}
      ${c}
      ${l}
    </div> 
  `},VL=i=>ot.create(zL,i),$L=Object.freeze(Object.defineProperty({__proto__:null,topicViewpoints:VL},Symbol.toStringTag,{value:"Module"}));({...NL,...DL,...BL,...$L});/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Jh=globalThis,qp=Jh.ShadowRoot&&(Jh.ShadyCSS===void 0||Jh.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,Zp=Symbol(),K0=new WeakMap;let s1=class{constructor(i,e,t){if(this._$cssResult$=!0,t!==Zp)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=i,this.t=e}get styleSheet(){let i=this.o;const e=this.t;if(qp&&i===void 0){const t=e!==void 0&&e.length===1;t&&(i=K0.get(e)),i===void 0&&((this.o=i=new CSSStyleSheet).replaceSync(this.cssText),t&&K0.set(e,i))}return i}toString(){return this.cssText}};const HL=i=>new s1(typeof i=="string"?i:i+"",void 0,Zp),Qp=(i,...e)=>{const t=i.length===1?i[0]:e.reduce((s,n,r)=>s+(o=>{if(o._$cssResult$===!0)return o.cssText;if(typeof o=="number")return o;throw Error("Value passed to 'css' function must be a 'css' function result: "+o+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(n)+i[r+1],i[0]);return new s1(t,i,Zp)},GL=(i,e)=>{if(qp)i.adoptedStyleSheets=e.map(t=>t instanceof CSSStyleSheet?t:t.styleSheet);else for(const t of e){const s=document.createElement("style"),n=Jh.litNonce;n!==void 0&&s.setAttribute("nonce",n),s.textContent=t.cssText,i.appendChild(s)}},J0=qp?i=>i:i=>i instanceof CSSStyleSheet?(e=>{let t="";for(const s of e.cssRules)t+=s.cssText;return HL(t)})(i):i;/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const{is:YL,defineProperty:jL,getOwnPropertyDescriptor:WL,getOwnPropertyNames:XL,getOwnPropertySymbols:qL,getPrototypeOf:ZL}=Object,po=globalThis,eE=po.trustedTypes,QL=eE?eE.emptyScript:"",tE=po.reactiveElementPolyfillSupport,Na=(i,e)=>i,Lc={toAttribute(i,e){switch(e){case Boolean:i=i?QL:null;break;case Object:case Array:i=i==null?i:JSON.stringify(i)}return i},fromAttribute(i,e){let t=i;switch(e){case Boolean:t=i!==null;break;case Number:t=i===null?null:Number(i);break;case Object:case Array:try{t=JSON.parse(i)}catch{t=null}}return t}},Kp=(i,e)=>!YL(i,e),iE={attribute:!0,type:String,converter:Lc,reflect:!1,hasChanged:Kp};Symbol.metadata??(Symbol.metadata=Symbol("metadata")),po.litPropertyMetadata??(po.litPropertyMetadata=new WeakMap);class Sr extends HTMLElement{static addInitializer(e){this._$Ei(),(this.l??(this.l=[])).push(e)}static get observedAttributes(){return this.finalize(),this._$Eh&&[...this._$Eh.keys()]}static createProperty(e,t=iE){if(t.state&&(t.attribute=!1),this._$Ei(),this.elementProperties.set(e,t),!t.noAccessor){const s=Symbol(),n=this.getPropertyDescriptor(e,s,t);n!==void 0&&jL(this.prototype,e,n)}}static getPropertyDescriptor(e,t,s){const{get:n,set:r}=WL(this.prototype,e)??{get(){return this[t]},set(o){this[t]=o}};return{get(){return n==null?void 0:n.call(this)},set(o){const a=n==null?void 0:n.call(this);r.call(this,o),this.requestUpdate(e,a,s)},configurable:!0,enumerable:!0}}static getPropertyOptions(e){return this.elementProperties.get(e)??iE}static _$Ei(){if(this.hasOwnProperty(Na("elementProperties")))return;const e=ZL(this);e.finalize(),e.l!==void 0&&(this.l=[...e.l]),this.elementProperties=new Map(e.elementProperties)}static finalize(){if(this.hasOwnProperty(Na("finalized")))return;if(this.finalized=!0,this._$Ei(),this.hasOwnProperty(Na("properties"))){const t=this.properties,s=[...XL(t),...qL(t)];for(const n of s)this.createProperty(n,t[n])}const e=this[Symbol.metadata];if(e!==null){const t=litPropertyMetadata.get(e);if(t!==void 0)for(const[s,n]of t)this.elementProperties.set(s,n)}this._$Eh=new Map;for(const[t,s]of this.elementProperties){const n=this._$Eu(t,s);n!==void 0&&this._$Eh.set(n,t)}this.elementStyles=this.finalizeStyles(this.styles)}static finalizeStyles(e){const t=[];if(Array.isArray(e)){const s=new Set(e.flat(1/0).reverse());for(const n of s)t.unshift(J0(n))}else e!==void 0&&t.push(J0(e));return t}static _$Eu(e,t){const s=t.attribute;return s===!1?void 0:typeof s=="string"?s:typeof e=="string"?e.toLowerCase():void 0}constructor(){super(),this._$Ep=void 0,this.isUpdatePending=!1,this.hasUpdated=!1,this._$Em=null,this._$Ev()}_$Ev(){var e;this._$ES=new Promise(t=>this.enableUpdating=t),this._$AL=new Map,this._$E_(),this.requestUpdate(),(e=this.constructor.l)==null||e.forEach(t=>t(this))}addController(e){var t;(this._$EO??(this._$EO=new Set)).add(e),this.renderRoot!==void 0&&this.isConnected&&((t=e.hostConnected)==null||t.call(e))}removeController(e){var t;(t=this._$EO)==null||t.delete(e)}_$E_(){const e=new Map,t=this.constructor.elementProperties;for(const s of t.keys())this.hasOwnProperty(s)&&(e.set(s,this[s]),delete this[s]);e.size>0&&(this._$Ep=e)}createRenderRoot(){const e=this.shadowRoot??this.attachShadow(this.constructor.shadowRootOptions);return GL(e,this.constructor.elementStyles),e}connectedCallback(){var e;this.renderRoot??(this.renderRoot=this.createRenderRoot()),this.enableUpdating(!0),(e=this._$EO)==null||e.forEach(t=>{var s;return(s=t.hostConnected)==null?void 0:s.call(t)})}enableUpdating(e){}disconnectedCallback(){var e;(e=this._$EO)==null||e.forEach(t=>{var s;return(s=t.hostDisconnected)==null?void 0:s.call(t)})}attributeChangedCallback(e,t,s){this._$AK(e,s)}_$EC(e,t){var s;const n=this.constructor.elementProperties.get(e),r=this.constructor._$Eu(e,n);if(r!==void 0&&n.reflect===!0){const o=(((s=n.converter)==null?void 0:s.toAttribute)!==void 0?n.converter:Lc).toAttribute(t,n.type);this._$Em=e,o==null?this.removeAttribute(r):this.setAttribute(r,o),this._$Em=null}}_$AK(e,t){var s;const n=this.constructor,r=n._$Eh.get(e);if(r!==void 0&&this._$Em!==r){const o=n.getPropertyOptions(r),a=typeof o.converter=="function"?{fromAttribute:o.converter}:((s=o.converter)==null?void 0:s.fromAttribute)!==void 0?o.converter:Lc;this._$Em=r,this[r]=a.fromAttribute(t,o.type),this._$Em=null}}requestUpdate(e,t,s){if(e!==void 0){if(s??(s=this.constructor.getPropertyOptions(e)),!(s.hasChanged??Kp)(this[e],t))return;this.P(e,t,s)}this.isUpdatePending===!1&&(this._$ES=this._$ET())}P(e,t,s){this._$AL.has(e)||this._$AL.set(e,t),s.reflect===!0&&this._$Em!==e&&(this._$Ej??(this._$Ej=new Set)).add(e)}async _$ET(){this.isUpdatePending=!0;try{await this._$ES}catch(t){Promise.reject(t)}const e=this.scheduleUpdate();return e!=null&&await e,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){var e;if(!this.isUpdatePending)return;if(!this.hasUpdated){if(this.renderRoot??(this.renderRoot=this.createRenderRoot()),this._$Ep){for(const[r,o]of this._$Ep)this[r]=o;this._$Ep=void 0}const n=this.constructor.elementProperties;if(n.size>0)for(const[r,o]of n)o.wrapped!==!0||this._$AL.has(r)||this[r]===void 0||this.P(r,this[r],o)}let t=!1;const s=this._$AL;try{t=this.shouldUpdate(s),t?(this.willUpdate(s),(e=this._$EO)==null||e.forEach(n=>{var r;return(r=n.hostUpdate)==null?void 0:r.call(n)}),this.update(s)):this._$EU()}catch(n){throw t=!1,this._$EU(),n}t&&this._$AE(s)}willUpdate(e){}_$AE(e){var t;(t=this._$EO)==null||t.forEach(s=>{var n;return(n=s.hostUpdated)==null?void 0:n.call(s)}),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(e)),this.updated(e)}_$EU(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$ES}shouldUpdate(e){return!0}update(e){this._$Ej&&(this._$Ej=this._$Ej.forEach(t=>this._$EC(t,this[t]))),this._$EU()}updated(e){}firstUpdated(e){}}Sr.elementStyles=[],Sr.shadowRootOptions={mode:"open"},Sr[Na("elementProperties")]=new Map,Sr[Na("finalized")]=new Map,tE==null||tE({ReactiveElement:Sr}),(po.reactiveElementVersions??(po.reactiveElementVersions=[])).push("2.0.4");/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */let Dn=class extends Sr{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){var i;const e=super.createRenderRoot();return(i=this.renderOptions).renderBefore??(i.renderBefore=e.firstChild),e}update(i){const e=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(i),this._$Do=cL(e,this.renderRoot,this.renderOptions)}connectedCallback(){var i;super.connectedCallback(),(i=this._$Do)==null||i.setConnected(!0)}disconnectedCallback(){var i;super.disconnectedCallback(),(i=this._$Do)==null||i.setConnected(!1)}render(){return uo}};var sE;Dn._$litElement$=!0,Dn.finalized=!0,(sE=globalThis.litElementHydrateSupport)==null||sE.call(globalThis,{LitElement:Dn});const nE=globalThis.litElementPolyfillSupport;nE==null||nE({LitElement:Dn});(globalThis.litElementVersions??(globalThis.litElementVersions=[])).push("4.1.1");/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const KL={attribute:!0,type:String,converter:Lc,reflect:!1,hasChanged:Kp},JL=(i=KL,e,t)=>{const{kind:s,metadata:n}=t;let r=globalThis.litPropertyMetadata.get(n);if(r===void 0&&globalThis.litPropertyMetadata.set(n,r=new Map),r.set(t.name,i),s==="accessor"){const{name:o}=t;return{set(a){const l=e.get.call(this);e.set.call(this,a),this.requestUpdate(o,l,i)},init(a){return a!==void 0&&this.P(o,void 0,i),a}}}if(s==="setter"){const{name:o}=t;return function(a){const l=this[o];e.call(this,a),this.requestUpdate(o,l,i)}}throw Error("Unsupported decorator location: "+s)};function Lt(i){return(e,t)=>typeof t=="object"?JL(i,e,t):((s,n,r)=>{const o=n.hasOwnProperty(r);return n.constructor.createProperty(r,o?{...s,wrapped:!0}:s),o?Object.getOwnPropertyDescriptor(n,r):void 0})(i,e,t)}/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */function e3(i){return Lt({...i,state:!0,attribute:!1})}class t3 extends kn{constructor(e=document.createElement("div")){super(),this.isCSS2DObject=!0,this.element=e,this.element.style.position="absolute",this.element.style.userSelect="none",this.element.setAttribute("draggable",!1),this.center=new Ue(.5,.5),this.addEventListener("removed",function(){this.traverse(function(t){t.element instanceof Element&&t.element.parentNode!==null&&t.element.parentNode.removeChild(t.element)})})}copy(e,t){return super.copy(e,t),this.element=e.element.cloneNode(!0),this.center=e.center,this}}new P;new ce;new ce;new P;new P;class i3{constructor(e,t){this._group=new jr,this._frustum=new yT,this._frustumMat=new ce,this._regenerateDelay=200,this._regenerateCounter=0,this.material=new Is({color:"#2e3338"}),this.numbers=new jr,this.maxRegenerateRetrys=4,this.gridsFactor=5,this._scaleX=1,this._scaleY=1,this._offsetX=0,this._offsetY=0,this._camera=e,this._container=t;const s=this.newGrid(-1),n=this.newGrid(-2);this.grids={main:s,secondary:n},this._group.add(n,s,this.numbers)}set scaleX(e){this._scaleX=e,this.regenerate()}get scaleX(){return this._scaleX}set scaleY(e){this._scaleY=e,this.regenerate()}get scaleY(){return this._scaleY}set offsetX(e){this._offsetX=e,this.regenerate()}get offsetX(){return this._offsetX}set offsetY(e){this._offsetY=e,this.regenerate()}get offsetY(){return this._offsetY}get(){return this._group}dispose(){const{main:e,secondary:t}=this.grids;e.removeFromParent(),t.removeFromParent(),e.geometry.dispose(),e.material.dispose(),t.geometry.dispose(),t.material.dispose()}regenerate(){if(!this.isGridReady()){if(this._regenerateCounter++,this._regenerateCounter>this.maxRegenerateRetrys)throw new Error("Grid could not be regenerated");setTimeout(()=>this.regenerate,this._regenerateDelay);return}this._regenerateCounter=0,this._camera.updateMatrix(),this._camera.updateMatrixWorld();const e=this._frustumMat.multiplyMatrices(this._camera.projectionMatrix,this._camera.matrixWorldInverse);this._frustum.setFromProjectionMatrix(e);const{planes:t}=this._frustum,s=t[0].constant*-t[0].normal.x,n=t[1].constant*-t[1].normal.x,r=t[2].constant*-t[2].normal.y,o=t[3].constant*-t[3].normal.y,a=Math.abs(s-n),l=Math.abs(o-r),{clientWidth:h,clientHeight:u}=this._container,c=Math.max(h,u),d=Math.max(a,l)/c,f=Math.ceil(Math.log10(a/this.scaleX)),p=Math.ceil(Math.log10(l/this.scaleY)),m=10**(f-2)*this.scaleX,g=10**(p-2)*this.scaleY,E=m*this.gridsFactor,I=g*this.gridsFactor,v=Math.ceil(l/I),b=Math.ceil(a/E),C=Math.ceil(l/g),S=Math.ceil(a/m),_=m*Math.ceil(n/m),M=g*Math.ceil(r/g),A=E*Math.ceil(n/E),F=I*Math.ceil(r/I),D=[...this.numbers.children];for(const Te of D)Te.removeFromParent();this.numbers.children=[];const x=[],N=9*d,y=1e4,U=A+this._offsetX,B=Math.round(Math.abs(U/this.scaleX)*y)/y,k=(b-1)*E,W=Math.round(Math.abs((U+k)/this.scaleX)*y)/y,z=Math.max(B,W).toString().length*N;let he=Math.ceil(z/E)*E;for(let Te=0;Te<b;Te++){let we=A+Te*E;x.push(we,o,0,we,r,0),we=Math.round(we*y)/y,he=Math.round(he*y)/y;const fe=we%he;if(!(E<1||I<1)&&Math.abs(fe)>.01)continue;const ye=this.newNumber((we+this._offsetX)/this.scaleX),Ce=12*d;ye.position.set(we,r+Ce,0)}for(let Te=0;Te<v;Te++){const we=F+Te*I;x.push(n,we,0,s,we,0);const fe=this.newNumber(we/this.scaleY);let ye=12;fe.element.textContent&&(ye+=4*fe.element.textContent.length);const Ce=ye*d;fe.position.set(n+Ce,we,0)}const G=[];for(let Te=0;Te<S;Te++){const we=_+Te*m;G.push(we,o,0,we,r,0)}for(let Te=0;Te<C;Te++){const we=M+Te*g;G.push(n,we,0,s,we,0)}const H=new Ct(new Float32Array(x),3),pe=new Ct(new Float32Array(G),3),{main:le,secondary:re}=this.grids;le.geometry.setAttribute("position",H),re.geometry.setAttribute("position",pe)}newNumber(e){const t=document.createElement("bim-label");t.textContent=String(Math.round(e*100)/100);const s=new t3(t);return this.numbers.add(s),s}newGrid(e){const t=new Ne,s=new PE(t,this.material);return s.frustumCulled=!1,s.renderOrder=e,s}isGridReady(){const e=this._camera.projectionMatrix.elements;for(let t=0;t<e.length;t++){const s=e[t];if(Number.isNaN(s))return!1}return!0}}var s3=Object.defineProperty,n3=Object.getOwnPropertyDescriptor,$l=(i,e,t,s)=>{for(var n=n3(e,t),r=i.length-1,o;r>=0;r--)(o=i[r])&&(n=o(e,t,n)||n);return n&&s3(e,t,n),n};const n1=class extends Dn{constructor(){super(...arguments),this._grid=null,this._world=null,this.resize=()=>{this._world&&this._grid&&this._grid.regenerate()}}set gridColor(e){if(this._gridColor=e,!(e&&this._grid))return;const t=Number(e.replace("#","0x"));Number.isNaN(t)||this._grid.material.color.setHex(t)}get gridColor(){return this._gridColor}set gridScaleX(e){this._gridScaleX=e,e&&this._grid&&(this._grid.scaleX=e)}get gridScaleX(){return this._gridScaleX}set gridScaleY(e){this._gridScaleY=e,e&&this._grid&&(this._grid.scaleY=e)}get gridScaleY(){return this._gridScaleY}get gridOffsetX(){var e;return((e=this._grid)==null?void 0:e.offsetX)||0}set gridOffsetX(e){this._grid&&(this._grid.offsetX=e)}get gridOffsetY(){var e;return((e=this._grid)==null?void 0:e.offsetY)||0}set gridOffsetY(e){this._grid&&(this._grid.offsetY=e)}set components(e){this.dispose();const t=e.get(Xc).create();this._world=t,t.scene=new LE(e),t.scene.setup(),t.renderer=new $v(e,this);const s=new DE(e);t.camera=s;const n=new i3(s.threeOrtho,this);this._grid=n,t.scene.three.add(n.get()),s.controls.addEventListener("update",()=>n.regenerate()),setTimeout(async()=>{t.camera.updateAspect(),s.set("Plan"),await s.controls.setLookAt(0,0,100,0,0,0),await s.projection.set("Orthographic"),s.controls.dollySpeed=3,s.controls.draggingSmoothTime=.085,s.controls.maxZoom=1e3,s.controls.zoom(4)})}get world(){return this._world}dispose(){var e;(e=this.world)==null||e.dispose(),this._world=null,this._grid=null}connectedCallback(){super.connectedCallback(),new ResizeObserver(this.resize).observe(this)}disconnectedCallback(){super.disconnectedCallback(),this.dispose()}render(){return Xp`<slot></slot>`}};n1.styles=Qp`
    :host {
      position: relative;
      display: flex;
      min-width: 0px;
      height: 100%;
      background-color: var(--bim-ui_bg-base);
    }
  `;let Hl=n1;$l([Lt({type:String,attribute:"grid-color",reflect:!0})],Hl.prototype,"gridColor");$l([Lt({type:Number,attribute:"grid-scale-x",reflect:!0})],Hl.prototype,"gridScaleX");$l([Lt({type:Number,attribute:"grid-scale-y",reflect:!0})],Hl.prototype,"gridScaleY");$l([Lt({type:Number,attribute:"grid-offset-x",reflect:!0})],Hl.prototype,"gridOffsetX");$l([Lt({type:Number,attribute:"grid-offset-y",reflect:!0})],Hl.prototype,"gridOffsetY");var r3=Object.defineProperty,hn=(i,e,t,s)=>{for(var n=void 0,r=i.length-1,o;r>=0;r--)(o=i[r])&&(n=o(e,t,n)||n);return n&&r3(e,t,n),n};const r1=class extends Dn{constructor(){super(...arguments),this._defaults={size:60},this._cssMatrix3D="",this._matrix=new ce,this._onRightClick=new Event("rightclick"),this._onLeftClick=new Event("leftclick"),this._onTopClick=new Event("topclick"),this._onBottomClick=new Event("bottomclick"),this._onFrontClick=new Event("frontclick"),this._onBackClick=new Event("backclick"),this._camera=null,this._epsilon=e=>Math.abs(e)<1e-10?0:e}set camera(e){this._camera=e,this.updateOrientation()}get camera(){return this._camera}updateOrientation(){if(!this.camera)return;this._matrix.extractRotation(this.camera.matrixWorldInverse);const{elements:e}=this._matrix;this._cssMatrix3D=`matrix3d(
      ${this._epsilon(e[0])},
      ${this._epsilon(-e[1])},
      ${this._epsilon(e[2])},
      ${this._epsilon(e[3])},
      ${this._epsilon(e[4])},
      ${this._epsilon(-e[5])},
      ${this._epsilon(e[6])},
      ${this._epsilon(e[7])},
      ${this._epsilon(e[8])},
      ${this._epsilon(-e[9])},
      ${this._epsilon(e[10])},
      ${this._epsilon(e[11])},
      ${this._epsilon(e[12])},
      ${this._epsilon(-e[13])},
      ${this._epsilon(e[14])},
      ${this._epsilon(e[15])})
    `}render(){const e=this.size??this._defaults.size;return Xp`
      <style>
        .face,
        .cube {
          width: ${e}px;
          height: ${e}px;
          transform: translateZ(-300px) ${this._cssMatrix3D};
        }

        .face-right {
          translate: ${e/2}px 0 0;
        }

        .face-left {
          translate: ${-e/2}px 0 0;
        }

        .face-top {
          translate: 0 ${e/2}px 0;
        }

        .face-bottom {
          translate: 0 ${-e/2}px 0;
        }

        .face-front {
          translate: 0 0 ${e/2}px;
        }

        .face-back {
          translate: 0 0 ${-e/2}px;
        }
      </style>
      <div class="parent">
        <div class="cube">
          <div
            class="face x-direction face-right"
            @click=${()=>this.dispatchEvent(this._onRightClick)}
          >
            ${this.rightText}
          </div>
          <div
            class="face x-direction face-left"
            @click=${()=>this.dispatchEvent(this._onLeftClick)}
          >
            ${this.leftText}
          </div>
          <div
            class="face y-direction face-top"
            @click=${()=>this.dispatchEvent(this._onTopClick)}
          >
            ${this.topText}
          </div>
          <div
            class="face y-direction face-bottom"
            @click=${()=>this.dispatchEvent(this._onBottomClick)}
          >
            ${this.bottomText}
          </div>
          <div
            class="face z-direction face-front"
            @click=${()=>this.dispatchEvent(this._onFrontClick)}
          >
            ${this.frontText}
          </div>
          <div
            class="face z-direction face-back"
            @click=${()=>this.dispatchEvent(this._onBackClick)}
          >
            ${this.backText}
          </div>
        </div>
      </div>
    `}};r1.styles=Qp`
    :host {
      position: absolute;
      z-index: 999;
      bottom: 1rem;
      right: 1rem;
    }

    .parent {
      perspective: 400px;
    }

    .cube {
      position: relative;
      transform-style: preserve-3d;
    }

    .face {
      position: absolute;
      display: flex;
      justify-content: center;
      user-select: none;
      align-items: center;
      cursor: pointer;
      text-align: center;
      transition: all 0.2s;
      color: var(--bim-view-cube--c, white);
      font-size: var(--bim-view-cube--fz, --bim-ui_size-2xl);
    }

    .x-direction {
      // background-color: var(--bim-view-cube_x--bgc, #c93830DD);
      background-color: var(--bim-view-cube_x--bgc, #01a6bcde);
    }

    .x-direction:hover {
      background-color: var(--bim-ui_accent-base, white);
    }

    .y-direction {
      // background-color: var(--bim-view-cube_y--bgc, #54ff19DD);
      background-color: var(--bim-view-cube_y--bgc, #8d0ec8de);
    }

    .y-direction:hover {
      background-color: var(--bim-ui_accent-base, white);
    }

    .z-direction {
      // background-color: var(--bim-view-cube_z--bgc, #3041c9DD);
      background-color: var(--bim-view-cube_z--bgc, #2718afde);
    }

    .z-direction:hover {
      background-color: var(--bim-ui_accent-base, white);
    }

    .face-front {
      transform: rotateX(180deg);
    }

    .face-back {
      transform: rotateZ(180deg);
    }

    .face-top {
      transform: rotateX(90deg);
    }

    .face-bottom {
      transform: rotateX(270deg);
    }

    .face-right {
      transform: rotateY(-270deg) rotateX(180deg);
    }

    .face-left {
      transform: rotateY(-90deg) rotateX(180deg);
    }
  `;let cn=r1;hn([Lt({type:Number,reflect:!0})],cn.prototype,"size");hn([Lt({type:String,attribute:"right-text",reflect:!0})],cn.prototype,"rightText");hn([Lt({type:String,attribute:"left-text",reflect:!0})],cn.prototype,"leftText");hn([Lt({type:String,attribute:"top-text",reflect:!0})],cn.prototype,"topText");hn([Lt({type:String,attribute:"bottom-text",reflect:!0})],cn.prototype,"bottomText");hn([Lt({type:String,attribute:"front-text",reflect:!0})],cn.prototype,"frontText");hn([Lt({type:String,attribute:"back-text",reflect:!0})],cn.prototype,"backText");hn([e3()],cn.prototype,"_cssMatrix3D");var o3=Object.defineProperty,a3=(i,e,t,s)=>{for(var n=void 0,r=i.length-1,o;r>=0;r--)(o=i[r])&&(n=o(e,t,n)||n);return n&&o3(e,t,n),n};const o1=class extends Dn{constructor(){super(...arguments),this.world=null,this._components=null,this._viewport=Nf()}set components(e){var t;if(this._components=e,this.components){const s=this.components.get(Xc);this.world=s.create(),this.world.name=this.name}else(t=this.world)==null||t.dispose(),this.world=null}get components(){return this._components}connectedCallback(){super.connectedCallback(),this.world&&(this.world.enabled=!0)}disconnectedCallback(){super.disconnectedCallback(),this.world&&(this.world.enabled=!1)}dispose(){this.components=null,this.remove()}firstUpdated(){const{value:e}=this._viewport;if(!(this.components&&e&&this.world))return;const t=new LE(this.components);this.world.scene=t,t.setup(),t.three.background=null;const s=new We(this.components,e);this.world.renderer=s;const{postproduction:n}=s,r=new DE(this.components);this.world.camera=r;const o=this.components.get(UE).create(this.world);o.material.uniforms.uColor.value=new He(4342338),o.material.uniforms.uSize1.value=2,o.material.uniforms.uSize2.value=8,n.enabled=!0,n.customEffects.excludedMeshes.push(o.three),n.setPasses({custom:!0,ao:!0,gamma:!0}),n.customEffects.lineColor=1513756}onSlotChange(){const e=new Event("slotchange");this.dispatchEvent(e)}render(){return Xp` <bim-viewport ${vL(this._viewport)}>
      <slot @slotchange=${this.onSlotChange}></slot>
    </bim-viewport>`}};o1.styles=Qp``;let l3=o1;a3([Lt({type:String,reflect:!0})],l3.prototype,"name");function h3(i){i("EPSG:4326","+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees"),i("EPSG:4269","+title=NAD83 (long/lat) +proj=longlat +a=6378137.0 +b=6356752.31414036 +ellps=GRS80 +datum=NAD83 +units=degrees"),i("EPSG:3857","+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs");for(var e=1;e<=60;++e)i("EPSG:"+(32600+e),"+proj=utm +zone="+e+" +datum=WGS84 +units=m"),i("EPSG:"+(32700+e),"+proj=utm +zone="+e+" +south +datum=WGS84 +units=m");i.WGS84=i["EPSG:4326"],i["EPSG:3785"]=i["EPSG:3857"],i.GOOGLE=i["EPSG:3857"],i["EPSG:900913"]=i["EPSG:3857"],i["EPSG:102113"]=i["EPSG:3857"]}var Wn=1,Xn=2,Vr=3,c3=4,Pf=5,rE=6378137,u3=6356752314e-3,oE=.0066943799901413165,Pa=484813681109536e-20,te=Math.PI/2,d3=.16666666666666666,f3=.04722222222222222,p3=.022156084656084655,oe=1e-10,gt=.017453292519943295,Bi=57.29577951308232,Fe=Math.PI/4,cl=Math.PI*2,Et=3.14159265359,Dt={};Dt.greenwich=0;Dt.lisbon=-9.131906111111;Dt.paris=2.337229166667;Dt.bogota=-74.080916666667;Dt.madrid=-3.687938888889;Dt.rome=12.452333333333;Dt.bern=7.439583333333;Dt.jakarta=106.807719444444;Dt.ferro=-17.666666666667;Dt.brussels=4.367975;Dt.stockholm=18.058277777778;Dt.athens=23.7163375;Dt.oslo=10.722916666667;const m3={mm:{to_meter:.001},cm:{to_meter:.01},ft:{to_meter:.3048},"us-ft":{to_meter:1200/3937},fath:{to_meter:1.8288},kmi:{to_meter:1852},"us-ch":{to_meter:20.1168402336805},"us-mi":{to_meter:1609.34721869444},km:{to_meter:1e3},"ind-ft":{to_meter:.30479841},"ind-yd":{to_meter:.91439523},mi:{to_meter:1609.344},yd:{to_meter:.9144},ch:{to_meter:20.1168},link:{to_meter:.201168},dm:{to_meter:.01},in:{to_meter:.0254},"ind-ch":{to_meter:20.11669506},"us-in":{to_meter:.025400050800101},"us-yd":{to_meter:.914401828803658}};var aE=/[\s_\-\/\(\)]/g;function qs(i,e){if(i[e])return i[e];for(var t=Object.keys(i),s=e.toLowerCase().replace(aE,""),n=-1,r,o;++n<t.length;)if(r=t[n],o=r.toLowerCase().replace(aE,""),o===s)return i[r]}function Lf(i){var e={},t=i.split("+").map(function(a){return a.trim()}).filter(function(a){return a}).reduce(function(a,l){var h=l.split("=");return h.push(!0),a[h[0].toLowerCase()]=h[1],a},{}),s,n,r,o={proj:"projName",datum:"datumCode",rf:function(a){e.rf=parseFloat(a)},lat_0:function(a){e.lat0=a*gt},lat_1:function(a){e.lat1=a*gt},lat_2:function(a){e.lat2=a*gt},lat_ts:function(a){e.lat_ts=a*gt},lon_0:function(a){e.long0=a*gt},lon_1:function(a){e.long1=a*gt},lon_2:function(a){e.long2=a*gt},alpha:function(a){e.alpha=parseFloat(a)*gt},gamma:function(a){e.rectified_grid_angle=parseFloat(a)},lonc:function(a){e.longc=a*gt},x_0:function(a){e.x0=parseFloat(a)},y_0:function(a){e.y0=parseFloat(a)},k_0:function(a){e.k0=parseFloat(a)},k:function(a){e.k0=parseFloat(a)},a:function(a){e.a=parseFloat(a)},b:function(a){e.b=parseFloat(a)},r:function(a){e.a=e.b=parseFloat(a)},r_a:function(){e.R_A=!0},zone:function(a){e.zone=parseInt(a,10)},south:function(){e.utmSouth=!0},towgs84:function(a){e.datum_params=a.split(",").map(function(l){return parseFloat(l)})},to_meter:function(a){e.to_meter=parseFloat(a)},units:function(a){e.units=a;var l=qs(m3,a);l&&(e.to_meter=l.to_meter)},from_greenwich:function(a){e.from_greenwich=a*gt},pm:function(a){var l=qs(Dt,a);e.from_greenwich=(l||parseFloat(a))*gt},nadgrids:function(a){a==="@null"?e.datumCode="none":e.nadgrids=a},axis:function(a){var l="ewnsud";a.length===3&&l.indexOf(a.substr(0,1))!==-1&&l.indexOf(a.substr(1,1))!==-1&&l.indexOf(a.substr(2,1))!==-1&&(e.axis=a)},approx:function(){e.approx=!0}};for(s in t)n=t[s],s in o?(r=o[s],typeof r=="function"?r(n):e[r]=n):e[s]=n;return typeof e.datumCode=="string"&&e.datumCode!=="WGS84"&&(e.datumCode=e.datumCode.toLowerCase()),e}var ul=1,a1=2,l1=3,Dc=4,h1=5,Jp=-1,g3=/\s/,E3=/[A-Za-z]/,I3=/[A-Za-z84_]/,Ou=/[,\]]/,c1=/[\d\.E\-\+]/;function ws(i){if(typeof i!="string")throw new Error("not a string");this.text=i.trim(),this.level=0,this.place=0,this.root=null,this.stack=[],this.currentObject=null,this.state=ul}ws.prototype.readCharicter=function(){var i=this.text[this.place++];if(this.state!==Dc)for(;g3.test(i);){if(this.place>=this.text.length)return;i=this.text[this.place++]}switch(this.state){case ul:return this.neutral(i);case a1:return this.keyword(i);case Dc:return this.quoted(i);case h1:return this.afterquote(i);case l1:return this.number(i);case Jp:return}};ws.prototype.afterquote=function(i){if(i==='"'){this.word+='"',this.state=Dc;return}if(Ou.test(i)){this.word=this.word.trim(),this.afterItem(i);return}throw new Error(`havn't handled "`+i+'" in afterquote yet, index '+this.place)};ws.prototype.afterItem=function(i){if(i===","){this.word!==null&&this.currentObject.push(this.word),this.word=null,this.state=ul;return}if(i==="]"){this.level--,this.word!==null&&(this.currentObject.push(this.word),this.word=null),this.state=ul,this.currentObject=this.stack.pop(),this.currentObject||(this.state=Jp);return}};ws.prototype.number=function(i){if(c1.test(i)){this.word+=i;return}if(Ou.test(i)){this.word=parseFloat(this.word),this.afterItem(i);return}throw new Error(`havn't handled "`+i+'" in number yet, index '+this.place)};ws.prototype.quoted=function(i){if(i==='"'){this.state=h1;return}this.word+=i};ws.prototype.keyword=function(i){if(I3.test(i)){this.word+=i;return}if(i==="["){var e=[];e.push(this.word),this.level++,this.root===null?this.root=e:this.currentObject.push(e),this.stack.push(this.currentObject),this.currentObject=e,this.state=ul;return}if(Ou.test(i)){this.afterItem(i);return}throw new Error(`havn't handled "`+i+'" in keyword yet, index '+this.place)};ws.prototype.neutral=function(i){if(E3.test(i)){this.word=i,this.state=a1;return}if(i==='"'){this.word="",this.state=Dc;return}if(c1.test(i)){this.word=i,this.state=l1;return}if(Ou.test(i)){this.afterItem(i);return}throw new Error(`havn't handled "`+i+'" in neutral yet, index '+this.place)};ws.prototype.output=function(){for(;this.place<this.text.length;)this.readCharicter();if(this.state===Jp)return this.root;throw new Error('unable to parse string "'+this.text+'". State is '+this.state)};function b3(i){var e=new ws(i);return e.output()}function Id(i,e,t){Array.isArray(e)&&(t.unshift(e),e=null);var s=e?{}:i,n=t.reduce(function(r,o){return Or(o,r),r},s);e&&(i[e]=n)}function Or(i,e){if(!Array.isArray(i)){e[i]=!0;return}var t=i.shift();if(t==="PARAMETER"&&(t=i.shift()),i.length===1){if(Array.isArray(i[0])){e[t]={},Or(i[0],e[t]);return}e[t]=i[0];return}if(!i.length){e[t]=!0;return}if(t==="TOWGS84"){e[t]=i;return}if(t==="AXIS"){t in e||(e[t]=[]),e[t].push(i);return}Array.isArray(t)||(e[t]={});var s;switch(t){case"UNIT":case"PRIMEM":case"VERT_DATUM":e[t]={name:i[0].toLowerCase(),convert:i[1]},i.length===3&&Or(i[2],e[t]);return;case"SPHEROID":case"ELLIPSOID":e[t]={name:i[0],a:i[1],rf:i[2]},i.length===4&&Or(i[3],e[t]);return;case"EDATUM":case"ENGINEERINGDATUM":case"LOCAL_DATUM":case"DATUM":case"VERT_CS":case"VERTCRS":case"VERTICALCRS":i[0]=["name",i[0]],Id(e,t,i);return;case"COMPD_CS":case"COMPOUNDCRS":case"FITTED_CS":case"PROJECTEDCRS":case"PROJCRS":case"GEOGCS":case"GEOCCS":case"PROJCS":case"LOCAL_CS":case"GEODCRS":case"GEODETICCRS":case"GEODETICDATUM":case"ENGCRS":case"ENGINEERINGCRS":i[0]=["name",i[0]],Id(e,t,i),e[t].type=t;return;default:for(s=-1;++s<i.length;)if(!Array.isArray(i[s]))return Or(i,e[t]);return Id(e,t,i)}}var v3=.017453292519943295,y3=["PROJECTEDCRS","PROJCRS","GEOGCS","GEOCCS","PROJCS","LOCAL_CS","GEODCRS","GEODETICCRS","GEODETICDATUM","ENGCRS","ENGINEERINGCRS"];function C3(i,e){var t=e[0],s=e[1];!(t in i)&&s in i&&(i[t]=i[s],e.length===3&&(i[t]=e[2](i[t])))}function Ni(i){return i*v3}function u1(i){for(var e=Object.keys(i),t=0,s=e.length;t<s;++t){var n=e[t];y3.indexOf(n)!==-1&&T3(i[n]),typeof i[n]=="object"&&u1(i[n])}}function T3(i){if(i.AUTHORITY){var e=Object.keys(i.AUTHORITY)[0];e&&e in i.AUTHORITY&&(i.title=e+":"+i.AUTHORITY[e])}if(i.type==="GEOGCS"?i.projName="longlat":i.type==="LOCAL_CS"?(i.projName="identity",i.local=!0):typeof i.PROJECTION=="object"?i.projName=Object.keys(i.PROJECTION)[0]:i.projName=i.PROJECTION,i.AXIS){for(var t="",s=0,n=i.AXIS.length;s<n;++s){var r=[i.AXIS[s][0].toLowerCase(),i.AXIS[s][1].toLowerCase()];r[0].indexOf("north")!==-1||(r[0]==="y"||r[0]==="lat")&&r[1]==="north"?t+="n":r[0].indexOf("south")!==-1||(r[0]==="y"||r[0]==="lat")&&r[1]==="south"?t+="s":r[0].indexOf("east")!==-1||(r[0]==="x"||r[0]==="lon")&&r[1]==="east"?t+="e":(r[0].indexOf("west")!==-1||(r[0]==="x"||r[0]==="lon")&&r[1]==="west")&&(t+="w")}t.length===2&&(t+="u"),t.length===3&&(i.axis=t)}i.UNIT&&(i.units=i.UNIT.name.toLowerCase(),i.units==="metre"&&(i.units="meter"),i.UNIT.convert&&(i.type==="GEOGCS"?i.DATUM&&i.DATUM.SPHEROID&&(i.to_meter=i.UNIT.convert*i.DATUM.SPHEROID.a):i.to_meter=i.UNIT.convert));var o=i.GEOGCS;i.type==="GEOGCS"&&(o=i),o&&(o.DATUM?i.datumCode=o.DATUM.name.toLowerCase():i.datumCode=o.name.toLowerCase(),i.datumCode.slice(0,2)==="d_"&&(i.datumCode=i.datumCode.slice(2)),i.datumCode==="new_zealand_1949"&&(i.datumCode="nzgd49"),(i.datumCode==="wgs_1984"||i.datumCode==="world_geodetic_system_1984")&&(i.PROJECTION==="Mercator_Auxiliary_Sphere"&&(i.sphere=!0),i.datumCode="wgs84"),i.datumCode==="belge_1972"&&(i.datumCode="rnb72"),o.DATUM&&o.DATUM.SPHEROID&&(i.ellps=o.DATUM.SPHEROID.name.replace("_19","").replace(/[Cc]larke\_18/,"clrk"),i.ellps.toLowerCase().slice(0,13)==="international"&&(i.ellps="intl"),i.a=o.DATUM.SPHEROID.a,i.rf=parseFloat(o.DATUM.SPHEROID.rf,10)),o.DATUM&&o.DATUM.TOWGS84&&(i.datum_params=o.DATUM.TOWGS84),~i.datumCode.indexOf("osgb_1936")&&(i.datumCode="osgb36"),~i.datumCode.indexOf("osni_1952")&&(i.datumCode="osni52"),(~i.datumCode.indexOf("tm65")||~i.datumCode.indexOf("geodetic_datum_of_1965"))&&(i.datumCode="ire65"),i.datumCode==="ch1903+"&&(i.datumCode="ch1903"),~i.datumCode.indexOf("israel")&&(i.datumCode="isr93")),i.b&&!isFinite(i.b)&&(i.b=i.a);function a(u){var c=i.to_meter||1;return u*c}var l=function(u){return C3(i,u)},h=[["standard_parallel_1","Standard_Parallel_1"],["standard_parallel_1","Latitude of 1st standard parallel"],["standard_parallel_2","Standard_Parallel_2"],["standard_parallel_2","Latitude of 2nd standard parallel"],["false_easting","False_Easting"],["false_easting","False easting"],["false-easting","Easting at false origin"],["false_northing","False_Northing"],["false_northing","False northing"],["false_northing","Northing at false origin"],["central_meridian","Central_Meridian"],["central_meridian","Longitude of natural origin"],["central_meridian","Longitude of false origin"],["latitude_of_origin","Latitude_Of_Origin"],["latitude_of_origin","Central_Parallel"],["latitude_of_origin","Latitude of natural origin"],["latitude_of_origin","Latitude of false origin"],["scale_factor","Scale_Factor"],["k0","scale_factor"],["latitude_of_center","Latitude_Of_Center"],["latitude_of_center","Latitude_of_center"],["lat0","latitude_of_center",Ni],["longitude_of_center","Longitude_Of_Center"],["longitude_of_center","Longitude_of_center"],["longc","longitude_of_center",Ni],["x0","false_easting",a],["y0","false_northing",a],["long0","central_meridian",Ni],["lat0","latitude_of_origin",Ni],["lat0","standard_parallel_1",Ni],["lat1","standard_parallel_1",Ni],["lat2","standard_parallel_2",Ni],["azimuth","Azimuth"],["alpha","azimuth",Ni],["srsCode","name"]];h.forEach(l),!i.long0&&i.longc&&(i.projName==="Albers_Conic_Equal_Area"||i.projName==="Lambert_Azimuthal_Equal_Area")&&(i.long0=i.longc),!i.lat_ts&&i.lat1&&(i.projName==="Stereographic_South_Pole"||i.projName==="Polar Stereographic (variant B)")?(i.lat0=Ni(i.lat1>0?90:-90),i.lat_ts=i.lat1):!i.lat_ts&&i.lat0&&i.projName==="Polar_Stereographic"&&(i.lat_ts=i.lat0,i.lat0=Ni(i.lat0>0?90:-90))}function d1(i){var e=b3(i),t=e[0],s={};return Or(e,s),u1(s),s[t]}function St(i){var e=this;if(arguments.length===2){var t=arguments[1];typeof t=="string"?t.charAt(0)==="+"?St[i]=Lf(arguments[1]):St[i]=d1(arguments[1]):St[i]=t}else if(arguments.length===1){if(Array.isArray(i))return i.map(function(s){Array.isArray(s)?St.apply(e,s):St(s)});if(typeof i=="string"){if(i in St)return St[i]}else"EPSG"in i?St["EPSG:"+i.EPSG]=i:"ESRI"in i?St["ESRI:"+i.ESRI]=i:"IAU2000"in i?St["IAU2000:"+i.IAU2000]=i:console.log(i);return}}h3(St);function w3(i){return typeof i=="string"}function S3(i){return i in St}var x3=["PROJECTEDCRS","PROJCRS","GEOGCS","GEOCCS","PROJCS","LOCAL_CS","GEODCRS","GEODETICCRS","GEODETICDATUM","ENGCRS","ENGINEERINGCRS"];function R3(i){return x3.some(function(e){return i.indexOf(e)>-1})}var _3=["3857","900913","3785","102113"];function A3(i){var e=qs(i,"authority");if(e){var t=qs(e,"epsg");return t&&_3.indexOf(t)>-1}}function M3(i){var e=qs(i,"extension");if(e)return qs(e,"proj4")}function F3(i){return i[0]==="+"}function O3(i){if(w3(i)){if(S3(i))return St[i];if(R3(i)){var e=d1(i);if(A3(e))return St["EPSG:3857"];var t=M3(e);return t?Lf(t):e}if(F3(i))return Lf(i)}else return i}function lE(i,e){i=i||{};var t,s;if(!e)return i;for(s in e)t=e[s],t!==void 0&&(i[s]=t);return i}function Wi(i,e,t){var s=i*e;return t/Math.sqrt(1-s*s)}function Gl(i){return i<0?-1:1}function ae(i){return Math.abs(i)<=Et?i:i-Gl(i)*cl}function vi(i,e,t){var s=i*t,n=.5*i;return s=Math.pow((1-s)/(1+s),n),Math.tan(.5*(te-e))/s}function dl(i,e){for(var t=.5*i,s,n,r=te-2*Math.atan(e),o=0;o<=15;o++)if(s=i*Math.sin(r),n=te-2*Math.atan(e*Math.pow((1-s)/(1+s),t))-r,r+=n,Math.abs(n)<=1e-10)return r;return-9999}function N3(){var i=this.b/this.a;this.es=1-i*i,"x0"in this||(this.x0=0),"y0"in this||(this.y0=0),this.e=Math.sqrt(this.es),this.lat_ts?this.sphere?this.k0=Math.cos(this.lat_ts):this.k0=Wi(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)):this.k0||(this.k?this.k0=this.k:this.k0=1)}function P3(i){var e=i.x,t=i.y;if(t*Bi>90&&t*Bi<-90&&e*Bi>180&&e*Bi<-180)return null;var s,n;if(Math.abs(Math.abs(t)-te)<=oe)return null;if(this.sphere)s=this.x0+this.a*this.k0*ae(e-this.long0),n=this.y0+this.a*this.k0*Math.log(Math.tan(Fe+.5*t));else{var r=Math.sin(t),o=vi(this.e,t,r);s=this.x0+this.a*this.k0*ae(e-this.long0),n=this.y0-this.a*this.k0*Math.log(o)}return i.x=s,i.y=n,i}function L3(i){var e=i.x-this.x0,t=i.y-this.y0,s,n;if(this.sphere)n=te-2*Math.atan(Math.exp(-t/(this.a*this.k0)));else{var r=Math.exp(-t/(this.a*this.k0));if(n=dl(this.e,r),n===-9999)return null}return s=ae(this.long0+e/(this.a*this.k0)),i.x=s,i.y=n,i}var D3=["Mercator","Popular Visualisation Pseudo Mercator","Mercator_1SP","Mercator_Auxiliary_Sphere","merc"];const U3={init:N3,forward:P3,inverse:L3,names:D3};function k3(){}function hE(i){return i}var B3=["longlat","identity"];const z3={init:k3,forward:hE,inverse:hE,names:B3};var V3=[U3,z3],ec={},Uc=[];function f1(i,e){var t=Uc.length;return i.names?(Uc[t]=i,i.names.forEach(function(s){ec[s.toLowerCase()]=t}),this):(console.log(e),!0)}function $3(i){if(!i)return!1;var e=i.toLowerCase();if(typeof ec[e]<"u"&&Uc[ec[e]])return Uc[ec[e]]}function H3(){V3.forEach(f1)}const G3={start:H3,add:f1,get:$3};var Ie={};Ie.MERIT={a:6378137,rf:298.257,ellipseName:"MERIT 1983"};Ie.SGS85={a:6378136,rf:298.257,ellipseName:"Soviet Geodetic System 85"};Ie.GRS80={a:6378137,rf:298.257222101,ellipseName:"GRS 1980(IUGG, 1980)"};Ie.IAU76={a:6378140,rf:298.257,ellipseName:"IAU 1976"};Ie.airy={a:6377563396e-3,b:635625691e-2,ellipseName:"Airy 1830"};Ie.APL4={a:6378137,rf:298.25,ellipseName:"Appl. Physics. 1965"};Ie.NWL9D={a:6378145,rf:298.25,ellipseName:"Naval Weapons Lab., 1965"};Ie.mod_airy={a:6377340189e-3,b:6356034446e-3,ellipseName:"Modified Airy"};Ie.andrae={a:637710443e-2,rf:300,ellipseName:"Andrae 1876 (Den., Iclnd.)"};Ie.aust_SA={a:6378160,rf:298.25,ellipseName:"Australian Natl & S. Amer. 1969"};Ie.GRS67={a:6378160,rf:298.247167427,ellipseName:"GRS 67(IUGG 1967)"};Ie.bessel={a:6377397155e-3,rf:299.1528128,ellipseName:"Bessel 1841"};Ie.bess_nam={a:6377483865e-3,rf:299.1528128,ellipseName:"Bessel 1841 (Namibia)"};Ie.clrk66={a:63782064e-1,b:63565838e-1,ellipseName:"Clarke 1866"};Ie.clrk80={a:6378249145e-3,rf:293.4663,ellipseName:"Clarke 1880 mod."};Ie.clrk80ign={a:63782492e-1,b:6356515,rf:293.4660213,ellipseName:"Clarke 1880 (IGN)"};Ie.clrk58={a:6378293645208759e-9,rf:294.2606763692654,ellipseName:"Clarke 1858"};Ie.CPM={a:63757387e-1,rf:334.29,ellipseName:"Comm. des Poids et Mesures 1799"};Ie.delmbr={a:6376428,rf:311.5,ellipseName:"Delambre 1810 (Belgium)"};Ie.engelis={a:637813605e-2,rf:298.2566,ellipseName:"Engelis 1985"};Ie.evrst30={a:6377276345e-3,rf:300.8017,ellipseName:"Everest 1830"};Ie.evrst48={a:6377304063e-3,rf:300.8017,ellipseName:"Everest 1948"};Ie.evrst56={a:6377301243e-3,rf:300.8017,ellipseName:"Everest 1956"};Ie.evrst69={a:6377295664e-3,rf:300.8017,ellipseName:"Everest 1969"};Ie.evrstSS={a:6377298556e-3,rf:300.8017,ellipseName:"Everest (Sabah & Sarawak)"};Ie.fschr60={a:6378166,rf:298.3,ellipseName:"Fischer (Mercury Datum) 1960"};Ie.fschr60m={a:6378155,rf:298.3,ellipseName:"Fischer 1960"};Ie.fschr68={a:6378150,rf:298.3,ellipseName:"Fischer 1968"};Ie.helmert={a:6378200,rf:298.3,ellipseName:"Helmert 1906"};Ie.hough={a:6378270,rf:297,ellipseName:"Hough"};Ie.intl={a:6378388,rf:297,ellipseName:"International 1909 (Hayford)"};Ie.kaula={a:6378163,rf:298.24,ellipseName:"Kaula 1961"};Ie.lerch={a:6378139,rf:298.257,ellipseName:"Lerch 1979"};Ie.mprts={a:6397300,rf:191,ellipseName:"Maupertius 1738"};Ie.new_intl={a:63781575e-1,b:63567722e-1,ellipseName:"New International 1967"};Ie.plessis={a:6376523,rf:6355863,ellipseName:"Plessis 1817 (France)"};Ie.krass={a:6378245,rf:298.3,ellipseName:"Krassovsky, 1942"};Ie.SEasia={a:6378155,b:63567733205e-4,ellipseName:"Southeast Asia"};Ie.walbeck={a:6376896,b:63558348467e-4,ellipseName:"Walbeck"};Ie.WGS60={a:6378165,rf:298.3,ellipseName:"WGS 60"};Ie.WGS66={a:6378145,rf:298.25,ellipseName:"WGS 66"};Ie.WGS7={a:6378135,rf:298.26,ellipseName:"WGS 72"};var Y3=Ie.WGS84={a:6378137,rf:298.257223563,ellipseName:"WGS 84"};Ie.sphere={a:6370997,b:6370997,ellipseName:"Normal Sphere (r=6370997)"};function j3(i,e,t,s){var n=i*i,r=e*e,o=(n-r)/n,a=0;s?(i*=1-o*(d3+o*(f3+o*p3)),n=i*i,o=0):a=Math.sqrt(o);var l=(n-r)/r;return{es:o,e:a,ep2:l}}function W3(i,e,t,s,n){if(!i){var r=qs(Ie,s);r||(r=Y3),i=r.a,e=r.b,t=r.rf}return t&&!e&&(e=(1-1/t)*i),(t===0||Math.abs(i-e)<oe)&&(n=!0,e=i),{a:i,b:e,rf:t,sphere:n}}var tc={wgs84:{towgs84:"0,0,0",ellipse:"WGS84",datumName:"WGS84"},ch1903:{towgs84:"674.374,15.056,405.346",ellipse:"bessel",datumName:"swiss"},ggrs87:{towgs84:"-199.87,74.79,246.62",ellipse:"GRS80",datumName:"Greek_Geodetic_Reference_System_1987"},nad83:{towgs84:"0,0,0",ellipse:"GRS80",datumName:"North_American_Datum_1983"},nad27:{nadgrids:"@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat",ellipse:"clrk66",datumName:"North_American_Datum_1927"},potsdam:{towgs84:"598.1,73.7,418.2,0.202,0.045,-2.455,6.7",ellipse:"bessel",datumName:"Potsdam Rauenberg 1950 DHDN"},carthage:{towgs84:"-263.0,6.0,431.0",ellipse:"clark80",datumName:"Carthage 1934 Tunisia"},hermannskogel:{towgs84:"577.326,90.129,463.919,5.137,1.474,5.297,2.4232",ellipse:"bessel",datumName:"Hermannskogel"},mgi:{towgs84:"577.326,90.129,463.919,5.137,1.474,5.297,2.4232",ellipse:"bessel",datumName:"Militar-Geographische Institut"},osni52:{towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"airy",datumName:"Irish National"},ire65:{towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"mod_airy",datumName:"Ireland 1965"},rassadiran:{towgs84:"-133.63,-157.5,-158.62",ellipse:"intl",datumName:"Rassadiran"},nzgd49:{towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993",ellipse:"intl",datumName:"New Zealand Geodetic Datum 1949"},osgb36:{towgs84:"446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894",ellipse:"airy",datumName:"Ordnance Survey of Great Britain 1936"},s_jtsk:{towgs84:"589,76,480",ellipse:"bessel",datumName:"S-JTSK (Ferro)"},beduaram:{towgs84:"-106,-87,188",ellipse:"clrk80",datumName:"Beduaram"},gunung_segara:{towgs84:"-403,684,41",ellipse:"bessel",datumName:"Gunung Segara Jakarta"},rnb72:{towgs84:"106.869,-52.2978,103.724,-0.33657,0.456955,-1.84218,1",ellipse:"intl",datumName:"Reseau National Belge 1972"}};for(var X3 in tc){var cE=tc[X3];tc[cE.datumName]=cE}function q3(i,e,t,s,n,r,o){var a={};return i===void 0||i==="none"?a.datum_type=Pf:a.datum_type=c3,e&&(a.datum_params=e.map(parseFloat),(a.datum_params[0]!==0||a.datum_params[1]!==0||a.datum_params[2]!==0)&&(a.datum_type=Wn),a.datum_params.length>3&&(a.datum_params[3]!==0||a.datum_params[4]!==0||a.datum_params[5]!==0||a.datum_params[6]!==0)&&(a.datum_type=Xn,a.datum_params[3]*=Pa,a.datum_params[4]*=Pa,a.datum_params[5]*=Pa,a.datum_params[6]=a.datum_params[6]/1e6+1)),o&&(a.datum_type=Vr,a.grids=o),a.a=t,a.b=s,a.es=n,a.ep2=r,a}var p1={};function Z3(i,e){var t=new DataView(e),s=J3(t),n=eD(t,s),r=tD(t,n,s),o={header:n,subgrids:r};return p1[i]=o,o}function Q3(i){if(i===void 0)return null;var e=i.split(",");return e.map(K3)}function K3(i){if(i.length===0)return null;var e=i[0]==="@";return e&&(i=i.slice(1)),i==="null"?{name:"null",mandatory:!e,grid:null,isNull:!0}:{name:i,mandatory:!e,grid:p1[i]||null,isNull:!1}}function Nr(i){return i/3600*Math.PI/180}function J3(i){var e=i.getInt32(8,!1);return e===11?!1:(e=i.getInt32(8,!0),e!==11&&console.warn("Failed to detect nadgrid endian-ness, defaulting to little-endian"),!0)}function eD(i,e){return{nFields:i.getInt32(8,e),nSubgridFields:i.getInt32(24,e),nSubgrids:i.getInt32(40,e),shiftType:Df(i,56,64).trim(),fromSemiMajorAxis:i.getFloat64(120,e),fromSemiMinorAxis:i.getFloat64(136,e),toSemiMajorAxis:i.getFloat64(152,e),toSemiMinorAxis:i.getFloat64(168,e)}}function Df(i,e,t){return String.fromCharCode.apply(null,new Uint8Array(i.buffer.slice(e,t)))}function tD(i,e,t){for(var s=176,n=[],r=0;r<e.nSubgrids;r++){var o=sD(i,s,t),a=nD(i,s,o,t),l=Math.round(1+(o.upperLongitude-o.lowerLongitude)/o.longitudeInterval),h=Math.round(1+(o.upperLatitude-o.lowerLatitude)/o.latitudeInterval);n.push({ll:[Nr(o.lowerLongitude),Nr(o.lowerLatitude)],del:[Nr(o.longitudeInterval),Nr(o.latitudeInterval)],lim:[l,h],count:o.gridNodeCount,cvs:iD(a)}),s+=176+o.gridNodeCount*16}return n}function iD(i){return i.map(function(e){return[Nr(e.longitudeShift),Nr(e.latitudeShift)]})}function sD(i,e,t){return{name:Df(i,e+8,e+16).trim(),parent:Df(i,e+24,e+24+8).trim(),lowerLatitude:i.getFloat64(e+72,t),upperLatitude:i.getFloat64(e+88,t),lowerLongitude:i.getFloat64(e+104,t),upperLongitude:i.getFloat64(e+120,t),latitudeInterval:i.getFloat64(e+136,t),longitudeInterval:i.getFloat64(e+152,t),gridNodeCount:i.getInt32(e+168,t)}}function nD(i,e,t,s){for(var n=e+176,r=16,o=[],a=0;a<t.gridNodeCount;a++){var l={latitudeShift:i.getFloat32(n+a*r,s),longitudeShift:i.getFloat32(n+a*r+4,s),latitudeAccuracy:i.getFloat32(n+a*r+8,s),longitudeAccuracy:i.getFloat32(n+a*r+12,s)};o.push(l)}return o}function Vi(i,e){if(!(this instanceof Vi))return new Vi(i);e=e||function(h){if(h)throw h};var t=O3(i);if(typeof t!="object"){e("Could not parse to valid json: "+i);return}var s=Vi.projections.get(t.projName);if(!s){e("Could not get projection name from: "+i);return}if(t.datumCode&&t.datumCode!=="none"){var n=qs(tc,t.datumCode);n&&(t.datum_params=t.datum_params||(n.towgs84?n.towgs84.split(","):null),t.ellps=n.ellipse,t.datumName=n.datumName?n.datumName:t.datumCode)}t.k0=t.k0||1,t.axis=t.axis||"enu",t.ellps=t.ellps||"wgs84",t.lat1=t.lat1||t.lat0;var r=W3(t.a,t.b,t.rf,t.ellps,t.sphere),o=j3(r.a,r.b,r.rf,t.R_A),a=Q3(t.nadgrids),l=t.datum||q3(t.datumCode,t.datum_params,r.a,r.b,o.es,o.ep2,a);lE(this,t),lE(this,s),this.a=r.a,this.b=r.b,this.rf=r.rf,this.sphere=r.sphere,this.es=o.es,this.e=o.e,this.ep2=o.ep2,this.datum=l,this.init(),e(null,this)}Vi.projections=G3;Vi.projections.start();function rD(i,e){return i.datum_type!==e.datum_type||i.a!==e.a||Math.abs(i.es-e.es)>5e-11?!1:i.datum_type===Wn?i.datum_params[0]===e.datum_params[0]&&i.datum_params[1]===e.datum_params[1]&&i.datum_params[2]===e.datum_params[2]:i.datum_type===Xn?i.datum_params[0]===e.datum_params[0]&&i.datum_params[1]===e.datum_params[1]&&i.datum_params[2]===e.datum_params[2]&&i.datum_params[3]===e.datum_params[3]&&i.datum_params[4]===e.datum_params[4]&&i.datum_params[5]===e.datum_params[5]&&i.datum_params[6]===e.datum_params[6]:!0}function m1(i,e,t){var s=i.x,n=i.y,r=i.z?i.z:0,o,a,l,h;if(n<-te&&n>-1.001*te)n=-te;else if(n>te&&n<1.001*te)n=te;else{if(n<-te)return{x:-1/0,y:-1/0,z:i.z};if(n>te)return{x:1/0,y:1/0,z:i.z}}return s>Math.PI&&(s-=2*Math.PI),a=Math.sin(n),h=Math.cos(n),l=a*a,o=t/Math.sqrt(1-e*l),{x:(o+r)*h*Math.cos(s),y:(o+r)*h*Math.sin(s),z:(o*(1-e)+r)*a}}function g1(i,e,t,s){var n=1e-12,r=n*n,o=30,a,l,h,u,c,d,f,p,m,g,E,I,v,b=i.x,C=i.y,S=i.z?i.z:0,_,M,A;if(a=Math.sqrt(b*b+C*C),l=Math.sqrt(b*b+C*C+S*S),a/t<n){if(_=0,l/t<n)return M=te,A=-s,{x:i.x,y:i.y,z:i.z}}else _=Math.atan2(C,b);h=S/l,u=a/l,c=1/Math.sqrt(1-e*(2-e)*u*u),p=u*(1-e)*c,m=h*c,v=0;do v++,f=t/Math.sqrt(1-e*m*m),A=a*p+S*m-f*(1-e*m*m),d=e*f/(f+A),c=1/Math.sqrt(1-d*(2-d)*u*u),g=u*(1-d)*c,E=h*c,I=E*p-g*m,p=g,m=E;while(I*I>r&&v<o);return M=Math.atan(E/Math.abs(g)),{x:_,y:M,z:A}}function oD(i,e,t){if(e===Wn)return{x:i.x+t[0],y:i.y+t[1],z:i.z+t[2]};if(e===Xn){var s=t[0],n=t[1],r=t[2],o=t[3],a=t[4],l=t[5],h=t[6];return{x:h*(i.x-l*i.y+a*i.z)+s,y:h*(l*i.x+i.y-o*i.z)+n,z:h*(-a*i.x+o*i.y+i.z)+r}}}function aD(i,e,t){if(e===Wn)return{x:i.x-t[0],y:i.y-t[1],z:i.z-t[2]};if(e===Xn){var s=t[0],n=t[1],r=t[2],o=t[3],a=t[4],l=t[5],h=t[6],u=(i.x-s)/h,c=(i.y-n)/h,d=(i.z-r)/h;return{x:u+l*c-a*d,y:-l*u+c+o*d,z:a*u-o*c+d}}}function Uh(i){return i===Wn||i===Xn}function lD(i,e,t){if(rD(i,e)||i.datum_type===Pf||e.datum_type===Pf)return t;var s=i.a,n=i.es;if(i.datum_type===Vr){var r=uE(i,!1,t);if(r!==0)return;s=rE,n=oE}var o=e.a,a=e.b,l=e.es;if(e.datum_type===Vr&&(o=rE,a=u3,l=oE),n===l&&s===o&&!Uh(i.datum_type)&&!Uh(e.datum_type))return t;if(t=m1(t,n,s),Uh(i.datum_type)&&(t=oD(t,i.datum_type,i.datum_params)),Uh(e.datum_type)&&(t=aD(t,e.datum_type,e.datum_params)),t=g1(t,l,o,a),e.datum_type===Vr){var h=uE(e,!0,t);if(h!==0)return}return t}function uE(i,e,t){if(i.grids===null||i.grids.length===0)return console.log("Grid shift grids not found"),-1;var s={x:-t.x,y:t.y},n={x:Number.NaN,y:Number.NaN},r=[];e:for(var o=0;o<i.grids.length;o++){var a=i.grids[o];if(r.push(a.name),a.isNull){n=s;break}if(a.mandatory,a.grid===null){if(a.mandatory)return console.log("Unable to find mandatory grid '"+a.name+"'"),-1;continue}for(var l=a.grid.subgrids,h=0,u=l.length;h<u;h++){var c=l[h],d=(Math.abs(c.del[1])+Math.abs(c.del[0]))/1e4,f=c.ll[0]-d,p=c.ll[1]-d,m=c.ll[0]+(c.lim[0]-1)*c.del[0]+d,g=c.ll[1]+(c.lim[1]-1)*c.del[1]+d;if(!(p>s.y||f>s.x||g<s.y||m<s.x)&&(n=hD(s,e,c),!isNaN(n.x)))break e}}return isNaN(n.x)?(console.log("Failed to find a grid shift table for location '"+-s.x*Bi+" "+s.y*Bi+" tried: '"+r+"'"),-1):(t.x=-n.x,t.y=n.y,0)}function hD(i,e,t){var s={x:Number.NaN,y:Number.NaN};if(isNaN(i.x))return s;var n={x:i.x,y:i.y};n.x-=t.ll[0],n.y-=t.ll[1],n.x=ae(n.x-Math.PI)+Math.PI;var r=dE(n,t);if(e){if(isNaN(r.x))return s;r.x=n.x-r.x,r.y=n.y-r.y;var o=9,a=1e-12,l,h;do{if(h=dE(r,t),isNaN(h.x)){console.log("Inverse grid shift iteration failed, presumably at grid edge.  Using first approximation.");break}l={x:n.x-(h.x+r.x),y:n.y-(h.y+r.y)},r.x+=l.x,r.y+=l.y}while(o--&&Math.abs(l.x)>a&&Math.abs(l.y)>a);if(o<0)return console.log("Inverse grid shift iterator failed to converge."),s;s.x=ae(r.x+t.ll[0]),s.y=r.y+t.ll[1]}else isNaN(r.x)||(s.x=i.x+r.x,s.y=i.y+r.y);return s}function dE(i,e){var t={x:i.x/e.del[0],y:i.y/e.del[1]},s={x:Math.floor(t.x),y:Math.floor(t.y)},n={x:t.x-1*s.x,y:t.y-1*s.y},r={x:Number.NaN,y:Number.NaN},o;if(s.x<0||s.x>=e.lim[0]||s.y<0||s.y>=e.lim[1])return r;o=s.y*e.lim[0]+s.x;var a={x:e.cvs[o][0],y:e.cvs[o][1]};o++;var l={x:e.cvs[o][0],y:e.cvs[o][1]};o+=e.lim[0];var h={x:e.cvs[o][0],y:e.cvs[o][1]};o--;var u={x:e.cvs[o][0],y:e.cvs[o][1]},c=n.x*n.y,d=n.x*(1-n.y),f=(1-n.x)*(1-n.y),p=(1-n.x)*n.y;return r.x=f*a.x+d*l.x+p*u.x+c*h.x,r.y=f*a.y+d*l.y+p*u.y+c*h.y,r}function fE(i,e,t){var s=t.x,n=t.y,r=t.z||0,o,a,l,h={};for(l=0;l<3;l++)if(!(e&&l===2&&t.z===void 0))switch(l===0?(o=s,"ew".indexOf(i.axis[l])!==-1?a="x":a="y"):l===1?(o=n,"ns".indexOf(i.axis[l])!==-1?a="y":a="x"):(o=r,a="z"),i.axis[l]){case"e":h[a]=o;break;case"w":h[a]=-o;break;case"n":h[a]=o;break;case"s":h[a]=-o;break;case"u":t[a]!==void 0&&(h.z=o);break;case"d":t[a]!==void 0&&(h.z=-o);break;default:return null}return h}function E1(i){var e={x:i[0],y:i[1]};return i.length>2&&(e.z=i[2]),i.length>3&&(e.m=i[3]),e}function cD(i){pE(i.x),pE(i.y)}function pE(i){if(typeof Number.isFinite=="function"){if(Number.isFinite(i))return;throw new TypeError("coordinates must be finite numbers")}if(typeof i!="number"||i!==i||!isFinite(i))throw new TypeError("coordinates must be finite numbers")}function uD(i,e){return(i.datum.datum_type===Wn||i.datum.datum_type===Xn||i.datum.datum_type===Vr)&&e.datumCode!=="WGS84"||(e.datum.datum_type===Wn||e.datum.datum_type===Xn||e.datum.datum_type===Vr)&&i.datumCode!=="WGS84"}function kc(i,e,t,s){var n;Array.isArray(t)?t=E1(t):t={x:t.x,y:t.y,z:t.z,m:t.m};var r=t.z!==void 0;if(cD(t),i.datum&&e.datum&&uD(i,e)&&(n=new Vi("WGS84"),t=kc(i,n,t,s),i=n),s&&i.axis!=="enu"&&(t=fE(i,!1,t)),i.projName==="longlat")t={x:t.x*gt,y:t.y*gt,z:t.z||0};else if(i.to_meter&&(t={x:t.x*i.to_meter,y:t.y*i.to_meter,z:t.z||0}),t=i.inverse(t),!t)return;if(i.from_greenwich&&(t.x+=i.from_greenwich),t=lD(i.datum,e.datum,t),!!t)return e.from_greenwich&&(t={x:t.x-e.from_greenwich,y:t.y,z:t.z||0}),e.projName==="longlat"?t={x:t.x*Bi,y:t.y*Bi,z:t.z||0}:(t=e.forward(t),e.to_meter&&(t={x:t.x/e.to_meter,y:t.y/e.to_meter,z:t.z||0})),s&&e.axis!=="enu"?fE(e,!0,t):(t&&!r&&delete t.z,t)}var mE=Vi("WGS84");function bd(i,e,t,s){var n,r,o;return Array.isArray(t)?(n=kc(i,e,t,s)||{x:NaN,y:NaN},t.length>2?typeof i.name<"u"&&i.name==="geocent"||typeof e.name<"u"&&e.name==="geocent"?typeof n.z=="number"?[n.x,n.y,n.z].concat(t.slice(3)):[n.x,n.y,t[2]].concat(t.slice(3)):[n.x,n.y].concat(t.slice(2)):[n.x,n.y]):(r=kc(i,e,t,s),o=Object.keys(t),o.length===2||o.forEach(function(a){if(typeof i.name<"u"&&i.name==="geocent"||typeof e.name<"u"&&e.name==="geocent"){if(a==="x"||a==="y"||a==="z")return}else if(a==="x"||a==="y")return;r[a]=t[a]}),r)}function gE(i){return i instanceof Vi?i:i.oProj?i.oProj:Vi(i)}function ci(i,e,t){i=gE(i);var s=!1,n;return typeof e>"u"?(e=i,i=mE,s=!0):(typeof e.x<"u"||Array.isArray(e))&&(t=e,e=i,i=mE,s=!0),e=gE(e),t?bd(i,e,t):(n={forward:function(r,o){return bd(i,e,r,o)},inverse:function(r,o){return bd(e,i,r,o)}},s&&(n.oProj=e),n)}var EE=6,I1="AJSAJS",b1="AFAFAF",Pr=65,Ft=73,Kt=79,Ia=86,ba=90;const dD={forward:v1,inverse:fD,toPoint:y1};function v1(i,e){return e=e||5,gD(pD({lat:i[1],lon:i[0]}),e)}function fD(i){var e=em(T1(i.toUpperCase()));return e.lat&&e.lon?[e.lon,e.lat,e.lon,e.lat]:[e.left,e.bottom,e.right,e.top]}function y1(i){var e=em(T1(i.toUpperCase()));return e.lat&&e.lon?[e.lon,e.lat]:[(e.left+e.right)/2,(e.top+e.bottom)/2]}function vd(i){return i*(Math.PI/180)}function IE(i){return 180*(i/Math.PI)}function pD(i){var e=i.lat,t=i.lon,s=6378137,n=.00669438,r=.9996,o,a,l,h,u,c,d,f=vd(e),p=vd(t),m,g;g=Math.floor((t+180)/6)+1,t===180&&(g=60),e>=56&&e<64&&t>=3&&t<12&&(g=32),e>=72&&e<84&&(t>=0&&t<9?g=31:t>=9&&t<21?g=33:t>=21&&t<33?g=35:t>=33&&t<42&&(g=37)),o=(g-1)*6-180+3,m=vd(o),a=n/(1-n),l=s/Math.sqrt(1-n*Math.sin(f)*Math.sin(f)),h=Math.tan(f)*Math.tan(f),u=a*Math.cos(f)*Math.cos(f),c=Math.cos(f)*(p-m),d=s*((1-n/4-3*n*n/64-5*n*n*n/256)*f-(3*n/8+3*n*n/32+45*n*n*n/1024)*Math.sin(2*f)+(15*n*n/256+45*n*n*n/1024)*Math.sin(4*f)-35*n*n*n/3072*Math.sin(6*f));var E=r*l*(c+(1-h+u)*c*c*c/6+(5-18*h+h*h+72*u-58*a)*c*c*c*c*c/120)+5e5,I=r*(d+l*Math.tan(f)*(c*c/2+(5-h+9*u+4*u*u)*c*c*c*c/24+(61-58*h+h*h+600*u-330*a)*c*c*c*c*c*c/720));return e<0&&(I+=1e7),{northing:Math.round(I),easting:Math.round(E),zoneNumber:g,zoneLetter:mD(e)}}function em(i){var e=i.northing,t=i.easting,s=i.zoneLetter,n=i.zoneNumber;if(n<0||n>60)return null;var r=.9996,o=6378137,a=.00669438,l,h=(1-Math.sqrt(1-a))/(1+Math.sqrt(1-a)),u,c,d,f,p,m,g,E,I,v=t-5e5,b=e;s<"N"&&(b-=1e7),g=(n-1)*6-180+3,l=a/(1-a),m=b/r,E=m/(o*(1-a/4-3*a*a/64-5*a*a*a/256)),I=E+(3*h/2-27*h*h*h/32)*Math.sin(2*E)+(21*h*h/16-55*h*h*h*h/32)*Math.sin(4*E)+151*h*h*h/96*Math.sin(6*E),u=o/Math.sqrt(1-a*Math.sin(I)*Math.sin(I)),c=Math.tan(I)*Math.tan(I),d=l*Math.cos(I)*Math.cos(I),f=o*(1-a)/Math.pow(1-a*Math.sin(I)*Math.sin(I),1.5),p=v/(u*r);var C=I-u*Math.tan(I)/f*(p*p/2-(5+3*c+10*d-4*d*d-9*l)*p*p*p*p/24+(61+90*c+298*d+45*c*c-252*l-3*d*d)*p*p*p*p*p*p/720);C=IE(C);var S=(p-(1+2*c+d)*p*p*p/6+(5-2*d+28*c-3*d*d+8*l+24*c*c)*p*p*p*p*p/120)/Math.cos(I);S=g+IE(S);var _;if(i.accuracy){var M=em({northing:i.northing+i.accuracy,easting:i.easting+i.accuracy,zoneLetter:i.zoneLetter,zoneNumber:i.zoneNumber});_={top:M.lat,right:M.lon,bottom:C,left:S}}else _={lat:C,lon:S};return _}function mD(i){var e="Z";return 84>=i&&i>=72?e="X":72>i&&i>=64?e="W":64>i&&i>=56?e="V":56>i&&i>=48?e="U":48>i&&i>=40?e="T":40>i&&i>=32?e="S":32>i&&i>=24?e="R":24>i&&i>=16?e="Q":16>i&&i>=8?e="P":8>i&&i>=0?e="N":0>i&&i>=-8?e="M":-8>i&&i>=-16?e="L":-16>i&&i>=-24?e="K":-24>i&&i>=-32?e="J":-32>i&&i>=-40?e="H":-40>i&&i>=-48?e="G":-48>i&&i>=-56?e="F":-56>i&&i>=-64?e="E":-64>i&&i>=-72?e="D":-72>i&&i>=-80&&(e="C"),e}function gD(i,e){var t="00000"+i.easting,s="00000"+i.northing;return i.zoneNumber+i.zoneLetter+ED(i.easting,i.northing,i.zoneNumber)+t.substr(t.length-5,e)+s.substr(s.length-5,e)}function ED(i,e,t){var s=C1(t),n=Math.floor(i/1e5),r=Math.floor(e/1e5)%20;return ID(n,r,s)}function C1(i){var e=i%EE;return e===0&&(e=EE),e}function ID(i,e,t){var s=t-1,n=I1.charCodeAt(s),r=b1.charCodeAt(s),o=n+i-1,a=r+e,l=!1;o>ba&&(o=o-ba+Pr-1,l=!0),(o===Ft||n<Ft&&o>Ft||(o>Ft||n<Ft)&&l)&&o++,(o===Kt||n<Kt&&o>Kt||(o>Kt||n<Kt)&&l)&&(o++,o===Ft&&o++),o>ba&&(o=o-ba+Pr-1),a>Ia?(a=a-Ia+Pr-1,l=!0):l=!1,(a===Ft||r<Ft&&a>Ft||(a>Ft||r<Ft)&&l)&&a++,(a===Kt||r<Kt&&a>Kt||(a>Kt||r<Kt)&&l)&&(a++,a===Ft&&a++),a>Ia&&(a=a-Ia+Pr-1);var h=String.fromCharCode(o)+String.fromCharCode(a);return h}function T1(i){if(i&&i.length===0)throw"MGRSPoint coverting from nothing";for(var e=i.length,t=null,s="",n,r=0;!/[A-Z]/.test(n=i.charAt(r));){if(r>=2)throw"MGRSPoint bad conversion from: "+i;s+=n,r++}var o=parseInt(s,10);if(r===0||r+3>e)throw"MGRSPoint bad conversion from: "+i;var a=i.charAt(r++);if(a<="A"||a==="B"||a==="Y"||a>="Z"||a==="I"||a==="O")throw"MGRSPoint zone letter "+a+" not handled: "+i;t=i.substring(r,r+=2);for(var l=C1(o),h=bD(t.charAt(0),l),u=vD(t.charAt(1),l);u<yD(a);)u+=2e6;var c=e-r;if(c%2!==0)throw`MGRSPoint has to have an even number 
of digits after the zone letter and two 100km letters - front 
half for easting meters, second half for 
northing meters`+i;var d=c/2,f=0,p=0,m,g,E,I,v;return d>0&&(m=1e5/Math.pow(10,d),g=i.substring(r,r+d),f=parseFloat(g)*m,E=i.substring(r+d),p=parseFloat(E)*m),I=f+h,v=p+u,{easting:I,northing:v,zoneLetter:a,zoneNumber:o,accuracy:m}}function bD(i,e){for(var t=I1.charCodeAt(e-1),s=1e5,n=!1;t!==i.charCodeAt(0);){if(t++,t===Ft&&t++,t===Kt&&t++,t>ba){if(n)throw"Bad character: "+i;t=Pr,n=!0}s+=1e5}return s}function vD(i,e){if(i>"V")throw"MGRSPoint given invalid Northing "+i;for(var t=b1.charCodeAt(e-1),s=0,n=!1;t!==i.charCodeAt(0);){if(t++,t===Ft&&t++,t===Kt&&t++,t>Ia){if(n)throw"Bad character: "+i;t=Pr,n=!0}s+=1e5}return s}function yD(i){var e;switch(i){case"C":e=11e5;break;case"D":e=2e6;break;case"E":e=28e5;break;case"F":e=37e5;break;case"G":e=46e5;break;case"H":e=55e5;break;case"J":e=64e5;break;case"K":e=73e5;break;case"L":e=82e5;break;case"M":e=91e5;break;case"N":e=0;break;case"P":e=8e5;break;case"Q":e=17e5;break;case"R":e=26e5;break;case"S":e=35e5;break;case"T":e=44e5;break;case"U":e=53e5;break;case"V":e=62e5;break;case"W":e=7e6;break;case"X":e=79e5;break;default:e=-1}if(e>=0)return e;throw"Invalid zone letter: "+i}function mo(i,e,t){if(!(this instanceof mo))return new mo(i,e,t);if(Array.isArray(i))this.x=i[0],this.y=i[1],this.z=i[2]||0;else if(typeof i=="object")this.x=i.x,this.y=i.y,this.z=i.z||0;else if(typeof i=="string"&&typeof e>"u"){var s=i.split(",");this.x=parseFloat(s[0],10),this.y=parseFloat(s[1],10),this.z=parseFloat(s[2],10)||0}else this.x=i,this.y=e,this.z=t||0;console.warn("proj4.Point will be removed in version 3, use proj4.toPoint")}mo.fromMGRS=function(i){return new mo(y1(i))};mo.prototype.toMGRS=function(i){return v1([this.x,this.y],i)};var CD=1,TD=.25,bE=.046875,vE=.01953125,yE=.01068115234375,wD=.75,SD=.46875,xD=.013020833333333334,RD=.007120768229166667,_D=.3645833333333333,AD=.005696614583333333,MD=.3076171875;function tm(i){var e=[];e[0]=CD-i*(TD+i*(bE+i*(vE+i*yE))),e[1]=i*(wD-i*(bE+i*(vE+i*yE)));var t=i*i;return e[2]=t*(SD-i*(xD+i*RD)),t*=i,e[3]=t*(_D-i*AD),e[4]=t*i*MD,e}function Bo(i,e,t,s){return t*=e,e*=e,s[0]*i-t*(s[1]+e*(s[2]+e*(s[3]+e*s[4])))}var FD=20;function im(i,e,t){for(var s=1/(1-e),n=i,r=FD;r;--r){var o=Math.sin(n),a=1-e*o*o;if(a=(Bo(n,o,Math.cos(n),t)-i)*(a*Math.sqrt(a))*s,n-=a,Math.abs(a)<oe)return n}return n}function OD(){this.x0=this.x0!==void 0?this.x0:0,this.y0=this.y0!==void 0?this.y0:0,this.long0=this.long0!==void 0?this.long0:0,this.lat0=this.lat0!==void 0?this.lat0:0,this.es&&(this.en=tm(this.es),this.ml0=Bo(this.lat0,Math.sin(this.lat0),Math.cos(this.lat0),this.en))}function ND(i){var e=i.x,t=i.y,s=ae(e-this.long0),n,r,o,a=Math.sin(t),l=Math.cos(t);if(this.es){var u=l*s,c=Math.pow(u,2),d=this.ep2*Math.pow(l,2),f=Math.pow(d,2),p=Math.abs(l)>oe?Math.tan(t):0,m=Math.pow(p,2),g=Math.pow(m,2);n=1-this.es*Math.pow(a,2),u=u/Math.sqrt(n);var E=Bo(t,a,l,this.en);r=this.a*(this.k0*u*(1+c/6*(1-m+d+c/20*(5-18*m+g+14*d-58*m*d+c/42*(61+179*g-g*m-479*m)))))+this.x0,o=this.a*(this.k0*(E-this.ml0+a*s*u/2*(1+c/12*(5-m+9*d+4*f+c/30*(61+g-58*m+270*d-330*m*d+c/56*(1385+543*g-g*m-3111*m))))))+this.y0}else{var h=l*Math.sin(s);if(Math.abs(Math.abs(h)-1)<oe)return 93;if(r=.5*this.a*this.k0*Math.log((1+h)/(1-h))+this.x0,o=l*Math.cos(s)/Math.sqrt(1-Math.pow(h,2)),h=Math.abs(o),h>=1){if(h-1>oe)return 93;o=0}else o=Math.acos(o);t<0&&(o=-o),o=this.a*this.k0*(o-this.lat0)+this.y0}return i.x=r,i.y=o,i}function PD(i){var e,t,s,n,r=(i.x-this.x0)*(1/this.a),o=(i.y-this.y0)*(1/this.a);if(this.es)if(e=this.ml0+o/this.k0,t=im(e,this.es,this.en),Math.abs(t)<te){var c=Math.sin(t),d=Math.cos(t),f=Math.abs(d)>oe?Math.tan(t):0,p=this.ep2*Math.pow(d,2),m=Math.pow(p,2),g=Math.pow(f,2),E=Math.pow(g,2);e=1-this.es*Math.pow(c,2);var I=r*Math.sqrt(e)/this.k0,v=Math.pow(I,2);e=e*f,s=t-e*v/(1-this.es)*.5*(1-v/12*(5+3*g-9*p*g+p-4*m-v/30*(61+90*g-252*p*g+45*E+46*p-v/56*(1385+3633*g+4095*E+1574*E*g)))),n=ae(this.long0+I*(1-v/6*(1+2*g+p-v/20*(5+28*g+24*E+8*p*g+6*p-v/42*(61+662*g+1320*E+720*E*g))))/d)}else s=te*Gl(o),n=0;else{var a=Math.exp(r/this.k0),l=.5*(a-1/a),h=this.lat0+o/this.k0,u=Math.cos(h);e=Math.sqrt((1-Math.pow(u,2))/(1+Math.pow(l,2))),s=Math.asin(e),o<0&&(s=-s),l===0&&u===0?n=0:n=ae(Math.atan2(l,u)+this.long0)}return i.x=n,i.y=s,i}var LD=["Fast_Transverse_Mercator","Fast Transverse Mercator"];const ic={init:OD,forward:ND,inverse:PD,names:LD};function w1(i){var e=Math.exp(i);return e=(e-1/e)/2,e}function Ot(i,e){i=Math.abs(i),e=Math.abs(e);var t=Math.max(i,e),s=Math.min(i,e)/(t||1);return t*Math.sqrt(1+Math.pow(s,2))}function DD(i){var e=1+i,t=e-1;return t===0?i:i*Math.log(e)/t}function UD(i){var e=Math.abs(i);return e=DD(e*(1+e/(Ot(1,e)+1))),i<0?-e:e}function sm(i,e){for(var t=2*Math.cos(2*e),s=i.length-1,n=i[s],r=0,o;--s>=0;)o=-r+t*n+i[s],r=n,n=o;return e+o*Math.sin(2*e)}function kD(i,e){for(var t=2*Math.cos(e),s=i.length-1,n=i[s],r=0,o;--s>=0;)o=-r+t*n+i[s],r=n,n=o;return Math.sin(e)*o}function BD(i){var e=Math.exp(i);return e=(e+1/e)/2,e}function S1(i,e,t){for(var s=Math.sin(e),n=Math.cos(e),r=w1(t),o=BD(t),a=2*n*o,l=-2*s*r,h=i.length-1,u=i[h],c=0,d=0,f=0,p,m;--h>=0;)p=d,m=c,d=u,c=f,u=-p+a*d-l*c+i[h],f=-m+l*d+a*c;return a=s*o,l=n*r,[a*u-l*f,a*f+l*u]}function zD(){if(!this.approx&&(isNaN(this.es)||this.es<=0))throw new Error('Incorrect elliptical usage. Try using the +approx option in the proj string, or PROJECTION["Fast_Transverse_Mercator"] in the WKT.');this.approx&&(ic.init.apply(this),this.forward=ic.forward,this.inverse=ic.inverse),this.x0=this.x0!==void 0?this.x0:0,this.y0=this.y0!==void 0?this.y0:0,this.long0=this.long0!==void 0?this.long0:0,this.lat0=this.lat0!==void 0?this.lat0:0,this.cgb=[],this.cbg=[],this.utg=[],this.gtu=[];var i=this.es/(1+Math.sqrt(1-this.es)),e=i/(2-i),t=e;this.cgb[0]=e*(2+e*(-2/3+e*(-2+e*(116/45+e*(26/45+e*(-2854/675)))))),this.cbg[0]=e*(-2+e*(2/3+e*(4/3+e*(-82/45+e*(32/45+e*(4642/4725)))))),t=t*e,this.cgb[1]=t*(7/3+e*(-8/5+e*(-227/45+e*(2704/315+e*(2323/945))))),this.cbg[1]=t*(5/3+e*(-16/15+e*(-13/9+e*(904/315+e*(-1522/945))))),t=t*e,this.cgb[2]=t*(56/15+e*(-136/35+e*(-1262/105+e*(73814/2835)))),this.cbg[2]=t*(-26/15+e*(34/21+e*(8/5+e*(-12686/2835)))),t=t*e,this.cgb[3]=t*(4279/630+e*(-332/35+e*(-399572/14175))),this.cbg[3]=t*(1237/630+e*(-12/5+e*(-24832/14175))),t=t*e,this.cgb[4]=t*(4174/315+e*(-144838/6237)),this.cbg[4]=t*(-734/315+e*(109598/31185)),t=t*e,this.cgb[5]=t*(601676/22275),this.cbg[5]=t*(444337/155925),t=Math.pow(e,2),this.Qn=this.k0/(1+e)*(1+t*(1/4+t*(1/64+t/256))),this.utg[0]=e*(-.5+e*(2/3+e*(-37/96+e*(1/360+e*(81/512+e*(-96199/604800)))))),this.gtu[0]=e*(.5+e*(-2/3+e*(5/16+e*(41/180+e*(-127/288+e*(7891/37800)))))),this.utg[1]=t*(-1/48+e*(-1/15+e*(437/1440+e*(-46/105+e*(1118711/3870720))))),this.gtu[1]=t*(13/48+e*(-3/5+e*(557/1440+e*(281/630+e*(-1983433/1935360))))),t=t*e,this.utg[2]=t*(-17/480+e*(37/840+e*(209/4480+e*(-5569/90720)))),this.gtu[2]=t*(61/240+e*(-103/140+e*(15061/26880+e*(167603/181440)))),t=t*e,this.utg[3]=t*(-4397/161280+e*(11/504+e*(830251/7257600))),this.gtu[3]=t*(49561/161280+e*(-179/168+e*(6601661/7257600))),t=t*e,this.utg[4]=t*(-4583/161280+e*(108847/3991680)),this.gtu[4]=t*(34729/80640+e*(-3418889/1995840)),t=t*e,this.utg[5]=t*(-20648693/638668800),this.gtu[5]=t*(212378941/319334400);var s=sm(this.cbg,this.lat0);this.Zb=-this.Qn*(s+kD(this.gtu,2*s))}function VD(i){var e=ae(i.x-this.long0),t=i.y;t=sm(this.cbg,t);var s=Math.sin(t),n=Math.cos(t),r=Math.sin(e),o=Math.cos(e);t=Math.atan2(s,o*n),e=Math.atan2(r*n,Ot(s,n*o)),e=UD(Math.tan(e));var a=S1(this.gtu,2*t,2*e);t=t+a[0],e=e+a[1];var l,h;return Math.abs(e)<=2.623395162778?(l=this.a*(this.Qn*e)+this.x0,h=this.a*(this.Qn*t+this.Zb)+this.y0):(l=1/0,h=1/0),i.x=l,i.y=h,i}function $D(i){var e=(i.x-this.x0)*(1/this.a),t=(i.y-this.y0)*(1/this.a);t=(t-this.Zb)/this.Qn,e=e/this.Qn;var s,n;if(Math.abs(e)<=2.623395162778){var r=S1(this.utg,2*t,2*e);t=t+r[0],e=e+r[1],e=Math.atan(w1(e));var o=Math.sin(t),a=Math.cos(t),l=Math.sin(e),h=Math.cos(e);t=Math.atan2(o*h,Ot(l,h*a)),e=Math.atan2(l,h*a),s=ae(e+this.long0),n=sm(this.cgb,t)}else s=1/0,n=1/0;return i.x=s,i.y=n,i}var HD=["Extended_Transverse_Mercator","Extended Transverse Mercator","etmerc","Transverse_Mercator","Transverse Mercator","Gauss Kruger","Gauss_Kruger","tmerc"];const sc={init:zD,forward:VD,inverse:$D,names:HD};function GD(i,e){if(i===void 0){if(i=Math.floor((ae(e)+Math.PI)*30/Math.PI)+1,i<0)return 0;if(i>60)return 60}return i}var YD="etmerc";function jD(){var i=GD(this.zone,this.long0);if(i===void 0)throw new Error("unknown utm zone");this.lat0=0,this.long0=(6*Math.abs(i)-183)*gt,this.x0=5e5,this.y0=this.utmSouth?1e7:0,this.k0=.9996,sc.init.apply(this),this.forward=sc.forward,this.inverse=sc.inverse}var WD=["Universal Transverse Mercator System","utm"];const XD={init:jD,names:WD,dependsOn:YD};function nm(i,e){return Math.pow((1-i)/(1+i),e)}var qD=20;function ZD(){var i=Math.sin(this.lat0),e=Math.cos(this.lat0);e*=e,this.rc=Math.sqrt(1-this.es)/(1-this.es*i*i),this.C=Math.sqrt(1+this.es*e*e/(1-this.es)),this.phic0=Math.asin(i/this.C),this.ratexp=.5*this.C*this.e,this.K=Math.tan(.5*this.phic0+Fe)/(Math.pow(Math.tan(.5*this.lat0+Fe),this.C)*nm(this.e*i,this.ratexp))}function QD(i){var e=i.x,t=i.y;return i.y=2*Math.atan(this.K*Math.pow(Math.tan(.5*t+Fe),this.C)*nm(this.e*Math.sin(t),this.ratexp))-te,i.x=this.C*e,i}function KD(i){for(var e=1e-14,t=i.x/this.C,s=i.y,n=Math.pow(Math.tan(.5*s+Fe)/this.K,1/this.C),r=qD;r>0&&(s=2*Math.atan(n*nm(this.e*Math.sin(i.y),-.5*this.e))-te,!(Math.abs(s-i.y)<e));--r)i.y=s;return r?(i.x=t,i.y=s,i):null}var JD=["gauss"];const rm={init:ZD,forward:QD,inverse:KD,names:JD};function e5(){rm.init.apply(this),this.rc&&(this.sinc0=Math.sin(this.phic0),this.cosc0=Math.cos(this.phic0),this.R2=2*this.rc,this.title||(this.title="Oblique Stereographic Alternative"))}function t5(i){var e,t,s,n;return i.x=ae(i.x-this.long0),rm.forward.apply(this,[i]),e=Math.sin(i.y),t=Math.cos(i.y),s=Math.cos(i.x),n=this.k0*this.R2/(1+this.sinc0*e+this.cosc0*t*s),i.x=n*t*Math.sin(i.x),i.y=n*(this.cosc0*e-this.sinc0*t*s),i.x=this.a*i.x+this.x0,i.y=this.a*i.y+this.y0,i}function i5(i){var e,t,s,n,r;if(i.x=(i.x-this.x0)/this.a,i.y=(i.y-this.y0)/this.a,i.x/=this.k0,i.y/=this.k0,r=Ot(i.x,i.y)){var o=2*Math.atan2(r,this.R2);e=Math.sin(o),t=Math.cos(o),n=Math.asin(t*this.sinc0+i.y*e*this.cosc0/r),s=Math.atan2(i.x*e,r*this.cosc0*t-i.y*this.sinc0*e)}else n=this.phic0,s=0;return i.x=s,i.y=n,rm.inverse.apply(this,[i]),i.x=ae(i.x+this.long0),i}var s5=["Stereographic_North_Pole","Oblique_Stereographic","sterea","Oblique Stereographic Alternative","Double_Stereographic"];const n5={init:e5,forward:t5,inverse:i5,names:s5};function r5(i,e,t){return e*=t,Math.tan(.5*(te+i))*Math.pow((1-e)/(1+e),.5*t)}function o5(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.coslat0=Math.cos(this.lat0),this.sinlat0=Math.sin(this.lat0),this.sphere?this.k0===1&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=oe&&(this.k0=.5*(1+Gl(this.lat0)*Math.sin(this.lat_ts))):(Math.abs(this.coslat0)<=oe&&(this.lat0>0?this.con=1:this.con=-1),this.cons=Math.sqrt(Math.pow(1+this.e,1+this.e)*Math.pow(1-this.e,1-this.e)),this.k0===1&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=oe&&Math.abs(Math.cos(this.lat_ts))>oe&&(this.k0=.5*this.cons*Wi(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts))/vi(this.e,this.con*this.lat_ts,this.con*Math.sin(this.lat_ts))),this.ms1=Wi(this.e,this.sinlat0,this.coslat0),this.X0=2*Math.atan(this.ssfn_(this.lat0,this.sinlat0,this.e))-te,this.cosX0=Math.cos(this.X0),this.sinX0=Math.sin(this.X0))}function a5(i){var e=i.x,t=i.y,s=Math.sin(t),n=Math.cos(t),r,o,a,l,h,u,c=ae(e-this.long0);return Math.abs(Math.abs(e-this.long0)-Math.PI)<=oe&&Math.abs(t+this.lat0)<=oe?(i.x=NaN,i.y=NaN,i):this.sphere?(r=2*this.k0/(1+this.sinlat0*s+this.coslat0*n*Math.cos(c)),i.x=this.a*r*n*Math.sin(c)+this.x0,i.y=this.a*r*(this.coslat0*s-this.sinlat0*n*Math.cos(c))+this.y0,i):(o=2*Math.atan(this.ssfn_(t,s,this.e))-te,l=Math.cos(o),a=Math.sin(o),Math.abs(this.coslat0)<=oe?(h=vi(this.e,t*this.con,this.con*s),u=2*this.a*this.k0*h/this.cons,i.x=this.x0+u*Math.sin(e-this.long0),i.y=this.y0-this.con*u*Math.cos(e-this.long0),i):(Math.abs(this.sinlat0)<oe?(r=2*this.a*this.k0/(1+l*Math.cos(c)),i.y=r*a):(r=2*this.a*this.k0*this.ms1/(this.cosX0*(1+this.sinX0*a+this.cosX0*l*Math.cos(c))),i.y=r*(this.cosX0*a-this.sinX0*l*Math.cos(c))+this.y0),i.x=r*l*Math.sin(c)+this.x0,i))}function l5(i){i.x-=this.x0,i.y-=this.y0;var e,t,s,n,r,o=Math.sqrt(i.x*i.x+i.y*i.y);if(this.sphere){var a=2*Math.atan(o/(2*this.a*this.k0));return e=this.long0,t=this.lat0,o<=oe?(i.x=e,i.y=t,i):(t=Math.asin(Math.cos(a)*this.sinlat0+i.y*Math.sin(a)*this.coslat0/o),Math.abs(this.coslat0)<oe?this.lat0>0?e=ae(this.long0+Math.atan2(i.x,-1*i.y)):e=ae(this.long0+Math.atan2(i.x,i.y)):e=ae(this.long0+Math.atan2(i.x*Math.sin(a),o*this.coslat0*Math.cos(a)-i.y*this.sinlat0*Math.sin(a))),i.x=e,i.y=t,i)}else if(Math.abs(this.coslat0)<=oe){if(o<=oe)return t=this.lat0,e=this.long0,i.x=e,i.y=t,i;i.x*=this.con,i.y*=this.con,s=o*this.cons/(2*this.a*this.k0),t=this.con*dl(this.e,s),e=this.con*ae(this.con*this.long0+Math.atan2(i.x,-1*i.y))}else n=2*Math.atan(o*this.cosX0/(2*this.a*this.k0*this.ms1)),e=this.long0,o<=oe?r=this.X0:(r=Math.asin(Math.cos(n)*this.sinX0+i.y*Math.sin(n)*this.cosX0/o),e=ae(this.long0+Math.atan2(i.x*Math.sin(n),o*this.cosX0*Math.cos(n)-i.y*this.sinX0*Math.sin(n)))),t=-1*dl(this.e,Math.tan(.5*(te+r)));return i.x=e,i.y=t,i}var h5=["stere","Stereographic_South_Pole","Polar Stereographic (variant B)","Polar_Stereographic"];const c5={init:o5,forward:a5,inverse:l5,names:h5,ssfn_:r5};function u5(){var i=this.lat0;this.lambda0=this.long0;var e=Math.sin(i),t=this.a,s=this.rf,n=1/s,r=2*n-Math.pow(n,2),o=this.e=Math.sqrt(r);this.R=this.k0*t*Math.sqrt(1-r)/(1-r*Math.pow(e,2)),this.alpha=Math.sqrt(1+r/(1-r)*Math.pow(Math.cos(i),4)),this.b0=Math.asin(e/this.alpha);var a=Math.log(Math.tan(Math.PI/4+this.b0/2)),l=Math.log(Math.tan(Math.PI/4+i/2)),h=Math.log((1+o*e)/(1-o*e));this.K=a-this.alpha*l+this.alpha*o/2*h}function d5(i){var e=Math.log(Math.tan(Math.PI/4-i.y/2)),t=this.e/2*Math.log((1+this.e*Math.sin(i.y))/(1-this.e*Math.sin(i.y))),s=-this.alpha*(e+t)+this.K,n=2*(Math.atan(Math.exp(s))-Math.PI/4),r=this.alpha*(i.x-this.lambda0),o=Math.atan(Math.sin(r)/(Math.sin(this.b0)*Math.tan(n)+Math.cos(this.b0)*Math.cos(r))),a=Math.asin(Math.cos(this.b0)*Math.sin(n)-Math.sin(this.b0)*Math.cos(n)*Math.cos(r));return i.y=this.R/2*Math.log((1+Math.sin(a))/(1-Math.sin(a)))+this.y0,i.x=this.R*o+this.x0,i}function f5(i){for(var e=i.x-this.x0,t=i.y-this.y0,s=e/this.R,n=2*(Math.atan(Math.exp(t/this.R))-Math.PI/4),r=Math.asin(Math.cos(this.b0)*Math.sin(n)+Math.sin(this.b0)*Math.cos(n)*Math.cos(s)),o=Math.atan(Math.sin(s)/(Math.cos(this.b0)*Math.cos(s)-Math.sin(this.b0)*Math.tan(n))),a=this.lambda0+o/this.alpha,l=0,h=r,u=-1e3,c=0;Math.abs(h-u)>1e-7;){if(++c>20)return;l=1/this.alpha*(Math.log(Math.tan(Math.PI/4+r/2))-this.K)+this.e*Math.log(Math.tan(Math.PI/4+Math.asin(this.e*Math.sin(h))/2)),u=h,h=2*Math.atan(Math.exp(l))-Math.PI/2}return i.x=a,i.y=h,i}var p5=["somerc"];const m5={init:u5,forward:d5,inverse:f5,names:p5};var xr=1e-7;function g5(i){var e=["Hotine_Oblique_Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin"],t=typeof i.PROJECTION=="object"?Object.keys(i.PROJECTION)[0]:i.PROJECTION;return"no_uoff"in i||"no_off"in i||e.indexOf(t)!==-1}function E5(){var i,e,t,s,n,r,o,a,l,h,u=0,c,d=0,f=0,p=0,m=0,g=0,E=0;this.no_off=g5(this),this.no_rot="no_rot"in this;var I=!1;"alpha"in this&&(I=!0);var v=!1;if("rectified_grid_angle"in this&&(v=!0),I&&(E=this.alpha),v&&(u=this.rectified_grid_angle*gt),I||v)d=this.longc;else if(f=this.long1,m=this.lat1,p=this.long2,g=this.lat2,Math.abs(m-g)<=xr||(i=Math.abs(m))<=xr||Math.abs(i-te)<=xr||Math.abs(Math.abs(this.lat0)-te)<=xr||Math.abs(Math.abs(g)-te)<=xr)throw new Error;var b=1-this.es;e=Math.sqrt(b),Math.abs(this.lat0)>oe?(a=Math.sin(this.lat0),t=Math.cos(this.lat0),i=1-this.es*a*a,this.B=t*t,this.B=Math.sqrt(1+this.es*this.B*this.B/b),this.A=this.B*this.k0*e/i,s=this.B*e/(t*Math.sqrt(i)),n=s*s-1,n<=0?n=0:(n=Math.sqrt(n),this.lat0<0&&(n=-n)),this.E=n+=s,this.E*=Math.pow(vi(this.e,this.lat0,a),this.B)):(this.B=1/e,this.A=this.k0,this.E=s=n=1),I||v?(I?(c=Math.asin(Math.sin(E)/s),v||(u=E)):(c=u,E=Math.asin(s*Math.sin(c))),this.lam0=d-Math.asin(.5*(n-1/n)*Math.tan(c))/this.B):(r=Math.pow(vi(this.e,m,Math.sin(m)),this.B),o=Math.pow(vi(this.e,g,Math.sin(g)),this.B),n=this.E/r,l=(o-r)/(o+r),h=this.E*this.E,h=(h-o*r)/(h+o*r),i=f-p,i<-Math.pi?p-=cl:i>Math.pi&&(p+=cl),this.lam0=ae(.5*(f+p)-Math.atan(h*Math.tan(.5*this.B*(f-p))/l)/this.B),c=Math.atan(2*Math.sin(this.B*ae(f-this.lam0))/(n-1/n)),u=E=Math.asin(s*Math.sin(c))),this.singam=Math.sin(c),this.cosgam=Math.cos(c),this.sinrot=Math.sin(u),this.cosrot=Math.cos(u),this.rB=1/this.B,this.ArB=this.A*this.rB,this.BrA=1/this.ArB,this.A*this.B,this.no_off?this.u_0=0:(this.u_0=Math.abs(this.ArB*Math.atan(Math.sqrt(s*s-1)/Math.cos(E))),this.lat0<0&&(this.u_0=-this.u_0)),n=.5*c,this.v_pole_n=this.ArB*Math.log(Math.tan(Fe-n)),this.v_pole_s=this.ArB*Math.log(Math.tan(Fe+n))}function I5(i){var e={},t,s,n,r,o,a,l,h;if(i.x=i.x-this.lam0,Math.abs(Math.abs(i.y)-te)>oe){if(o=this.E/Math.pow(vi(this.e,i.y,Math.sin(i.y)),this.B),a=1/o,t=.5*(o-a),s=.5*(o+a),r=Math.sin(this.B*i.x),n=(t*this.singam-r*this.cosgam)/s,Math.abs(Math.abs(n)-1)<oe)throw new Error;h=.5*this.ArB*Math.log((1-n)/(1+n)),a=Math.cos(this.B*i.x),Math.abs(a)<xr?l=this.A*i.x:l=this.ArB*Math.atan2(t*this.cosgam+r*this.singam,a)}else h=i.y>0?this.v_pole_n:this.v_pole_s,l=this.ArB*i.y;return this.no_rot?(e.x=l,e.y=h):(l-=this.u_0,e.x=h*this.cosrot+l*this.sinrot,e.y=l*this.cosrot-h*this.sinrot),e.x=this.a*e.x+this.x0,e.y=this.a*e.y+this.y0,e}function b5(i){var e,t,s,n,r,o,a,l={};if(i.x=(i.x-this.x0)*(1/this.a),i.y=(i.y-this.y0)*(1/this.a),this.no_rot?(t=i.y,e=i.x):(t=i.x*this.cosrot-i.y*this.sinrot,e=i.y*this.cosrot+i.x*this.sinrot+this.u_0),s=Math.exp(-this.BrA*t),n=.5*(s-1/s),r=.5*(s+1/s),o=Math.sin(this.BrA*e),a=(o*this.cosgam+n*this.singam)/r,Math.abs(Math.abs(a)-1)<oe)l.x=0,l.y=a<0?-te:te;else{if(l.y=this.E/Math.sqrt((1+a)/(1-a)),l.y=dl(this.e,Math.pow(l.y,1/this.B)),l.y===1/0)throw new Error;l.x=-this.rB*Math.atan2(n*this.cosgam-o*this.singam,Math.cos(this.BrA*e))}return l.x+=this.lam0,l}var v5=["Hotine_Oblique_Mercator","Hotine Oblique Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin","Hotine_Oblique_Mercator_Two_Point_Natural_Origin","Hotine_Oblique_Mercator_Azimuth_Center","Oblique_Mercator","omerc"];const y5={init:E5,forward:I5,inverse:b5,names:v5};function C5(){if(this.lat2||(this.lat2=this.lat1),this.k0||(this.k0=1),this.x0=this.x0||0,this.y0=this.y0||0,!(Math.abs(this.lat1+this.lat2)<oe)){var i=this.b/this.a;this.e=Math.sqrt(1-i*i);var e=Math.sin(this.lat1),t=Math.cos(this.lat1),s=Wi(this.e,e,t),n=vi(this.e,this.lat1,e),r=Math.sin(this.lat2),o=Math.cos(this.lat2),a=Wi(this.e,r,o),l=vi(this.e,this.lat2,r),h=vi(this.e,this.lat0,Math.sin(this.lat0));Math.abs(this.lat1-this.lat2)>oe?this.ns=Math.log(s/a)/Math.log(n/l):this.ns=e,isNaN(this.ns)&&(this.ns=e),this.f0=s/(this.ns*Math.pow(n,this.ns)),this.rh=this.a*this.f0*Math.pow(h,this.ns),this.title||(this.title="Lambert Conformal Conic")}}function T5(i){var e=i.x,t=i.y;Math.abs(2*Math.abs(t)-Math.PI)<=oe&&(t=Gl(t)*(te-2*oe));var s=Math.abs(Math.abs(t)-te),n,r;if(s>oe)n=vi(this.e,t,Math.sin(t)),r=this.a*this.f0*Math.pow(n,this.ns);else{if(s=t*this.ns,s<=0)return null;r=0}var o=this.ns*ae(e-this.long0);return i.x=this.k0*(r*Math.sin(o))+this.x0,i.y=this.k0*(this.rh-r*Math.cos(o))+this.y0,i}function w5(i){var e,t,s,n,r,o=(i.x-this.x0)/this.k0,a=this.rh-(i.y-this.y0)/this.k0;this.ns>0?(e=Math.sqrt(o*o+a*a),t=1):(e=-Math.sqrt(o*o+a*a),t=-1);var l=0;if(e!==0&&(l=Math.atan2(t*o,t*a)),e!==0||this.ns>0){if(t=1/this.ns,s=Math.pow(e/(this.a*this.f0),t),n=dl(this.e,s),n===-9999)return null}else n=-te;return r=ae(l/this.ns+this.long0),i.x=r,i.y=n,i}var S5=["Lambert Tangential Conformal Conic Projection","Lambert_Conformal_Conic","Lambert_Conformal_Conic_1SP","Lambert_Conformal_Conic_2SP","lcc","Lambert Conic Conformal (1SP)","Lambert Conic Conformal (2SP)"];const x5={init:C5,forward:T5,inverse:w5,names:S5};function R5(){this.a=6377397155e-3,this.es=.006674372230614,this.e=Math.sqrt(this.es),this.lat0||(this.lat0=.863937979737193),this.long0||(this.long0=.7417649320975901-.308341501185665),this.k0||(this.k0=.9999),this.s45=.785398163397448,this.s90=2*this.s45,this.fi0=this.lat0,this.e2=this.es,this.e=Math.sqrt(this.e2),this.alfa=Math.sqrt(1+this.e2*Math.pow(Math.cos(this.fi0),4)/(1-this.e2)),this.uq=1.04216856380474,this.u0=Math.asin(Math.sin(this.fi0)/this.alfa),this.g=Math.pow((1+this.e*Math.sin(this.fi0))/(1-this.e*Math.sin(this.fi0)),this.alfa*this.e/2),this.k=Math.tan(this.u0/2+this.s45)/Math.pow(Math.tan(this.fi0/2+this.s45),this.alfa)*this.g,this.k1=this.k0,this.n0=this.a*Math.sqrt(1-this.e2)/(1-this.e2*Math.pow(Math.sin(this.fi0),2)),this.s0=1.37008346281555,this.n=Math.sin(this.s0),this.ro0=this.k1*this.n0/Math.tan(this.s0),this.ad=this.s90-this.uq}function _5(i){var e,t,s,n,r,o,a,l=i.x,h=i.y,u=ae(l-this.long0);return e=Math.pow((1+this.e*Math.sin(h))/(1-this.e*Math.sin(h)),this.alfa*this.e/2),t=2*(Math.atan(this.k*Math.pow(Math.tan(h/2+this.s45),this.alfa)/e)-this.s45),s=-u*this.alfa,n=Math.asin(Math.cos(this.ad)*Math.sin(t)+Math.sin(this.ad)*Math.cos(t)*Math.cos(s)),r=Math.asin(Math.cos(t)*Math.sin(s)/Math.cos(n)),o=this.n*r,a=this.ro0*Math.pow(Math.tan(this.s0/2+this.s45),this.n)/Math.pow(Math.tan(n/2+this.s45),this.n),i.y=a*Math.cos(o)/1,i.x=a*Math.sin(o)/1,this.czech||(i.y*=-1,i.x*=-1),i}function A5(i){var e,t,s,n,r,o,a,l,h=i.x;i.x=i.y,i.y=h,this.czech||(i.y*=-1,i.x*=-1),o=Math.sqrt(i.x*i.x+i.y*i.y),r=Math.atan2(i.y,i.x),n=r/Math.sin(this.s0),s=2*(Math.atan(Math.pow(this.ro0/o,1/this.n)*Math.tan(this.s0/2+this.s45))-this.s45),e=Math.asin(Math.cos(this.ad)*Math.sin(s)-Math.sin(this.ad)*Math.cos(s)*Math.cos(n)),t=Math.asin(Math.cos(s)*Math.sin(n)/Math.cos(e)),i.x=this.long0-t/this.alfa,a=e,l=0;var u=0;do i.y=2*(Math.atan(Math.pow(this.k,-1/this.alfa)*Math.pow(Math.tan(e/2+this.s45),1/this.alfa)*Math.pow((1+this.e*Math.sin(a))/(1-this.e*Math.sin(a)),this.e/2))-this.s45),Math.abs(a-i.y)<1e-10&&(l=1),a=i.y,u+=1;while(l===0&&u<15);return u>=15?null:i}var M5=["Krovak","krovak"];const F5={init:R5,forward:_5,inverse:A5,names:M5};function Rt(i,e,t,s,n){return i*n-e*Math.sin(2*n)+t*Math.sin(4*n)-s*Math.sin(6*n)}function Yl(i){return 1-.25*i*(1+i/16*(3+1.25*i))}function jl(i){return .375*i*(1+.25*i*(1+.46875*i))}function Wl(i){return .05859375*i*i*(1+.75*i)}function Xl(i){return i*i*i*(35/3072)}function go(i,e,t){var s=e*t;return i/Math.sqrt(1-s*s)}function un(i){return Math.abs(i)<te?i:i-Gl(i)*Math.PI}function Bc(i,e,t,s,n){var r,o;r=i/e;for(var a=0;a<15;a++)if(o=(i-(e*r-t*Math.sin(2*r)+s*Math.sin(4*r)-n*Math.sin(6*r)))/(e-2*t*Math.cos(2*r)+4*s*Math.cos(4*r)-6*n*Math.cos(6*r)),r+=o,Math.abs(o)<=1e-10)return r;return NaN}function O5(){this.sphere||(this.e0=Yl(this.es),this.e1=jl(this.es),this.e2=Wl(this.es),this.e3=Xl(this.es),this.ml0=this.a*Rt(this.e0,this.e1,this.e2,this.e3,this.lat0))}function N5(i){var e,t,s=i.x,n=i.y;if(s=ae(s-this.long0),this.sphere)e=this.a*Math.asin(Math.cos(n)*Math.sin(s)),t=this.a*(Math.atan2(Math.tan(n),Math.cos(s))-this.lat0);else{var r=Math.sin(n),o=Math.cos(n),a=go(this.a,this.e,r),l=Math.tan(n)*Math.tan(n),h=s*Math.cos(n),u=h*h,c=this.es*o*o/(1-this.es),d=this.a*Rt(this.e0,this.e1,this.e2,this.e3,n);e=a*h*(1-u*l*(1/6-(8-l+8*c)*u/120)),t=d-this.ml0+a*r/o*u*(.5+(5-l+6*c)*u/24)}return i.x=e+this.x0,i.y=t+this.y0,i}function P5(i){i.x-=this.x0,i.y-=this.y0;var e=i.x/this.a,t=i.y/this.a,s,n;if(this.sphere){var r=t+this.lat0;s=Math.asin(Math.sin(r)*Math.cos(e)),n=Math.atan2(Math.tan(e),Math.cos(r))}else{var o=this.ml0/this.a+t,a=Bc(o,this.e0,this.e1,this.e2,this.e3);if(Math.abs(Math.abs(a)-te)<=oe)return i.x=this.long0,i.y=te,t<0&&(i.y*=-1),i;var l=go(this.a,this.e,Math.sin(a)),h=l*l*l/this.a/this.a*(1-this.es),u=Math.pow(Math.tan(a),2),c=e*this.a/l,d=c*c;s=a-l*Math.tan(a)/h*c*c*(.5-(1+3*u)*c*c/24),n=c*(1-d*(u/3+(1+3*u)*u*d/15))/Math.cos(a)}return i.x=ae(n+this.long0),i.y=un(s),i}var L5=["Cassini","Cassini_Soldner","cass"];const D5={init:O5,forward:N5,inverse:P5,names:L5};function zs(i,e){var t;return i>1e-7?(t=i*e,(1-i*i)*(e/(1-t*t)-.5/i*Math.log((1-t)/(1+t)))):2*e}var U5=1,k5=2,B5=3,z5=4;function V5(){var i=Math.abs(this.lat0);if(Math.abs(i-te)<oe?this.mode=this.lat0<0?this.S_POLE:this.N_POLE:Math.abs(i)<oe?this.mode=this.EQUIT:this.mode=this.OBLIQ,this.es>0){var e;switch(this.qp=zs(this.e,1),this.mmf=.5/(1-this.es),this.apa=Z5(this.es),this.mode){case this.N_POLE:this.dd=1;break;case this.S_POLE:this.dd=1;break;case this.EQUIT:this.rq=Math.sqrt(.5*this.qp),this.dd=1/this.rq,this.xmf=1,this.ymf=.5*this.qp;break;case this.OBLIQ:this.rq=Math.sqrt(.5*this.qp),e=Math.sin(this.lat0),this.sinb1=zs(this.e,e)/this.qp,this.cosb1=Math.sqrt(1-this.sinb1*this.sinb1),this.dd=Math.cos(this.lat0)/(Math.sqrt(1-this.es*e*e)*this.rq*this.cosb1),this.ymf=(this.xmf=this.rq)/this.dd,this.xmf*=this.dd;break}}else this.mode===this.OBLIQ&&(this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0))}function $5(i){var e,t,s,n,r,o,a,l,h,u,c=i.x,d=i.y;if(c=ae(c-this.long0),this.sphere){if(r=Math.sin(d),u=Math.cos(d),s=Math.cos(c),this.mode===this.OBLIQ||this.mode===this.EQUIT){if(t=this.mode===this.EQUIT?1+u*s:1+this.sinph0*r+this.cosph0*u*s,t<=oe)return null;t=Math.sqrt(2/t),e=t*u*Math.sin(c),t*=this.mode===this.EQUIT?r:this.cosph0*r-this.sinph0*u*s}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(s=-s),Math.abs(d+this.lat0)<oe)return null;t=Fe-d*.5,t=2*(this.mode===this.S_POLE?Math.cos(t):Math.sin(t)),e=t*Math.sin(c),t*=s}}else{switch(a=0,l=0,h=0,s=Math.cos(c),n=Math.sin(c),r=Math.sin(d),o=zs(this.e,r),(this.mode===this.OBLIQ||this.mode===this.EQUIT)&&(a=o/this.qp,l=Math.sqrt(1-a*a)),this.mode){case this.OBLIQ:h=1+this.sinb1*a+this.cosb1*l*s;break;case this.EQUIT:h=1+l*s;break;case this.N_POLE:h=te+d,o=this.qp-o;break;case this.S_POLE:h=d-te,o=this.qp+o;break}if(Math.abs(h)<oe)return null;switch(this.mode){case this.OBLIQ:case this.EQUIT:h=Math.sqrt(2/h),this.mode===this.OBLIQ?t=this.ymf*h*(this.cosb1*a-this.sinb1*l*s):t=(h=Math.sqrt(2/(1+l*s)))*a*this.ymf,e=this.xmf*h*l*n;break;case this.N_POLE:case this.S_POLE:o>=0?(e=(h=Math.sqrt(o))*n,t=s*(this.mode===this.S_POLE?h:-h)):e=t=0;break}}return i.x=this.a*e+this.x0,i.y=this.a*t+this.y0,i}function H5(i){i.x-=this.x0,i.y-=this.y0;var e=i.x/this.a,t=i.y/this.a,s,n,r,o,a,l,h;if(this.sphere){var u=0,c,d=0;if(c=Math.sqrt(e*e+t*t),n=c*.5,n>1)return null;switch(n=2*Math.asin(n),(this.mode===this.OBLIQ||this.mode===this.EQUIT)&&(d=Math.sin(n),u=Math.cos(n)),this.mode){case this.EQUIT:n=Math.abs(c)<=oe?0:Math.asin(t*d/c),e*=d,t=u*c;break;case this.OBLIQ:n=Math.abs(c)<=oe?this.lat0:Math.asin(u*this.sinph0+t*d*this.cosph0/c),e*=d*this.cosph0,t=(u-Math.sin(n)*this.sinph0)*c;break;case this.N_POLE:t=-t,n=te-n;break;case this.S_POLE:n-=te;break}s=t===0&&(this.mode===this.EQUIT||this.mode===this.OBLIQ)?0:Math.atan2(e,t)}else{if(h=0,this.mode===this.OBLIQ||this.mode===this.EQUIT){if(e/=this.dd,t*=this.dd,l=Math.sqrt(e*e+t*t),l<oe)return i.x=this.long0,i.y=this.lat0,i;o=2*Math.asin(.5*l/this.rq),r=Math.cos(o),e*=o=Math.sin(o),this.mode===this.OBLIQ?(h=r*this.sinb1+t*o*this.cosb1/l,a=this.qp*h,t=l*this.cosb1*r-t*this.sinb1*o):(h=t*o/l,a=this.qp*h,t=l*r)}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(t=-t),a=e*e+t*t,!a)return i.x=this.long0,i.y=this.lat0,i;h=1-a/this.qp,this.mode===this.S_POLE&&(h=-h)}s=Math.atan2(e,t),n=Q5(Math.asin(h),this.apa)}return i.x=ae(this.long0+s),i.y=n,i}var G5=.3333333333333333,Y5=.17222222222222222,j5=.10257936507936508,W5=.06388888888888888,X5=.0664021164021164,q5=.016415012942191543;function Z5(i){var e,t=[];return t[0]=i*G5,e=i*i,t[0]+=e*Y5,t[1]=e*W5,e*=i,t[0]+=e*j5,t[1]+=e*X5,t[2]=e*q5,t}function Q5(i,e){var t=i+i;return i+e[0]*Math.sin(t)+e[1]*Math.sin(t+t)+e[2]*Math.sin(t+t+t)}var K5=["Lambert Azimuthal Equal Area","Lambert_Azimuthal_Equal_Area","laea"];const J5={init:V5,forward:$5,inverse:H5,names:K5,S_POLE:U5,N_POLE:k5,EQUIT:B5,OBLIQ:z5};function Zs(i){return Math.abs(i)>1&&(i=i>1?1:-1),Math.asin(i)}function e4(){Math.abs(this.lat1+this.lat2)<oe||(this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e3=Math.sqrt(this.es),this.sin_po=Math.sin(this.lat1),this.cos_po=Math.cos(this.lat1),this.t1=this.sin_po,this.con=this.sin_po,this.ms1=Wi(this.e3,this.sin_po,this.cos_po),this.qs1=zs(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat2),this.cos_po=Math.cos(this.lat2),this.t2=this.sin_po,this.ms2=Wi(this.e3,this.sin_po,this.cos_po),this.qs2=zs(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat0),this.cos_po=Math.cos(this.lat0),this.t3=this.sin_po,this.qs0=zs(this.e3,this.sin_po),Math.abs(this.lat1-this.lat2)>oe?this.ns0=(this.ms1*this.ms1-this.ms2*this.ms2)/(this.qs2-this.qs1):this.ns0=this.con,this.c=this.ms1*this.ms1+this.ns0*this.qs1,this.rh=this.a*Math.sqrt(this.c-this.ns0*this.qs0)/this.ns0)}function t4(i){var e=i.x,t=i.y;this.sin_phi=Math.sin(t),this.cos_phi=Math.cos(t);var s=zs(this.e3,this.sin_phi),n=this.a*Math.sqrt(this.c-this.ns0*s)/this.ns0,r=this.ns0*ae(e-this.long0),o=n*Math.sin(r)+this.x0,a=this.rh-n*Math.cos(r)+this.y0;return i.x=o,i.y=a,i}function i4(i){var e,t,s,n,r,o;return i.x-=this.x0,i.y=this.rh-i.y+this.y0,this.ns0>=0?(e=Math.sqrt(i.x*i.x+i.y*i.y),s=1):(e=-Math.sqrt(i.x*i.x+i.y*i.y),s=-1),n=0,e!==0&&(n=Math.atan2(s*i.x,s*i.y)),s=e*this.ns0/this.a,this.sphere?o=Math.asin((this.c-s*s)/(2*this.ns0)):(t=(this.c-s*s)/this.ns0,o=this.phi1z(this.e3,t)),r=ae(n/this.ns0+this.long0),i.x=r,i.y=o,i}function s4(i,e){var t,s,n,r,o,a=Zs(.5*e);if(i<oe)return a;for(var l=i*i,h=1;h<=25;h++)if(t=Math.sin(a),s=Math.cos(a),n=i*t,r=1-n*n,o=.5*r*r/s*(e/(1-l)-t/r+.5/i*Math.log((1-n)/(1+n))),a=a+o,Math.abs(o)<=1e-7)return a;return null}var n4=["Albers_Conic_Equal_Area","Albers","aea"];const r4={init:e4,forward:t4,inverse:i4,names:n4,phi1z:s4};function o4(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0),this.infinity_dist=1e3*this.a,this.rc=1}function a4(i){var e,t,s,n,r,o,a,l,h=i.x,u=i.y;return s=ae(h-this.long0),e=Math.sin(u),t=Math.cos(u),n=Math.cos(s),o=this.sin_p14*e+this.cos_p14*t*n,r=1,o>0||Math.abs(o)<=oe?(a=this.x0+this.a*r*t*Math.sin(s)/o,l=this.y0+this.a*r*(this.cos_p14*e-this.sin_p14*t*n)/o):(a=this.x0+this.infinity_dist*t*Math.sin(s),l=this.y0+this.infinity_dist*(this.cos_p14*e-this.sin_p14*t*n)),i.x=a,i.y=l,i}function l4(i){var e,t,s,n,r,o;return i.x=(i.x-this.x0)/this.a,i.y=(i.y-this.y0)/this.a,i.x/=this.k0,i.y/=this.k0,(e=Math.sqrt(i.x*i.x+i.y*i.y))?(n=Math.atan2(e,this.rc),t=Math.sin(n),s=Math.cos(n),o=Zs(s*this.sin_p14+i.y*t*this.cos_p14/e),r=Math.atan2(i.x*t,e*this.cos_p14*s-i.y*this.sin_p14*t),r=ae(this.long0+r)):(o=this.phic0,r=0),i.x=r,i.y=o,i}var h4=["gnom"];const c4={init:o4,forward:a4,inverse:l4,names:h4};function u4(i,e){var t=1-(1-i*i)/(2*i)*Math.log((1-i)/(1+i));if(Math.abs(Math.abs(e)-t)<1e-6)return e<0?-1*te:te;for(var s=Math.asin(.5*e),n,r,o,a,l=0;l<30;l++)if(r=Math.sin(s),o=Math.cos(s),a=i*r,n=Math.pow(1-a*a,2)/(2*o)*(e/(1-i*i)-r/(1-a*a)+.5/i*Math.log((1-a)/(1+a))),s+=n,Math.abs(n)<=1e-10)return s;return NaN}function d4(){this.sphere||(this.k0=Wi(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)))}function f4(i){var e=i.x,t=i.y,s,n,r=ae(e-this.long0);if(this.sphere)s=this.x0+this.a*r*Math.cos(this.lat_ts),n=this.y0+this.a*Math.sin(t)/Math.cos(this.lat_ts);else{var o=zs(this.e,Math.sin(t));s=this.x0+this.a*this.k0*r,n=this.y0+this.a*o*.5/this.k0}return i.x=s,i.y=n,i}function p4(i){i.x-=this.x0,i.y-=this.y0;var e,t;return this.sphere?(e=ae(this.long0+i.x/this.a/Math.cos(this.lat_ts)),t=Math.asin(i.y/this.a*Math.cos(this.lat_ts))):(t=u4(this.e,2*i.y*this.k0/this.a),e=ae(this.long0+i.x/(this.a*this.k0))),i.x=e,i.y=t,i}var m4=["cea"];const g4={init:d4,forward:f4,inverse:p4,names:m4};function E4(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Equidistant Cylindrical (Plate Carre)",this.rc=Math.cos(this.lat_ts)}function I4(i){var e=i.x,t=i.y,s=ae(e-this.long0),n=un(t-this.lat0);return i.x=this.x0+this.a*s*this.rc,i.y=this.y0+this.a*n,i}function b4(i){var e=i.x,t=i.y;return i.x=ae(this.long0+(e-this.x0)/(this.a*this.rc)),i.y=un(this.lat0+(t-this.y0)/this.a),i}var v4=["Equirectangular","Equidistant_Cylindrical","eqc"];const y4={init:E4,forward:I4,inverse:b4,names:v4};var CE=20;function C4(){this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=Yl(this.es),this.e1=jl(this.es),this.e2=Wl(this.es),this.e3=Xl(this.es),this.ml0=this.a*Rt(this.e0,this.e1,this.e2,this.e3,this.lat0)}function T4(i){var e=i.x,t=i.y,s,n,r,o=ae(e-this.long0);if(r=o*Math.sin(t),this.sphere)Math.abs(t)<=oe?(s=this.a*o,n=-1*this.a*this.lat0):(s=this.a*Math.sin(r)/Math.tan(t),n=this.a*(un(t-this.lat0)+(1-Math.cos(r))/Math.tan(t)));else if(Math.abs(t)<=oe)s=this.a*o,n=-1*this.ml0;else{var a=go(this.a,this.e,Math.sin(t))/Math.tan(t);s=a*Math.sin(r),n=this.a*Rt(this.e0,this.e1,this.e2,this.e3,t)-this.ml0+a*(1-Math.cos(r))}return i.x=s+this.x0,i.y=n+this.y0,i}function w4(i){var e,t,s,n,r,o,a,l,h;if(s=i.x-this.x0,n=i.y-this.y0,this.sphere)if(Math.abs(n+this.a*this.lat0)<=oe)e=ae(s/this.a+this.long0),t=0;else{o=this.lat0+n/this.a,a=s*s/this.a/this.a+o*o,l=o;var u;for(r=CE;r;--r)if(u=Math.tan(l),h=-1*(o*(l*u+1)-l-.5*(l*l+a)*u)/((l-o)/u-1),l+=h,Math.abs(h)<=oe){t=l;break}e=ae(this.long0+Math.asin(s*Math.tan(l)/this.a)/Math.sin(t))}else if(Math.abs(n+this.ml0)<=oe)t=0,e=ae(this.long0+s/this.a);else{o=(this.ml0+n)/this.a,a=s*s/this.a/this.a+o*o,l=o;var c,d,f,p,m;for(r=CE;r;--r)if(m=this.e*Math.sin(l),c=Math.sqrt(1-m*m)*Math.tan(l),d=this.a*Rt(this.e0,this.e1,this.e2,this.e3,l),f=this.e0-2*this.e1*Math.cos(2*l)+4*this.e2*Math.cos(4*l)-6*this.e3*Math.cos(6*l),p=d/this.a,h=(o*(c*p+1)-p-.5*c*(p*p+a))/(this.es*Math.sin(2*l)*(p*p+a-2*o*p)/(4*c)+(o-p)*(c*f-2/Math.sin(2*l))-f),l-=h,Math.abs(h)<=oe){t=l;break}c=Math.sqrt(1-this.es*Math.pow(Math.sin(t),2))*Math.tan(t),e=ae(this.long0+Math.asin(s*c/this.a)/Math.sin(t))}return i.x=e,i.y=t,i}var S4=["Polyconic","poly"];const x4={init:C4,forward:T4,inverse:w4,names:S4};function R4(){this.A=[],this.A[1]=.6399175073,this.A[2]=-.1358797613,this.A[3]=.063294409,this.A[4]=-.02526853,this.A[5]=.0117879,this.A[6]=-.0055161,this.A[7]=.0026906,this.A[8]=-.001333,this.A[9]=67e-5,this.A[10]=-34e-5,this.B_re=[],this.B_im=[],this.B_re[1]=.7557853228,this.B_im[1]=0,this.B_re[2]=.249204646,this.B_im[2]=.003371507,this.B_re[3]=-.001541739,this.B_im[3]=.04105856,this.B_re[4]=-.10162907,this.B_im[4]=.01727609,this.B_re[5]=-.26623489,this.B_im[5]=-.36249218,this.B_re[6]=-.6870983,this.B_im[6]=-1.1651967,this.C_re=[],this.C_im=[],this.C_re[1]=1.3231270439,this.C_im[1]=0,this.C_re[2]=-.577245789,this.C_im[2]=-.007809598,this.C_re[3]=.508307513,this.C_im[3]=-.112208952,this.C_re[4]=-.15094762,this.C_im[4]=.18200602,this.C_re[5]=1.01418179,this.C_im[5]=1.64497696,this.C_re[6]=1.9660549,this.C_im[6]=2.5127645,this.D=[],this.D[1]=1.5627014243,this.D[2]=.5185406398,this.D[3]=-.03333098,this.D[4]=-.1052906,this.D[5]=-.0368594,this.D[6]=.007317,this.D[7]=.0122,this.D[8]=.00394,this.D[9]=-.0013}function _4(i){var e,t=i.x,s=i.y,n=s-this.lat0,r=t-this.long0,o=n/Pa*1e-5,a=r,l=1,h=0;for(e=1;e<=10;e++)l=l*o,h=h+this.A[e]*l;var u=h,c=a,d=1,f=0,p,m,g=0,E=0;for(e=1;e<=6;e++)p=d*u-f*c,m=f*u+d*c,d=p,f=m,g=g+this.B_re[e]*d-this.B_im[e]*f,E=E+this.B_im[e]*d+this.B_re[e]*f;return i.x=E*this.a+this.x0,i.y=g*this.a+this.y0,i}function A4(i){var e,t=i.x,s=i.y,n=t-this.x0,r=s-this.y0,o=r/this.a,a=n/this.a,l=1,h=0,u,c,d=0,f=0;for(e=1;e<=6;e++)u=l*o-h*a,c=h*o+l*a,l=u,h=c,d=d+this.C_re[e]*l-this.C_im[e]*h,f=f+this.C_im[e]*l+this.C_re[e]*h;for(var p=0;p<this.iterations;p++){var m=d,g=f,E,I,v=o,b=a;for(e=2;e<=6;e++)E=m*d-g*f,I=g*d+m*f,m=E,g=I,v=v+(e-1)*(this.B_re[e]*m-this.B_im[e]*g),b=b+(e-1)*(this.B_im[e]*m+this.B_re[e]*g);m=1,g=0;var C=this.B_re[1],S=this.B_im[1];for(e=2;e<=6;e++)E=m*d-g*f,I=g*d+m*f,m=E,g=I,C=C+e*(this.B_re[e]*m-this.B_im[e]*g),S=S+e*(this.B_im[e]*m+this.B_re[e]*g);var _=C*C+S*S;d=(v*C+b*S)/_,f=(b*C-v*S)/_}var M=d,A=f,F=1,D=0;for(e=1;e<=9;e++)F=F*M,D=D+this.D[e]*F;var x=this.lat0+D*Pa*1e5,N=this.long0+A;return i.x=N,i.y=x,i}var M4=["New_Zealand_Map_Grid","nzmg"];const F4={init:R4,forward:_4,inverse:A4,names:M4};function O4(){}function N4(i){var e=i.x,t=i.y,s=ae(e-this.long0),n=this.x0+this.a*s,r=this.y0+this.a*Math.log(Math.tan(Math.PI/4+t/2.5))*1.25;return i.x=n,i.y=r,i}function P4(i){i.x-=this.x0,i.y-=this.y0;var e=ae(this.long0+i.x/this.a),t=2.5*(Math.atan(Math.exp(.8*i.y/this.a))-Math.PI/4);return i.x=e,i.y=t,i}var L4=["Miller_Cylindrical","mill"];const D4={init:O4,forward:N4,inverse:P4,names:L4};var U4=20;function k4(){this.sphere?(this.n=1,this.m=0,this.es=0,this.C_y=Math.sqrt((this.m+1)/this.n),this.C_x=this.C_y/(this.m+1)):this.en=tm(this.es)}function B4(i){var e,t,s=i.x,n=i.y;if(s=ae(s-this.long0),this.sphere){if(!this.m)n=this.n!==1?Math.asin(this.n*Math.sin(n)):n;else for(var r=this.n*Math.sin(n),o=U4;o;--o){var a=(this.m*n+Math.sin(n)-r)/(this.m+Math.cos(n));if(n-=a,Math.abs(a)<oe)break}e=this.a*this.C_x*s*(this.m+Math.cos(n)),t=this.a*this.C_y*n}else{var l=Math.sin(n),h=Math.cos(n);t=this.a*Bo(n,l,h,this.en),e=this.a*s*h/Math.sqrt(1-this.es*l*l)}return i.x=e,i.y=t,i}function z4(i){var e,t,s,n;return i.x-=this.x0,s=i.x/this.a,i.y-=this.y0,e=i.y/this.a,this.sphere?(e/=this.C_y,s=s/(this.C_x*(this.m+Math.cos(e))),this.m?e=Zs((this.m*e+Math.sin(e))/this.n):this.n!==1&&(e=Zs(Math.sin(e)/this.n)),s=ae(s+this.long0),e=un(e)):(e=im(i.y/this.a,this.es,this.en),n=Math.abs(e),n<te?(n=Math.sin(e),t=this.long0+i.x*Math.sqrt(1-this.es*n*n)/(this.a*Math.cos(e)),s=ae(t)):n-oe<te&&(s=this.long0)),i.x=s,i.y=e,i}var V4=["Sinusoidal","sinu"];const $4={init:k4,forward:B4,inverse:z4,names:V4};function H4(){}function G4(i){for(var e=i.x,t=i.y,s=ae(e-this.long0),n=t,r=Math.PI*Math.sin(t);;){var o=-(n+Math.sin(n)-r)/(1+Math.cos(n));if(n+=o,Math.abs(o)<oe)break}n/=2,Math.PI/2-Math.abs(t)<oe&&(s=0);var a=.900316316158*this.a*s*Math.cos(n)+this.x0,l=1.4142135623731*this.a*Math.sin(n)+this.y0;return i.x=a,i.y=l,i}function Y4(i){var e,t;i.x-=this.x0,i.y-=this.y0,t=i.y/(1.4142135623731*this.a),Math.abs(t)>.999999999999&&(t=.999999999999),e=Math.asin(t);var s=ae(this.long0+i.x/(.900316316158*this.a*Math.cos(e)));s<-Math.PI&&(s=-Math.PI),s>Math.PI&&(s=Math.PI),t=(2*e+Math.sin(2*e))/Math.PI,Math.abs(t)>1&&(t=1);var n=Math.asin(t);return i.x=s,i.y=n,i}var j4=["Mollweide","moll"];const W4={init:H4,forward:G4,inverse:Y4,names:j4};function X4(){Math.abs(this.lat1+this.lat2)<oe||(this.lat2=this.lat2||this.lat1,this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=Yl(this.es),this.e1=jl(this.es),this.e2=Wl(this.es),this.e3=Xl(this.es),this.sinphi=Math.sin(this.lat1),this.cosphi=Math.cos(this.lat1),this.ms1=Wi(this.e,this.sinphi,this.cosphi),this.ml1=Rt(this.e0,this.e1,this.e2,this.e3,this.lat1),Math.abs(this.lat1-this.lat2)<oe?this.ns=this.sinphi:(this.sinphi=Math.sin(this.lat2),this.cosphi=Math.cos(this.lat2),this.ms2=Wi(this.e,this.sinphi,this.cosphi),this.ml2=Rt(this.e0,this.e1,this.e2,this.e3,this.lat2),this.ns=(this.ms1-this.ms2)/(this.ml2-this.ml1)),this.g=this.ml1+this.ms1/this.ns,this.ml0=Rt(this.e0,this.e1,this.e2,this.e3,this.lat0),this.rh=this.a*(this.g-this.ml0))}function q4(i){var e=i.x,t=i.y,s;if(this.sphere)s=this.a*(this.g-t);else{var n=Rt(this.e0,this.e1,this.e2,this.e3,t);s=this.a*(this.g-n)}var r=this.ns*ae(e-this.long0),o=this.x0+s*Math.sin(r),a=this.y0+this.rh-s*Math.cos(r);return i.x=o,i.y=a,i}function Z4(i){i.x-=this.x0,i.y=this.rh-i.y+this.y0;var e,t,s,n;this.ns>=0?(t=Math.sqrt(i.x*i.x+i.y*i.y),e=1):(t=-Math.sqrt(i.x*i.x+i.y*i.y),e=-1);var r=0;if(t!==0&&(r=Math.atan2(e*i.x,e*i.y)),this.sphere)return n=ae(this.long0+r/this.ns),s=un(this.g-t/this.a),i.x=n,i.y=s,i;var o=this.g-t/this.a;return s=Bc(o,this.e0,this.e1,this.e2,this.e3),n=ae(this.long0+r/this.ns),i.x=n,i.y=s,i}var Q4=["Equidistant_Conic","eqdc"];const K4={init:X4,forward:q4,inverse:Z4,names:Q4};function J4(){this.R=this.a}function eU(i){var e=i.x,t=i.y,s=ae(e-this.long0),n,r;Math.abs(t)<=oe&&(n=this.x0+this.R*s,r=this.y0);var o=Zs(2*Math.abs(t/Math.PI));(Math.abs(s)<=oe||Math.abs(Math.abs(t)-te)<=oe)&&(n=this.x0,t>=0?r=this.y0+Math.PI*this.R*Math.tan(.5*o):r=this.y0+Math.PI*this.R*-Math.tan(.5*o));var a=.5*Math.abs(Math.PI/s-s/Math.PI),l=a*a,h=Math.sin(o),u=Math.cos(o),c=u/(h+u-1),d=c*c,f=c*(2/h-1),p=f*f,m=Math.PI*this.R*(a*(c-p)+Math.sqrt(l*(c-p)*(c-p)-(p+l)*(d-p)))/(p+l);s<0&&(m=-m),n=this.x0+m;var g=l+c;return m=Math.PI*this.R*(f*g-a*Math.sqrt((p+l)*(l+1)-g*g))/(p+l),t>=0?r=this.y0+m:r=this.y0-m,i.x=n,i.y=r,i}function tU(i){var e,t,s,n,r,o,a,l,h,u,c,d,f;return i.x-=this.x0,i.y-=this.y0,c=Math.PI*this.R,s=i.x/c,n=i.y/c,r=s*s+n*n,o=-Math.abs(n)*(1+r),a=o-2*n*n+s*s,l=-2*o+1+2*n*n+r*r,f=n*n/l+(2*a*a*a/l/l/l-9*o*a/l/l)/27,h=(o-a*a/3/l)/l,u=2*Math.sqrt(-h/3),c=3*f/h/u,Math.abs(c)>1&&(c>=0?c=1:c=-1),d=Math.acos(c)/3,i.y>=0?t=(-u*Math.cos(d+Math.PI/3)-a/3/l)*Math.PI:t=-(-u*Math.cos(d+Math.PI/3)-a/3/l)*Math.PI,Math.abs(s)<oe?e=this.long0:e=ae(this.long0+Math.PI*(r-1+Math.sqrt(1+2*(s*s-n*n)+r*r))/2/s),i.x=e,i.y=t,i}var iU=["Van_der_Grinten_I","VanDerGrinten","vandg"];const sU={init:J4,forward:eU,inverse:tU,names:iU};function nU(){this.sin_p12=Math.sin(this.lat0),this.cos_p12=Math.cos(this.lat0)}function rU(i){var e=i.x,t=i.y,s=Math.sin(i.y),n=Math.cos(i.y),r=ae(e-this.long0),o,a,l,h,u,c,d,f,p,m,g,E,I,v,b,C,S,_,M,A,F,D,x;return this.sphere?Math.abs(this.sin_p12-1)<=oe?(i.x=this.x0+this.a*(te-t)*Math.sin(r),i.y=this.y0-this.a*(te-t)*Math.cos(r),i):Math.abs(this.sin_p12+1)<=oe?(i.x=this.x0+this.a*(te+t)*Math.sin(r),i.y=this.y0+this.a*(te+t)*Math.cos(r),i):(_=this.sin_p12*s+this.cos_p12*n*Math.cos(r),C=Math.acos(_),S=C?C/Math.sin(C):1,i.x=this.x0+this.a*S*n*Math.sin(r),i.y=this.y0+this.a*S*(this.cos_p12*s-this.sin_p12*n*Math.cos(r)),i):(o=Yl(this.es),a=jl(this.es),l=Wl(this.es),h=Xl(this.es),Math.abs(this.sin_p12-1)<=oe?(u=this.a*Rt(o,a,l,h,te),c=this.a*Rt(o,a,l,h,t),i.x=this.x0+(u-c)*Math.sin(r),i.y=this.y0-(u-c)*Math.cos(r),i):Math.abs(this.sin_p12+1)<=oe?(u=this.a*Rt(o,a,l,h,te),c=this.a*Rt(o,a,l,h,t),i.x=this.x0+(u+c)*Math.sin(r),i.y=this.y0+(u+c)*Math.cos(r),i):(d=s/n,f=go(this.a,this.e,this.sin_p12),p=go(this.a,this.e,s),m=Math.atan((1-this.es)*d+this.es*f*this.sin_p12/(p*n)),g=Math.atan2(Math.sin(r),this.cos_p12*Math.tan(m)-this.sin_p12*Math.cos(r)),g===0?M=Math.asin(this.cos_p12*Math.sin(m)-this.sin_p12*Math.cos(m)):Math.abs(Math.abs(g)-Math.PI)<=oe?M=-Math.asin(this.cos_p12*Math.sin(m)-this.sin_p12*Math.cos(m)):M=Math.asin(Math.sin(r)*Math.cos(m)/Math.sin(g)),E=this.e*this.sin_p12/Math.sqrt(1-this.es),I=this.e*this.cos_p12*Math.cos(g)/Math.sqrt(1-this.es),v=E*I,b=I*I,A=M*M,F=A*M,D=F*M,x=D*M,C=f*M*(1-A*b*(1-b)/6+F/8*v*(1-2*b)+D/120*(b*(4-7*b)-3*E*E*(1-7*b))-x/48*v),i.x=this.x0+C*Math.sin(g),i.y=this.y0+C*Math.cos(g),i))}function oU(i){i.x-=this.x0,i.y-=this.y0;var e,t,s,n,r,o,a,l,h,u,c,d,f,p,m,g,E,I,v,b,C,S,_,M;return this.sphere?(e=Math.sqrt(i.x*i.x+i.y*i.y),e>2*te*this.a?void 0:(t=e/this.a,s=Math.sin(t),n=Math.cos(t),r=this.long0,Math.abs(e)<=oe?o=this.lat0:(o=Zs(n*this.sin_p12+i.y*s*this.cos_p12/e),a=Math.abs(this.lat0)-te,Math.abs(a)<=oe?this.lat0>=0?r=ae(this.long0+Math.atan2(i.x,-i.y)):r=ae(this.long0-Math.atan2(-i.x,i.y)):r=ae(this.long0+Math.atan2(i.x*s,e*this.cos_p12*n-i.y*this.sin_p12*s))),i.x=r,i.y=o,i)):(l=Yl(this.es),h=jl(this.es),u=Wl(this.es),c=Xl(this.es),Math.abs(this.sin_p12-1)<=oe?(d=this.a*Rt(l,h,u,c,te),e=Math.sqrt(i.x*i.x+i.y*i.y),f=d-e,o=Bc(f/this.a,l,h,u,c),r=ae(this.long0+Math.atan2(i.x,-1*i.y)),i.x=r,i.y=o,i):Math.abs(this.sin_p12+1)<=oe?(d=this.a*Rt(l,h,u,c,te),e=Math.sqrt(i.x*i.x+i.y*i.y),f=e-d,o=Bc(f/this.a,l,h,u,c),r=ae(this.long0+Math.atan2(i.x,i.y)),i.x=r,i.y=o,i):(e=Math.sqrt(i.x*i.x+i.y*i.y),g=Math.atan2(i.x,i.y),p=go(this.a,this.e,this.sin_p12),E=Math.cos(g),I=this.e*this.cos_p12*E,v=-I*I/(1-this.es),b=3*this.es*(1-v)*this.sin_p12*this.cos_p12*E/(1-this.es),C=e/p,S=C-v*(1+v)*Math.pow(C,3)/6-b*(1+3*v)*Math.pow(C,4)/24,_=1-v*S*S/2-C*S*S*S/6,m=Math.asin(this.sin_p12*Math.cos(S)+this.cos_p12*Math.sin(S)*E),r=ae(this.long0+Math.asin(Math.sin(g)*Math.sin(S)/Math.cos(m))),M=Math.sin(m),o=Math.atan2((M-this.es*_*this.sin_p12)*Math.tan(m),M*(1-this.es)),i.x=r,i.y=o,i))}var aU=["Azimuthal_Equidistant","aeqd"];const lU={init:nU,forward:rU,inverse:oU,names:aU};function hU(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0)}function cU(i){var e,t,s,n,r,o,a,l,h=i.x,u=i.y;return s=ae(h-this.long0),e=Math.sin(u),t=Math.cos(u),n=Math.cos(s),o=this.sin_p14*e+this.cos_p14*t*n,r=1,(o>0||Math.abs(o)<=oe)&&(a=this.a*r*t*Math.sin(s),l=this.y0+this.a*r*(this.cos_p14*e-this.sin_p14*t*n)),i.x=a,i.y=l,i}function uU(i){var e,t,s,n,r,o,a;return i.x-=this.x0,i.y-=this.y0,e=Math.sqrt(i.x*i.x+i.y*i.y),t=Zs(e/this.a),s=Math.sin(t),n=Math.cos(t),o=this.long0,Math.abs(e)<=oe?(a=this.lat0,i.x=o,i.y=a,i):(a=Zs(n*this.sin_p14+i.y*s*this.cos_p14/e),r=Math.abs(this.lat0)-te,Math.abs(r)<=oe?(this.lat0>=0?o=ae(this.long0+Math.atan2(i.x,-i.y)):o=ae(this.long0-Math.atan2(-i.x,i.y)),i.x=o,i.y=a,i):(o=ae(this.long0+Math.atan2(i.x*s,e*this.cos_p14*n-i.y*this.sin_p14*s)),i.x=o,i.y=a,i))}var dU=["ortho"];const fU={init:hU,forward:cU,inverse:uU,names:dU};var Ze={FRONT:1,RIGHT:2,BACK:3,LEFT:4,TOP:5,BOTTOM:6},Oe={AREA_0:1,AREA_1:2,AREA_2:3,AREA_3:4};function pU(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Quadrilateralized Spherical Cube",this.lat0>=te-Fe/2?this.face=Ze.TOP:this.lat0<=-(te-Fe/2)?this.face=Ze.BOTTOM:Math.abs(this.long0)<=Fe?this.face=Ze.FRONT:Math.abs(this.long0)<=te+Fe?this.face=this.long0>0?Ze.RIGHT:Ze.LEFT:this.face=Ze.BACK,this.es!==0&&(this.one_minus_f=1-(this.a-this.b)/this.a,this.one_minus_f_squared=this.one_minus_f*this.one_minus_f)}function mU(i){var e={x:0,y:0},t,s,n,r,o,a,l={value:0};if(i.x-=this.long0,this.es!==0?t=Math.atan(this.one_minus_f_squared*Math.tan(i.y)):t=i.y,s=i.x,this.face===Ze.TOP)r=te-t,s>=Fe&&s<=te+Fe?(l.value=Oe.AREA_0,n=s-te):s>te+Fe||s<=-(te+Fe)?(l.value=Oe.AREA_1,n=s>0?s-Et:s+Et):s>-(te+Fe)&&s<=-Fe?(l.value=Oe.AREA_2,n=s+te):(l.value=Oe.AREA_3,n=s);else if(this.face===Ze.BOTTOM)r=te+t,s>=Fe&&s<=te+Fe?(l.value=Oe.AREA_0,n=-s+te):s<Fe&&s>=-Fe?(l.value=Oe.AREA_1,n=-s):s<-Fe&&s>=-(te+Fe)?(l.value=Oe.AREA_2,n=-s-te):(l.value=Oe.AREA_3,n=s>0?-s+Et:-s-Et);else{var h,u,c,d,f,p,m;this.face===Ze.RIGHT?s=$r(s,+te):this.face===Ze.BACK?s=$r(s,3.14159265359):this.face===Ze.LEFT&&(s=$r(s,-te)),d=Math.sin(t),f=Math.cos(t),p=Math.sin(s),m=Math.cos(s),h=f*m,u=f*p,c=d,this.face===Ze.FRONT?(r=Math.acos(h),n=kh(r,c,u,l)):this.face===Ze.RIGHT?(r=Math.acos(u),n=kh(r,c,-h,l)):this.face===Ze.BACK?(r=Math.acos(-h),n=kh(r,c,-u,l)):this.face===Ze.LEFT?(r=Math.acos(-u),n=kh(r,c,h,l)):(r=n=0,l.value=Oe.AREA_0)}return a=Math.atan(12/Et*(n+Math.acos(Math.sin(n)*Math.cos(Fe))-te)),o=Math.sqrt((1-Math.cos(r))/(Math.cos(a)*Math.cos(a))/(1-Math.cos(Math.atan(1/Math.cos(n))))),l.value===Oe.AREA_1?a+=te:l.value===Oe.AREA_2?a+=Et:l.value===Oe.AREA_3&&(a+=1.5*Et),e.x=o*Math.cos(a),e.y=o*Math.sin(a),e.x=e.x*this.a+this.x0,e.y=e.y*this.a+this.y0,i.x=e.x,i.y=e.y,i}function gU(i){var e={lam:0,phi:0},t,s,n,r,o,a,l,h,u,c={value:0};if(i.x=(i.x-this.x0)/this.a,i.y=(i.y-this.y0)/this.a,s=Math.atan(Math.sqrt(i.x*i.x+i.y*i.y)),t=Math.atan2(i.y,i.x),i.x>=0&&i.x>=Math.abs(i.y)?c.value=Oe.AREA_0:i.y>=0&&i.y>=Math.abs(i.x)?(c.value=Oe.AREA_1,t-=te):i.x<0&&-i.x>=Math.abs(i.y)?(c.value=Oe.AREA_2,t=t<0?t+Et:t-Et):(c.value=Oe.AREA_3,t+=te),u=Et/12*Math.tan(t),o=Math.sin(u)/(Math.cos(u)-1/Math.sqrt(2)),a=Math.atan(o),n=Math.cos(t),r=Math.tan(s),l=1-n*n*r*r*(1-Math.cos(Math.atan(1/Math.cos(a)))),l<-1?l=-1:l>1&&(l=1),this.face===Ze.TOP)h=Math.acos(l),e.phi=te-h,c.value===Oe.AREA_0?e.lam=a+te:c.value===Oe.AREA_1?e.lam=a<0?a+Et:a-Et:c.value===Oe.AREA_2?e.lam=a-te:e.lam=a;else if(this.face===Ze.BOTTOM)h=Math.acos(l),e.phi=h-te,c.value===Oe.AREA_0?e.lam=-a+te:c.value===Oe.AREA_1?e.lam=-a:c.value===Oe.AREA_2?e.lam=-a-te:e.lam=a<0?-a-Et:-a+Et;else{var d,f,p;d=l,u=d*d,u>=1?p=0:p=Math.sqrt(1-u)*Math.sin(a),u+=p*p,u>=1?f=0:f=Math.sqrt(1-u),c.value===Oe.AREA_1?(u=f,f=-p,p=u):c.value===Oe.AREA_2?(f=-f,p=-p):c.value===Oe.AREA_3&&(u=f,f=p,p=-u),this.face===Ze.RIGHT?(u=d,d=-f,f=u):this.face===Ze.BACK?(d=-d,f=-f):this.face===Ze.LEFT&&(u=d,d=f,f=-u),e.phi=Math.acos(-p)-te,e.lam=Math.atan2(f,d),this.face===Ze.RIGHT?e.lam=$r(e.lam,-te):this.face===Ze.BACK?e.lam=$r(e.lam,-3.14159265359):this.face===Ze.LEFT&&(e.lam=$r(e.lam,+te))}if(this.es!==0){var m,g,E;m=e.phi<0?1:0,g=Math.tan(e.phi),E=this.b/Math.sqrt(g*g+this.one_minus_f_squared),e.phi=Math.atan(Math.sqrt(this.a*this.a-E*E)/(this.one_minus_f*E)),m&&(e.phi=-e.phi)}return e.lam+=this.long0,i.x=e.lam,i.y=e.phi,i}function kh(i,e,t,s){var n;return i<oe?(s.value=Oe.AREA_0,n=0):(n=Math.atan2(e,t),Math.abs(n)<=Fe?s.value=Oe.AREA_0:n>Fe&&n<=te+Fe?(s.value=Oe.AREA_1,n-=te):n>te+Fe||n<=-(te+Fe)?(s.value=Oe.AREA_2,n=n>=0?n-Et:n+Et):(s.value=Oe.AREA_3,n+=te)),n}function $r(i,e){var t=i+e;return t<-3.14159265359?t+=cl:t>3.14159265359&&(t-=cl),t}var EU=["Quadrilateralized Spherical Cube","Quadrilateralized_Spherical_Cube","qsc"];const IU={init:pU,forward:mU,inverse:gU,names:EU};var Uf=[[1,22199e-21,-715515e-10,31103e-10],[.9986,-482243e-9,-24897e-9,-13309e-10],[.9954,-83103e-8,-448605e-10,-986701e-12],[.99,-.00135364,-59661e-9,36777e-10],[.9822,-.00167442,-449547e-11,-572411e-11],[.973,-.00214868,-903571e-10,18736e-12],[.96,-.00305085,-900761e-10,164917e-11],[.9427,-.00382792,-653386e-10,-26154e-10],[.9216,-.00467746,-10457e-8,481243e-11],[.8962,-.00536223,-323831e-10,-543432e-11],[.8679,-.00609363,-113898e-9,332484e-11],[.835,-.00698325,-640253e-10,934959e-12],[.7986,-.00755338,-500009e-10,935324e-12],[.7597,-.00798324,-35971e-9,-227626e-11],[.7186,-.00851367,-701149e-10,-86303e-10],[.6732,-.00986209,-199569e-9,191974e-10],[.6213,-.010418,883923e-10,624051e-11],[.5722,-.00906601,182e-6,624051e-11],[.5322,-.00677797,275608e-9,624051e-11]],va=[[-520417e-23,.0124,121431e-23,-845284e-16],[.062,.0124,-126793e-14,422642e-15],[.124,.0124,507171e-14,-160604e-14],[.186,.0123999,-190189e-13,600152e-14],[.248,.0124002,710039e-13,-224e-10],[.31,.0123992,-264997e-12,835986e-13],[.372,.0124029,988983e-12,-311994e-12],[.434,.0123893,-369093e-11,-435621e-12],[.4958,.0123198,-102252e-10,-345523e-12],[.5571,.0121916,-154081e-10,-582288e-12],[.6176,.0119938,-241424e-10,-525327e-12],[.6769,.011713,-320223e-10,-516405e-12],[.7346,.0113541,-397684e-10,-609052e-12],[.7903,.0109107,-489042e-10,-104739e-11],[.8435,.0103431,-64615e-9,-140374e-14],[.8936,.00969686,-64636e-9,-8547e-9],[.9394,.00840947,-192841e-9,-42106e-10],[.9761,.00616527,-256e-6,-42106e-10],[1,.00328947,-319159e-9,-42106e-10]],x1=.8487,R1=1.3523,_1=Bi/5,bU=1/_1,Lr=18,zc=function(i,e){return i[0]+e*(i[1]+e*(i[2]+e*i[3]))},vU=function(i,e){return i[1]+e*(2*i[2]+e*3*i[3])};function yU(i,e,t,s){for(var n=e;s;--s){var r=i(n);if(n-=r,Math.abs(r)<t)break}return n}function CU(){this.x0=this.x0||0,this.y0=this.y0||0,this.long0=this.long0||0,this.es=0,this.title=this.title||"Robinson"}function TU(i){var e=ae(i.x-this.long0),t=Math.abs(i.y),s=Math.floor(t*_1);s<0?s=0:s>=Lr&&(s=Lr-1),t=Bi*(t-bU*s);var n={x:zc(Uf[s],t)*e,y:zc(va[s],t)};return i.y<0&&(n.y=-n.y),n.x=n.x*this.a*x1+this.x0,n.y=n.y*this.a*R1+this.y0,n}function wU(i){var e={x:(i.x-this.x0)/(this.a*x1),y:Math.abs(i.y-this.y0)/(this.a*R1)};if(e.y>=1)e.x/=Uf[Lr][0],e.y=i.y<0?-te:te;else{var t=Math.floor(e.y*Lr);for(t<0?t=0:t>=Lr&&(t=Lr-1);;)if(va[t][0]>e.y)--t;else if(va[t+1][0]<=e.y)++t;else break;var s=va[t],n=5*(e.y-s[0])/(va[t+1][0]-s[0]);n=yU(function(r){return(zc(s,r)-e.y)/vU(s,r)},n,oe,100),e.x/=zc(Uf[t],n),e.y=(5*t+n)*gt,i.y<0&&(e.y=-e.y)}return e.x=ae(e.x+this.long0),e}var SU=["Robinson","robin"];const xU={init:CU,forward:TU,inverse:wU,names:SU};function RU(){this.name="geocent"}function _U(i){var e=m1(i,this.es,this.a);return e}function AU(i){var e=g1(i,this.es,this.a,this.b);return e}var MU=["Geocentric","geocentric","geocent","Geocent"];const FU={init:RU,forward:_U,inverse:AU,names:MU};var vt={N_POLE:0,S_POLE:1,EQUIT:2,OBLIQ:3},pa={h:{def:1e5,num:!0},azi:{def:0,num:!0,degrees:!0},tilt:{def:0,num:!0,degrees:!0},long0:{def:0,num:!0},lat0:{def:0,num:!0}};function OU(){if(Object.keys(pa).forEach((function(t){if(typeof this[t]>"u")this[t]=pa[t].def;else{if(pa[t].num&&isNaN(this[t]))throw new Error("Invalid parameter value, must be numeric "+t+" = "+this[t]);pa[t].num&&(this[t]=parseFloat(this[t]))}pa[t].degrees&&(this[t]=this[t]*gt)}).bind(this)),Math.abs(Math.abs(this.lat0)-te)<oe?this.mode=this.lat0<0?vt.S_POLE:vt.N_POLE:Math.abs(this.lat0)<oe?this.mode=vt.EQUIT:(this.mode=vt.OBLIQ,this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0)),this.pn1=this.h/this.a,this.pn1<=0||this.pn1>1e10)throw new Error("Invalid height");this.p=1+this.pn1,this.rp=1/this.p,this.h1=1/this.pn1,this.pfact=(this.p+1)*this.h1,this.es=0;var i=this.tilt,e=this.azi;this.cg=Math.cos(e),this.sg=Math.sin(e),this.cw=Math.cos(i),this.sw=Math.sin(i)}function NU(i){i.x-=this.long0;var e=Math.sin(i.y),t=Math.cos(i.y),s=Math.cos(i.x),n,r;switch(this.mode){case vt.OBLIQ:r=this.sinph0*e+this.cosph0*t*s;break;case vt.EQUIT:r=t*s;break;case vt.S_POLE:r=-e;break;case vt.N_POLE:r=e;break}switch(r=this.pn1/(this.p-r),n=r*t*Math.sin(i.x),this.mode){case vt.OBLIQ:r*=this.cosph0*e-this.sinph0*t*s;break;case vt.EQUIT:r*=e;break;case vt.N_POLE:r*=-(t*s);break;case vt.S_POLE:r*=t*s;break}var o,a;return o=r*this.cg+n*this.sg,a=1/(o*this.sw*this.h1+this.cw),n=(n*this.cg-r*this.sg)*this.cw*a,r=o*a,i.x=n*this.a,i.y=r*this.a,i}function PU(i){i.x/=this.a,i.y/=this.a;var e={x:i.x,y:i.y},t,s,n;n=1/(this.pn1-i.y*this.sw),t=this.pn1*i.x*n,s=this.pn1*i.y*this.cw*n,i.x=t*this.cg+s*this.sg,i.y=s*this.cg-t*this.sg;var r=Ot(i.x,i.y);if(Math.abs(r)<oe)e.x=0,e.y=i.y;else{var o,a;switch(a=1-r*r*this.pfact,a=(this.p-Math.sqrt(a))/(this.pn1/r+r/this.pn1),o=Math.sqrt(1-a*a),this.mode){case vt.OBLIQ:e.y=Math.asin(o*this.sinph0+i.y*a*this.cosph0/r),i.y=(o-this.sinph0*Math.sin(e.y))*r,i.x*=a*this.cosph0;break;case vt.EQUIT:e.y=Math.asin(i.y*a/r),i.y=o*r,i.x*=a;break;case vt.N_POLE:e.y=Math.asin(o),i.y=-i.y;break;case vt.S_POLE:e.y=-Math.asin(o);break}e.x=Math.atan2(i.x,i.y)}return i.x=e.x+this.long0,i.y=e.y,i}var LU=["Tilted_Perspective","tpers"];const DU={init:OU,forward:NU,inverse:PU,names:LU};function UU(){if(this.flip_axis=this.sweep==="x"?1:0,this.h=Number(this.h),this.radius_g_1=this.h/this.a,this.radius_g_1<=0||this.radius_g_1>1e10)throw new Error;if(this.radius_g=1+this.radius_g_1,this.C=this.radius_g*this.radius_g-1,this.es!==0){var i=1-this.es,e=1/i;this.radius_p=Math.sqrt(i),this.radius_p2=i,this.radius_p_inv2=e,this.shape="ellipse"}else this.radius_p=1,this.radius_p2=1,this.radius_p_inv2=1,this.shape="sphere";this.title||(this.title="Geostationary Satellite View")}function kU(i){var e=i.x,t=i.y,s,n,r,o;if(e=e-this.long0,this.shape==="ellipse"){t=Math.atan(this.radius_p2*Math.tan(t));var a=this.radius_p/Ot(this.radius_p*Math.cos(t),Math.sin(t));if(n=a*Math.cos(e)*Math.cos(t),r=a*Math.sin(e)*Math.cos(t),o=a*Math.sin(t),(this.radius_g-n)*n-r*r-o*o*this.radius_p_inv2<0)return i.x=Number.NaN,i.y=Number.NaN,i;s=this.radius_g-n,this.flip_axis?(i.x=this.radius_g_1*Math.atan(r/Ot(o,s)),i.y=this.radius_g_1*Math.atan(o/s)):(i.x=this.radius_g_1*Math.atan(r/s),i.y=this.radius_g_1*Math.atan(o/Ot(r,s)))}else this.shape==="sphere"&&(s=Math.cos(t),n=Math.cos(e)*s,r=Math.sin(e)*s,o=Math.sin(t),s=this.radius_g-n,this.flip_axis?(i.x=this.radius_g_1*Math.atan(r/Ot(o,s)),i.y=this.radius_g_1*Math.atan(o/s)):(i.x=this.radius_g_1*Math.atan(r/s),i.y=this.radius_g_1*Math.atan(o/Ot(r,s))));return i.x=i.x*this.a,i.y=i.y*this.a,i}function BU(i){var e=-1,t=0,s=0,n,r,o,a;if(i.x=i.x/this.a,i.y=i.y/this.a,this.shape==="ellipse"){this.flip_axis?(s=Math.tan(i.y/this.radius_g_1),t=Math.tan(i.x/this.radius_g_1)*Ot(1,s)):(t=Math.tan(i.x/this.radius_g_1),s=Math.tan(i.y/this.radius_g_1)*Ot(1,t));var l=s/this.radius_p;if(n=t*t+l*l+e*e,r=2*this.radius_g*e,o=r*r-4*n*this.C,o<0)return i.x=Number.NaN,i.y=Number.NaN,i;a=(-r-Math.sqrt(o))/(2*n),e=this.radius_g+a*e,t*=a,s*=a,i.x=Math.atan2(t,e),i.y=Math.atan(s*Math.cos(i.x)/e),i.y=Math.atan(this.radius_p_inv2*Math.tan(i.y))}else if(this.shape==="sphere"){if(this.flip_axis?(s=Math.tan(i.y/this.radius_g_1),t=Math.tan(i.x/this.radius_g_1)*Math.sqrt(1+s*s)):(t=Math.tan(i.x/this.radius_g_1),s=Math.tan(i.y/this.radius_g_1)*Math.sqrt(1+t*t)),n=t*t+s*s+e*e,r=2*this.radius_g*e,o=r*r-4*n*this.C,o<0)return i.x=Number.NaN,i.y=Number.NaN,i;a=(-r-Math.sqrt(o))/(2*n),e=this.radius_g+a*e,t*=a,s*=a,i.x=Math.atan2(t,e),i.y=Math.atan(s*Math.cos(i.x)/e)}return i.x=i.x+this.long0,i}var zU=["Geostationary Satellite View","Geostationary_Satellite","geos"];const VU={init:UU,forward:kU,inverse:BU,names:zU};var La=1.340264,Da=-.081106,Ua=893e-6,ka=.003796,Vc=Math.sqrt(3)/2;function $U(){this.es=0,this.long0=this.long0!==void 0?this.long0:0}function HU(i){var e=ae(i.x-this.long0),t=i.y,s=Math.asin(Vc*Math.sin(t)),n=s*s,r=n*n*n;return i.x=e*Math.cos(s)/(Vc*(La+3*Da*n+r*(7*Ua+9*ka*n))),i.y=s*(La+Da*n+r*(Ua+ka*n)),i.x=this.a*i.x+this.x0,i.y=this.a*i.y+this.y0,i}function GU(i){i.x=(i.x-this.x0)/this.a,i.y=(i.y-this.y0)/this.a;var e=1e-9,t=12,s=i.y,n,r,o,a,l,h;for(h=0;h<t&&(n=s*s,r=n*n*n,o=s*(La+Da*n+r*(Ua+ka*n))-i.y,a=La+3*Da*n+r*(7*Ua+9*ka*n),s-=l=o/a,!(Math.abs(l)<e));++h);return n=s*s,r=n*n*n,i.x=Vc*i.x*(La+3*Da*n+r*(7*Ua+9*ka*n))/Math.cos(s),i.y=Math.asin(Math.sin(s)/Vc),i.x=ae(i.x+this.long0),i}var YU=["eqearth","Equal Earth","Equal_Earth"];const jU={init:$U,forward:HU,inverse:GU,names:YU};var fl=1e-10;function WU(){var i;if(this.phi1=this.lat1,Math.abs(this.phi1)<fl)throw new Error;this.es?(this.en=tm(this.es),this.m1=Bo(this.phi1,this.am1=Math.sin(this.phi1),i=Math.cos(this.phi1),this.en),this.am1=i/(Math.sqrt(1-this.es*this.am1*this.am1)*this.am1),this.inverse=qU,this.forward=XU):(Math.abs(this.phi1)+fl>=te?this.cphi1=0:this.cphi1=1/Math.tan(this.phi1),this.inverse=QU,this.forward=ZU)}function XU(i){var e=ae(i.x-(this.long0||0)),t=i.y,s,n,r;return s=this.am1+this.m1-Bo(t,n=Math.sin(t),r=Math.cos(t),this.en),n=r*e/(s*Math.sqrt(1-this.es*n*n)),i.x=s*Math.sin(n),i.y=this.am1-s*Math.cos(n),i.x=this.a*i.x+(this.x0||0),i.y=this.a*i.y+(this.y0||0),i}function qU(i){i.x=(i.x-(this.x0||0))/this.a,i.y=(i.y-(this.y0||0))/this.a;var e,t,s,n;if(t=Ot(i.x,i.y=this.am1-i.y),n=im(this.am1+this.m1-t,this.es,this.en),(e=Math.abs(n))<te)e=Math.sin(n),s=t*Math.atan2(i.x,i.y)*Math.sqrt(1-this.es*e*e)/Math.cos(n);else if(Math.abs(e-te)<=fl)s=0;else throw new Error;return i.x=ae(s+(this.long0||0)),i.y=un(n),i}function ZU(i){var e=ae(i.x-(this.long0||0)),t=i.y,s,n;return n=this.cphi1+this.phi1-t,Math.abs(n)>fl?(i.x=n*Math.sin(s=e*Math.cos(t)/n),i.y=this.cphi1-n*Math.cos(s)):i.x=i.y=0,i.x=this.a*i.x+(this.x0||0),i.y=this.a*i.y+(this.y0||0),i}function QU(i){i.x=(i.x-(this.x0||0))/this.a,i.y=(i.y-(this.y0||0))/this.a;var e,t,s=Ot(i.x,i.y=this.cphi1-i.y);if(t=this.cphi1+this.phi1-s,Math.abs(t)>te)throw new Error;return Math.abs(Math.abs(t)-te)<=fl?e=0:e=s*Math.atan2(i.x,i.y)/Math.cos(t),i.x=ae(e+(this.long0||0)),i.y=un(t),i}var KU=["bonne","Bonne (Werner lat_1=90)"];const JU={init:WU,names:KU};function e6(i){i.Proj.projections.add(ic),i.Proj.projections.add(sc),i.Proj.projections.add(XD),i.Proj.projections.add(n5),i.Proj.projections.add(c5),i.Proj.projections.add(m5),i.Proj.projections.add(y5),i.Proj.projections.add(x5),i.Proj.projections.add(F5),i.Proj.projections.add(D5),i.Proj.projections.add(J5),i.Proj.projections.add(r4),i.Proj.projections.add(c4),i.Proj.projections.add(g4),i.Proj.projections.add(y4),i.Proj.projections.add(x4),i.Proj.projections.add(F4),i.Proj.projections.add(D4),i.Proj.projections.add($4),i.Proj.projections.add(W4),i.Proj.projections.add(K4),i.Proj.projections.add(sU),i.Proj.projections.add(lU),i.Proj.projections.add(fU),i.Proj.projections.add(IU),i.Proj.projections.add(xU),i.Proj.projections.add(FU),i.Proj.projections.add(DU),i.Proj.projections.add(VU),i.Proj.projections.add(jU),i.Proj.projections.add(JU)}ci.defaultDatum="WGS84";ci.Proj=Vi;ci.WGS84=new ci.Proj("WGS84");ci.Point=mo;ci.toPoint=E1;ci.defs=St;ci.nadgrid=Z3;ci.transform=kc;ci.mgrs=dD;ci.version="__VERSION__";e6(ci);function A1(){const i=document.getElementById("coordX").value,e=document.getElementById("coordY").value,t=document.getElementById("coordZ").value;return[document.getElementById("chk1").checked,i,e,t]}let yr=null,yn=null,yd=0,TE=null,Ji=null;async function t6(){const i=new $E;i.init(),i.get(bs);const e=i.get(tp);await e.setup();const t=[];for(const g of t)e.settings.excludedCategories.add(g);e.settings.webIfc.COORDINATE_TO_ORIGIN=!0;async function s(g,E,I){const b=await(await fetch("https://manchadoc.github.io/bimxr/assets/dpto.ifc")).arrayBuffer(),C=new Uint8Array(b);Ji=await e.load(C),Ji.name="example",o.add(Ji);const S=new Ut.Vector3;S.setFromMatrixPosition(g);const _=Ji.coordinationMatrix.clone();_.invert();const M=new Ut.Vector3(E.x,E.y,E.z).applyMatrix4(_);M.z*=-1;const A=M.sub(S);Ji.position.set(A.x,-E.y,-A.z);const F=Ji.getLocalProperties();console.log(F)}const n=document.createElement("canvas");document.body.appendChild(n);const r=n.getContext("webgl",{xrCompatible:!0}),o=new Ut.Scene,a=new Ut.DirectionalLight(16777215,.5);a.position.set(10,15,10);const l=new Ut.AmbientLight(16777215,.3);o.add(l),o.add(a);const h=new NT;let u;h.load("https://immersive-web.github.io/webxr-samples/media/gltf/reticle/reticle.gltf",function(g){u=g.scene,u.visible=!1,o.add(u)});const c=new Ut.WebGLRenderer({alpha:!0,preserveDrawingBuffer:!0,canvas:n,context:r});c.autoClear=!1;const d=window.innerWidth,f=window.innerHeight,p=d/f,m=new Ut.PerspectiveCamera(50,p,.1,1e3);if(m.matrixAutoUpdate=!1,navigator.xr){const g=await navigator.xr.requestSession("immersive-ar",{requiredFeatures:["local-floor","hit-test"]});g.updateRenderState({baseLayer:new XRWebGLLayer(g,r)});const E=document.getElementById("overlayText");E.textContent="Seleccione el origen de ubicación del modelo";const I=await g.requestReferenceSpace("local-floor"),v=await g.requestReferenceSpace("viewer"),b=await g.requestHitTestSource({space:v}),C=_=>{if(yd+=1,yd==1)TE=yr.transform.position,yn.transform.orientation,E.textContent="Seleccione la dirección del eje X";else if(yd==2){const M=A1();let A,F=new Ut.Matrix4().makeTranslation(0,0,0);M[0]?F.makeTranslation(parseFloat(M[1]),parseFloat(M[3]),parseFloat(M[2])):getCurrentUTM(y=>{A=y,F.makeTranslation(A[0],M[3],A[1])}),yn.transform.orientation;let D=yn.transform.orientation,x=new Ut.Euler().setFromQuaternion(new Ut.Quaternion(D.x,D.y,D.z,D.w)),N=new Ut.Euler(0,x.y,0);new Ut.Quaternion().setFromEuler(N),s(F,TE)}};g.addEventListener("select",C);const S=(_,M)=>{if(g.requestAnimationFrame(S),r.bindFramebuffer(r.FRAMEBUFFER,g.renderState.baseLayer.framebuffer),yr=M.getViewerPose(I),yr){for(let A of yr.views){const F=yr.views[0],D=g.renderState.baseLayer.getViewport(F);c.setSize(D.width,D.height),m.matrix.fromArray(F.transform.matrix),m.projectionMatrix.fromArray(F.projectionMatrix),m.updateMatrixWorld(!0);const x=M.getHitTestResults(b);if(x.length>0&&u&&(yn=x[0].getPose(I),u.visible=!0,u.position.set(yn.transform.position.x,yn.transform.position.y,yn.transform.position.z),u.updateMatrixWorld(!0)),Ji){const N=yr.views[0].transform.position,y=Ji.position,U=Ji.coordinationMatrix.clone();U.invert();const B=new Ut.Vector3(N.x-y.x,N.y,N.z-y.z).applyMatrix4(U);B.z*=-1,E.textContent=N.x+", "+N.y+", "+N.z+" ||| "+B.x.toFixed(2)+" | "+B.z.toFixed(2)}}c.render(o,m)}};g.requestAnimationFrame(S)}}let pl,Ba,Ui,ml=null,Rr=null,Bh=null,M1=null,wE=null;async function i6(){const i=document.getElementById("container");Ba=new Ks,pl=new Sn(70,window.innerWidth/window.innerHeight,.01,20);const e=new FT(16777215,12303359,1);e.position.set(.5,1,.25),Ba.add(e),Ui=new za({antialias:!0,alpha:!0}),Ui.setPixelRatio(window.devicePixelRatio),Ui.setSize(window.innerWidth,window.innerHeight),Ui.xr.enabled=!0,i.appendChild(Ui.domElement),ml===null?navigator.xr.requestSession("immersive-ar",{requiredFeatures:["local-floor","hit-test"]}).then(Cd):(ml.end(),navigator.xr.offerSession!==void 0&&navigator.xr.offerSession("immersive-ar",{requiredFeatures:["local-floor","hit-test"]}).then(Cd).catch(s=>{console.warn(s)})),navigator.xr.offerSession!==void 0&&navigator.xr.offerSession("immersive-ar",{requiredFeatures:["local-floor","hit-test"]}).then(Cd).catch(s=>{console.warn(s)}),window.addEventListener("resize",s6),document.getElementById("slider").addEventListener("input",s=>{Rr.traverse(n=>{if(n.isMesh){const r=n.material;r[0].transparent=!0,r[0].opacity=parseFloat(s.target.value)}}),Ui.render(Ba,pl)})}function s6(){pl.aspect=window.innerWidth/window.innerHeight,pl.updateProjectionMatrix(),Ui.setSize(window.innerWidth,window.innerHeight)}function F1(i,e){Bh=e.getViewerPose(M1);const t=e.session;wE===null&&Bh&&(wE={position:Bh.transform.position,orientation:Bh.transform.orientation}),Ui.render(Ba,pl),t.requestAnimationFrame(F1)}async function Cd(i){i.addEventListener("end",O1),Ui.xr.setReferenceSpaceType("local-floor"),await Ui.xr.setSession(i),ml=i,M1=await i.requestReferenceSpace("local-floor"),await n6(),i.requestAnimationFrame(F1)}function O1(){ml.removeEventListener("end",O1),ml=null}async function n6(){const i=new $E;i.init(),i.get(bs);const e=i.get(tp);await e.setup();const t=[];for(const p of t)e.settings.excludedCategories.add(p);e.settings.webIfc.COORDINATE_TO_ORIGIN=!0;const n=await(await fetch("https://manchadoc.github.io/bimxr/assets/dpto.ifc")).arrayBuffer(),r=new Uint8Array(n),o=await e.load(r);o.name="example",Rr=o,Rr.traverse(p=>{if(p.isMesh){const m=p.material;m[0].transparent=!0,m[0].opacity=parseFloat(.7)}});const a=A1();let l,h=new ce().makeTranslation(0,0,0);a[0]?h.makeTranslation(parseFloat(a[1]),parseFloat(a[3]),parseFloat(a[2])):getCurrentUTM(p=>{l=p,h.makeTranslation(l[0],a[3],l[1])});const u=new P;new P(0,1.7,0),u.setFromMatrixPosition(h);const c=Rr.coordinationMatrix.clone();c.invert();const d=new P(0,0,0).applyMatrix4(c);d.z*=-1;const f=d.sub(u);console.log(f),Rr.position.set(f.x,f.y,-f.z),console.log(Rr.position),Ba.add(o),o.getLocalProperties()}document.getElementById("fetchButton").addEventListener("click",()=>{overlayText.style.display="block",overlay.style.display="block",t6()});document.getElementById("basicAR").addEventListener("click",()=>{overlayText.style.display="block",overlay.style.display="block",i6()});document.getElementById("basicVR").addEventListener("click",()=>{OT()})});export default r6();
